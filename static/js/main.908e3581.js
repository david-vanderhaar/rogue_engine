/*! For license information please see main.908e3581.js.LICENSE.txt */
(()=>{var t={21:(t,e,r)=>{var a=r(8347),n=r(1229),o=r(5987),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!a(t))return o(t);var e=n(t),r=[];for(var s in t)("constructor"!=s||!e&&i.call(t,s))&&r.push(s);return r}},35:(t,e,r)=>{var a=r(7922),n=r(9795);function o(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}o.prototype=a(n.prototype),o.prototype.constructor=o,t.exports=o},115:(t,e,r)=>{var a=r(2856)(r(8731),"Set");t.exports=a},121:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(8498),n=r(2261),o=r(3069),i=r(4222),s=r(4695),c=r(7488),l=r(1874),u=r(9338),h=r(9423),d=r(4528),p=r(1939),f=r(2498),g=r(1890),y=r(9685);e.Konva=n.Util._assign(a.Konva,{Collection:n.Collection,Util:n.Util,Transform:n.Transform,Node:o.Node,ids:o.ids,names:o.names,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:c.Layer,FastLayer:l.FastLayer,Group:u.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:p.Animation,Tween:f.Tween,Easings:f.Easings,Context:g.Context,Canvas:y.Canvas})},227:(t,e,r)=>{var a=r(2091);t.exports=function(t,e){var r=e?a(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},339:(t,e,r)=>{var a=r(7257);t.exports=function(t){return a(this,t).get(t)}},350:t=>{"use strict";t.exports=JSON.parse('{"cols":28,"rows":14,"tiles":{"0,0":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,1":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,2":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,3":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,6":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,7":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,8":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,9":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"0,10":{"type":1,"character":"sw","color":"#fff","data":{"type":"WALL_CORNER_SW"}},"0,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"0,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"0,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"1,0":{"type":1,"character":"+","color":"#fff","data":{"type":"SAFE"}},"1,1":{"type":1,"character":"+","color":"#fff","data":{"type":"SAFE"}},"1,2":{"type":0,"character":"","color":"white","data":null},"1,3":{"type":0,"character":"","color":"white","data":null},"1,4":{"type":0,"character":"","color":"white","data":null},"1,5":{"type":0,"character":"","color":"white","data":null},"1,6":{"type":0,"character":"","color":"white","data":null},"1,7":{"type":0,"character":"","color":"white","data":null},"1,8":{"type":0,"character":"","color":"white","data":null},"1,9":{"type":0,"character":"","color":"white","data":null},"1,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"1,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"1,12":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"1,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"2,0":{"type":1,"character":"+","color":"#fff","data":{"type":"SAFE"}},"2,1":{"type":1,"character":"+","color":"#fff","data":{"type":"SAFE"}},"2,2":{"type":0,"character":"","color":"white","data":null},"2,3":{"type":0,"character":"","color":"white","data":null},"2,4":{"type":0,"character":"","color":"white","data":null},"2,5":{"type":0,"character":"","color":"white","data":null},"2,6":{"type":0,"character":"","color":"white","data":null},"2,7":{"type":0,"character":"","color":"white","data":null},"2,8":{"type":0,"character":"","color":"white","data":null},"2,9":{"type":0,"character":"","color":"white","data":null},"2,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"2,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"2,12":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"2,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"3,0":{"type":1,"character":"+","color":"#fff","data":{"type":"SAFE"}},"3,1":{"type":1,"character":"+","color":"#fff","data":{"type":"SAFE"}},"3,2":{"type":0,"character":"","color":"white","data":null},"3,3":{"type":0,"character":"","color":"white","data":null},"3,4":{"type":0,"character":"","color":"white","data":null},"3,5":{"type":0,"character":"","color":"white","data":null},"3,6":{"type":0,"character":"","color":"white","data":null},"3,7":{"type":0,"character":"","color":"white","data":null},"3,8":{"type":0,"character":"","color":"white","data":null},"3,9":{"type":0,"character":"","color":"white","data":null},"3,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"3,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"3,12":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"3,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"4,0":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,1":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,2":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,3":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,6":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"4,7":{"type":0,"character":"","color":"white","data":null},"4,8":{"type":0,"character":"","color":"white","data":null},"4,9":{"type":0,"character":"","color":"white","data":null},"4,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"4,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"4,12":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"4,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"5,0":{"type":0,"character":"","color":"white","data":null},"5,1":{"type":0,"character":"","color":"white","data":null},"5,2":{"type":0,"character":"","color":"white","data":null},"5,3":{"type":0,"character":"","color":"white","data":null},"5,4":{"type":0,"character":"","color":"white","data":null},"5,5":{"type":0,"character":"","color":"white","data":null},"5,6":{"type":0,"character":"","color":"white","data":null},"5,7":{"type":0,"character":"","color":"white","data":null},"5,8":{"type":0,"character":"","color":"white","data":null},"5,9":{"type":0,"character":"","color":"white","data":null},"5,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"5,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"5,12":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"5,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"6,0":{"type":0,"character":"","color":"white","data":null},"6,1":{"type":0,"character":"","color":"white","data":null},"6,2":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"6,3":{"type":0,"character":"","color":"white","data":null},"6,4":{"type":0,"character":"","color":"white","data":null},"6,5":{"type":0,"character":"","color":"white","data":null},"6,6":{"type":0,"character":"","color":"white","data":null},"6,7":{"type":0,"character":"","color":"white","data":null},"6,8":{"type":0,"character":"","color":"white","data":null},"6,9":{"type":0,"character":"","color":"white","data":null},"6,10":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"6,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"6,12":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"6,13":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"7,0":{"type":0,"character":"","color":"white","data":null},"7,1":{"type":0,"character":"","color":"white","data":null},"7,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"7,3":{"type":0,"character":"","color":"white","data":null},"7,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"7,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"7,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"7,7":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"7,8":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"7,9":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"7,10":{"type":1,"character":"ne","color":"#fff","data":{"type":"WALL_CORNER_NE"}},"7,11":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"7,12":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"7,13":{"type":1,"character":"sw","color":"#fff","data":{"type":"WALL_CORNER_SW"}},"8,0":{"type":0,"character":"","color":"white","data":null},"8,1":{"type":0,"character":"","color":"white","data":null},"8,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"8,3":{"type":0,"character":"","color":"white","data":null},"8,4":{"type":0,"character":"","color":"white","data":null},"8,5":{"type":0,"character":"","color":"white","data":null},"8,6":{"type":0,"character":"","color":"white","data":null},"8,7":{"type":0,"character":"","color":"white","data":null},"8,8":{"type":0,"character":"","color":"white","data":null},"8,9":{"type":0,"character":"","color":"white","data":null},"8,10":{"type":0,"character":"","color":"white","data":null},"8,11":{"type":0,"character":"","color":"white","data":null},"8,12":{"type":0,"character":"","color":"white","data":null},"8,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"9,0":{"type":0,"character":"","color":"white","data":null},"9,1":{"type":0,"character":"","color":"white","data":null},"9,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"9,3":{"type":0,"character":"","color":"white","data":null},"9,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"9,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"9,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"9,7":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"9,8":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"9,9":{"type":1,"character":"nw","color":"#fff","data":{"type":"WALL_CORNER_NW"}},"9,10":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"9,11":{"type":0,"character":"","color":"white","data":null},"9,12":{"type":0,"character":"","color":"white","data":null},"9,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"10,0":{"type":0,"character":"","color":"white","data":null},"10,1":{"type":0,"character":"","color":"white","data":null},"10,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"10,3":{"type":0,"character":"","color":"white","data":null},"10,4":{"type":0,"character":"","color":"white","data":null},"10,5":{"type":0,"character":"","color":"white","data":null},"10,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"10,7":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"10,8":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"10,9":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"10,10":{"type":0,"character":"","color":"white","data":null},"10,11":{"type":0,"character":"","color":"white","data":null},"10,12":{"type":0,"character":"","color":"white","data":null},"10,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"11,0":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"11,1":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"11,2":{"type":1,"character":"se","color":"#fff","data":{"type":"WALL_CORNER_SE"}},"11,3":{"type":0,"character":"","color":"white","data":null},"11,4":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"11,5":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"11,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"11,7":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"11,8":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"11,9":{"type":1,"character":"ne","color":"#fff","data":{"type":"WALL_CORNER_NE"}},"11,10":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"11,11":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"11,12":{"type":0,"character":"","color":"white","data":null},"11,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"12,0":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,1":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,2":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,3":{"type":0,"character":"","color":"white","data":null},"12,4":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,5":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,6":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,7":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,8":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,9":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"12,10":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"12,12":{"type":0,"character":"","color":"white","data":null},"12,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"13,0":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"13,1":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"13,2":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,3":{"type":0,"character":"","color":"white","data":null},"13,4":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,5":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,7":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,8":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,9":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,10":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"13,11":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,12":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"13,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"14,0":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"14,1":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"14,2":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,3":{"type":0,"character":"","color":"white","data":null},"14,4":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,5":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,7":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,8":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,9":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,10":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"14,11":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,12":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"14,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"15,0":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,1":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,2":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,3":{"type":0,"character":"","color":"white","data":null},"15,4":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,5":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,6":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,7":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,8":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,9":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"15,10":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,11":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"15,12":{"type":0,"character":"","color":"white","data":null},"15,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"16,0":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"16,1":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"16,2":{"type":1,"character":"sw","color":"#fff","data":{"type":"WALL_CORNER_SW"}},"16,3":{"type":0,"character":"","color":"white","data":null},"16,4":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"16,5":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"16,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"16,7":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"16,8":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"16,9":{"type":1,"character":"nw","color":"#fff","data":{"type":"WALL_CORNER_NW"}},"16,10":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"16,11":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"16,12":{"type":0,"character":"","color":"white","data":null},"16,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"17,0":{"type":0,"character":"","color":"white","data":null},"17,1":{"type":0,"character":"","color":"white","data":null},"17,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"17,3":{"type":0,"character":"","color":"white","data":null},"17,4":{"type":0,"character":"","color":"white","data":null},"17,5":{"type":0,"character":"","color":"white","data":null},"17,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"17,7":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"17,8":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"17,9":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"17,10":{"type":0,"character":"","color":"white","data":null},"17,11":{"type":0,"character":"","color":"white","data":null},"17,12":{"type":0,"character":"","color":"white","data":null},"17,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"18,0":{"type":0,"character":"","color":"white","data":null},"18,1":{"type":0,"character":"","color":"white","data":null},"18,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"18,3":{"type":0,"character":"","color":"white","data":null},"18,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"18,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"18,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"18,7":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"18,8":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"18,9":{"type":1,"character":"ne","color":"#fff","data":{"type":"WALL_CORNER_NE"}},"18,10":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"18,11":{"type":0,"character":"","color":"white","data":null},"18,12":{"type":0,"character":"","color":"white","data":null},"18,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"19,0":{"type":0,"character":"","color":"white","data":null},"19,1":{"type":0,"character":"","color":"white","data":null},"19,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"19,3":{"type":0,"character":"","color":"white","data":null},"19,4":{"type":0,"character":"","color":"white","data":null},"19,5":{"type":0,"character":"","color":"white","data":null},"19,6":{"type":0,"character":"","color":"white","data":null},"19,7":{"type":0,"character":"","color":"white","data":null},"19,8":{"type":0,"character":"","color":"white","data":null},"19,9":{"type":0,"character":"","color":"white","data":null},"19,10":{"type":0,"character":"","color":"white","data":null},"19,11":{"type":0,"character":"","color":"white","data":null},"19,12":{"type":0,"character":"","color":"white","data":null},"19,13":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"20,0":{"type":0,"character":"","color":"white","data":null},"20,1":{"type":0,"character":"","color":"white","data":null},"20,2":{"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"20,3":{"type":0,"character":"","color":"white","data":null},"20,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"20,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"20,6":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"20,7":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"20,8":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"20,9":{"type":1,"character":"[","color":"#fff","data":{"type":"COVER_PLACEHOLDER"}},"20,10":{"type":1,"character":"nw","color":"#fff","data":{"type":"WALL_CORNER_NW"}},"20,11":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"20,12":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"20,13":{"type":1,"character":"se","color":"#fff","data":{"type":"WALL_CORNER_SE"}},"21,0":{"type":0,"character":"","color":"white","data":null},"21,1":{"type":0,"character":"","color":"white","data":null},"21,2":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"21,3":{"type":0,"character":"","color":"white","data":null},"21,4":{"type":0,"character":"","color":"white","data":null},"21,5":{"type":0,"character":"","color":"white","data":null},"21,6":{"type":0,"character":"","color":"white","data":null},"21,7":{"type":0,"character":"","color":"white","data":null},"21,8":{"type":0,"character":"","color":"white","data":null},"21,9":{"type":0,"character":"","color":"white","data":null},"21,10":{"type":1,"character":"__","color":"#fff","data":{"type":"FLOOR"}},"21,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"21,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"21,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"22,0":{"type":0,"character":"","color":"white","data":null},"22,1":{"type":0,"character":"","color":"white","data":null},"22,2":{"type":0,"character":"","color":"white","data":null},"22,3":{"type":0,"character":"","color":"white","data":null},"22,4":{"type":0,"character":"","color":"white","data":null},"22,5":{"type":0,"character":"","color":"white","data":null},"22,6":{"type":0,"character":"","color":"white","data":null},"22,7":{"type":0,"character":"","color":"white","data":null},"22,8":{"type":0,"character":"","color":"white","data":null},"22,9":{"type":0,"character":"","color":"white","data":null},"22,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"22,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"22,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"22,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"23,0":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,1":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,2":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,3":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,4":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,5":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,6":{"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"23,7":{"type":0,"character":"","color":"white","data":null},"23,8":{"type":0,"character":"","color":"white","data":null},"23,9":{"type":0,"character":"","color":"white","data":null},"23,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"23,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"23,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"23,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"24,0":{"type":1,"character":"x","color":"#fff","data":{"type":"LOCKED_EXIT"}},"24,1":{"type":1,"character":"x","color":"#fff","data":{"type":"LOCKED_EXIT"}},"24,2":{"type":0,"character":"","color":"white","data":null},"24,3":{"type":0,"character":"","color":"white","data":null},"24,4":{"type":0,"character":"","color":"white","data":null},"24,5":{"type":0,"character":"","color":"white","data":null},"24,6":{"type":0,"character":"","color":"white","data":null},"24,7":{"type":0,"character":"","color":"white","data":null},"24,8":{"type":0,"character":"","color":"white","data":null},"24,9":{"type":0,"character":"","color":"white","data":null},"24,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"24,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"24,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"24,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"25,0":{"type":1,"character":"x","color":"#fff","data":{"type":"LOCKED_EXIT"}},"25,1":{"type":1,"character":"x","color":"#fff","data":{"type":"LOCKED_EXIT"}},"25,2":{"type":0,"character":"","color":"white","data":null},"25,3":{"type":0,"character":"","color":"white","data":null},"25,4":{"type":0,"character":"","color":"white","data":null},"25,5":{"type":0,"character":"","color":"white","data":null},"25,6":{"type":0,"character":"","color":"white","data":null},"25,7":{"type":0,"character":"","color":"white","data":null},"25,8":{"type":0,"character":"","color":"white","data":null},"25,9":{"type":0,"character":"","color":"white","data":null},"25,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"25,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"25,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"25,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"26,0":{"type":1,"character":"x","color":"#fff","data":{"type":"LOCKED_EXIT"}},"26,1":{"type":1,"character":"x","color":"#fff","data":{"type":"LOCKED_EXIT"}},"26,2":{"type":0,"character":"","color":"white","data":null},"26,3":{"type":0,"character":"","color":"white","data":null},"26,4":{"type":0,"character":"","color":"white","data":null},"26,5":{"type":0,"character":"","color":"white","data":null},"26,6":{"type":0,"character":"","color":"white","data":null},"26,7":{"type":0,"character":"","color":"white","data":null},"26,8":{"type":0,"character":"","color":"white","data":null},"26,9":{"type":0,"character":"","color":"white","data":null},"26,10":{"type":1,"character":"=","color":"#fff","data":{"type":"WALL_HORIZONTAL"}},"26,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"26,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"26,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"27,0":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,1":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,2":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,3":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,4":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,5":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,6":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,7":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,8":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,9":{"type":1,"character":"||","color":"#fff","data":{"type":"WALL_VERTICAL"}},"27,10":{"type":1,"character":"se","color":"#fff","data":{"type":"WALL_CORNER_SE"}},"27,11":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"27,12":{"character":"__","color":"#fff","data":{"type":"FLOOR"}},"27,13":{"character":"__","color":"#fff","data":{"type":"FLOOR"}}}}')},351:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var a=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==a||"symbol"!=a&&e.test(t))&&t>-1&&t%1==0&&t<r}},361:(t,e,r)=>{var a=r(842),n=r(7097),o=r(1502),i=r(8719),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)a(e,o(t)),t=n(t);return e}:i;t.exports=s},454:t=>{t.exports=function(t,e){for(var r=-1,a=null==t?0:t.length,n=Array(a);++r<a;)n[r]=e(t[r],r,t);return n}},477:(t,e,r)=>{var a=r(5163),n=r(3317),o=r(4104),i=r(9811);t.exports=function(t){return o(t)?a(i(t)):n(t)}},516:t=>{t.exports=function(t){return function(){return t}}},522:(t,e,r)=>{var a=r(3055),n=r(4009),o=r(8731);t.exports=function(t,e,r,i){var s=1&e,c=n(t);return function e(){for(var n=-1,l=arguments.length,u=-1,h=i.length,d=Array(h+l),p=this&&this!==o&&this instanceof e?c:t;++u<h;)d[u]=i[u];for(;l--;)d[u++]=arguments[++n];return a(p,s?r:this,d)}}},615:t=>{t.exports={}},637:(t,e,r)=>{var a=r(9461),n=r(8922),o=r(6799);t.exports=function(t){var e=n(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(r){return r===t||a(r,t,e)}}},718:(t,e,r)=>{var a=r(2092),n=r(7219),o=r(6547),i=o&&o.isSet,s=i?n(i):a;t.exports=s},775:(t,e,r)=>{var a;!function(){"use strict";var n=function(){this.init()};n.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||p(),"undefined"!==typeof t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var a=e._howls[r]._getSoundIds(),n=0;n<a.length;n++){var i=e._howls[r]._soundById(a[n]);i&&i._node&&(i._node.volume=i._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var a=e._howls[r]._getSoundIds(),n=0;n<a.length;n++){var i=e._howls[r]._soundById(a[n]);i&&i._node&&(i._node.muted=!!t||i._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&"undefined"!==typeof t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!==typeof Audio)try{"undefined"===typeof(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!==typeof Audio?new Audio:null}catch(u){return t}if(!e||"function"!==typeof e.canPlayType)return t;var r=e.canPlayType("audio/mpeg;").replace(/^no$/,""),a=t._navigator?t._navigator.userAgent:"",n=a.match(/OPR\/(\d+)/g),i=n&&parseInt(n[0].split("/")[1],10)<33,s=-1!==a.indexOf("Safari")&&-1===a.indexOf("Chrome"),c=a.match(/Version\/(.*?) /),l=s&&c&&parseInt(c[1],10)<15;return t._codecs={mp3:!(i||!r&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(r){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var a=new Audio;a._unlocked=!0,t._releaseHtml5Audio(a)}catch(r){t.noAudio=!0;break}for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var s=t._howls[n]._soundById(o[i]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var c=t.ctx.createBufferSource();c.buffer=t._scratchBuffer,c.connect(t.ctx.destination),"undefined"===typeof c.start?c.noteOn(0):c.start(0),"function"===typeof t.ctx.resume&&t.ctx.resume(),c.onended=function(){c.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var r=0;r<t._howls.length;r++)t._howls[r]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!==typeof Promise&&(e instanceof Promise||"function"===typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&"undefined"!==typeof t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var r=0;r<t._howls[e]._sounds.length;r++)if(!t._howls[e]._sounds[r]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&"undefined"!==typeof t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new n,i=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(t){var e=this;return o.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!==typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!==typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!==typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,"undefined"!==typeof o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(o.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"===typeof t._src&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var a,n;if(t._format&&t._format[r])a=t._format[r];else{if("string"!==typeof(n=t._src[r])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(a=/^data:audio\/([^;,]+);/i.exec(n))||(a=/\.([^.]+)$/.exec(n.split("?",1)[0])),a&&(a=a[1].toLowerCase())}if(a||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),a&&o.codecs(a)){e=t._src[r];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new s(t),t._webAudio&&l(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var r=this,a=null;if("number"===typeof t)a=t,t=null;else{if("string"===typeof t&&"loaded"===r._state&&!r._sprite[t])return null;if("undefined"===typeof t&&(t="__default",!r._playLock)){for(var n=0,i=0;i<r._sounds.length;i++)r._sounds[i]._paused&&!r._sounds[i]._ended&&(n++,a=r._sounds[i]._id);1===n?t=null:a=null}}var s=a?r._soundById(a):r._inactiveSound();if(!s)return null;if(a&&!t&&(t=s._sprite||"__default"),"loaded"!==r._state){s._sprite=t,s._ended=!1;var c=s._id;return r._queue.push({event:"play",action:function(){r.play(c)}}),c}if(a&&!s._paused)return e||r._loadQueue("play"),s._id;r._webAudio&&o._autoResume();var l=Math.max(0,s._seek>0?s._seek:r._sprite[t][0]/1e3),u=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-l),h=1e3*u/Math.abs(s._rate),d=r._sprite[t][0]/1e3,p=(r._sprite[t][0]+r._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var f=function(){s._paused=!1,s._seek=l,s._start=d,s._stop=p,s._loop=!(!s._loop&&!r._sprite[t][2])};if(!(l>=p)){var g=s._node;if(r._webAudio){var y=function(){r._playLock=!1,f(),r._refreshBuffer(s);var t=s._muted||r._muted?0:s._volume;g.gain.setValueAtTime(t,o.ctx.currentTime),s._playStart=o.ctx.currentTime,"undefined"===typeof g.bufferSource.start?s._loop?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,l,u):s._loop?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,u),h!==1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),h)),e||setTimeout((function(){r._emit("play",s._id),r._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?y():(r._playLock=!0,r.once("resume",y),r._clearTimer(s._id))}else{var m=function(){g.currentTime=l,g.muted=s._muted||r._muted||o._muted||g.muted,g.volume=s._volume*o.volume(),g.playbackRate=s._rate;try{var a=g.play();if(a&&"undefined"!==typeof Promise&&(a instanceof Promise||"function"===typeof a.then)?(r._playLock=!0,f(),a.then((function(){r._playLock=!1,g._unlocked=!0,e?r._loadQueue():r._emit("play",s._id)})).catch((function(){r._playLock=!1,r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(r._playLock=!1,f(),r._emit("play",s._id)),g.playbackRate=s._rate,g.paused)return void r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),h):(r._endTimers[s._id]=function(){r._ended(s),g.removeEventListener("ended",r._endTimers[s._id],!1)},g.addEventListener("ended",r._endTimers[s._id],!1))}catch(n){r._emit("playerror",s._id,n)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=r._src,g.load());var _=window&&window.ejecta||!g.readyState&&o._navigator.isCocoonJS;if(g.readyState>=3||_)m();else{r._playLock=!0,r._state="loading";var v=function(){r._state="loaded",m(),g.removeEventListener(o._canPlayEvent,v,!1)};g.addEventListener(o._canPlayEvent,v,!1),r._clearTimer(s._id)}}return s._id}r._ended(s)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var r=e._getSoundIds(t),a=0;a<r.length;a++){e._clearTimer(r[a]);var n=e._soundById(r[a]);if(n&&!n._paused&&(n._seek=e.seek(r[a]),n._rateSeek=0,n._paused=!0,e._stopFade(r[a]),n._node))if(e._webAudio){if(!n._node.bufferSource)continue;"undefined"===typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),e._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||e._emit("pause",n?n._id:null)}return e},stop:function(t,e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(t)}}),r;for(var a=r._getSoundIds(t),n=0;n<a.length;n++){r._clearTimer(a[n]);var o=r._soundById(a[n]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,r._stopFade(a[n]),o._node&&(r._webAudio?o._node.bufferSource&&("undefined"===typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),r._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&r._clearSound(o._node))),e||r._emit("stop",o._id))}return r},mute:function(t,e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(t,e)}}),r;if("undefined"===typeof e){if("boolean"!==typeof t)return r._muted;r._muted=t}for(var a=r._getSoundIds(e),n=0;n<a.length;n++){var i=r._soundById(a[n]);i&&(i._muted=t,i._interval&&r._stopFade(i._id),r._webAudio&&i._node?i._node.gain.setValueAtTime(t?0:i._volume,o.ctx.currentTime):i._node&&(i._node.muted=!!o._muted||t),r._emit("mute",i._id))}return r},volume:function(){var t,e,r,a=this,n=arguments;if(0===n.length)return a._volume;if(1===n.length||2===n.length&&"undefined"===typeof n[1]?a._getSoundIds().indexOf(n[0])>=0?e=parseInt(n[0],10):t=parseFloat(n[0]):n.length>=2&&(t=parseFloat(n[0]),e=parseInt(n[1],10)),!("undefined"!==typeof t&&t>=0&&t<=1))return(r=e?a._soundById(e):a._sounds[0])?r._volume:0;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,n)}}),a;"undefined"===typeof e&&(a._volume=t),e=a._getSoundIds(e);for(var i=0;i<e.length;i++)(r=a._soundById(e[i]))&&(r._volume=t,n[2]||a._stopFade(e[i]),a._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(t,o.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=t*o.volume()),a._emit("volume",r._id));return a},fade:function(t,e,r,a){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"fade",action:function(){n.fade(t,e,r,a)}}),n;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),r=parseFloat(r),n.volume(t,a);for(var i=n._getSoundIds(a),s=0;s<i.length;s++){var c=n._soundById(i[s]);if(c){if(a||n._stopFade(i[s]),n._webAudio&&!c._muted){var l=o.ctx.currentTime,u=l+r/1e3;c._volume=t,c._node.gain.setValueAtTime(t,l),c._node.gain.linearRampToValueAtTime(e,u)}n._startFadeInterval(c,t,e,r,i[s],"undefined"===typeof a)}}return n},_startFadeInterval:function(t,e,r,a,n,o){var i=this,s=e,c=r-e,l=Math.abs(c/.01),u=Math.max(4,l>0?a/l:a),h=Date.now();t._fadeTo=r,t._interval=setInterval((function(){var n=(Date.now()-h)/a;h=Date.now(),s+=c*n,s=Math.round(100*s)/100,s=c<0?Math.max(r,s):Math.min(r,s),i._webAudio?t._volume=s:i.volume(s,t._id,!0),o&&(i._volume=s),(r<e&&s<=r||r>e&&s>=r)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,i.volume(r,t._id),i._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this,r=e._soundById(t);return r&&r._interval&&(e._webAudio&&r._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(r._interval),r._interval=null,e.volume(r._fadeTo,t),r._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,r,a=this,n=arguments;if(0===n.length)return a._loop;if(1===n.length){if("boolean"!==typeof n[0])return!!(r=a._soundById(parseInt(n[0],10)))&&r._loop;t=n[0],a._loop=t}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var o=a._getSoundIds(e),i=0;i<o.length;i++)(r=a._soundById(o[i]))&&(r._loop=t,a._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=t,t&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop,a.playing(o[i])&&(a.pause(o[i],!0),a.play(o[i],!0)))));return a},rate:function(){var t,e,r,a=this,n=arguments;if(0===n.length)e=a._sounds[0]._id;else if(1===n.length){a._getSoundIds().indexOf(n[0])>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("number"!==typeof t)return(r=a._soundById(e))?r._rate:a._rate;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,n)}}),a;"undefined"===typeof e&&(a._rate=t),e=a._getSoundIds(e);for(var i=0;i<e.length;i++)if(r=a._soundById(e[i])){a.playing(e[i])&&(r._rateSeek=a.seek(e[i]),r._playStart=a._webAudio?o.ctx.currentTime:r._playStart),r._rate=t,a._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):r._node&&(r._node.playbackRate=t);var s=a.seek(e[i]),c=1e3*((a._sprite[r._sprite][0]+a._sprite[r._sprite][1])/1e3-s)/Math.abs(r._rate);!a._endTimers[e[i]]&&r._paused||(a._clearTimer(e[i]),a._endTimers[e[i]]=setTimeout(a._ended.bind(a,r),c)),a._emit("rate",r._id)}return a},seek:function(){var t,e,r=this,a=arguments;if(0===a.length)r._sounds.length&&(e=r._sounds[0]._id);else if(1===a.length){r._getSoundIds().indexOf(a[0])>=0?e=parseInt(a[0],10):r._sounds.length&&(e=r._sounds[0]._id,t=parseFloat(a[0]))}else 2===a.length&&(t=parseFloat(a[0]),e=parseInt(a[1],10));if("undefined"===typeof e)return 0;if("number"===typeof t&&("loaded"!==r._state||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var n=r._soundById(e);if(n){if(!("number"===typeof t&&t>=0)){if(r._webAudio){var i=r.playing(e)?o.ctx.currentTime-n._playStart:0,s=n._rateSeek?n._rateSeek-n._seek:0;return n._seek+(s+i*Math.abs(n._rate))}return n._node.currentTime}var c=r.playing(e);c&&r.pause(e,!0),n._seek=t,n._ended=!1,r._clearTimer(e),r._webAudio||!n._node||isNaN(n._node.duration)||(n._node.currentTime=t);var l=function(){c&&r.play(e,!0),r._emit("seek",e)};if(c&&!r._webAudio){var u=function(){r._playLock?setTimeout(u,0):l()};setTimeout(u,0)}else l()}return r},playing:function(t){var e=this;if("number"===typeof t){var r=e._soundById(t);return!!r&&!r._paused}for(var a=0;a<e._sounds.length;a++)if(!e._sounds[a]._paused)return!0;return!1},duration:function(t){var e=this,r=e._duration,a=e._soundById(t);return a&&(r=e._sprite[a._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,r=0;r<e.length;r++)e[r]._paused||t.stop(e[r]._id),t._webAudio||(t._clearSound(e[r]._node),e[r]._node.removeEventListener("error",e[r]._errorFn,!1),e[r]._node.removeEventListener(o._canPlayEvent,e[r]._loadFn,!1),e[r]._node.removeEventListener("ended",e[r]._endFn,!1),o._releaseHtml5Audio(e[r]._node)),delete e[r]._node,t._clearTimer(e[r]._id);var a=o._howls.indexOf(t);a>=0&&o._howls.splice(a,1);var n=!0;for(r=0;r<o._howls.length;r++)if(o._howls[r]._src===t._src||t._src.indexOf(o._howls[r]._src)>=0){n=!1;break}return c&&n&&delete c[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,r,a){var n=this["_on"+t];return"function"===typeof e&&n.push(a?{id:r,fn:e,once:a}:{id:r,fn:e}),this},off:function(t,e,r){var a=this,n=a["_on"+t],o=0;if("number"===typeof e&&(r=e,e=null),e||r)for(o=0;o<n.length;o++){var i=r===n[o].id;if(e===n[o].fn&&i||!e&&i){n.splice(o,1);break}}else if(t)a["_on"+t]=[];else{var s=Object.keys(a);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(a[s[o]])&&(a[s[o]]=[])}return a},once:function(t,e,r){return this.on(t,e,r,1),this},_emit:function(t,e,r){for(var a=this,n=a["_on"+t],o=n.length-1;o>=0;o--)n[o].id&&n[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,r)}.bind(a,n[o].fn),0),n[o].once&&a.off(t,n[o].fn,n[o].id));return a._loadQueue(t),a},_loadQueue:function(t){var e=this;if(e._queue.length>0){var r=e._queue[0];r.event===t&&(e._queue.shift(),e._loadQueue()),t||r.action()}return e},_ended:function(t){var e=this,r=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var a=!(!t._loop&&!e._sprite[r][2]);if(e._emit("end",t._id),!e._webAudio&&a&&e.stop(t._id,!0).play(t._id),e._webAudio&&a){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),n)}return e._webAudio&&!a&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),o._autoSuspend()),e._webAudio||a||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!==typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var r=e._soundById(t);r&&r._node&&r._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,r=0;r<e._sounds.length;r++)if(t===e._sounds[r]._id)return e._sounds[r];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new s(t)},_drain:function(){var t=this,e=t._pool,r=0,a=0;if(!(t._sounds.length<e)){for(a=0;a<t._sounds.length;a++)t._sounds[a]._ended&&r++;for(a=t._sounds.length-1;a>=0;a--){if(r<=e)return;t._sounds[a]._ended&&(t._webAudio&&t._sounds[a]._node&&t._sounds[a]._node.disconnect(0),t._sounds.splice(a,1),r--)}}},_getSoundIds:function(t){if("undefined"===typeof t){for(var e=[],r=0;r<this._sounds.length;r++)e.push(this._sounds[r]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=c[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return this;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(r){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,r=o._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node="undefined"===typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),t._node.gain.setValueAtTime(r,o.ctx.currentTime),t._node.paused=!0,t._node.connect(o.masterGain)):o.noAudio||(t._node=o._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(o._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=r*o.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(o._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var c={},l=function(t){var e=t._src;if(c[e])return t._duration=c[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var r=atob(e.split(",")[1]),a=new Uint8Array(r.length),n=0;n<r.length;++n)a[n]=r.charCodeAt(n);h(a.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){o.setRequestHeader(e,t._xhr.headers[e])})),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?h(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete c[e],t.load())},u(o)}},u=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var r=function(){e._emit("loaderror",null,"Decoding audio data failed.")},a=function(t){t&&e._sounds.length>0?(c[e._src]=t,d(e,t)):r()};"undefined"!==typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(a).catch(r):o.ctx.decodeAudioData(t,a,r)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!==typeof AudioContext?o.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(n){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=e?parseInt(e[1],10):null;if(t&&r&&r<9){var a=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!a&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain="undefined"===typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(a=function(){return{Howler:o,Howl:i}}.apply(e,[]))||(t.exports=a),e.Howler=o,e.Howl=i,"undefined"!==typeof r.g?(r.g.HowlerGlobal=n,r.g.Howler=o,r.g.Howl=i,r.g.Sound=s):"undefined"!==typeof window&&(window.HowlerGlobal=n,window.Howler=o,window.Howl=i,window.Sound=s)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var r=e._howls.length-1;r>=0;r--)e._howls[r].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,r){var a=this;return a.ctx&&a.ctx.listener?(e="number"!==typeof e?a._pos[1]:e,r="number"!==typeof r?a._pos[2]:r,"number"!==typeof t?a._pos:(a._pos=[t,e,r],"undefined"!==typeof a.ctx.listener.positionX?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]),a)):a},HowlerGlobal.prototype.orientation=function(t,e,r,a,n,o){var i=this;if(!i.ctx||!i.ctx.listener)return i;var s=i._orientation;return e="number"!==typeof e?s[1]:e,r="number"!==typeof r?s[2]:r,a="number"!==typeof a?s[3]:a,n="number"!==typeof n?s[4]:n,o="number"!==typeof o?s[5]:o,"number"!==typeof t?s:(i._orientation=[t,e,r,a,n,o],"undefined"!==typeof i.ctx.listener.forwardX?(i.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),i.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),i.ctx.listener.upY.setTargetAtTime(n,Howler.ctx.currentTime,.1),i.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):i.ctx.listener.setOrientation(t,e,r,a,n,o),i)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var r=this;return r._orientation=e.orientation||[1,0,0],r._stereo=e.stereo||null,r._pos=e.pos||null,r._pannerAttr={coneInnerAngle:"undefined"!==typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!==typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!==typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!==typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!==typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!==typeof e.rolloffFactor?e.rolloffFactor:1},r._onstereo=e.onstereo?[{fn:e.onstereo}]:[],r._onpos=e.onpos?[{fn:e.onpos}]:[],r._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"stereo",action:function(){a.stereo(t,r)}}),a;var n="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof r){if("number"!==typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0]}for(var o=a._getSoundIds(r),i=0;i<o.length;i++){var s=a._soundById(o[i]);if(s){if("number"!==typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,n),"spatial"===n?"undefined"!==typeof s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",s._id)}}return a},Howl.prototype.pos=function(t,r,a,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,r,a,n)}}),o;if(r="number"!==typeof r?0:r,a="number"!==typeof a?-.5:a,"undefined"===typeof n){if("number"!==typeof t)return o._pos;o._pos=[t,r,a]}for(var i=o._getSoundIds(n),s=0;s<i.length;s++){var c=o._soundById(i[s]);if(c){if("number"!==typeof t)return c._pos;c._pos=[t,r,a],c._node&&(c._panner&&!c._panner.pan||e(c,"spatial"),"undefined"!==typeof c._panner.positionX?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):c._panner.setPosition(t,r,a)),o._emit("pos",c._id)}}return o},Howl.prototype.orientation=function(t,r,a,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,r,a,n)}}),o;if(r="number"!==typeof r?o._orientation[1]:r,a="number"!==typeof a?o._orientation[2]:a,"undefined"===typeof n){if("number"!==typeof t)return o._orientation;o._orientation=[t,r,a]}for(var i=o._getSoundIds(n),s=0;s<i.length;s++){var c=o._soundById(i[s]);if(c){if("number"!==typeof t)return c._orientation;c._orientation=[t,r,a],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),"undefined"!==typeof c._panner.orientationX?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):c._panner.setOrientation(t,r,a)),o._emit("orientation",c._id)}}return o},Howl.prototype.pannerAttr=function(){var t,r,a,n=this,o=arguments;if(!n._webAudio)return n;if(0===o.length)return n._pannerAttr;if(1===o.length){if("object"!==typeof o[0])return(a=n._soundById(parseInt(o[0],10)))?a._pannerAttr:n._pannerAttr;t=o[0],"undefined"===typeof r&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:"undefined"!==typeof t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:"undefined"!==typeof t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:"undefined"!==typeof t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:"undefined"!==typeof t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:"undefined"!==typeof t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:"undefined"!==typeof t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:"undefined"!==typeof t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:"undefined"!==typeof t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===o.length&&(t=o[0],r=parseInt(o[1],10));for(var i=n._getSoundIds(r),s=0;s<i.length;s++)if(a=n._soundById(i[s])){var c=a._pannerAttr;c={coneInnerAngle:"undefined"!==typeof t.coneInnerAngle?t.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:"undefined"!==typeof t.coneOuterAngle?t.coneOuterAngle:c.coneOuterAngle,coneOuterGain:"undefined"!==typeof t.coneOuterGain?t.coneOuterGain:c.coneOuterGain,distanceModel:"undefined"!==typeof t.distanceModel?t.distanceModel:c.distanceModel,maxDistance:"undefined"!==typeof t.maxDistance?t.maxDistance:c.maxDistance,refDistance:"undefined"!==typeof t.refDistance?t.refDistance:c.refDistance,rolloffFactor:"undefined"!==typeof t.rolloffFactor?t.rolloffFactor:c.rolloffFactor,panningModel:"undefined"!==typeof t.panningModel?t.panningModel:c.panningModel};var l=a._panner;l||(a._pos||(a._pos=n._pos||[0,0,-.5]),e(a,"spatial"),l=a._panner),l.coneInnerAngle=c.coneInnerAngle,l.coneOuterAngle=c.coneOuterAngle,l.coneOuterGain=c.coneOuterGain,l.distanceModel=c.distanceModel,l.maxDistance=c.maxDistance,l.refDistance=c.refDistance,l.rolloffFactor=c.rolloffFactor,l.panningModel=c.panningModel}return n},Sound.prototype.init=function(t){return function(){var e=this,r=e._parent;e._orientation=r._orientation,e._stereo=r._stereo,e._pos=r._pos,e._pannerAttr=r._pannerAttr,t.call(this),e._stereo?r.stereo(e._stereo):e._pos&&r.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,r=e._parent;return e._orientation=r._orientation,e._stereo=r._stereo,e._pos=r._pos,e._pannerAttr=r._pannerAttr,e._stereo?r.stereo(e._stereo):e._pos?r.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,r._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,"undefined"!==typeof t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),"undefined"!==typeof t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},785:(t,e,r)=>{var a=r(5148),n=r(2110),o=r(8347),i=r(5903),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,h=l.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||n(t))&&(a(t)?d:s).test(i(t))}},842:t=>{t.exports=function(t,e){for(var r=-1,a=e.length,n=t.length;++r<a;)t[n+r]=e[r];return t}},863:(t,e,r)=>{var a=r(3400),n=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,o,i,s){var c=1&r,l=a(t),u=l.length;if(u!=a(e).length&&!c)return!1;for(var h=u;h--;){var d=l[h];if(!(c?d in e:n.call(e,d)))return!1}var p=s.get(t),f=s.get(e);if(p&&f)return p==e&&f==t;var g=!0;s.set(t,e),s.set(e,t);for(var y=c;++h<u;){var m=t[d=l[h]],_=e[d];if(o)var v=c?o(_,m,d,e,t,s):o(m,_,d,t,e,s);if(!(void 0===v?m===_||i(m,_,r,o,s):v)){g=!1;break}y||(y="constructor"==d)}if(g&&!y){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(t),s.delete(e),g}},876:(t,e,r)=>{var a=r(4302),n=r(7219),o=r(6547),i=o&&o.isMap,s=i?n(i):a;t.exports=s},913:(t,e,r)=>{var a=r(3823),n=r(8974),o=r(3529);function i(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new a;++e<r;)this.add(t[e])}i.prototype.add=i.prototype.push=n,i.prototype.has=o,t.exports=i},928:(t,e,r)=>{var a=r(3884),n=r(4916);t.exports=function(t){return n(t)&&"[object WeakMap]"==a(t)}},954:(t,e,r)=>{var a=r(2009);t.exports=function(){this.__data__=new a,this.size=0}},971:(t,e)=>{"use strict";e.__esModule=!0,e.default=function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")},t.exports=e.default},1007:(t,e,r)=>{var a=r(5261),n=r(9051),o=r(7827);t.exports=function(t,e,r,i,s,c,l,u,h,d){var p=8&e;e|=p?32:64,4&(e&=~(p?64:32))||(e&=-4);var f=[t,e,s,p?c:void 0,p?l:void 0,p?void 0:c,p?void 0:l,u,h,d],g=r.apply(void 0,f);return a(t)&&n(g,f),g.placeholder=i,o(g,t,e)}},1008:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(8498),c=r(9614),l=r(8498),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){var e=s.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,r),t.arc(0,0,this.innerRadius(),e,0,!r),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(i.Shape);e.Arc=u,u.prototype._centroid=!0,u.prototype.className="Arc",u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],l._registerNode(u),o.Factory.addGetterSetter(u,"innerRadius",0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"outerRadius",0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"angle",0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clockwise",!1,c.getBooleanValidator()),n.Collection.mapMethods(u)},1049:(t,e,r)=>{var a=r(5151),n=r(6342),o=r(3531),i=a?a.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||n(t)||!!(i&&t&&t[i])}},1054:t=>{t.exports=function(t){return t}},1091:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(4222),i=r(3069),s=r(3887),c=r(9685),l=function(t){function e(e){var r=t.call(this,e)||this;return r.canvas=new c.SceneCanvas,r._waitingForDraw=!1,r.on("visibleChange",r._checkVisibility),r._checkVisibility(),r.on("imageSmoothingEnabledChange",r._checkSmooth),r._checkSmooth(),r}return a(e,t),e.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var r=this.getStage();return r&&(r.content.removeChild(this.getCanvas()._canvas),e<r.children.length-1?r.content.insertBefore(this.getCanvas()._canvas,r.children[e+1].getCanvas()._canvas):r.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){i.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){if(!i.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.children.length-1?t.content.insertBefore(this.getCanvas()._canvas,t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(i.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(i.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.hitGraphEnabled=function(){return!0},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return i.Node.prototype.remove.call(this),t&&t.parentNode&&n.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,r=t.height;return this.canvas.setSize(e,r),this},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.getIntersection=function(t,e){return null},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this},e.prototype._applyTransform=function(t,e,r){var a=t.getAbsoluteTransform(r).getMatrix();e.transform(a[0],a[1],a[2],a[3],a[4],a[5])},e}(o.Container);e.BaseLayer=l,l.prototype.nodeType="BaseLayer",s.Factory.addGetterSetter(l,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(l,"clearBeforeDraw",!0),n.Collection.mapMethods(l)},1095:(t,e,r)=>{var a=r(1949),n=r(361),o=r(1503);t.exports=function(t){return a(t,o,n)}},1123:(t,e,r)=>{var a=r(637),n=r(8868),o=r(1054),i=r(3531),s=r(477);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?i(t)?n(t[0],t[1]):a(t):s(t)}},1178:(t,e,r)=>{var a=r(5151),n=r(454),o=r(3531),i=r(1516),s=a?a.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return n(e,t)+"";if(i(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},1205:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(2261),o=r(3069),i=r(9614);e.Pixelate=function(t){var e,r,a,o,i,s,c,l,u,h,d,p,f,g,y=Math.ceil(this.pixelSize()),m=t.width,_=t.height,v=Math.ceil(m/y),b=Math.ceil(_/y),w=t.data;if(y<=0)n.Util.error("pixelSize value can not be <= 0");else for(p=0;p<v;p+=1)for(f=0;f<b;f+=1){for(o=0,i=0,s=0,c=0,u=(l=p*y)+y,d=(h=f*y)+y,g=0,e=l;e<u;e+=1)if(!(e>=m))for(r=h;r<d;r+=1)r>=_||(o+=w[(a=4*(m*r+e))+0],i+=w[a+1],s+=w[a+2],c+=w[a+3],g+=1);for(o/=g,i/=g,s/=g,c/=g,e=l;e<u;e+=1)if(!(e>=m))for(r=h;r<d;r+=1)r>=_||(w[(a=4*(m*r+e))+0]=o,w[a+1]=i,w[a+2]=s,w[a+3]=c)}},a.Factory.addGetterSetter(o.Node,"pixelSize",8,i.getNumberValidator(),a.Factory.afterSetFilter)},1206:(t,e,r)=>{var a=r(8952),n=1/0;t.exports=function(t){return t?(t=a(t))===n||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},1229:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},1353:(t,e,r)=>{var a=r(2856),n=function(){try{var t=a(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=n},1372:t=>{"use strict";t.exports=function(){}},1412:(t,e,r)=>{t.exports={ary:r(8412),assign:r(9799),clone:r(7671),curry:r(7853),forEach:r(9987),isArray:r(3531),isError:r(3188),isFunction:r(5148),isWeakMap:r(928),iteratee:r(4885),keys:r(2962),rearg:r(2181),toInteger:r(7791),toPath:r(1910)}},1428:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},1494:(t,e,r)=>{"use strict";e.__esModule=!0,e.getChildMapping=function(t){if(!t)return t;var e={};return a.Children.map(t,(function(t){return t})).forEach((function(t){e[t.key]=t})),e},e.mergeChildMappings=function(t,e){function r(r){return e.hasOwnProperty(r)?e[r]:t[r]}t=t||{},e=e||{};var a={},n=[];for(var o in t)e.hasOwnProperty(o)?n.length&&(a[o]=n,n=[]):n.push(o);var i=void 0,s={};for(var c in e){if(a.hasOwnProperty(c))for(i=0;i<a[c].length;i++){var l=a[c][i];s[a[c][i]]=r(l)}s[c]=r(c)}for(i=0;i<n.length;i++)s[n[i]]=r(n[i]);return s};var a=r(1561)},1500:(t,e)=>{e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,r=e.aliasToReal,a={};for(var n in r){var o=r[n];t.call(a,o)?a[o].push(n):a[o]=[n]}return a}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},1502:(t,e,r)=>{var a=r(7952),n=r(8719),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(t){return null==t?[]:(t=Object(t),a(i(t),(function(e){return o.call(t,e)})))}:n;t.exports=s},1503:(t,e,r)=>{var a=r(2969),n=r(21),o=r(7748);t.exports=function(t){return o(t)?a(t,!0):n(t)}},1516:(t,e,r)=>{var a=r(7650),n=r(4916);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==a(t)}},1531:t=>{"use strict";function e(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t.exports=function(t,r){t.classList?t.classList.remove(r):"string"===typeof t.className?t.className=e(t.className,r):t.setAttribute("class",e(t.className&&t.className.baseVal||"",r))}},1536:(t,e,r)=>{var a=r(3055),n=r(4009),o=r(8481),i=r(1007),s=r(8049),c=r(4976),l=r(8731);t.exports=function(t,e,r){var u=n(t);return function n(){for(var h=arguments.length,d=Array(h),p=h,f=s(n);p--;)d[p]=arguments[p];var g=h<3&&d[0]!==f&&d[h-1]!==f?[]:c(d,f);return(h-=g.length)<r?i(t,e,o,n.placeholder,void 0,d,g,void 0,void 0,r-h):a(this&&this!==l&&this instanceof n?u:t,this,d)}}},1561:(t,e,r)=>{"use strict";t.exports=r(1648)},1633:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(8498),c=function(t){function e(r){var a=t.call(this,r)||this;a.dataArray=[],a.pathLength=0,a.dataArray=e.parsePathData(a.data()),a.pathLength=0;for(var n=0;n<a.dataArray.length;++n)a.pathLength+=a.dataArray[n].pathLength;return a.on("dataChange.konva",(function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),a}return a(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var r=!1,a=0;a<e.length;a++){var n=e[a].command,o=e[a].points;switch(n){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var i=o[0],s=o[1],c=o[2],l=o[3],u=o[4],h=o[5],d=o[6],p=o[7],f=c>l?c:l,g=c>l?1:c/l,y=c>l?l/c:1;t.translate(i,s),t.rotate(d),t.scale(g,y),t.arc(0,0,f,u,u+h,1-p),t.scale(1/g,1/y),t.rotate(-d),t.translate(-i,-s);break;case"z":r=!0,t.closePath()}}r||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach((function(r){if("A"===r.command){var a=r.points[4],n=r.points[5],o=r.points[4]+n,i=Math.PI/180;if(Math.abs(a-o)<i&&(i=Math.abs(a-o)),n<0)for(var s=a-i;s>o;s-=i){var c=e.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],s,0);t.push(c.x,c.y)}else for(s=a+i;s<o;s+=i){c=e.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],s,0);t.push(c.x,c.y)}}else if("C"===r.command)for(s=0;s<=1;s+=.01){c=e.getPointOnCubicBezier(s,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3],r.points[4],r.points[5]);t.push(c.x,c.y)}else t=t.concat(r.points)}));for(var r,a,n=t[0],o=t[0],i=t[1],s=t[1],c=0;c<t.length/2;c++)r=t[2*c],a=t[2*c+1],isNaN(r)||(n=Math.min(n,r),o=Math.max(o,r)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:Math.round(n),y:Math.round(i),width:Math.round(o-n),height:Math.round(s-i)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var r,a=0,n=this.dataArray.length;if(!n)return null;for(;a<n&&t>this.dataArray[a].pathLength;)t-=this.dataArray[a].pathLength,++a;if(a===n)return{x:(r=this.dataArray[a-1].points.slice(-2))[0],y:r[1]};if(t<.01)return{x:(r=this.dataArray[a].points.slice(0,2))[0],y:r[1]};var o=this.dataArray[a],i=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,i[0],i[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,i[0],i[1],i[2],i[3],i[4],i[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,i[0],i[1],i[2],i[3]);case"A":var s=i[0],c=i[1],l=i[2],u=i[3],h=i[4],d=i[5],p=i[6];return h+=d*t/o.pathLength,e.getPointOnEllipticalArc(s,c,l,u,h,p)}return null},e.getLineLength=function(t,e,r,a){return Math.sqrt((r-t)*(r-t)+(a-e)*(a-e))},e.getPointOnLine=function(t,e,r,a,n,o,i){void 0===o&&(o=e),void 0===i&&(i=r);var s=(n-r)/(a-e+1e-8),c=Math.sqrt(t*t/(1+s*s));a<e&&(c*=-1);var l,u=s*c;if(a===e)l={x:o,y:i+u};else if((i-r)/(o-e+1e-8)===s)l={x:o+c,y:i+u};else{var h,d,p=this.getLineLength(e,r,a,n);if(p<1e-8)return;var f=(o-e)*(a-e)+(i-r)*(n-r);h=e+(f/=p*p)*(a-e),d=r+f*(n-r);var g=this.getLineLength(o,i,h,d),y=Math.sqrt(t*t-g*g);c=Math.sqrt(y*y/(1+s*s)),a<e&&(c*=-1),l={x:h+c,y:d+(u=s*c)}}return l},e.getPointOnCubicBezier=function(t,e,r,a,n,o,i,s,c){function l(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:s*l(t)+o*u(t)+a*h(t)+e*d(t),y:c*l(t)+i*u(t)+n*h(t)+r*d(t)}},e.getPointOnQuadraticBezier=function(t,e,r,a,n,o,i){function s(t){return t*t}function c(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:o*s(t)+a*c(t)+e*l(t),y:i*s(t)+n*c(t)+r*l(t)}},e.getPointOnEllipticalArc=function(t,e,r,a,n,o){var i=Math.cos(o),s=Math.sin(o),c=r*Math.cos(n),l=a*Math.sin(n);return{x:t+(c*i-l*s),y:e+(c*s+l*i)}},e.parsePathData=function(t){if(!t)return[];var e=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)e=e.replace(new RegExp(r[a],"g"),"|"+r[a]);var n,o=e.split("|"),i=[],s=[],c=0,l=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(a=1;a<o.length;a++){var h=o[a],d=h.charAt(0);for(h=h.slice(1),s.length=0;n=u.exec(h);)s.push(n[0]);for(var p=[],f=0,g=s.length;f<g;f++){var y=parseFloat(s[f]);isNaN(y)?p.push(0):p.push(y)}for(;p.length>0&&!isNaN(p[0]);){var m,_,v,b,w,x,O,R,A,C,k=null,E=[],S=c,T=l;switch(d){case"l":c+=p.shift(),l+=p.shift(),k="L",E.push(c,l);break;case"L":c=p.shift(),l=p.shift(),E.push(c,l);break;case"m":var L=p.shift(),D=p.shift();if(c+=L,l+=D,k="M",i.length>2&&"z"===i[i.length-1].command)for(var N=i.length-2;N>=0;N--)if("M"===i[N].command){c=i[N].points[0]+L,l=i[N].points[1]+D;break}E.push(c,l),d="l";break;case"M":c=p.shift(),l=p.shift(),k="M",E.push(c,l),d="L";break;case"h":c+=p.shift(),k="L",E.push(c,l);break;case"H":c=p.shift(),k="L",E.push(c,l);break;case"v":l+=p.shift(),k="L",E.push(c,l);break;case"V":l=p.shift(),k="L",E.push(c,l);break;case"C":E.push(p.shift(),p.shift(),p.shift(),p.shift()),c=p.shift(),l=p.shift(),E.push(c,l);break;case"c":E.push(c+p.shift(),l+p.shift(),c+p.shift(),l+p.shift()),c+=p.shift(),l+=p.shift(),k="C",E.push(c,l);break;case"S":_=c,v=l,"C"===(m=i[i.length-1]).command&&(_=c+(c-m.points[2]),v=l+(l-m.points[3])),E.push(_,v,p.shift(),p.shift()),c=p.shift(),l=p.shift(),k="C",E.push(c,l);break;case"s":_=c,v=l,"C"===(m=i[i.length-1]).command&&(_=c+(c-m.points[2]),v=l+(l-m.points[3])),E.push(_,v,c+p.shift(),l+p.shift()),c+=p.shift(),l+=p.shift(),k="C",E.push(c,l);break;case"Q":E.push(p.shift(),p.shift()),c=p.shift(),l=p.shift(),E.push(c,l);break;case"q":E.push(c+p.shift(),l+p.shift()),c+=p.shift(),l+=p.shift(),k="Q",E.push(c,l);break;case"T":_=c,v=l,"Q"===(m=i[i.length-1]).command&&(_=c+(c-m.points[0]),v=l+(l-m.points[1])),c=p.shift(),l=p.shift(),k="Q",E.push(_,v,c,l);break;case"t":_=c,v=l,"Q"===(m=i[i.length-1]).command&&(_=c+(c-m.points[0]),v=l+(l-m.points[1])),c+=p.shift(),l+=p.shift(),k="Q",E.push(_,v,c,l);break;case"A":b=p.shift(),w=p.shift(),x=p.shift(),O=p.shift(),R=p.shift(),A=c,C=l,c=p.shift(),l=p.shift(),k="A",E=this.convertEndpointToCenterParameterization(A,C,c,l,O,R,b,w,x);break;case"a":b=p.shift(),w=p.shift(),x=p.shift(),O=p.shift(),R=p.shift(),A=c,C=l,c+=p.shift(),l+=p.shift(),k="A",E=this.convertEndpointToCenterParameterization(A,C,c,l,O,R,b,w,x)}i.push({command:k||d,points:E,start:{x:S,y:T},pathLength:this.calcLength(S,T,k||d,E)})}"z"!==d&&"Z"!==d||i.push({command:"z",points:[],start:void 0,pathLength:0})}return i},e.calcLength=function(t,r,a,n){var o,i,s,c,l=e;switch(a){case"L":return l.getLineLength(t,r,n[0],n[1]);case"C":for(o=0,i=l.getPointOnCubicBezier(0,t,r,n[0],n[1],n[2],n[3],n[4],n[5]),c=.01;c<=1;c+=.01)s=l.getPointOnCubicBezier(c,t,r,n[0],n[1],n[2],n[3],n[4],n[5]),o+=l.getLineLength(i.x,i.y,s.x,s.y),i=s;return o;case"Q":for(o=0,i=l.getPointOnQuadraticBezier(0,t,r,n[0],n[1],n[2],n[3]),c=.01;c<=1;c+=.01)s=l.getPointOnQuadraticBezier(c,t,r,n[0],n[1],n[2],n[3]),o+=l.getLineLength(i.x,i.y,s.x,s.y),i=s;return o;case"A":o=0;var u=n[4],h=n[5],d=n[4]+h,p=Math.PI/180;if(Math.abs(u-d)<p&&(p=Math.abs(u-d)),i=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),h<0)for(c=u-p;c>d;c-=p)s=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),o+=l.getLineLength(i.x,i.y,s.x,s.y),i=s;else for(c=u+p;c<d;c+=p)s=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),o+=l.getLineLength(i.x,i.y,s.x,s.y),i=s;return s=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],d,0),o+=l.getLineLength(i.x,i.y,s.x,s.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,r,a,n,o,i,s,c){var l=c*(Math.PI/180),u=Math.cos(l)*(t-r)/2+Math.sin(l)*(e-a)/2,h=-1*Math.sin(l)*(t-r)/2+Math.cos(l)*(e-a)/2,d=u*u/(i*i)+h*h/(s*s);d>1&&(i*=Math.sqrt(d),s*=Math.sqrt(d));var p=Math.sqrt((i*i*(s*s)-i*i*(h*h)-s*s*(u*u))/(i*i*(h*h)+s*s*(u*u)));n===o&&(p*=-1),isNaN(p)&&(p=0);var f=p*i*h/s,g=p*-s*u/i,y=(t+r)/2+Math.cos(l)*f-Math.sin(l)*g,m=(e+a)/2+Math.sin(l)*f+Math.cos(l)*g,_=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(_(t)*_(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))},w=b([1,0],[(u-f)/i,(h-g)/s]),x=[(u-f)/i,(h-g)/s],O=[(-1*u-f)/i,(-1*h-g)/s],R=b(x,O);return v(x,O)<=-1&&(R=Math.PI),v(x,O)>=1&&(R=0),0===o&&R>0&&(R-=2*Math.PI),1===o&&R<0&&(R+=2*Math.PI),[y,m,i,s,w,R,l,o]},e}(i.Shape);e.Path=c,c.prototype.className="Path",c.prototype._attrsAffectingSize=["data"],s._registerNode(c),o.Factory.addGetterSetter(c,"data"),n.Collection.mapMethods(c)},1648:(t,e,r)=>{"use strict";var a=r(4933),n="function"===typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,c=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function b(t,e,r){this.props=t,this.context=e,this.refs=v,this.updater=r||_}function w(){}function x(t,e,r){this.props=t,this.context=e,this.refs=v,this.updater=r||_}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(m(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=b.prototype;var O=x.prototype=new w;O.constructor=x,a(O,b.prototype),O.isPureReactComponent=!0;var R={current:null},A=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,r){var a,n={},i=null,s=null;if(null!=e)for(a in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(i=""+e.key),e)A.call(e,a)&&!C.hasOwnProperty(a)&&(n[a]=e[a]);var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}if(t&&t.defaultProps)for(a in c=t.defaultProps)void 0===n[a]&&(n[a]=c[a]);return{$$typeof:o,type:t,key:i,ref:s,props:n,_owner:R.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var S=/\/+/g,T=[];function L(t,e,r,a){if(T.length){var n=T.pop();return n.result=t,n.keyPrefix=e,n.func=r,n.context=a,n.count=0,n}return{result:t,keyPrefix:e,func:r,context:a,count:0}}function D(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>T.length&&T.push(t)}function N(t,e,r,a){var n=typeof t;"undefined"!==n&&"boolean"!==n||(t=null);var s=!1;if(null===t)s=!0;else switch(n){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case o:case i:s=!0}}if(s)return r(a,t,""===e?"."+U(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=e+U(n=t[c],c);s+=N(n,l,r,a)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(n=t.next()).done;)s+=N(n=n.value,l=e+U(n,c++),r,a);else if("object"===n)throw r=""+t,Error(m(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return s}function P(t,e,r){return null==t?0:N(t,"",e,r)}function U(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function G(t,e){t.func.call(t.context,e,t.count++)}function I(t,e,r){var a=t.result,n=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?M(t,a,r,(function(t){return t})):null!=t&&(E(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,n+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(S,"$&/")+"/")+r)),a.push(t))}function M(t,e,r,a,n){var o="";null!=r&&(o=(""+r).replace(S,"$&/")+"/"),P(t,I,e=L(e,o,a,n)),D(e)}var F={current:null};function j(){var t=F.current;if(null===t)throw Error(m(321));return t}var W={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:R,IsSomeRendererActing:{current:!1},assign:a};e.Children={map:function(t,e,r){if(null==t)return t;var a=[];return M(t,a,null,e,r),a},forEach:function(t,e,r){if(null==t)return t;P(t,G,e=L(null,null,e,r)),D(e)},count:function(t){return P(t,(function(){return null}),null)},toArray:function(t){var e=[];return M(t,e,null,(function(t){return t})),e},only:function(t){if(!E(t))throw Error(m(143));return t}},e.Component=b,e.Fragment=s,e.Profiler=l,e.PureComponent=x,e.StrictMode=c,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error(m(267,t));var n=a({},t.props),i=t.key,s=t.ref,c=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,c=R.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)A.call(e,u)&&!C.hasOwnProperty(u)&&(n[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)n.children=r;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:o,type:t.type,key:i,ref:s,props:n,_owner:c}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:d,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:f,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return j().useCallback(t,e)},e.useContext=function(t,e){return j().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return j().useEffect(t,e)},e.useImperativeHandle=function(t,e,r){return j().useImperativeHandle(t,e,r)},e.useLayoutEffect=function(t,e){return j().useLayoutEffect(t,e)},e.useMemo=function(t,e){return j().useMemo(t,e)},e.useReducer=function(t,e,r){return j().useReducer(t,e,r)},e.useRef=function(t){return j().useRef(t)},e.useState=function(t){return j().useState(t)},e.version="16.14.0"},1702:(t,e,r)=>{var a=r(842),n=r(1049);t.exports=function t(e,r,o,i,s){var c=-1,l=e.length;for(o||(o=n),s||(s=[]);++c<l;){var u=e[c];r>0&&o(u)?r>1?t(u,r-1,o,i,s):a(s,u):i||(s[s.length]=u)}return s}},1721:(t,e,r)=>{var a=r(913),n=r(2022),o=r(4553);t.exports=function(t,e,r,i,s,c){var l=1&r,u=t.length,h=e.length;if(u!=h&&!(l&&h>u))return!1;var d=c.get(t),p=c.get(e);if(d&&p)return d==e&&p==t;var f=-1,g=!0,y=2&r?new a:void 0;for(c.set(t,e),c.set(e,t);++f<u;){var m=t[f],_=e[f];if(i)var v=l?i(_,m,f,e,t,c):i(m,_,f,t,e,c);if(void 0!==v){if(v)continue;g=!1;break}if(y){if(!n(e,(function(t,e){if(!o(y,e)&&(m===t||s(m,t,r,i,c)))return y.push(e)}))){g=!1;break}}else if(m!==_&&!s(m,_,r,i,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},1790:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.Threshold=function(t){var e,r=255*this.threshold(),a=t.data,n=a.length;for(e=0;e<n;e+=1)a[e]=a[e]<r?0:255},a.Factory.addGetterSetter(n.Node,"threshold",.5,o.getNumberValidator(),a.Factory.afterSetFilter)},1874:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(4222),i=r(1091),s=r(8498),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._validateAdd=function(t){"Shape"!==t.getType()&&n.Util.throw("You may only add shapes to a fast layer.")},e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this._checkSmooth()},e.prototype.hitGraphEnabled=function(){return!1},e.prototype.drawScene=function(t){var e=this.getLayer(),r=t||e&&e.getCanvas();return this.clearBeforeDraw()&&r.getContext().clear(),o.Container.prototype.drawScene.call(this,r),this},e.prototype.draw=function(){return this.drawScene(),this},e}(i.BaseLayer);e.FastLayer=c,c.prototype.nodeType="FastLayer",s._registerNode(c),n.Collection.mapMethods(c)},1890:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(8498),i=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],s=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),o.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.fillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){this.fillShape(t),this.strokeShape(t)},t.prototype.getTrace=function(t){var e,r,a,o,i=this.traceArr,s=i.length,c="";for(e=0;e<s;e++)(a=(r=i[e]).method)?(o=r.args,c+=a,t?c+="()":n.Util._isArray(o[0])?c+="(["+o.join(",")+"])":c+="("+o.join(",")+")"):(c+=r.property,t||(c+="="+r.val)),c+=";";return c},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,r,a,n,o){this._context.arc(t,e,r,a,n,o)},t.prototype.arcTo=function(t,e,r,a,n){this._context.arcTo(t,e,r,a,n)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,r,a,n,o){this._context.bezierCurveTo(t,e,r,a,n,o)},t.prototype.clearRect=function(t,e,r,a){this._context.clearRect(t,e,r,a)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var r=arguments;return 2===r.length?this._context.createImageData(t,e):1===r.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,r,a){return this._context.createLinearGradient(t,e,r,a)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,r,a,n,o){return this._context.createRadialGradient(t,e,r,a,n,o)},t.prototype.drawImage=function(t,e,r,a,n,o,i,s,c){var l=arguments,u=this._context;3===l.length?u.drawImage(t,e,r):5===l.length?u.drawImage(t,e,r,a,n):9===l.length&&u.drawImage(t,e,r,a,n,o,i,s,c)},t.prototype.ellipse=function(t,e,r,a,n,o,i,s){this._context.ellipse(t,e,r,a,n,o,i,s)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,r,a){this._context.fillRect(t,e,r,a)},t.prototype.strokeRect=function(t,e,r,a){this._context.strokeRect(t,e,r,a)},t.prototype.fillText=function(t,e,r){this._context.fillText(t,e,r)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,r,a){return this._context.getImageData(t,e,r,a)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,r,a){this._context.rect(t,e,r,a)},t.prototype.putImageData=function(t,e,r){this._context.putImageData(t,e,r)},t.prototype.quadraticCurveTo=function(t,e,r,a){this._context.quadraticCurveTo(t,e,r,a)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,r,a,n,o){this._context.setTransform(t,e,r,a,n,o)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,r,a){this._context.strokeText(t,e,r,a)},t.prototype.transform=function(t,e,r,a,n,o){this._context.transform(t,e,r,a,n,o)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,r=this,a=i.length,o=n.Util._simplifyArray,s=this.setAttr,c=function(t){var a,n=r[t];r[t]=function(){return e=o(Array.prototype.slice.call(arguments,0)),a=n.apply(r,arguments),r._trace({method:t,args:e}),a}};for(t=0;t<a;t++)c(i[t]);r.setAttr=function(){s.apply(r,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),r._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=s,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(s.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),r=t.getFillPatternY(),a=o.Konva.getAngle(t.getFillPatternRotation()),n=t.getFillPatternOffsetX(),i=t.getFillPatternOffsetY(),s=t.getFillPatternScaleX(),c=t.getFillPatternScaleY();(e||r)&&this.translate(e||0,r||0),a&&this.rotate(a),(s||c)&&this.scale(s,c),(n||i)&&this.translate(-1*n,-1*i),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),r=t.getFillPriority();if(e&&"color"===r)this._fillColor(t);else{var a=t.getFillPatternImage();if(a&&"pattern"===r)this._fillPattern(t);else{var n=t.getFillLinearGradientColorStops();if(n&&"linear-gradient"===r)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===r?this._fillRadialGradient(t):e?this._fillColor(t):a?this._fillPattern(t):n?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),a=t.getStrokeLinearGradientColorStops(),n=this.createLinearGradient(e.x,e.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)n.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",n)}},e.prototype._stroke=function(t){var e=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}},e.prototype._applyShadow=function(t){var e=n.Util,r=e.get(t.getShadowRGBA(),"black"),a=e.get(t.getShadowBlur(),5),o=e.get(t.getShadowOffset(),{x:0,y:0}),i=t.getAbsoluteScale(),s=this.canvas.getPixelRatio(),c=i.x*s,l=i.y*s;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(l))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*l)},e}(s);e.SceneContext=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);var a=t.hitStrokeWidth(),n="auto"===a?t.strokeWidth():a;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(s);e.HitContext=l},1904:(t,e,r)=>{var a=r(5387),n=r(6342),o=r(3531),i=r(351),s=r(4788),c=r(9811);t.exports=function(t,e,r){for(var l=-1,u=(e=a(e,t)).length,h=!1;++l<u;){var d=c(e[l]);if(!(h=null!=t&&r(t,d)))break;t=t[d]}return h||++l!=u?h:!!(u=null==t?0:t.length)&&s(u)&&i(d,u)&&(o(t)||n(t))}},1910:(t,e,r)=>{var a=r(454),n=r(2925),o=r(3531),i=r(1516),s=r(9616),c=r(9811),l=r(2124);t.exports=function(t){return o(t)?a(t,c):i(t)?[t]:n(s(l(t)))}},1939:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(8498),n=a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return(new Date).getTime()},o=function(){function t(e,r){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=e,this.setLayers(r)}return t.prototype.setLayers=function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,r=this.layers,a=r.length;for(e=0;e<a;e++)if(r[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,r=t.animations,a=r.length;for(e=0;e<a;e++)if(r[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,r=t.id,a=this.animations,n=a.length;for(e=0;e<n;e++)if(a[e].id===r){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,r,a,o,i,s,c,l={},u=this.animations;for(a=0;a<u.length;a++)if(e=(t=u[a]).layers,r=t.func,t._updateFrameObject(n()),i=e.length,!r||!1!==r.call(t,t.frame))for(o=0;o<i;o++)void 0!==(s=e[o])._id&&(l[s._id]=s);for(c in l)l.hasOwnProperty(c)&&l[c].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}();e.Animation=o},1949:(t,e,r)=>{var a=r(842),n=r(3531);t.exports=function(t,e,r){var o=e(t);return n(t)?o:a(o,r(t))}},1996:(t,e,r)=>{var a=r(9545),n=r(1503);t.exports=function(t,e){return t&&a(e,n(e),t)}},2009:(t,e,r)=>{var a=r(7396),n=r(4418),o=r(5306),i=r(4673),s=r(6409);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,t.exports=c},2010:t=>{t.exports=function(t,e){for(var r=-1,a=Array(t);++r<t;)a[r]=e(r);return a}},2022:t=>{t.exports=function(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(e(t[r],r,t))return!0;return!1}},2029:(t,e,r)=>{"use strict";t.exports=r(3191)},2053:t=>{t.exports=function(t,e){for(var r=t.length,a=0;r--;)t[r]===e&&++a;return a}},2059:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(1939),c=r(9614),l=r(8498),u=function(t){function e(e){var r=t.call(this,e)||this;return r._updated=!0,r.anim=new s.Animation((function(){var t=r._updated;return r._updated=!1,t})),r.on("animationChange.konva",(function(){this.frameIndex(0)})),r.on("frameIndexChange.konva",(function(){this._updated=!0})),r.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),r}return a(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),r=this.frameIndex(),a=4*r,n=this.animations()[e],o=this.frameOffsets(),i=n[a+0],s=n[a+1],c=n[a+2],l=n[a+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,c,l),t.closePath(),t.fillStrokeShape(this)),u)if(o){var h=o[e],d=2*r;t.drawImage(u,i,s,c,l,h[d+0],h[d+1],c,l)}else t.drawImage(u,i,s,c,l,0,0,c,l)},e.prototype._hitFunc=function(t){var e=this.animation(),r=this.frameIndex(),a=4*r,n=this.animations()[e],o=this.frameOffsets(),i=n[a+2],s=n[a+3];if(t.beginPath(),o){var c=o[e],l=2*r;t.rect(c[l+0],c[l+1],i,s)}else t.rect(0,0,i,s);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},e.prototype._setInterval=function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)},e}(i.Shape);e.Sprite=u,u.prototype.className="Sprite",l._registerNode(u),o.Factory.addGetterSetter(u,"animation"),o.Factory.addGetterSetter(u,"animations"),o.Factory.addGetterSetter(u,"frameOffsets"),o.Factory.addGetterSetter(u,"image"),o.Factory.addGetterSetter(u,"frameIndex",0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"frameRate",17,c.getNumberValidator()),o.Factory.backCompat(u,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),n.Collection.mapMethods(u)},2091:(t,e,r)=>{var a=r(8106);t.exports=function(t){var e=new t.constructor(t.byteLength);return new a(e).set(new a(t)),e}},2092:(t,e,r)=>{var a=r(3884),n=r(4916);t.exports=function(t){return n(t)&&"[object Set]"==a(t)}},2110:(t,e,r)=>{var a=r(7255),n=function(){var t=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!n&&n in t}},2124:(t,e,r)=>{var a=r(1178);t.exports=function(t){return null==t?"":a(t)}},2134:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=function(t){var e,r,a=t.data,n=a.length;for(e=0;e<n;e+=4)r=.34*a[e]+.5*a[e+1]+.16*a[e+2],a[e]=r,a[e+1]=r,a[e+2]=r}},2181:(t,e,r)=>{var a=r(6003),n=r(9470),o=n((function(t,e){return a(t,256,void 0,void 0,void 0,e)}));t.exports=o},2207:t=>{t.exports=function(t){return this.__data__.get(t)}},2255:(t,e,r)=>{"use strict";var a=r(6723);e.__esModule=!0,e.default=void 0;var n,o=a(r(9316)),i="clearTimeout",s=function(t){var e=(new Date).getTime(),r=Math.max(0,16-(e-l)),a=setTimeout(t,r);return l=e,a},c=function(t,e){return t+(t?e[0].toUpperCase()+e.substr(1):e)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(t){var e=c(t,"request");if(e in window)return i=c(t,"cancel"),s=function(t){return window[e](t)}}));var l=(new Date).getTime();(n=function(t){return s(t)}).cancel=function(t){window[i]&&"function"===typeof window[i]&&window[i](t)};var u=n;e.default=u,t.exports=e.default},2261:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(8498),n=function(){function t(){}return t.toCollection=function(e){var r,a=new t,n=e.length;for(r=0;r<n;r++)a.push(e[r]);return a},t._mapMethod=function(e){t.prototype[e]=function(){var t,r=this.length,a=[].slice.call(arguments);for(t=0;t<r;t++)this[t][e].apply(this[t],a);return this}},t.mapMethods=function(e){var r=e.prototype;for(var a in r)t._mapMethod(a)},t}();e.Collection=n,n.prototype=[],n.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},n.prototype.toArray=function(){var t,e=[],r=this.length;for(t=0;t<r;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.copy=function(){return new t(this.m)},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),a=this.m[0]*e+this.m[2]*r,n=this.m[1]*e+this.m[3]*r,o=this.m[0]*-r+this.m[2]*e,i=this.m[1]*-r+this.m[3]*e;return this.m[0]=a,this.m[1]=n,this.m[2]=o,this.m[3]=i,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var r=this.m[0]+this.m[2]*e,a=this.m[1]+this.m[3]*e,n=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=a,this.m[2]=n,this.m[3]=o,this},t.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],n=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],i=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=r,this.m[2]=a,this.m[3]=n,this.m[4]=o,this.m[5]=i,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,r=-this.m[1]*t,a=-this.m[2]*t,n=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),i=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=r,this.m[2]=a,this.m[3]=n,this.m[4]=o,this.m[5]=i,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var r=this.m[0],a=this.m[1],n=this.m[2],o=this.m[3],i=this.m[4],s=(r*(e-this.m[5])-a*(t-i))/(r*o-a*n),c=(t-i-n*s)/r;return this.translate(c,s)},t}();e.Transform=o;var i=Math.PI/180,s=180/Math.PI,c="Konva error: ",l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},u=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,h=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!==typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t?0:t>0?1:-1},requestAnimFrame:function(t){h.push(t),1===h.length&&requestAnimationFrame((function(){var t=h;h=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var r,a,n=[],o=t.length,i=e.Util;for(r=0;r<o;r++)a=t[r],i._isNumber(a)?a=Math.round(1e3*a)/1e3:i._isString(a)||(a=a.toString()),n.push(a);return n},_urlToImage:function(t,e){var r=new a.glob.Image;r.onload=function(){e(r)},r.src=t},_rgbToHex:function(t,e,r){return((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()|0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in l?{r:(e=l[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=u.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=l[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=(e[0],e.slice(1)),a=Number(r[0])/360,n=Number(r[1])/100,o=Number(r[2])/100,i=void 0,s=void 0,c=void 0;if(0===n)return c=255*o,{r:Math.round(c),g:Math.round(c),b:Math.round(c),a:1};for(var l=2*o-(i=o<.5?o*(1+n):o+n-o*n),u=[0,0,0],h=0;h<3;h++)(s=a+1/3*-(h-1))<0&&s++,s>1&&s--,c=6*s<1?l+6*(i-l)*s:2*s<1?i:3*s<2?l+(i-l)*(2/3-s)*6:l,u[h]=255*c;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var r in t)this._isPlainObject(t[r])?e[r]=this.cloneObject(t[r]):this._isArray(t[r])?e[r]=this.cloneArray(t[r]):e[r]=t[r];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*i},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(c+t)},error:function(t){console.error(c+t)},warn:function(t){a.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function r(){this.constructor=t}r.prototype=e.prototype;var a=t.prototype;for(var n in t.prototype=new r,a)a.hasOwnProperty(n)&&(t.prototype[n]=a[n]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,r,a,n,o,i){var s=Math.sqrt(Math.pow(r-t,2)+Math.pow(a-e,2)),c=Math.sqrt(Math.pow(n-r,2)+Math.pow(o-a,2)),l=i*s/(s+c),u=i*c/(s+c);return[r-l*(n-t),a-l*(o-e),r+u*(n-t),a+u*(o-e)]},_expandPoints:function(t,r){var a,n,o=t.length,i=[];for(a=2;a<o-2;a+=2)n=e.Util._getControlPoints(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],r),i.push(n[0]),i.push(n[1]),i.push(t[a]),i.push(t[a+1]),i.push(n[2]),i.push(n[3]);return i},each:function(t,e){for(var r in t)e(r,t[r])},_inRange:function(t,e,r){return e<=t&&t<r},_getProjectionToSegment:function(t,e,r,a,n,o){var i,s,c,l=(t-r)*(t-r)+(e-a)*(e-a);if(0==l)i=t,s=e,c=(n-r)*(n-r)+(o-a)*(o-a);else{var u=((n-t)*(r-t)+(o-e)*(a-e))/l;u<0?(i=t,s=e,c=(t-n)*(t-n)+(e-o)*(e-o)):u>1?(i=r,s=a,c=(r-n)*(r-n)+(a-o)*(a-o)):c=((i=t+u*(r-t))-n)*(i-n)+((s=e+u*(a-e))-o)*(s-o)}return[i,s,c]},_getProjectionToLine:function(t,r,a){var n=e.Util.cloneObject(t),o=Number.MAX_VALUE;return r.forEach((function(i,s){if(a||s!==r.length-1){var c=r[(s+1)%r.length],l=e.Util._getProjectionToSegment(i.x,i.y,c.x,c.y,t.x,t.y),u=l[0],h=l[1],d=l[2];d<o&&(n.x=u,n.y=h,o=d)}})),n},_prepareArrayForTween:function(t,r,a){var n,o=[],i=[];if(t.length>r.length){var s=r;r=t,t=s}for(n=0;n<t.length;n+=2)o.push({x:t[n],y:t[n+1]});for(n=0;n<r.length;n+=2)i.push({x:r[n],y:r[n+1]});var c=[];return i.forEach((function(t){var r=e.Util._getProjectionToLine(t,o,a);c.push(r.x),c.push(r.y)})),c},_prepareToStringify:function(t){var r;for(var a in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(a)&&t[a]&&"object"==typeof t[a])if(r=Object.getOwnPropertyDescriptor(t,a),t[a].visitedByCircularReferenceRemoval||e.Util._isElement(t[a])){if(!r.configurable)return null;delete t[a]}else if(null===e.Util._prepareToStringify(t[a])){if(!r.configurable)return null;delete t[a]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var r in e)t[r]=e[r];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},2311:(t,e)=>{"use strict";var r,a,n,o,i;if("undefined"===typeof window||"function"!==typeof MessageChannel){var s=null,c=null,l=function(){if(null!==s)try{var t=e.unstable_now();s(!0,t),s=null}catch(r){throw setTimeout(l,0),r}},u=Date.now();e.unstable_now=function(){return Date.now()-u},r=function(t){null!==s?setTimeout(r,0,t):(s=t,setTimeout(l,0))},a=function(t,e){c=setTimeout(t,e)},n=function(){clearTimeout(c)},o=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,p=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)e.unstable_now=function(){return h.now()};else{var y=d.now();e.unstable_now=function(){return d.now()-y}}var m=!1,_=null,v=-1,b=5,w=0;o=function(){return e.unstable_now()>=w},i=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,O=x.port2;x.port1.onmessage=function(){if(null!==_){var t=e.unstable_now();w=t+b;try{_(!0,t)?O.postMessage(null):(m=!1,_=null)}catch(r){throw O.postMessage(null),r}}else m=!1},r=function(t){_=t,m||(m=!0,O.postMessage(null))},a=function(t,r){v=p((function(){t(e.unstable_now())}),r)},n=function(){f(v),v=-1}}function R(t,e){var r=t.length;t.push(e);t:for(;;){var a=r-1>>>1,n=t[a];if(!(void 0!==n&&0<k(n,e)))break t;t[a]=e,t[r]=n,r=a}}function A(t){return void 0===(t=t[0])?null:t}function C(t){var e=t[0];if(void 0!==e){var r=t.pop();if(r!==e){t[0]=r;t:for(var a=0,n=t.length;a<n;){var o=2*(a+1)-1,i=t[o],s=o+1,c=t[s];if(void 0!==i&&0>k(i,r))void 0!==c&&0>k(c,i)?(t[a]=c,t[s]=r,a=s):(t[a]=i,t[o]=r,a=o);else{if(!(void 0!==c&&0>k(c,r)))break t;t[a]=c,t[s]=r,a=s}}}return e}return null}function k(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}var E=[],S=[],T=1,L=null,D=3,N=!1,P=!1,U=!1;function G(t){for(var e=A(S);null!==e;){if(null===e.callback)C(S);else{if(!(e.startTime<=t))break;C(S),e.sortIndex=e.expirationTime,R(E,e)}e=A(S)}}function I(t){if(U=!1,G(t),!P)if(null!==A(E))P=!0,r(M);else{var e=A(S);null!==e&&a(I,e.startTime-t)}}function M(t,r){P=!1,U&&(U=!1,n()),N=!0;var i=D;try{for(G(r),L=A(E);null!==L&&(!(L.expirationTime>r)||t&&!o());){var s=L.callback;if(null!==s){L.callback=null,D=L.priorityLevel;var c=s(L.expirationTime<=r);r=e.unstable_now(),"function"===typeof c?L.callback=c:L===A(E)&&C(E),G(r)}else C(E);L=A(E)}if(null!==L)var l=!0;else{var u=A(S);null!==u&&a(I,u.startTime-r),l=!1}return l}finally{L=null,D=i,N=!1}}function F(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var j=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){P||N||(P=!0,r(M))},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return A(E)},e.unstable_next=function(t){switch(D){case 1:case 2:case 3:var e=3;break;default:e=D}var r=D;D=e;try{return t()}finally{D=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=j,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=D;D=t;try{return e()}finally{D=r}},e.unstable_scheduleCallback=function(t,o,i){var s=e.unstable_now();if("object"===typeof i&&null!==i){var c=i.delay;c="number"===typeof c&&0<c?s+c:s,i="number"===typeof i.timeout?i.timeout:F(t)}else i=F(t),c=s;return t={id:T++,callback:o,priorityLevel:t,startTime:c,expirationTime:i=c+i,sortIndex:-1},c>s?(t.sortIndex=c,R(S,t),null===A(E)&&t===A(S)&&(U?n():U=!0,a(I,c-s))):(t.sortIndex=i,R(E,t),P||N||(P=!0,r(M))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();G(t);var r=A(E);return r!==L&&null!==L&&null!==r&&null!==r.callback&&r.startTime<=t&&r.expirationTime<L.expirationTime||o()},e.unstable_wrapCallback=function(t){var e=D;return function(){var r=D;D=e;try{return t.apply(this,arguments)}finally{D=r}}}},2314:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},2356:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var a=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],i=0,s=o.length;i<s;i++,n++)a[n]=o[i];return a};Object.defineProperty(e,"__esModule",{value:!0});var o=r(2261),i=r(3887),s=r(4528),c=r(9614),l=r(8498),u=function(t){function e(e){var r=t.call(this,e)||this;return r.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),r}return a(e,t),e.prototype._sceneFunc=function(t){var e,r,a,n=this.points(),o=n.length,i=this.tension(),s=this.closed(),c=this.bezier();if(o){if(t.beginPath(),t.moveTo(n[0],n[1]),0!==i&&o>4){for(r=(e=this.getTensionPoints()).length,a=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);a<r-2;)t.bezierCurveTo(e[a++],e[a++],e[a++],e[a++],e[a++],e[a++]);s||t.quadraticCurveTo(e[r-2],e[r-1],n[o-2],n[o-1])}else if(c)for(a=2;a<o;)t.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);else for(a=2;a<o;a+=2)t.lineTo(n[a],n[a+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():o.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,r=this.tension(),a=o.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],r),n=o.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],r),i=o.Util._expandPoints(t,r);return[a[2],a[3]].concat(i).concat([n[0],n[1],t[e-2],t[e-1],n[2],n[3],a[0],a[1],t[0],t[1]])},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,r,a=(t=0!==this.tension()?n([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):this.points())[0],o=t[0],i=t[1],s=t[1],c=0;c<t.length/2;c++)e=t[2*c],r=t[2*c+1],a=Math.min(a,e),o=Math.max(o,e),i=Math.min(i,r),s=Math.max(s,r);return{x:a,y:i,width:o-a,height:s-i}},e}(s.Shape);e.Line=u,u.prototype.className="Line",u.prototype._attrsAffectingSize=["points","bezier","tension"],l._registerNode(u),i.Factory.addGetterSetter(u,"closed",!1),i.Factory.addGetterSetter(u,"bezier",!1),i.Factory.addGetterSetter(u,"tension",0,c.getNumberValidator()),i.Factory.addGetterSetter(u,"points",[],c.getNumberArrayValidator()),o.Collection.mapMethods(u)},2359:(t,e,r)=>{"use strict";e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=l(r(1561)),o=l(r(9358)),i=l(r(9120)),s=l(r(6785)),c=r(5010);function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}c.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,c.transitionTimeout)("Appear"),(0,c.transitionTimeout)("Enter"),(0,c.transitionTimeout)("Leave");var h=function(t){function e(){var r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=a=u(this,t.call.apply(t,[this].concat(i))),a._wrapChild=function(t){return n.default.createElement(s.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},t)},u(a,r)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){return n.default.createElement(i.default,a({},this.props,{childFactory:this._wrapChild}))},e}(n.default.Component);h.displayName="CSSTransitionGroup",h.propTypes={},h.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},e.default=h,t.exports=e.default},2367:(t,e,r)=>{var a=r(3326),n=r(3350),o=r(4976),i="__lodash_placeholder__",s=128,c=Math.min;t.exports=function(t,e){var r=t[1],l=e[1],u=r|l,h=u<131,d=l==s&&8==r||l==s&&256==r&&t[7].length<=e[8]||384==l&&e[7].length<=e[8]&&8==r;if(!h&&!d)return t;1&l&&(t[2]=e[2],u|=1&r?0:4);var p=e[3];if(p){var f=t[3];t[3]=f?a(f,p,e[4]):p,t[4]=f?o(t[3],i):e[4]}return(p=e[5])&&(f=t[5],t[5]=f?n(f,p,e[6]):p,t[6]=f?o(t[5],i):e[6]),(p=e[7])&&(t[7]=p),l&s&&(t[8]=null==t[8]?e[8]:c(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=u,t}},2387:t=>{var e=/\w*$/;t.exports=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}},2388:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(8498),c=r(9614),l=r(8498),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,s.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(i.Shape);e.Wedge=u,u.prototype.className="Wedge",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],l._registerNode(u),o.Factory.addGetterSetter(u,"radius",0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"angle",0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clockwise",!1),o.Factory.backCompat(u,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),n.Collection.mapMethods(u)},2399:(t,e,r)=>{var a=r(4352),n=r(3557)(a);t.exports=n},2470:(t,e,r)=>{t=r.nmd(t);var a=r(8731),n=r(9077),o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,s=i&&i.exports===o?a.Buffer:void 0,c=(s?s.isBuffer:void 0)||n;t.exports=c},2498:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(2261),n=r(1939),o=r(3069),i=r(8498),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=0,l=["fill","stroke","shadowColor"],u=function(){function t(t,e,r,a,n,o,i){this.prop=t,this.propFunc=e,this.begin=a,this._pos=a,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=i,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=n-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time))},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),h=function(){function t(r){var o,l,h=this,d=r.node,p=d._id,f=r.easing||e.Easings.Linear,g=!!r.yoyo;o="undefined"===typeof r.duration?.3:0===r.duration?.001:r.duration,this.node=d,this._id=c++;var y=d.getLayer()||(d instanceof i.Konva.Stage?d.getLayers():null);for(l in y||a.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation((function(){h.tween.onEnterFrame()}),y),this.tween=new u(l,(function(t){h._tweenFunc(t)}),f,0,1,1e3*o,g),this._addListeners(),t.attrs[p]||(t.attrs[p]={}),t.attrs[p][this._id]||(t.attrs[p][this._id]={}),t.tweens[p]||(t.tweens[p]={}),r)void 0===s[l]&&this._addAttr(l,r[l]);this.reset(),this.onFinish=r.onFinish,this.onReset=r.onReset}return t.prototype._addAttr=function(e,r){var n,o,i,s,c,u,h,d,p=this.node,f=p._id;if((i=t.tweens[f][e])&&delete t.attrs[f][i][e],n=p.getAttr(e),a.Util._isArray(r))if(o=[],c=Math.max(r.length,n.length),"points"===e&&r.length!==n.length&&(r.length>n.length?(h=n,n=a.Util._prepareArrayForTween(n,r,p.closed())):(u=r,r=a.Util._prepareArrayForTween(r,n,p.closed()))),0===e.indexOf("fill"))for(s=0;s<c;s++)if(s%2===0)o.push(r[s]-n[s]);else{var g=a.Util.colorToRGBA(n[s]);d=a.Util.colorToRGBA(r[s]),n[s]=g,o.push({r:d.r-g.r,g:d.g-g.g,b:d.b-g.b,a:d.a-g.a})}else for(s=0;s<c;s++)o.push(r[s]-n[s]);else-1!==l.indexOf(e)?(n=a.Util.colorToRGBA(n),o={r:(d=a.Util.colorToRGBA(r)).r-n.r,g:d.g-n.g,b:d.b-n.b,a:d.a-n.a}):o=r-n;t.attrs[f][this._id][e]={start:n,diff:o,end:r,trueEnd:u,trueStart:h},t.tweens[f][e]=this._id},t.prototype._tweenFunc=function(e){var r,n,o,i,s,c,u,h,d=this.node,p=t.attrs[d._id][this._id];for(r in p){if(o=(n=p[r]).start,i=n.diff,h=n.end,a.Util._isArray(o))if(s=[],u=Math.max(o.length,h.length),0===r.indexOf("fill"))for(c=0;c<u;c++)c%2===0?s.push((o[c]||0)+i[c]*e):s.push("rgba("+Math.round(o[c].r+i[c].r*e)+","+Math.round(o[c].g+i[c].g*e)+","+Math.round(o[c].b+i[c].b*e)+","+(o[c].a+i[c].a*e)+")");else for(c=0;c<u;c++)s.push((o[c]||0)+i[c]*e);else s=-1!==l.indexOf(r)?"rgba("+Math.round(o.r+i.r*e)+","+Math.round(o.g+i.g*e)+","+Math.round(o.b+i.b*e)+","+(o.a+i.a*e)+")":o+i*e;d.setAttr(r,s)}},t.prototype._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var r=e.node,a=t.attrs[r._id][e._id];a.points&&a.points.trueEnd&&r.setAttr("points",a.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var r=e.node,a=t.attrs[r._id][e._id];a.points&&a.points.trueStart&&r.points(a.points.trueStart),e.onReset&&e.onReset()}},t.prototype.play=function(){return this.tween.play(),this},t.prototype.reverse=function(){return this.tween.reverse(),this},t.prototype.reset=function(){return this.tween.reset(),this},t.prototype.seek=function(t){return this.tween.seek(1e3*t),this},t.prototype.pause=function(){return this.tween.pause(),this},t.prototype.finish=function(){return this.tween.finish(),this},t.prototype.destroy=function(){var e,r=this.node._id,a=this._id,n=t.tweens[r];for(e in this.pause(),n)delete t.tweens[r][e];delete t.attrs[r][a]},t.attrs={},t.tweens={},t}();e.Tween=h,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new h(t).play()},e.Easings={BackEaseIn:function(t,e,r,a){var n=1.70158;return r*(t/=a)*t*((n+1)*t-n)+e},BackEaseOut:function(t,e,r,a){var n=1.70158;return r*((t=t/a-1)*t*((n+1)*t+n)+1)+e},BackEaseInOut:function(t,e,r,a){var n=1.70158;return(t/=a/2)<1?r/2*(t*t*((1+(n*=1.525))*t-n))+e:r/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},ElasticEaseIn:function(t,e,r,a,n,o){var i=0;return 0===t?e:1===(t/=a)?e+r:(o||(o=.3*a),!n||n<Math.abs(r)?(n=r,i=o/4):i=o/(2*Math.PI)*Math.asin(r/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*a-i)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,r,a,n,o){var i=0;return 0===t?e:1===(t/=a)?e+r:(o||(o=.3*a),!n||n<Math.abs(r)?(n=r,i=o/4):i=o/(2*Math.PI)*Math.asin(r/n),n*Math.pow(2,-10*t)*Math.sin((t*a-i)*(2*Math.PI)/o)+r+e)},ElasticEaseInOut:function(t,e,r,a,n,o){var i=0;return 0===t?e:2===(t/=a/2)?e+r:(o||(o=a*(.3*1.5)),!n||n<Math.abs(r)?(n=r,i=o/4):i=o/(2*Math.PI)*Math.asin(r/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*a-i)*(2*Math.PI)/o)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*a-i)*(2*Math.PI)/o)*.5+r+e)},BounceEaseOut:function(t,e,r,a){return(t/=a)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,r,a,n){return a-e.Easings.BounceEaseOut(n-t,0,a,n)+r},BounceEaseInOut:function(t,r,a,n){return t<n/2?.5*e.Easings.BounceEaseIn(2*t,0,a,n)+r:.5*e.Easings.BounceEaseOut(2*t-n,0,a,n)+.5*a+r},EaseIn:function(t,e,r,a){return r*(t/=a)*t+e},EaseOut:function(t,e,r,a){return-r*(t/=a)*(t-2)+e},EaseInOut:function(t,e,r,a){return(t/=a/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,r,a){return r*(t/=a)*t*t*t*t+e},StrongEaseOut:function(t,e,r,a){return r*((t=t/a-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,r,a){return(t/=a/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,r,a){return r*t/a+e}}},2528:(t,e,r)=>{var a=r(5034),n=r(35),o=r(9795),i=r(3531),s=r(4916),c=r(8819),l=Object.prototype.hasOwnProperty;function u(t){if(s(t)&&!i(t)&&!(t instanceof a)){if(t instanceof n)return t;if(l.call(t,"__wrapped__"))return c(t)}return new n(t)}u.prototype=o.prototype,u.prototype.constructor=u,t.exports=u},2557:t=>{t.exports=function(t,e,r){for(var a=r-1,n=t.length;++a<n;)if(t[a]===e)return a;return-1}},2613:(t,e,r)=>{var a=r(7670)("flow",r(4164));a.placeholder=r(6912),t.exports=a},2732:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(8498),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),r=this.width(),a=this.height();if(t.beginPath(),e){var n=0,o=0,i=0,s=0;"number"===typeof e?n=o=i=s=Math.min(e,r/2,a/2):(n=Math.min(e[0],r/2,a/2),o=Math.min(e[1],r/2,a/2),s=Math.min(e[2],r/2,a/2),i=Math.min(e[3],r/2,a/2)),t.moveTo(n,0),t.lineTo(r-o,0),t.arc(r-o,o,o,3*Math.PI/2,0,!1),t.lineTo(r,a-s),t.arc(r-s,a-s,s,0,Math.PI/2,!1),t.lineTo(i,a),t.arc(i,a-i,i,Math.PI/2,Math.PI,!1),t.lineTo(0,n),t.arc(n,n,n,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,r,a);t.closePath(),t.fillStrokeShape(this)},e}(i.Shape);e.Rect=c,c.prototype.className="Rect",s._registerNode(c),o.Factory.addGetterSetter(c,"cornerRadius",0),n.Collection.mapMethods(c)},2799:t=>{t.exports=function(){for(var t=arguments.length,e=[],r=0;r<t;r++)e[r]=arguments[r];if(0!==(e=e.filter((function(t){return null!=t}))).length)return 1===e.length?e[0]:e.reduce((function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}))}},2852:(t,e,r)=>{var a=r(2856)(Object,"create");t.exports=a},2856:(t,e,r)=>{var a=r(785),n=r(7290);t.exports=function(t,e){var r=n(t,e);return a(r)?r:void 0}},2871:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(3069),s=r(4528),c=r(2732),l=r(9338),u=r(8498),h=r(9614),d=r(8498),p="tr-konva",f=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+"."+p})).join(" "),g="nodeRect",y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map((function(t){return t+"."+p})).join(" "),m={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},_="ontouchstart"in u.Konva._global;var v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],b=function(t){function e(e){var r=t.call(this,e)||this;return r._transforming=!1,r._createElements(),r._handleMouseMove=r._handleMouseMove.bind(r),r._handleMouseUp=r._handleMouseUp.bind(r),r.update=r.update.bind(r),r.on(f,r.update),r.getNode()&&r.update(),r}return a(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){var e=this;this._node&&this.detach(),this._node=t,this._resetTransformCache();var r=t._attrsAffectingSize.map((function(t){return t+"Change."+p})).join(" "),a=function(){e._resetTransformCache(),e._transforming||e.update()};return t.on(r,a),t.on(y,a),t.on("xChange."+p+" yChange."+p,(function(){return e._resetTransformCache()})),!!this.findOne(".top-left")&&this.update(),this},e.prototype.getNode=function(){return this._node},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this.getNode()&&(this.getNode().off("."+p),this._node=void 0),this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache(g),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache(g,this.__getNodeRect)},e.prototype.__getNodeRect=function(){var t=this.getNode();if(!t)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};t.parent&&this.parent&&t.parent!==this.parent&&n.Util.warn("Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.");var e=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=u.Konva.getAngle(t.rotation()),a=e.x*t.scaleX()-t.offsetX()*t.scaleX(),o=e.y*t.scaleY()-t.offsetY()*t.scaleY();return{x:t.x()+a*Math.cos(r)+o*Math.sin(-r),y:t.y()+o*Math.cos(r)+a*Math.sin(r),width:e.width*t.scaleX(),height:e.height*t.scaleY(),rotation:t.rotation()}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getRotation=function(){return this._getNodeRect().rotation},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),v.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,r=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:_?10:"auto"}),a=this;r.on("mousedown touchstart",(function(t){a._handleMouseDown(t)})),r.on("dragstart",(function(t){t.cancelBubble=!0})),r.on("dragmove",(function(t){t.cancelBubble=!0})),r.on("dragend",(function(t){t.cancelBubble=!0})),r.on("mouseenter",(function(){var a=u.Konva.getAngle(e.getAbsoluteRotation()),o=e.getNode().getAbsoluteScale(),i=o.y*o.x<0,s=function(t,e,r){if("rotater"===t)return"crosshair";e+=n.Util._degToRad(m[t]||0),r&&(e*=-1);var a=(n.Util._radToDeg(e)%360+360)%360;return n.Util._inRange(a,337.5,360)||n.Util._inRange(a,0,22.5)?"ns-resize":n.Util._inRange(a,22.5,67.5)?"nesw-resize":n.Util._inRange(a,67.5,112.5)?"ew-resize":n.Util._inRange(a,112.5,157.5)?"nwse-resize":n.Util._inRange(a,157.5,202.5)?"ns-resize":n.Util._inRange(a,202.5,247.5)?"nesw-resize":n.Util._inRange(a,247.5,292.5)?"ew-resize":n.Util._inRange(a,292.5,337.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+a),"pointer")}(t,a,i);r.getStage().content.style.cursor=s,e._cursorChange=!0})),r.on("mouseout",(function(){r.getStage()&&r.getParent()&&(r.getStage().content.style.cursor="",e._cursorChange=!1)})),this.add(r)},e.prototype._createBack=function(){var t=new s.Shape({name:"back",width:0,height:0,listening:!1,sceneFunc:function(t){var e=this.getParent(),r=e.padding();t.beginPath(),t.rect(-r,-r,this.width()+2*r,this.height()+2*r),t.moveTo(this.width()/2,-r),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*n.Util._sign(this.height())-r),t.fillStrokeShape(this)}});this.add(t)},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),r=e.width,a=e.height,n=Math.sqrt(Math.pow(r,2)+Math.pow(a,2));this.sin=Math.abs(a/n),this.cos=Math.abs(r/n),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0,this._fire("transformstart",{evt:t,target:this.getNode()}),this.getNode()._fire("transformstart",{evt:t,target:this.getNode()})},e.prototype._handleMouseMove=function(t){var e,r,a,o=this.findOne("."+this._movingAnchorName),i=o.getStage();i.setPointersPositions(t),o.setAbsolutePosition(i.getPointerPosition());var s=this.keepRatio()||t.shiftKey,c=this.padding();if("top-left"===this._movingAnchorName){if(s){a=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-o.x()-2*c,2)+Math.pow(this.findOne(".bottom-right").y()-o.y()-2*c,2));var l=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,h=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=a*this.cos*l,r=a*this.sin*h,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-e-2*c),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-r-2*c)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(o.y());else if("top-right"===this._movingAnchorName){if(s){a=Math.sqrt(Math.pow(o.x()-this.findOne(".bottom-left").x()-2*c,2)+Math.pow(this.findOne(".bottom-left").y()-o.y()-2*c,2));l=this.findOne(".top-right").x()<this.findOne(".top-left").x()?-1:1,h=this.findOne(".top-right").y()>this.findOne(".bottom-left").y()?-1:1;e=a*this.cos*l,r=a*this.sin*h,this.findOne(".top-right").x(e+c),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-r-2*c)}var d=o.position();this.findOne(".top-left").y(d.y),this.findOne(".bottom-right").x(d.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(o.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(o.x());else if("bottom-left"===this._movingAnchorName){if(s){a=Math.sqrt(Math.pow(this.findOne(".top-right").x()-o.x()-2*c,2)+Math.pow(o.y()-this.findOne(".top-right").y()-2*c,2));l=this.findOne(".top-right").x()<this.findOne(".bottom-left").x()?-1:1,h=this.findOne(".bottom-right").y()<this.findOne(".top-left").y()?-1:1;e=a*this.cos*l,r=a*this.sin*h,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-e-2*c),this.findOne(".bottom-left").y(r+c)}d=o.position(),this.findOne(".top-left").x(d.x),this.findOne(".bottom-right").y(d.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(o.y());else if("bottom-right"===this._movingAnchorName){if(s){a=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-c,2)+Math.pow(this.findOne(".bottom-right").y()-c,2));l=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,h=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=a*this.cos*l,r=a*this.sin*h,this.findOne(".bottom-right").x(e+c),this.findOne(".bottom-right").y(r+c)}}else if("rotater"===this._movingAnchorName){var p=this._getNodeRect();e=o.x()-p.width/2,r=-o.y()+p.height/2;var f=Math.atan2(-r,e)+Math.PI/2;p.height<0&&(f-=Math.PI);for(var g=u.Konva.getAngle(this.rotation()),y=n.Util._radToDeg(g)+n.Util._radToDeg(f),m=u.Konva.getAngle(this.getNode().rotation()),_=n.Util._degToRad(y),v=this.rotationSnaps(),b=u.Konva.getAngle(this.rotationSnapTolerance()),w=0;w<v.length;w++){var x=u.Konva.getAngle(v[w]);Math.abs(x-n.Util._degToRad(y))%(2*Math.PI)<b&&(y=n.Util._radToDeg(x),_=n.Util._degToRad(y))}var O=c,R=c;this._fitNodeInto({rotation:u.Konva.angleDeg?y:n.Util._degToRad(y),x:p.x+(p.width/2+c)*(Math.cos(m)-Math.cos(_))+(p.height/2+c)*(Math.sin(-m)-Math.sin(-_))-(O*Math.cos(g)+R*Math.sin(-g)),y:p.y+(p.height/2+c)*(Math.cos(m)-Math.cos(_))+(p.width/2+c)*(Math.sin(m)-Math.sin(_))-(R*Math.cos(g)+O*Math.sin(g)),width:p.width+2*c,height:p.height+2*c},t)}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if("rotater"!==this._movingAnchorName){if(this.centeredScaling()||t.altKey){var A=this.findOne(".top-left"),C=this.findOne(".bottom-right"),k=A.x()+c,E=A.y()+c,S=this.getWidth()-C.x()+c,T=this.getHeight()-C.y()+c;C.move({x:-k,y:-E}),A.move({x:S,y:T})}var L=this.findOne(".top-left").getAbsolutePosition(this.getParent());e=L.x,r=L.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),N=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:e+this.offsetX(),y:r+this.offsetY(),width:D,height:N},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&e.fire("transformend",{evt:t,target:e}),this._movingAnchorName=null}},e.prototype._fitNodeInto=function(t,e){var r=this.boundBoxFunc();if(r){var a=this._getNodeRect();t=r.call(this,a,t)}var n=this.getNode();void 0!==t.rotation&&this.getNode().rotation(t.rotation);var o=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=this.padding(),s=o.width?(t.width-2*i)/o.width:1,c=o.height?(t.height-2*i)/o.height:1,l=u.Konva.getAngle(n.rotation()),h=o.x*s-i-n.offsetX()*s,d=o.y*c-i-n.offsetY()*c;this.getNode().setAttrs({scaleX:s,scaleY:c,x:t.x-(h*Math.cos(l)+d*Math.sin(-l)),y:t.y-(d*Math.cos(l)+h*Math.sin(l))}),this._fire("transform",{evt:e,target:this.getNode()}),this.getNode()._fire("transform",{evt:e,target:this.getNode()}),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype.update=function(){var t=this,e=this._getNodeRect(),r=this.getNode(),a={x:1,y:1};r&&r.getParent()&&(a=r.getParent().getAbsoluteScale());var o={x:1/a.x,y:1/a.y},i=e.width,s=e.height,c=this.enabledAnchors(),l=this.resizeEnabled(),u=this.padding(),h=this.anchorSize();this.find("._anchor").each((function(e){return e.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})})),this.findOne(".top-left").setAttrs({x:-u,y:-u,scale:o,visible:l&&c.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:i/2,y:-u,scale:o,visible:l&&c.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:i+u,y:-u,scale:o,visible:l&&c.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-u,y:s/2,scale:o,visible:l&&c.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:i+u,y:s/2,scale:o,visible:l&&c.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-u,y:s+u,scale:o,visible:l&&c.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:i/2,y:s+u,scale:o,visible:l&&c.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:i+u,y:s+u,scale:o,visible:l&&c.indexOf("bottom-right")>=0});var d=-this.rotateAnchorOffset()*Math.abs(o.y);this.findOne(".rotater").setAttrs({x:i/2,y:d*n.Util._sign(s)-u,scale:o,visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:i*a.x,height:s*a.y,scale:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),l.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return i.Node.prototype.toObject.call(this)},e}(l.Group);e.Transformer=b,b.prototype.className="Transformer",d._registerNode(b),o.Factory.addGetterSetter(b,"enabledAnchors",v,(function(t){return t instanceof Array||n.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===v.indexOf(t)&&n.Util.warn("Unknown anchor name: "+t+". Available names are: "+v.join(", "))})),t||[]})),o.Factory.addGetterSetter(b,"resizeEnabled",!0),o.Factory.addGetterSetter(b,"anchorSize",10,h.getNumberValidator()),o.Factory.addGetterSetter(b,"rotateEnabled",!0),o.Factory.addGetterSetter(b,"rotationSnaps",[]),o.Factory.addGetterSetter(b,"rotateAnchorOffset",50,h.getNumberValidator()),o.Factory.addGetterSetter(b,"rotationSnapTolerance",5,h.getNumberValidator()),o.Factory.addGetterSetter(b,"borderEnabled",!0),o.Factory.addGetterSetter(b,"anchorStroke","rgb(0, 161, 255)"),o.Factory.addGetterSetter(b,"anchorStrokeWidth",1,h.getNumberValidator()),o.Factory.addGetterSetter(b,"anchorFill","white"),o.Factory.addGetterSetter(b,"anchorCornerRadius",0,h.getNumberValidator()),o.Factory.addGetterSetter(b,"borderStroke","rgb(0, 161, 255)"),o.Factory.addGetterSetter(b,"borderStrokeWidth",1,h.getNumberValidator()),o.Factory.addGetterSetter(b,"borderDash"),o.Factory.addGetterSetter(b,"keepRatio",!0),o.Factory.addGetterSetter(b,"centeredScaling",!1),o.Factory.addGetterSetter(b,"ignoreStroke",!1),o.Factory.addGetterSetter(b,"padding",0,h.getNumberValidator()),o.Factory.addGetterSetter(b,"node"),o.Factory.addGetterSetter(b,"boundBoxFunc"),o.Factory.backCompat(b,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),n.Collection.mapMethods(b)},2925:t=>{t.exports=function(t,e){var r=-1,a=t.length;for(e||(e=Array(a));++r<a;)e[r]=t[r];return e}},2954:t=>{var e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=function(t,r){var a=r.length;if(!a)return t;var n=a-1;return r[n]=(a>1?"& ":"")+r[n],r=r.join(a>2?", ":" "),t.replace(e,"{\n/* [wrapped with "+r+"] */\n")}},2962:(t,e,r)=>{var a=r(1229),n=r(4956),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!a(t))return n(t);var e=[];for(var r in Object(t))o.call(t,r)&&"constructor"!=r&&e.push(r);return e}},2969:(t,e,r)=>{var a=r(2010),n=r(6342),o=r(3531),i=r(2470),s=r(351),c=r(3293),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=o(t),u=!r&&n(t),h=!r&&!u&&i(t),d=!r&&!u&&!h&&c(t),p=r||u||h||d,f=p?a(t.length,String):[],g=f.length;for(var y in t)!e&&!l.call(t,y)||p&&("length"==y||h&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,g))||f.push(y);return f}},2979:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,a){r[++e]=[a,t]})),r}},3055:t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},3069:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(2261),n=r(3887),o=r(9685),i=r(8498),s=r(9423),c=r(9614);e.ids={},e.names={};e._removeId=function(t,r){t&&e.ids[t]===r&&delete e.ids[t]},e._addName=function(t,r){r&&(e.names[r]||(e.names[r]=[]),e.names[r].push(t))},e._removeName=function(t,r){if(t){var a=e.names[t];if(a){for(var n=0;n<a.length;n++){a[n]._id===r&&a.splice(n,1)}0===a.length&&delete e.names[t]}}};var l="absoluteOpacity",u="absoluteTransform",h="absoluteScale",d="canvas",p="listening",f="mouseenter",g="mouseleave",y="Shape",m=" ",_="stage",v="transform",b="visible",w=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m),x=["scaleXChange.konva","scaleYChange.konva"].join(m),O=new a.Collection,R=1,A=function(){function t(t){var e=this;this._id=R++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=O,this._dragEventId=null,this.setAttrs(t),this.on(w,(function(){e._clearCache(v),e._clearSelfAndDescendantCache(u)})),this.on(x,(function(){e._clearSelfAndDescendantCache(h)})),this.on("visibleChange.konva",(function(){e._clearSelfAndDescendantCache(b)})),this.on("listeningChange.konva",(function(){e._clearSelfAndDescendantCache(p)})),this.on("opacityChange.konva",(function(){e._clearSelfAndDescendantCache(l)}))}return t.prototype.hasChildren=function(){return!1},t.prototype.getChildren=function(){return O},t.prototype._clearCache=function(t){t?this._cache.delete(t):this._cache.clear()},t.prototype._getCache=function(t,e){var r=this._cache.get(t);return void 0===r&&(r=e.call(this),this._cache.set(t,r)),r},t.prototype._getCanvasCache=function(){return this._cache.get(d)},t.prototype._clearSelfAndDescendantCache=function(t){this._clearCache(t),this.isCached()||this.children&&this.children.each((function(e){e._clearSelfAndDescendantCache(t)}))},t.prototype.clearCache=function(){return this._cache.delete(d),this._clearSelfAndDescendantCache(),this},t.prototype.cache=function(t){var e=t||{},r={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(e.width||r.width),i=Math.ceil(e.height||r.height),s=e.pixelRatio,c=void 0===e.x?r.x:e.x,u=void 0===e.y?r.y:e.y,p=e.offset||0,f=e.drawBorder||!1;if(n&&i){n+=2*p,i+=2*p,c-=p,u-=p;var g=new o.SceneCanvas({pixelRatio:s,width:n,height:i}),y=new o.SceneCanvas({pixelRatio:s,width:n,height:i}),m=new o.HitCanvas({pixelRatio:1,width:n,height:i}),_=g.getContext(),v=m.getContext();return m.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(g.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),_.save(),v.save(),_.translate(-c,-u),v.translate(-c,-u),this._isUnderCache=!0,this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(h),this.drawScene(g,this,!0),this.drawHit(m,this,!0),this._isUnderCache=!1,_.restore(),v.restore(),f&&(_.save(),_.beginPath(),_.rect(0,0,n,i),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(d,{scene:g,filter:y,hit:m,x:c,y:u}),this}a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},t.prototype.isCached=function(){return this._cache.has("canvas")},t.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},t.prototype._transformedRect=function(t,e){var r,a,n,o,i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return i.forEach((function(t){var e=s.point(t);void 0===r&&(r=n=e.x,a=o=e.y),r=Math.min(r,e.x),a=Math.min(a,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y)})),{x:r,y:a,width:n-r,height:o-a}},t.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/a,r.height/a),t.restore()},t.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),r=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(r._canvas,0,0),t.restore()},t.prototype._getCachedSceneCanvas=function(){var t,e,r,n,o=this.filters(),i=this._getCanvasCache(),s=i.scene,c=i.filter,l=c.getContext();if(o){if(!this._filterUpToDate){var u=s.pixelRatio;try{for(t=o.length,l.clear(),l.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),e=l.getImageData(0,0,c.getWidth(),c.getHeight()),r=0;r<t;r++)"function"===typeof(n=o[r])?(n.call(this,e),l.putImageData(e,0,0)):a.Util.error("Filter should be type of function, but got "+typeof n+" instead. Please check correct filters")}catch(h){a.Util.error("Unable to apply filter. "+h.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return c}return s},t.prototype.on=function(t,e){if(3===arguments.length)return this._delegate.apply(this,arguments);var r,a,n,o,i=t.split(m),s=i.length;for(r=0;r<s;r++)n=(a=i[r].split("."))[0],o=a[1]||"",this.eventListeners[n]||(this.eventListeners[n]=[]),this.eventListeners[n].push({name:o,handler:e});return this},t.prototype.off=function(t,e){var r,a,n,o,i,s=(t||"").split(m),c=s.length;if(!t)for(a in this.eventListeners)this._off(a);for(r=0;r<c;r++)if(o=(n=s[r].split("."))[0],i=n[1],o)this.eventListeners[o]&&this._off(o,i,e);else for(a in this.eventListeners)this._off(a,i,e);return this},t.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},t.prototype.addEventListener=function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this},t.prototype.removeEventListener=function(t){return this.off(t),this},t.prototype._delegate=function(t,e,r){var n=this;this.on(t,(function(t){for(var o=t.target.findAncestors(e,!0,n),i=0;i<o.length;i++)(t=a.Util.cloneObject(t)).currentTarget=o[i],r.call(o[i],t)}))},t.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this},t.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(p)},t.prototype._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},t.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),r=0;r<t.length;r++){var a=t[r];e._removeName(a,this._id)}return this.remove(),this},t.prototype.getAttr=function(t){var e="get"+a.Util._capitalize(t);return a.Util._isFunction(this[e])?this[e]():this.attrs[t]},t.prototype.getAncestors=function(){for(var t=this.getParent(),e=new a.Collection;t;)e.push(t),t=t.getParent();return e},t.prototype.getAttrs=function(){return this.attrs||{}},t.prototype.setAttrs=function(t){var e,r;if(!t)return this;for(e in t)"children"!==e&&(r="set"+a.Util._capitalize(e),a.Util._isFunction(this[r])?this[r](t[e]):this._setAttr(e,t[e]));return this},t.prototype.isListening=function(){return this._getCache(p,this._isListening)},t.prototype._isListening=function(){var t=this.listening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},t.prototype.isVisible=function(){return this._getCache(b,this._isVisible)},t.prototype._isVisible=function(t){var e=this.visible(),r=this.getParent();return"inherit"===e?!r||r===t||r._isVisible(t):t&&t!==r?e&&r._isVisible(t):e},t.prototype.shouldDrawHit=function(){var t=this.getLayer();return!t&&this.isListening()&&this.isVisible()||t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()},t.prototype.show=function(){return this.visible(!0),this},t.prototype.hide=function(){return this.visible(!1),this},t.prototype.getZIndex=function(){return this.index||0},t.prototype.getAbsoluteZIndex=function(){var t,e,r,a,n=this.getDepth(),o=this,i=0;return"Stage"!==o.nodeType&&function s(c){for(t=[],e=c.length,r=0;r<e;r++)a=c[r],i++,a.nodeType!==y&&(t=t.concat(a.getChildren().toArray())),a._id===o._id&&(r=e);t.length>0&&t[0].getDepth()<=n&&s(t)}(o.getStage().getChildren()),i},t.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},t.prototype.setPosition=function(t){return this.x(t.x),this.y(t.y),this},t.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},t.prototype.getAbsolutePosition=function(t){for(var e=!1,r=this.parent;r;){if(r.isCached()){e=!0;break}r=r.parent}e&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),o=new a.Transform,i=this.offset();return o.m=n.slice(),o.translate(i.x,i.y),o.getTranslation()},t.prototype.setAbsolutePosition=function(t){var e,r=this._clearTransform();return this.attrs.x=r.x,this.attrs.y=r.y,delete r.x,delete r.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(r),this},t.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(v),this._clearSelfAndDescendantCache(u)},t.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(v),this._clearSelfAndDescendantCache(u),t},t.prototype.move=function(t){var e=t.x,r=t.y,a=this.x(),n=this.y();return void 0!==e&&(a+=e),void 0!==r&&(n+=r),this.setPosition({x:a,y:n}),this},t.prototype._eachAncestorReverse=function(t,e){var r,a,n=[],o=this.getParent();if(e&&e._id===this._id)t(this);else{for(n.unshift(this);o&&(!e||o._id!==e._id);)n.unshift(o),o=o.parent;for(r=n.length,a=0;a<r;a++)t(n[a])}},t.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},t.prototype.moveToTop=function(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},t.prototype.moveUp=function(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveDown=function(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveToBottom=function(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},t.prototype.setZIndex=function(t){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&a.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},t.prototype.getAbsoluteOpacity=function(){return this._getCache(l,this._getAbsoluteOpacity)},t.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},t.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},t.prototype.toObject=function(){var t,e,r,n,o={},i=this.getAttrs();for(t in o.attrs={},i)e=i[t],a.Util.isObject(e)&&!a.Util._isPlainObject(e)&&!a.Util._isArray(e)||(r="function"===typeof this[t]&&this[t],delete i[t],n=r?r.call(this):null,i[t]=e,n!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),a.Util._prepareToStringify(o)},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.getParent=function(){return this.parent},t.prototype.findAncestors=function(t,e,r){var a=[];e&&this._isMatch(t)&&a.push(this);for(var n=this.parent;n;){if(n===r)return a;n._isMatch(t)&&a.push(n),n=n.parent}return a},t.prototype.isAncestorOf=function(t){return!1},t.prototype.findAncestor=function(t,e,r){return this.findAncestors(t,e,r)[0]},t.prototype._isMatch=function(t){if(!t)return!1;if("function"===typeof t)return t(this);var e,r,n=t.replace(/ /g,"").split(","),o=n.length;for(e=0;e<o;e++)if(r=n[e],a.Util.isValidSelector(r)||(a.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1},t.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},t.prototype.getStage=function(){return this._getCache(_,this._getStage)},t.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},t.prototype.fire=function(t,e,r){return(e=e||{}).target=e.target||this,r?this._fireAndBubble(t,e):this._fire(t,e),this},t.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache(u,this._getAbsoluteTransform)},t.prototype._getAbsoluteTransform=function(t){var e;if(t)return e=new a.Transform,this._eachAncestorReverse((function(t){var r=t.transformsEnabled();"all"===r?e.multiply(t.getTransform()):"position"===r&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this.parent?this.parent.getAbsoluteTransform().copy():new a.Transform;var r=this.transformsEnabled();return"all"===r?e.multiply(this.getTransform()):"position"===r&&e.translate(this.x()-this.offsetX(),this.y()-this.offsetY()),e},t.prototype.getAbsoluteScale=function(t){return t?this._getAbsoluteScale(t):this._getCache(h,this._getAbsoluteScale)},t.prototype._getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var r=1,a=1;return this._eachAncestorReverse((function(t){r*=t.scaleX(),a*=t.scaleY()}),t),{x:r,y:a}},t.prototype.getAbsoluteRotation=function(){for(var t=this,e=0;t;)e+=t.rotation(),t=t.getParent();return e},t.prototype.getTransform=function(){return this._getCache(v,this._getTransform)},t.prototype._getTransform=function(){var t=new a.Transform,e=this.x(),r=this.y(),n=i.Konva.getAngle(this.rotation()),o=this.scaleX(),s=this.scaleY(),c=this.skewX(),l=this.skewY(),u=this.offsetX(),h=this.offsetY();return 0===e&&0===r||t.translate(e,r),0!==n&&t.rotate(n),0===c&&0===l||t.skew(c,l),1===o&&1===s||t.scale(o,s),0===u&&0===h||t.translate(-1*u,-1*h),t},t.prototype.clone=function(t){var e,r,n,o,i,s=a.Util.cloneObject(this.attrs);for(e in t)s[e]=t[e];var c=new this.constructor(s);for(e in this.eventListeners)for(n=(r=this.eventListeners[e]).length,o=0;o<n;o++)(i=r[o]).name.indexOf("konva")<0&&(c.eventListeners[e]||(c.eventListeners[e]=[]),c.eventListeners[e].push(i));return c},t.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),r=this.getStage(),a=void 0!==t.x?t.x:e.x,n=void 0!==t.y?t.y:e.y,i=t.pixelRatio||1,s=new o.SceneCanvas({width:t.width||e.width||(r?r.width():0),height:t.height||e.height||(r?r.height():0),pixelRatio:i}),c=s.getContext();return c.save(),(a||n)&&c.translate(-1*a,-1*n),this.drawScene(s),c.restore(),s},t.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},t.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,r=t.quality||null,a=this._toKonvaCanvas(t).toDataURL(e,r);return t.callback&&t.callback(a),a},t.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,a.Util._urlToImage(this.toDataURL(t),(function(t){e(t)}))},t.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},t.prototype.getSize=function(){return{width:this.width(),height:this.height()}},t.prototype.getClassName=function(){return this.className||this.nodeType},t.prototype.getType=function(){return this.nodeType},t.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance},t.prototype._off=function(t,e,r){var a,n,o,i=this.eventListeners[t];for(a=0;a<i.length;a++)if(n=i[a].name,o=i[a].handler,("konva"!==n||"konva"===e)&&(!e||n===e)&&(!r||r===o)){if(i.splice(a,1),0===i.length){delete this.eventListeners[t];break}a--}},t.prototype._fireChangeEvent=function(t,e,r){this._fire(t+"Change",{oldVal:e,newVal:r})},t.prototype.setId=function(t){var r=this.id();return e._removeId(r,this),function(t,r){r&&(e.ids[r]=t)}(this,t),this._setAttr("id",t),this},t.prototype.setName=function(t){var r,a,n=(this.name()||"").split(/\s/g),o=(t||"").split(/\s/g);for(a=0;a<n.length;a++)r=n[a],-1===o.indexOf(r)&&r&&e._removeName(r,this._id);for(a=0;a<o.length;a++)r=o[a],-1===n.indexOf(r)&&r&&e._addName(this,r);return this._setAttr("name",t),this},t.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name(),r=e?e+" "+t:t;this.setName(r)}return this},t.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},t.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),r=e.indexOf(t);return-1!==r&&(e.splice(r,1),this.setName(e.join(" "))),this},t.prototype.setAttr=function(t,e){var r=this["set"+a.Util._capitalize(t)];return a.Util._isFunction(r)?r.call(this,e):this._setAttr(t,e),this},t.prototype._setAttr=function(t,e){var r=this.attrs[t];(r!==e||a.Util.isObject(e))&&(void 0===e||null===e?delete this.attrs[t]:this.attrs[t]=e,this._fireChangeEvent(t,r,e))},t.prototype._setComponentAttr=function(t,e,r){var a;void 0!==r&&((a=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=r,this._fireChangeEvent(t,a,r))},t.prototype._fireAndBubble=function(t,e,r){if(e&&this.nodeType===y&&(e.target=this),!((t===f||t===g)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||"Stage"===this.nodeType&&!r))){this._fire(t,e);var a=(t===f||t===g)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!a&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,e,r):this._fireAndBubble.call(this.parent,t,e))}},t.prototype._fire=function(t,e){var r,a=this.eventListeners[t];if(a)for((e=e||{}).currentTarget=this,e.type=t,r=0;r<a.length;r++)a[r].handler.call(this,e)},t.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},t.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition(),n=r._getPointerById(e)||r._changedPointerPositions[0]||a;s.DD._dragElements.set(this._id,{node:this,startPointerPos:n,offset:{x:n.x-a.x,y:n.y-a.y},dragStatus:"ready",pointerId:e})},t.prototype.startDrag=function(t){s.DD._dragElements.has(this._id)||this._createDragElement(t),s.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},!0)},t.prototype._setDragPosition=function(t,e){var r=this.getStage()._getPointerById(e.pointerId);if(r){var n={x:r.x-e.offset.x,y:r.y-e.offset.y},o=this.dragBoundFunc();if(void 0!==o){var i=o.call(this,n,t);i?n=i:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===n.x&&this._lastPos.y===n.y||(this.setAbsolutePosition(n),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=n}},t.prototype.stopDrag=function(t){var e=s.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),s.DD._endDragBefore(t),s.DD._endDragAfter(t)},t.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},t.prototype.isDragging=function(){var t=s.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},t.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((!(void 0!==t.evt.button)||i.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var r=!1;s.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(r=!0)})),r||this._createDragElement(t)}}))},t.prototype._dragChange=function(){this.attrs.draggable?this._listenDrag():(this._dragCleanup(),this.getStage()&&s.DD._dragElements.has(this._id)&&this.stopDrag())},t.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},t.create=function(t,e){return a.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,r){var n,o,s,c=t.prototype.getClassName.call(e),l=e.children;if(r&&(e.attrs.container=r),i._NODES_REGISTRY[c]||(a.Util.warn('Can not find a node with class name "'+c+'". Fallback to "Shape".'),c="Shape"),n=new(0,i._NODES_REGISTRY[c])(e.attrs),l)for(o=l.length,s=0;s<o;s++)n.add(t._createNode(l[s]));return n},t}();e.Node=A,A.prototype.nodeType="Node",A.prototype._attrsAffectingSize=[],n.Factory.addGetterSetter(A,"zIndex"),n.Factory.addGetterSetter(A,"absolutePosition"),n.Factory.addGetterSetter(A,"position"),n.Factory.addGetterSetter(A,"x",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"y",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"globalCompositeOperation","source-over",c.getStringValidator()),n.Factory.addGetterSetter(A,"opacity",1,c.getNumberValidator()),n.Factory.addGetterSetter(A,"name","",c.getStringValidator()),n.Factory.addGetterSetter(A,"id","",c.getStringValidator()),n.Factory.addGetterSetter(A,"rotation",0,c.getNumberValidator()),n.Factory.addComponentsGetterSetter(A,"scale",["x","y"]),n.Factory.addGetterSetter(A,"scaleX",1,c.getNumberValidator()),n.Factory.addGetterSetter(A,"scaleY",1,c.getNumberValidator()),n.Factory.addComponentsGetterSetter(A,"skew",["x","y"]),n.Factory.addGetterSetter(A,"skewX",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"skewY",0,c.getNumberValidator()),n.Factory.addComponentsGetterSetter(A,"offset",["x","y"]),n.Factory.addGetterSetter(A,"offsetX",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"offsetY",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"dragDistance",null,c.getNumberValidator()),n.Factory.addGetterSetter(A,"width",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"height",0,c.getNumberValidator()),n.Factory.addGetterSetter(A,"listening","inherit",(function(t){return!0===t||!1===t||"inherit"===t||a.Util.warn(t+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),t})),n.Factory.addGetterSetter(A,"preventDefault",!0,c.getBooleanValidator()),n.Factory.addGetterSetter(A,"filters",null,(function(t){return this._filterUpToDate=!1,t})),n.Factory.addGetterSetter(A,"visible","inherit",(function(t){return!0===t||!1===t||"inherit"===t||a.Util.warn(t+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),t})),n.Factory.addGetterSetter(A,"transformsEnabled","all",c.getStringValidator()),n.Factory.addGetterSetter(A,"size"),n.Factory.addGetterSetter(A,"dragBoundFunc"),n.Factory.addGetterSetter(A,"draggable",!1,c.getBooleanValidator()),n.Factory.backCompat(A,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),a.Collection.mapMethods(A)},3099:function(t,e,r){var a;t=r.nmd(t),function(){function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e,r,a){for(var n=-1,o=null==t?0:t.length;++n<o;){var i=t[n];e(a,i,r(i),t)}return a}function i(t,e){for(var r=-1,a=null==t?0:t.length;++r<a&&!1!==e(t[r],r,t););return t}function s(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function c(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(!e(t[r],r,t))return!1;return!0}function l(t,e){for(var r=-1,a=null==t?0:t.length,n=0,o=[];++r<a;){var i=t[r];e(i,r,t)&&(o[n++]=i)}return o}function u(t,e){return!(null==t||!t.length)&&b(t,e,0)>-1}function h(t,e,r){for(var a=-1,n=null==t?0:t.length;++a<n;)if(r(e,t[a]))return!0;return!1}function d(t,e){for(var r=-1,a=null==t?0:t.length,n=Array(a);++r<a;)n[r]=e(t[r],r,t);return n}function p(t,e){for(var r=-1,a=e.length,n=t.length;++r<a;)t[n+r]=e[r];return t}function f(t,e,r,a){var n=-1,o=null==t?0:t.length;for(a&&o&&(r=t[++n]);++n<o;)r=e(r,t[n],n,t);return r}function g(t,e,r,a){var n=null==t?0:t.length;for(a&&n&&(r=t[--n]);n--;)r=e(r,t[n],n,t);return r}function y(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(e(t[r],r,t))return!0;return!1}function m(t){return t.match(ee)||[]}function _(t,e,r){var a;return r(t,(function(t,r,n){if(e(t,r,n))return a=r,!1})),a}function v(t,e,r,a){for(var n=t.length,o=r+(a?1:-1);a?o--:++o<n;)if(e(t[o],o,t))return o;return-1}function b(t,e,r){return e===e?function(t,e,r){for(var a=r-1,n=t.length;++a<n;)if(t[a]===e)return a;return-1}(t,e,r):v(t,x,r)}function w(t,e,r,a){for(var n=r-1,o=t.length;++n<o;)if(a(t[n],e))return n;return-1}function x(t){return t!==t}function O(t,e){var r=null==t?0:t.length;return r?k(t,e)/r:at}function R(t){return function(e){return null==e?q:e[t]}}function A(t){return function(e){return null==t?q:t[e]}}function C(t,e,r,a,n){return n(t,(function(t,n,o){r=a?(a=!1,t):e(r,t,n,o)})),r}function k(t,e){for(var r,a=-1,n=t.length;++a<n;){var o=e(t[a]);o!==q&&(r=r===q?o:r+o)}return r}function E(t,e){for(var r=-1,a=Array(t);++r<t;)a[r]=e(r);return a}function S(t){return t?t.slice(0,H(t)+1).replace(Yt,""):t}function T(t){return function(e){return t(e)}}function L(t,e){return d(e,(function(e){return t[e]}))}function D(t,e){return t.has(e)}function N(t,e){for(var r=-1,a=t.length;++r<a&&b(e,t[r],0)>-1;);return r}function P(t,e){for(var r=t.length;r--&&b(e,t[r],0)>-1;);return r}function U(t){return"\\"+tr[t]}function G(t){return $e.test(t)}function I(t){return Xe.test(t)}function M(t){var e=-1,r=Array(t.size);return t.forEach((function(t,a){r[++e]=[a,t]})),r}function F(t,e){return function(r){return t(e(r))}}function j(t,e){for(var r=-1,a=t.length,n=0,o=[];++r<a;){var i=t[r];i!==e&&i!==X||(t[r]=X,o[n++]=r)}return o}function W(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function B(t){return G(t)?function(t){for(var e=qe.lastIndex=0;qe.test(t);)++e;return e}(t):mr(t)}function z(t){return G(t)?function(t){return t.match(qe)||[]}(t):function(t){return t.split("")}(t)}function H(t){for(var e=t.length;e--&&Zt.test(t.charAt(e)););return e}function V(t){return t.match(Ke)||[]}var q,K="Expected a function",$="__lodash_hash_undefined__",X="__lodash_placeholder__",Y=16,Z=32,Q=64,J=128,tt=256,et=1/0,rt=9007199254740991,at=NaN,nt=4294967295,ot=nt-1,it=nt>>>1,st=[["ary",J],["bind",1],["bindKey",2],["curry",8],["curryRight",Y],["flip",512],["partial",Z],["partialRight",Q],["rearg",tt]],ct="[object Arguments]",lt="[object Array]",ut="[object Boolean]",ht="[object Date]",dt="[object Error]",pt="[object Function]",ft="[object GeneratorFunction]",gt="[object Map]",yt="[object Number]",mt="[object Object]",_t="[object Promise]",vt="[object RegExp]",bt="[object Set]",wt="[object String]",xt="[object Symbol]",Ot="[object WeakMap]",Rt="[object ArrayBuffer]",At="[object DataView]",Ct="[object Float32Array]",kt="[object Float64Array]",Et="[object Int8Array]",St="[object Int16Array]",Tt="[object Int32Array]",Lt="[object Uint8Array]",Dt="[object Uint8ClampedArray]",Nt="[object Uint16Array]",Pt="[object Uint32Array]",Ut=/\b__p \+= '';/g,Gt=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,Ft=/[&<>"']/g,jt=RegExp(Mt.source),Wt=RegExp(Ft.source),Bt=/<%-([\s\S]+?)%>/g,zt=/<%([\s\S]+?)%>/g,Ht=/<%=([\s\S]+?)%>/g,Vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/,Kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$t=/[\\^$.*+?()[\]{}|]/g,Xt=RegExp($t.source),Yt=/^\s+/,Zt=/\s/,Qt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jt=/\{\n\/\* \[wrapped with (.+)\] \*/,te=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,re=/[()=,{}\[\]\/\s]/,ae=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oe=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,se=/^0b[01]+$/i,ce=/^\[object .+?Constructor\]$/,le=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,he=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,de=/($^)/,pe=/['\n\r\u2028\u2029\\]/g,fe="\\ud800-\\udfff",ge="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ye="\\u2700-\\u27bf",me="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",ve="\\ufe0e\\ufe0f",be="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="['\u2019]",xe="["+fe+"]",Oe="["+be+"]",Re="["+ge+"]",Ae="\\d+",Ce="["+ye+"]",ke="["+me+"]",Ee="[^"+fe+be+Ae+ye+me+_e+"]",Se="\\ud83c[\\udffb-\\udfff]",Te="[^"+fe+"]",Le="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="["+_e+"]",Pe="\\u200d",Ue="(?:"+ke+"|"+Ee+")",Ge="(?:"+Ne+"|"+Ee+")",Ie="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Me="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Fe="(?:"+Re+"|"+Se+")"+"?",je="["+ve+"]?",We=je+Fe+("(?:"+Pe+"(?:"+[Te,Le,De].join("|")+")"+je+Fe+")*"),Be="(?:"+[Ce,Le,De].join("|")+")"+We,ze="(?:"+[Te+Re+"?",Re,Le,De,xe].join("|")+")",He=RegExp(we,"g"),Ve=RegExp(Re,"g"),qe=RegExp(Se+"(?="+Se+")|"+ze+We,"g"),Ke=RegExp([Ne+"?"+ke+"+"+Ie+"(?="+[Oe,Ne,"$"].join("|")+")",Ge+"+"+Me+"(?="+[Oe,Ne+Ue,"$"].join("|")+")",Ne+"?"+Ue+"+"+Ie,Ne+"+"+Me,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Be].join("|"),"g"),$e=RegExp("["+Pe+fe+ge+ve+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ze=-1,Qe={};Qe[Ct]=Qe[kt]=Qe[Et]=Qe[St]=Qe[Tt]=Qe[Lt]=Qe[Dt]=Qe[Nt]=Qe[Pt]=!0,Qe[ct]=Qe[lt]=Qe[Rt]=Qe[ut]=Qe[At]=Qe[ht]=Qe[dt]=Qe[pt]=Qe[gt]=Qe[yt]=Qe[mt]=Qe[vt]=Qe[bt]=Qe[wt]=Qe[Ot]=!1;var Je={};Je[ct]=Je[lt]=Je[Rt]=Je[At]=Je[ut]=Je[ht]=Je[Ct]=Je[kt]=Je[Et]=Je[St]=Je[Tt]=Je[gt]=Je[yt]=Je[mt]=Je[vt]=Je[bt]=Je[wt]=Je[xt]=Je[Lt]=Je[Dt]=Je[Nt]=Je[Pt]=!0,Je[dt]=Je[pt]=Je[Ot]=!1;var tr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},er=parseFloat,rr=parseInt,ar="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,nr="object"==typeof self&&self&&self.Object===Object&&self,or=ar||nr||Function("return this")(),ir=e&&!e.nodeType&&e,sr=ir&&t&&!t.nodeType&&t,cr=sr&&sr.exports===ir,lr=cr&&ar.process,ur=function(){try{var t=sr&&sr.require&&sr.require("util").types;return t||lr&&lr.binding&&lr.binding("util")}catch(t){}}(),hr=ur&&ur.isArrayBuffer,dr=ur&&ur.isDate,pr=ur&&ur.isMap,fr=ur&&ur.isRegExp,gr=ur&&ur.isSet,yr=ur&&ur.isTypedArray,mr=R("length"),_r=A({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),vr=A({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),br=A({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),wr=function t(e){function r(t){if(jn(t)&&!Ts(t)&&!(t instanceof Zt)){if(t instanceof A)return t;if(To.call(t,"__wrapped__"))return dn(t)}return new A(t)}function a(){}function A(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=q}function Zt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function ee(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function fe(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function ge(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function ye(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ge;++e<r;)this.add(t[e])}function me(t){this.size=(this.__data__=new fe(t)).size}function _e(t,e){var r=Ts(t),a=!r&&Ss(t),n=!r&&!a&&Ds(t),o=!r&&!a&&!n&&Is(t),i=r||a||n||o,s=i?E(t.length,Oo):[],c=s.length;for(var l in t)!e&&!To.call(t,l)||i&&("length"==l||n&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Xa(l,c))||s.push(l);return s}function ve(t){var e=t.length;return e?t[Dr(0,e-1)]:q}function be(t,e){return cn(la(t),Se(e,0,t.length))}function we(t){return cn(la(t))}function xe(t,e,r){(r===q||Dn(t[e],r))&&(r!==q||e in t)||ke(t,e,r)}function Oe(t,e,r){var a=t[e];To.call(t,e)&&Dn(a,r)&&(r!==q||e in t)||ke(t,e,r)}function Re(t,e){for(var r=t.length;r--;)if(Dn(t[r][0],e))return r;return-1}function Ae(t,e,r,a){return Ei(t,(function(t,n,o){e(a,t,r(t),o)})),a}function Ce(t,e){return t&&ua(e,to(e),t)}function ke(t,e,r){"__proto__"==e&&$o?$o(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Ee(t,e){for(var r=-1,a=e.length,n=yo(a),o=null==t;++r<a;)n[r]=o?q:Qn(t,e[r]);return n}function Se(t,e,r){return t===t&&(r!==q&&(t=t<=r?t:r),e!==q&&(t=t>=e?t:e)),t}function Te(t,e,r,a,n,o){var s,c=1&e,l=2&e,u=4&e;if(r&&(s=n?r(t,a,n,o):r(t)),s!==q)return s;if(!Fn(t))return t;var h=Ts(t);if(h){if(s=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&To.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!c)return la(t,s)}else{var d=ji(t),p=d==pt||d==ft;if(Ds(t))return aa(t,c);if(d==mt||d==ct||p&&!n){if(s=l||p?{}:Ka(t),!c)return l?function(t,e){return ua(t,Fi(t),e)}(t,function(t,e){return t&&ua(e,eo(e),t)}(s,t)):function(t,e){return ua(t,Mi(t),e)}(t,Ce(s,t))}else{if(!Je[d])return n?t:{};s=function(t,e,r){var a=t.constructor;switch(e){case Rt:return na(t);case ut:case ht:return new a(+t);case At:return function(t,e){return new t.constructor(e?na(t.buffer):t.buffer,t.byteOffset,t.byteLength)}(t,r);case Ct:case kt:case Et:case St:case Tt:case Lt:case Dt:case Nt:case Pt:return oa(t,r);case gt:return new a;case yt:case wt:return new a(t);case vt:return function(t){var e=new t.constructor(t.source,oe.exec(t));return e.lastIndex=t.lastIndex,e}(t);case bt:return new a;case xt:return function(t){return Ai?wo(Ai.call(t)):{}}(t)}}(t,d,c)}}o||(o=new me);var f=o.get(t);if(f)return f;o.set(t,s),Gs(t)?t.forEach((function(a){s.add(Te(a,e,r,a,t,o))})):Ps(t)&&t.forEach((function(a,n){s.set(n,Te(a,e,r,n,t,o))}));var g=h?q:(u?l?Fa:Ma:l?eo:to)(t);return i(g||t,(function(a,n){g&&(a=t[n=a]),Oe(s,n,Te(a,e,r,n,t,o))})),s}function Le(t,e,r){var a=r.length;if(null==t)return!a;for(t=wo(t);a--;){var n=r[a],o=e[n],i=t[n];if(i===q&&!(n in t)||!o(i))return!1}return!0}function De(t,e,r){if("function"!=typeof t)throw new Ro(K);return zi((function(){t.apply(q,r)}),e)}function Ne(t,e,r,a){var n=-1,o=u,i=!0,s=t.length,c=[],l=e.length;if(!s)return c;r&&(e=d(e,T(r))),a?(o=h,i=!1):e.length>=200&&(o=D,i=!1,e=new ye(e));t:for(;++n<s;){var p=t[n],f=null==r?p:r(p);if(p=a||0!==p?p:0,i&&f===f){for(var g=l;g--;)if(e[g]===f)continue t;c.push(p)}else o(e,f,a)||c.push(p)}return c}function Pe(t,e){var r=!0;return Ei(t,(function(t,a,n){return r=!!e(t,a,n)})),r}function Ue(t,e,r){for(var a=-1,n=t.length;++a<n;){var o=t[a],i=e(o);if(null!=i&&(s===q?i===i&&!Hn(i):r(i,s)))var s=i,c=o}return c}function Ge(t,e){var r=[];return Ei(t,(function(t,a,n){e(t,a,n)&&r.push(t)})),r}function Ie(t,e,r,a,n){var o=-1,i=t.length;for(r||(r=$a),n||(n=[]);++o<i;){var s=t[o];e>0&&r(s)?e>1?Ie(s,e-1,r,a,n):p(n,s):a||(n[n.length]=s)}return n}function Me(t,e){return t&&Ti(t,e,to)}function Fe(t,e){return t&&Li(t,e,to)}function je(t,e){return l(e,(function(e){return Gn(t[e])}))}function We(t,e){for(var r=0,a=(e=ea(e,t)).length;null!=t&&r<a;)t=t[ln(e[r++])];return r&&r==a?t:q}function Be(t,e,r){var a=e(t);return Ts(t)?a:p(a,r(t))}function ze(t){return null==t?t===q?"[object Undefined]":"[object Null]":Ko&&Ko in wo(t)?function(t){var e=To.call(t,Ko),r=t[Ko];try{t[Ko]=q;var a=!0}catch(t){}var n=No.call(t);return a&&(e?t[Ko]=r:delete t[Ko]),n}(t):function(t){return No.call(t)}(t)}function qe(t,e){return t>e}function Ke(t,e){return null!=t&&To.call(t,e)}function $e(t,e){return null!=t&&e in wo(t)}function Xe(t,e,r){for(var a=r?h:u,n=t[0].length,o=t.length,i=o,s=yo(o),c=1/0,l=[];i--;){var p=t[i];i&&e&&(p=d(p,T(e))),c=ii(p.length,c),s[i]=!r&&(e||n>=120&&p.length>=120)?new ye(i&&p):q}p=t[0];var f=-1,g=s[0];t:for(;++f<n&&l.length<c;){var y=p[f],m=e?e(y):y;if(y=r||0!==y?y:0,!(g?D(g,m):a(l,m,r))){for(i=o;--i;){var _=s[i];if(!(_?D(_,m):a(t[i],m,r)))continue t}g&&g.push(m),l.push(y)}}return l}function tr(t,e,r){var a=null==(t=an(t,e=ea(e,t)))?t:t[ln(mn(e))];return null==a?q:n(a,t,r)}function ar(t){return jn(t)&&ze(t)==ct}function nr(t,e,r,a,n){return t===e||(null==t||null==e||!jn(t)&&!jn(e)?t!==t&&e!==e:function(t,e,r,a,n,o){var i=Ts(t),s=Ts(e),c=i?lt:ji(t),l=s?lt:ji(e);c=c==ct?mt:c,l=l==ct?mt:l;var u=c==mt,h=l==mt,d=c==l;if(d&&Ds(t)){if(!Ds(e))return!1;i=!0,u=!1}if(d&&!u)return o||(o=new me),i||Is(t)?Ga(t,e,r,a,n,o):function(t,e,r,a,n,o,i){switch(r){case At:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rt:return!(t.byteLength!=e.byteLength||!o(new Fo(t),new Fo(e)));case ut:case ht:case yt:return Dn(+t,+e);case dt:return t.name==e.name&&t.message==e.message;case vt:case wt:return t==e+"";case gt:var s=M;case bt:var c=1&a;if(s||(s=W),t.size!=e.size&&!c)return!1;var l=i.get(t);if(l)return l==e;a|=2,i.set(t,e);var u=Ga(s(t),s(e),a,n,o,i);return i.delete(t),u;case xt:if(Ai)return Ai.call(t)==Ai.call(e)}return!1}(t,e,c,r,a,n,o);if(!(1&r)){var p=u&&To.call(t,"__wrapped__"),f=h&&To.call(e,"__wrapped__");if(p||f){var g=p?t.value():t,y=f?e.value():e;return o||(o=new me),n(g,y,r,a,o)}}return!!d&&(o||(o=new me),function(t,e,r,a,n,o){var i=1&r,s=Ma(t),c=s.length;if(c!=Ma(e).length&&!i)return!1;for(var l=c;l--;){var u=s[l];if(!(i?u in e:To.call(e,u)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var f=i;++l<c;){var g=t[u=s[l]],y=e[u];if(a)var m=i?a(y,g,u,e,t,o):a(g,y,u,t,e,o);if(!(m===q?g===y||n(g,y,r,a,o):m)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var _=t.constructor,v=e.constructor;_!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof v&&v instanceof v)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,r,a,n,o))}(t,e,r,a,nr,n))}function ir(t,e,r,a){var n=r.length,o=n,i=!a;if(null==t)return!o;for(t=wo(t);n--;){var s=r[n];if(i&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<o;){var c=(s=r[n])[0],l=t[c],u=s[1];if(i&&s[2]){if(l===q&&!(c in t))return!1}else{var h=new me;if(a)var d=a(l,u,c,t,e,h);if(!(d===q?nr(u,l,3,a,h):d))return!1}}return!0}function sr(t){return!(!Fn(t)||function(t){return!!Do&&Do in t}(t))&&(Gn(t)?Go:ce).test(un(t))}function lr(t){return"function"==typeof t?t:null==t?co:"object"==typeof t?Ts(t)?Ar(t[0],t[1]):Rr(t):po(t)}function ur(t){if(!Ja(t))return ni(t);var e=[];for(var r in wo(t))To.call(t,r)&&"constructor"!=r&&e.push(r);return e}function mr(t){if(!Fn(t))return function(t){var e=[];if(null!=t)for(var r in wo(t))e.push(r);return e}(t);var e=Ja(t),r=[];for(var a in t)("constructor"!=a||!e&&To.call(t,a))&&r.push(a);return r}function xr(t,e){return t<e}function Or(t,e){var r=-1,a=Nn(t)?yo(t.length):[];return Ei(t,(function(t,n,o){a[++r]=e(t,n,o)})),a}function Rr(t){var e=Ha(t);return 1==e.length&&e[0][2]?en(e[0][0],e[0][1]):function(r){return r===t||ir(r,t,e)}}function Ar(t,e){return Za(t)&&tn(e)?en(ln(t),e):function(r){var a=Qn(r,t);return a===q&&a===e?Jn(r,t):nr(e,a,3)}}function Cr(t,e,r,a,n){t!==e&&Ti(e,(function(o,i){if(n||(n=new me),Fn(o))!function(t,e,r,a,n,o,i){var s=nn(t,r),c=nn(e,r),l=i.get(c);if(l)return xe(t,r,l),q;var u=o?o(s,c,r+"",t,e,i):q,h=u===q;if(h){var d=Ts(c),p=!d&&Ds(c),f=!d&&!p&&Is(c);u=c,d||p||f?Ts(s)?u=s:Pn(s)?u=la(s):p?(h=!1,u=aa(c,!0)):f?(h=!1,u=oa(c,!0)):u=[]:Bn(c)||Ss(c)?(u=s,Ss(s)?u=Yn(s):Fn(s)&&!Gn(s)||(u=Ka(c))):h=!1}h&&(i.set(c,u),n(u,c,a,o,i),i.delete(c)),xe(t,r,u)}(t,e,i,r,Cr,a,n);else{var s=a?a(nn(t,i),o,i+"",t,e,n):q;s===q&&(s=o),xe(t,i,s)}}),eo)}function kr(t,e){var r=t.length;if(r)return Xa(e+=e<0?r:0,r)?t[e]:q}function Er(t,e,r){e=e.length?d(e,(function(t){return Ts(t)?function(e){return We(e,1===t.length?t[0]:t)}:t})):[co];var a=-1;return e=d(e,T(Ba())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Or(t,(function(t,r,n){return{criteria:d(e,(function(e){return e(t)})),index:++a,value:t}})),(function(t,e){return function(t,e,r){for(var a=-1,n=t.criteria,o=e.criteria,i=n.length,s=r.length;++a<i;){var c=ia(n[a],o[a]);if(c)return a>=s?c:c*("desc"==r[a]?-1:1)}return t.index-e.index}(t,e,r)}))}function Sr(t,e,r){for(var a=-1,n=e.length,o={};++a<n;){var i=e[a],s=We(t,i);r(s,i)&&Ir(o,ea(i,t),s)}return o}function Tr(t,e,r,a){var n=a?w:b,o=-1,i=e.length,s=t;for(t===e&&(e=la(e)),r&&(s=d(t,T(r)));++o<i;)for(var c=0,l=e[o],u=r?r(l):l;(c=n(s,u,c,a))>-1;)s!==t&&Ho.call(s,c,1),Ho.call(t,c,1);return t}function Lr(t,e){for(var r=t?e.length:0,a=r-1;r--;){var n=e[r];if(r==a||n!==o){var o=n;Xa(n)?Ho.call(t,n,1):Kr(t,n)}}return t}function Dr(t,e){return t+Jo(li()*(e-t+1))}function Nr(t,e){var r="";if(!t||e<1||e>rt)return r;do{e%2&&(r+=t),(e=Jo(e/2))&&(t+=t)}while(e);return r}function Pr(t,e){return Hi(rn(t,e,co),t+"")}function Ur(t){return ve(ao(t))}function Gr(t,e){var r=ao(t);return cn(r,Se(e,0,r.length))}function Ir(t,e,r,a){if(!Fn(t))return t;for(var n=-1,o=(e=ea(e,t)).length,i=o-1,s=t;null!=s&&++n<o;){var c=ln(e[n]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(n!=i){var u=s[c];(l=a?a(u,c,s):q)===q&&(l=Fn(u)?u:Xa(e[n+1])?[]:{})}Oe(s,c,l),s=s[c]}return t}function Mr(t){return cn(ao(t))}function Fr(t,e,r){var a=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(r=r>n?n:r)<0&&(r+=n),n=e>r?0:r-e>>>0,e>>>=0;for(var o=yo(n);++a<n;)o[a]=t[a+e];return o}function jr(t,e){var r;return Ei(t,(function(t,a,n){return!(r=e(t,a,n))})),!!r}function Wr(t,e,r){var a=0,n=null==t?a:t.length;if("number"==typeof e&&e===e&&n<=it){for(;a<n;){var o=a+n>>>1,i=t[o];null!==i&&!Hn(i)&&(r?i<=e:i<e)?a=o+1:n=o}return n}return Br(t,e,co,r)}function Br(t,e,r,a){var n=0,o=null==t?0:t.length;if(0===o)return 0;for(var i=(e=r(e))!==e,s=null===e,c=Hn(e),l=e===q;n<o;){var u=Jo((n+o)/2),h=r(t[u]),d=h!==q,p=null===h,f=h===h,g=Hn(h);if(i)var y=a||f;else y=l?f&&(a||d):s?f&&d&&(a||!p):c?f&&d&&!p&&(a||!g):!p&&!g&&(a?h<=e:h<e);y?n=u+1:o=u}return ii(o,ot)}function zr(t,e){for(var r=-1,a=t.length,n=0,o=[];++r<a;){var i=t[r],s=e?e(i):i;if(!r||!Dn(s,c)){var c=s;o[n++]=0===i?0:i}}return o}function Hr(t){return"number"==typeof t?t:Hn(t)?at:+t}function Vr(t){if("string"==typeof t)return t;if(Ts(t))return d(t,Vr)+"";if(Hn(t))return Ci?Ci.call(t):"";var e=t+"";return"0"==e&&1/t==-et?"-0":e}function qr(t,e,r){var a=-1,n=u,o=t.length,i=!0,s=[],c=s;if(r)i=!1,n=h;else if(o>=200){var l=e?null:Gi(t);if(l)return W(l);i=!1,n=D,c=new ye}else c=e?[]:s;t:for(;++a<o;){var d=t[a],p=e?e(d):d;if(d=r||0!==d?d:0,i&&p===p){for(var f=c.length;f--;)if(c[f]===p)continue t;e&&c.push(p),s.push(d)}else n(c,p,r)||(c!==s&&c.push(p),s.push(d))}return s}function Kr(t,e){return null==(t=an(t,e=ea(e,t)))||delete t[ln(mn(e))]}function $r(t,e,r,a){return Ir(t,e,r(We(t,e)),a)}function Xr(t,e,r,a){for(var n=t.length,o=a?n:-1;(a?o--:++o<n)&&e(t[o],o,t););return r?Fr(t,a?0:o,a?o+1:n):Fr(t,a?o+1:0,a?n:o)}function Yr(t,e){var r=t;return r instanceof Zt&&(r=r.value()),f(e,(function(t,e){return e.func.apply(e.thisArg,p([t],e.args))}),r)}function Zr(t,e,r){var a=t.length;if(a<2)return a?qr(t[0]):[];for(var n=-1,o=yo(a);++n<a;)for(var i=t[n],s=-1;++s<a;)s!=n&&(o[n]=Ne(o[n]||i,t[s],e,r));return qr(Ie(o,1),e,r)}function Qr(t,e,r){for(var a=-1,n=t.length,o=e.length,i={};++a<n;)r(i,t[a],a<o?e[a]:q);return i}function Jr(t){return Pn(t)?t:[]}function ta(t){return"function"==typeof t?t:co}function ea(t,e){return Ts(t)?t:Za(t,e)?[t]:Vi(Zn(t))}function ra(t,e,r){var a=t.length;return r=r===q?a:r,!e&&r>=a?t:Fr(t,e,r)}function aa(t,e){if(e)return t.slice();var r=t.length,a=jo?jo(r):new t.constructor(r);return t.copy(a),a}function na(t){var e=new t.constructor(t.byteLength);return new Fo(e).set(new Fo(t)),e}function oa(t,e){return new t.constructor(e?na(t.buffer):t.buffer,t.byteOffset,t.length)}function ia(t,e){if(t!==e){var r=t!==q,a=null===t,n=t===t,o=Hn(t),i=e!==q,s=null===e,c=e===e,l=Hn(e);if(!s&&!l&&!o&&t>e||o&&i&&c&&!s&&!l||a&&i&&c||!r&&c||!n)return 1;if(!a&&!o&&!l&&t<e||l&&r&&n&&!a&&!o||s&&r&&n||!i&&n||!c)return-1}return 0}function sa(t,e,r,a){for(var n=-1,o=t.length,i=r.length,s=-1,c=e.length,l=oi(o-i,0),u=yo(c+l),h=!a;++s<c;)u[s]=e[s];for(;++n<i;)(h||n<o)&&(u[r[n]]=t[n]);for(;l--;)u[s++]=t[n++];return u}function ca(t,e,r,a){for(var n=-1,o=t.length,i=-1,s=r.length,c=-1,l=e.length,u=oi(o-s,0),h=yo(u+l),d=!a;++n<u;)h[n]=t[n];for(var p=n;++c<l;)h[p+c]=e[c];for(;++i<s;)(d||n<o)&&(h[p+r[i]]=t[n++]);return h}function la(t,e){var r=-1,a=t.length;for(e||(e=yo(a));++r<a;)e[r]=t[r];return e}function ua(t,e,r,a){var n=!r;r||(r={});for(var o=-1,i=e.length;++o<i;){var s=e[o],c=a?a(r[s],t[s],s,r,t):q;c===q&&(c=t[s]),n?ke(r,s,c):Oe(r,s,c)}return r}function ha(t,e){return function(r,a){var n=Ts(r)?o:Ae,i=e?e():{};return n(r,t,Ba(a,2),i)}}function da(t){return Pr((function(e,r){var a=-1,n=r.length,o=n>1?r[n-1]:q,i=n>2?r[2]:q;for(o=t.length>3&&"function"==typeof o?(n--,o):q,i&&Ya(r[0],r[1],i)&&(o=n<3?q:o,n=1),e=wo(e);++a<n;){var s=r[a];s&&t(e,s,a,o)}return e}))}function pa(t,e){return function(r,a){if(null==r)return r;if(!Nn(r))return t(r,a);for(var n=r.length,o=e?n:-1,i=wo(r);(e?o--:++o<n)&&!1!==a(i[o],o,i););return r}}function fa(t){return function(e,r,a){for(var n=-1,o=wo(e),i=a(e),s=i.length;s--;){var c=i[t?s:++n];if(!1===r(o[c],c,o))break}return e}}function ga(t){return function(e){var r=G(e=Zn(e))?z(e):q,a=r?r[0]:e.charAt(0),n=r?ra(r,1).join(""):e.slice(1);return a[t]()+n}}function ya(t){return function(e){return f(io(oo(e).replace(He,"")),t,"")}}function ma(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=ki(t.prototype),a=t.apply(r,e);return Fn(a)?a:r}}function _a(t,e,r){var a=ma(t);return function o(){for(var i=arguments.length,s=yo(i),c=i,l=Wa(o);c--;)s[c]=arguments[c];var u=i<3&&s[0]!==l&&s[i-1]!==l?[]:j(s,l);return(i-=u.length)<r?Sa(t,e,wa,o.placeholder,q,s,u,q,q,r-i):n(this&&this!==or&&this instanceof o?a:t,this,s)}}function va(t){return function(e,r,a){var n=wo(e);if(!Nn(e)){var o=Ba(r,3);e=to(e),r=function(t){return o(n[t],t,n)}}var i=t(e,r,a);return i>-1?n[o?e[i]:i]:q}}function ba(t){return Ia((function(e){var r=e.length,a=r,n=A.prototype.thru;for(t&&e.reverse();a--;){var o=e[a];if("function"!=typeof o)throw new Ro(K);if(n&&!i&&"wrapper"==ja(o))var i=new A([],!0)}for(a=i?a:r;++a<r;){var s=ja(o=e[a]),c="wrapper"==s?Ii(o):q;i=c&&Qa(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?i[ja(c[0])].apply(i,c[3]):1==o.length&&Qa(o)?i[s]():i.thru(o)}return function(){var t=arguments,a=t[0];if(i&&1==t.length&&Ts(a))return i.plant(a).value();for(var n=0,o=r?e[n].apply(this,t):a;++n<r;)o=e[n].call(this,o);return o}}))}function wa(t,e,r,a,n,o,i,s,c,l){var u=e&J,h=1&e,d=2&e,p=24&e,f=512&e,g=d?q:ma(t);return function y(){for(var m=arguments.length,_=yo(m),v=m;v--;)_[v]=arguments[v];if(p)var b=Wa(y),w=function(t,e){for(var r=t.length,a=0;r--;)t[r]===e&&++a;return a}(_,b);if(a&&(_=sa(_,a,n,p)),o&&(_=ca(_,o,i,p)),m-=w,p&&m<l)return Sa(t,e,wa,y.placeholder,r,_,j(_,b),s,c,l-m);var x=h?r:this,O=d?x[t]:t;return m=_.length,s?_=function(t,e){for(var r=t.length,a=ii(e.length,r),n=la(t);a--;){var o=e[a];t[a]=Xa(o,r)?n[o]:q}return t}(_,s):f&&m>1&&_.reverse(),u&&c<m&&(_.length=c),this&&this!==or&&this instanceof y&&(O=g||ma(O)),O.apply(x,_)}}function xa(t,e){return function(r,a){return function(t,e,r,a){return Me(t,(function(t,n,o){e(a,r(t),n,o)})),a}(r,t,e(a),{})}}function Oa(t,e){return function(r,a){var n;if(r===q&&a===q)return e;if(r!==q&&(n=r),a!==q){if(n===q)return a;"string"==typeof r||"string"==typeof a?(r=Vr(r),a=Vr(a)):(r=Hr(r),a=Hr(a)),n=t(r,a)}return n}}function Ra(t){return Ia((function(e){return e=d(e,T(Ba())),Pr((function(r){var a=this;return t(e,(function(t){return n(t,a,r)}))}))}))}function Aa(t,e){var r=(e=e===q?" ":Vr(e)).length;if(r<2)return r?Nr(e,t):e;var a=Nr(e,Qo(t/B(e)));return G(e)?ra(z(a),0,t).join(""):a.slice(0,t)}function Ca(t,e,r,a){var o=1&e,i=ma(t);return function e(){for(var s=-1,c=arguments.length,l=-1,u=a.length,h=yo(u+c),d=this&&this!==or&&this instanceof e?i:t;++l<u;)h[l]=a[l];for(;c--;)h[l++]=arguments[++s];return n(d,o?r:this,h)}}function ka(t){return function(e,r,a){return a&&"number"!=typeof a&&Ya(e,r,a)&&(r=a=q),e=qn(e),r===q?(r=e,e=0):r=qn(r),function(t,e,r,a){for(var n=-1,o=oi(Qo((e-t)/(r||1)),0),i=yo(o);o--;)i[a?o:++n]=t,t+=r;return i}(e,r,a=a===q?e<r?1:-1:qn(a),t)}}function Ea(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Xn(e),r=Xn(r)),t(e,r)}}function Sa(t,e,r,a,n,o,i,s,c,l){var u=8&e;e|=u?Z:Q,4&(e&=~(u?Q:Z))||(e&=-4);var h=[t,e,n,u?o:q,u?i:q,u?q:o,u?q:i,s,c,l],d=r.apply(q,h);return Qa(t)&&Bi(d,h),d.placeholder=a,on(d,t,e)}function Ta(t){var e=bo[t];return function(t,r){if(t=Xn(t),(r=null==r?0:ii(Kn(r),292))&&ri(t)){var a=(Zn(t)+"e").split("e");return+((a=(Zn(e(a[0]+"e"+(+a[1]+r)))+"e").split("e"))[0]+"e"+(+a[1]-r))}return e(t)}}function La(t){return function(e){var r=ji(e);return r==gt?M(e):r==bt?function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}(e):function(t,e){return d(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Da(t,e,r,a,n,o,i,s){var c=2&e;if(!c&&"function"!=typeof t)throw new Ro(K);var l=a?a.length:0;if(l||(e&=-97,a=n=q),i=i===q?i:oi(Kn(i),0),s=s===q?s:Kn(s),l-=n?n.length:0,e&Q){var u=a,h=n;a=n=q}var d=c?q:Ii(t),p=[t,e,r,a,n,u,h,o,i,s];if(d&&function(t,e){var r=t[1],a=e[1],n=r|a,o=n<131,i=a==J&&8==r||a==J&&r==tt&&t[7].length<=e[8]||384==a&&e[7].length<=e[8]&&8==r;if(!o&&!i)return t;1&a&&(t[2]=e[2],n|=1&r?0:4);var s=e[3];if(s){var c=t[3];t[3]=c?sa(c,s,e[4]):s,t[4]=c?j(t[3],X):e[4]}s=e[5],s&&(c=t[5],t[5]=c?ca(c,s,e[6]):s,t[6]=c?j(t[5],X):e[6]),s=e[7],s&&(t[7]=s),a&J&&(t[8]=null==t[8]?e[8]:ii(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=n}(p,d),t=p[0],e=p[1],r=p[2],a=p[3],n=p[4],!(s=p[9]=p[9]===q?c?0:t.length:oi(p[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)f=8==e||e==Y?_a(t,e,s):e!=Z&&33!=e||n.length?wa.apply(q,p):Ca(t,e,r,a);else var f=function(t,e,r){var a=1&e,n=ma(t);return function e(){return(this&&this!==or&&this instanceof e?n:t).apply(a?r:this,arguments)}}(t,e,r);return on((d?Di:Bi)(f,p),t,e)}function Na(t,e,r,a){return t===q||Dn(t,ko[r])&&!To.call(a,r)?e:t}function Pa(t,e,r,a,n,o){return Fn(t)&&Fn(e)&&(o.set(e,t),Cr(t,e,q,Pa,o),o.delete(e)),t}function Ua(t){return Bn(t)?q:t}function Ga(t,e,r,a,n,o){var i=1&r,s=t.length,c=e.length;if(s!=c&&!(i&&c>s))return!1;var l=o.get(t),u=o.get(e);if(l&&u)return l==e&&u==t;var h=-1,d=!0,p=2&r?new ye:q;for(o.set(t,e),o.set(e,t);++h<s;){var f=t[h],g=e[h];if(a)var m=i?a(g,f,h,e,t,o):a(f,g,h,t,e,o);if(m!==q){if(m)continue;d=!1;break}if(p){if(!y(e,(function(t,e){if(!D(p,e)&&(f===t||n(f,t,r,a,o)))return p.push(e)}))){d=!1;break}}else if(f!==g&&!n(f,g,r,a,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Ia(t){return Hi(rn(t,q,gn),t+"")}function Ma(t){return Be(t,to,Mi)}function Fa(t){return Be(t,eo,Fi)}function ja(t){for(var e=t.name+"",r=_i[e],a=To.call(_i,e)?r.length:0;a--;){var n=r[a],o=n.func;if(null==o||o==t)return n.name}return e}function Wa(t){return(To.call(r,"placeholder")?r:t).placeholder}function Ba(){var t=r.iteratee||lo;return t=t===lo?lr:t,arguments.length?t(arguments[0],arguments[1]):t}function za(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function Ha(t){for(var e=to(t),r=e.length;r--;){var a=e[r],n=t[a];e[r]=[a,n,tn(n)]}return e}function Va(t,e){var r=function(t,e){return null==t?q:t[e]}(t,e);return sr(r)?r:q}function qa(t,e,r){for(var a=-1,n=(e=ea(e,t)).length,o=!1;++a<n;){var i=ln(e[a]);if(!(o=null!=t&&r(t,i)))break;t=t[i]}return o||++a!=n?o:!!(n=null==t?0:t.length)&&Mn(n)&&Xa(i,n)&&(Ts(t)||Ss(t))}function Ka(t){return"function"!=typeof t.constructor||Ja(t)?{}:ki(Wo(t))}function $a(t){return Ts(t)||Ss(t)||!!(Vo&&t&&t[Vo])}function Xa(t,e){var r=typeof t;return!!(e=null==e?rt:e)&&("number"==r||"symbol"!=r&&ue.test(t))&&t>-1&&t%1==0&&t<e}function Ya(t,e,r){if(!Fn(r))return!1;var a=typeof e;return!!("number"==a?Nn(r)&&Xa(e,r.length):"string"==a&&e in r)&&Dn(r[e],t)}function Za(t,e){if(Ts(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Hn(t))||qt.test(t)||!Vt.test(t)||null!=e&&t in wo(e)}function Qa(t){var e=ja(t),a=r[e];if("function"!=typeof a||!(e in Zt.prototype))return!1;if(t===a)return!0;var n=Ii(a);return!!n&&t===n[0]}function Ja(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ko)}function tn(t){return t===t&&!Fn(t)}function en(t,e){return function(r){return null!=r&&r[t]===e&&(e!==q||t in wo(r))}}function rn(t,e,r){return e=oi(e===q?t.length-1:e,0),function(){for(var a=arguments,o=-1,i=oi(a.length-e,0),s=yo(i);++o<i;)s[o]=a[e+o];o=-1;for(var c=yo(e+1);++o<e;)c[o]=a[o];return c[e]=r(s),n(t,this,c)}}function an(t,e){return e.length<2?t:We(t,Fr(e,0,-1))}function nn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function on(t,e,r){var a=e+"";return Hi(t,function(t,e){var r=e.length;if(!r)return t;var a=r-1;return e[a]=(r>1?"& ":"")+e[a],e=e.join(r>2?", ":" "),t.replace(Qt,"{\n/* [wrapped with "+e+"] */\n")}(a,hn(function(t){var e=t.match(Jt);return e?e[1].split(te):[]}(a),r)))}function sn(t){var e=0,r=0;return function(){var a=si(),n=16-(a-r);if(r=a,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(q,arguments)}}function cn(t,e){var r=-1,a=t.length,n=a-1;for(e=e===q?a:e;++r<e;){var o=Dr(r,n),i=t[o];t[o]=t[r],t[r]=i}return t.length=e,t}function ln(t){if("string"==typeof t||Hn(t))return t;var e=t+"";return"0"==e&&1/t==-et?"-0":e}function un(t){if(null!=t){try{return So.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function hn(t,e){return i(st,(function(r){var a="_."+r[0];e&r[1]&&!u(t,a)&&t.push(a)})),t.sort()}function dn(t){if(t instanceof Zt)return t.clone();var e=new A(t.__wrapped__,t.__chain__);return e.__actions__=la(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function pn(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var n=null==r?0:Kn(r);return n<0&&(n=oi(a+n,0)),v(t,Ba(e,3),n)}function fn(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var n=a-1;return r!==q&&(n=Kn(r),n=r<0?oi(a+n,0):ii(n,a-1)),v(t,Ba(e,3),n,!0)}function gn(t){return null!=t&&t.length?Ie(t,1):[]}function yn(t){return t&&t.length?t[0]:q}function mn(t){var e=null==t?0:t.length;return e?t[e-1]:q}function _n(t,e){return t&&t.length&&e&&e.length?Tr(t,e):t}function vn(t){return null==t?t:ui.call(t)}function bn(t){if(!t||!t.length)return[];var e=0;return t=l(t,(function(t){if(Pn(t))return e=oi(t.length,e),!0})),E(e,(function(e){return d(t,R(e))}))}function wn(t,e){if(!t||!t.length)return[];var r=bn(t);return null==e?r:d(r,(function(t){return n(e,q,t)}))}function xn(t){var e=r(t);return e.__chain__=!0,e}function On(t,e){return e(t)}function Rn(t,e){return(Ts(t)?i:Ei)(t,Ba(e,3))}function An(t,e){return(Ts(t)?s:Si)(t,Ba(e,3))}function Cn(t,e){return(Ts(t)?d:Or)(t,Ba(e,3))}function kn(t,e,r){return e=r?q:e,e=t&&null==e?t.length:e,Da(t,J,q,q,q,q,e)}function En(t,e){var r;if("function"!=typeof e)throw new Ro(K);return t=Kn(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=q),r}}function Sn(t,e,r){function a(e){var r=c,a=l;return c=l=q,f=e,h=t.apply(a,r)}function n(t){var r=t-p;return p===q||r>=e||r<0||y&&t-f>=u}function o(){var t=_s();return n(t)?i(t):(d=zi(o,function(t){var r=e-(t-p);return y?ii(r,u-(t-f)):r}(t)),q)}function i(t){return d=q,m&&c?a(t):(c=l=q,h)}function s(){var t=_s(),r=n(t);if(c=arguments,l=this,p=t,r){if(d===q)return function(t){return f=t,d=zi(o,e),g?a(t):h}(p);if(y)return Ui(d),d=zi(o,e),a(p)}return d===q&&(d=zi(o,e)),h}var c,l,u,h,d,p,f=0,g=!1,y=!1,m=!0;if("function"!=typeof t)throw new Ro(K);return e=Xn(e)||0,Fn(r)&&(g=!!r.leading,u=(y="maxWait"in r)?oi(Xn(r.maxWait)||0,e):u,m="trailing"in r?!!r.trailing:m),s.cancel=function(){d!==q&&Ui(d),f=0,c=p=l=d=q},s.flush=function(){return d===q?h:i(_s())},s}function Tn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ro(K);var r=function(){var a=arguments,n=e?e.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var i=t.apply(this,a);return r.cache=o.set(n,i)||o,i};return r.cache=new(Tn.Cache||ge),r}function Ln(t){if("function"!=typeof t)throw new Ro(K);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Dn(t,e){return t===e||t!==t&&e!==e}function Nn(t){return null!=t&&Mn(t.length)&&!Gn(t)}function Pn(t){return jn(t)&&Nn(t)}function Un(t){if(!jn(t))return!1;var e=ze(t);return e==dt||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Bn(t)}function Gn(t){if(!Fn(t))return!1;var e=ze(t);return e==pt||e==ft||"[object AsyncFunction]"==e||"[object Proxy]"==e}function In(t){return"number"==typeof t&&t==Kn(t)}function Mn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=rt}function Fn(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function jn(t){return null!=t&&"object"==typeof t}function Wn(t){return"number"==typeof t||jn(t)&&ze(t)==yt}function Bn(t){if(!jn(t)||ze(t)!=mt)return!1;var e=Wo(t);if(null===e)return!0;var r=To.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&So.call(r)==Po}function zn(t){return"string"==typeof t||!Ts(t)&&jn(t)&&ze(t)==wt}function Hn(t){return"symbol"==typeof t||jn(t)&&ze(t)==xt}function Vn(t){if(!t)return[];if(Nn(t))return zn(t)?z(t):la(t);if(qo&&t[qo])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[qo]());var e=ji(t);return(e==gt?M:e==bt?W:ao)(t)}function qn(t){return t?(t=Xn(t))===et||t===-et?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function Kn(t){var e=qn(t),r=e%1;return e===e?r?e-r:e:0}function $n(t){return t?Se(Kn(t),0,nt):0}function Xn(t){if("number"==typeof t)return t;if(Hn(t))return at;if(Fn(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Fn(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=S(t);var r=se.test(t);return r||le.test(t)?rr(t.slice(2),r?2:8):ie.test(t)?at:+t}function Yn(t){return ua(t,eo(t))}function Zn(t){return null==t?"":Vr(t)}function Qn(t,e,r){var a=null==t?q:We(t,e);return a===q?r:a}function Jn(t,e){return null!=t&&qa(t,e,$e)}function to(t){return Nn(t)?_e(t):ur(t)}function eo(t){return Nn(t)?_e(t,!0):mr(t)}function ro(t,e){if(null==t)return{};var r=d(Fa(t),(function(t){return[t]}));return e=Ba(e),Sr(t,r,(function(t,r){return e(t,r[0])}))}function ao(t){return null==t?[]:L(t,to(t))}function no(t){return lc(Zn(t).toLowerCase())}function oo(t){return(t=Zn(t))&&t.replace(he,_r).replace(Ve,"")}function io(t,e,r){return t=Zn(t),(e=r?q:e)===q?I(t)?V(t):m(t):t.match(e)||[]}function so(t){return function(){return t}}function co(t){return t}function lo(t){return lr("function"==typeof t?t:Te(t,1))}function uo(t,e,r){var a=to(e),n=je(e,a);null!=r||Fn(e)&&(n.length||!a.length)||(r=e,e=t,t=this,n=je(e,to(e)));var o=!(Fn(r)&&"chain"in r&&!r.chain),s=Gn(t);return i(n,(function(r){var a=e[r];t[r]=a,s&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=la(this.__actions__)).push({func:a,args:arguments,thisArg:t}),r.__chain__=e,r}return a.apply(t,p([this.value()],arguments))})})),t}function ho(){}function po(t){return Za(t)?R(ln(t)):function(t){return function(e){return We(e,t)}}(t)}function fo(){return[]}function go(){return!1}var yo=(e=null==e?or:wr.defaults(or.Object(),e,wr.pick(or,Ye))).Array,mo=e.Date,_o=e.Error,vo=e.Function,bo=e.Math,wo=e.Object,xo=e.RegExp,Oo=e.String,Ro=e.TypeError,Ao=yo.prototype,Co=vo.prototype,ko=wo.prototype,Eo=e["__core-js_shared__"],So=Co.toString,To=ko.hasOwnProperty,Lo=0,Do=function(){var t=/[^.]+$/.exec(Eo&&Eo.keys&&Eo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),No=ko.toString,Po=So.call(wo),Uo=or._,Go=xo("^"+So.call(To).replace($t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Io=cr?e.Buffer:q,Mo=e.Symbol,Fo=e.Uint8Array,jo=Io?Io.allocUnsafe:q,Wo=F(wo.getPrototypeOf,wo),Bo=wo.create,zo=ko.propertyIsEnumerable,Ho=Ao.splice,Vo=Mo?Mo.isConcatSpreadable:q,qo=Mo?Mo.iterator:q,Ko=Mo?Mo.toStringTag:q,$o=function(){try{var t=Va(wo,"defineProperty");return t({},"",{}),t}catch(t){}}(),Xo=e.clearTimeout!==or.clearTimeout&&e.clearTimeout,Yo=mo&&mo.now!==or.Date.now&&mo.now,Zo=e.setTimeout!==or.setTimeout&&e.setTimeout,Qo=bo.ceil,Jo=bo.floor,ti=wo.getOwnPropertySymbols,ei=Io?Io.isBuffer:q,ri=e.isFinite,ai=Ao.join,ni=F(wo.keys,wo),oi=bo.max,ii=bo.min,si=mo.now,ci=e.parseInt,li=bo.random,ui=Ao.reverse,hi=Va(e,"DataView"),di=Va(e,"Map"),pi=Va(e,"Promise"),fi=Va(e,"Set"),gi=Va(e,"WeakMap"),yi=Va(wo,"create"),mi=gi&&new gi,_i={},vi=un(hi),bi=un(di),wi=un(pi),xi=un(fi),Oi=un(gi),Ri=Mo?Mo.prototype:q,Ai=Ri?Ri.valueOf:q,Ci=Ri?Ri.toString:q,ki=function(){function t(){}return function(e){if(!Fn(e))return{};if(Bo)return Bo(e);t.prototype=e;var r=new t;return t.prototype=q,r}}();r.templateSettings={escape:Bt,evaluate:zt,interpolate:Ht,variable:"",imports:{_:r}},r.prototype=a.prototype,r.prototype.constructor=r,A.prototype=ki(a.prototype),A.prototype.constructor=A,Zt.prototype=ki(a.prototype),Zt.prototype.constructor=Zt,ee.prototype.clear=function(){this.__data__=yi?yi(null):{},this.size=0},ee.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ee.prototype.get=function(t){var e=this.__data__;if(yi){var r=e[t];return r===$?q:r}return To.call(e,t)?e[t]:q},ee.prototype.has=function(t){var e=this.__data__;return yi?e[t]!==q:To.call(e,t)},ee.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=yi&&e===q?$:e,this},fe.prototype.clear=function(){this.__data__=[],this.size=0},fe.prototype.delete=function(t){var e=this.__data__,r=Re(e,t);return!(r<0)&&(r==e.length-1?e.pop():Ho.call(e,r,1),--this.size,!0)},fe.prototype.get=function(t){var e=this.__data__,r=Re(e,t);return r<0?q:e[r][1]},fe.prototype.has=function(t){return Re(this.__data__,t)>-1},fe.prototype.set=function(t,e){var r=this.__data__,a=Re(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this},ge.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new(di||fe),string:new ee}},ge.prototype.delete=function(t){var e=za(this,t).delete(t);return this.size-=e?1:0,e},ge.prototype.get=function(t){return za(this,t).get(t)},ge.prototype.has=function(t){return za(this,t).has(t)},ge.prototype.set=function(t,e){var r=za(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this},ye.prototype.add=ye.prototype.push=function(t){return this.__data__.set(t,$),this},ye.prototype.has=function(t){return this.__data__.has(t)},me.prototype.clear=function(){this.__data__=new fe,this.size=0},me.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},me.prototype.get=function(t){return this.__data__.get(t)},me.prototype.has=function(t){return this.__data__.has(t)},me.prototype.set=function(t,e){var r=this.__data__;if(r instanceof fe){var a=r.__data__;if(!di||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new ge(a)}return r.set(t,e),this.size=r.size,this};var Ei=pa(Me),Si=pa(Fe,!0),Ti=fa(),Li=fa(!0),Di=mi?function(t,e){return mi.set(t,e),t}:co,Ni=$o?function(t,e){return $o(t,"toString",{configurable:!0,enumerable:!1,value:so(e),writable:!0})}:co,Pi=Pr,Ui=Xo||function(t){return or.clearTimeout(t)},Gi=fi&&1/W(new fi([,-0]))[1]==et?function(t){return new fi(t)}:ho,Ii=mi?function(t){return mi.get(t)}:ho,Mi=ti?function(t){return null==t?[]:(t=wo(t),l(ti(t),(function(e){return zo.call(t,e)})))}:fo,Fi=ti?function(t){for(var e=[];t;)p(e,Mi(t)),t=Wo(t);return e}:fo,ji=ze;(hi&&ji(new hi(new ArrayBuffer(1)))!=At||di&&ji(new di)!=gt||pi&&ji(pi.resolve())!=_t||fi&&ji(new fi)!=bt||gi&&ji(new gi)!=Ot)&&(ji=function(t){var e=ze(t),r=e==mt?t.constructor:q,a=r?un(r):"";if(a)switch(a){case vi:return At;case bi:return gt;case wi:return _t;case xi:return bt;case Oi:return Ot}return e});var Wi=Eo?Gn:go,Bi=sn(Di),zi=Zo||function(t,e){return or.setTimeout(t,e)},Hi=sn(Ni),Vi=function(t){var e=Tn(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Kt,(function(t,r,a,n){e.push(a?n.replace(ae,"$1"):r||t)})),e})),qi=Pr((function(t,e){return Pn(t)?Ne(t,Ie(e,1,Pn,!0)):[]})),Ki=Pr((function(t,e){var r=mn(e);return Pn(r)&&(r=q),Pn(t)?Ne(t,Ie(e,1,Pn,!0),Ba(r,2)):[]})),$i=Pr((function(t,e){var r=mn(e);return Pn(r)&&(r=q),Pn(t)?Ne(t,Ie(e,1,Pn,!0),q,r):[]})),Xi=Pr((function(t){var e=d(t,Jr);return e.length&&e[0]===t[0]?Xe(e):[]})),Yi=Pr((function(t){var e=mn(t),r=d(t,Jr);return e===mn(r)?e=q:r.pop(),r.length&&r[0]===t[0]?Xe(r,Ba(e,2)):[]})),Zi=Pr((function(t){var e=mn(t),r=d(t,Jr);return(e="function"==typeof e?e:q)&&r.pop(),r.length&&r[0]===t[0]?Xe(r,q,e):[]})),Qi=Pr(_n),Ji=Ia((function(t,e){var r=null==t?0:t.length,a=Ee(t,e);return Lr(t,d(e,(function(t){return Xa(t,r)?+t:t})).sort(ia)),a})),ts=Pr((function(t){return qr(Ie(t,1,Pn,!0))})),es=Pr((function(t){var e=mn(t);return Pn(e)&&(e=q),qr(Ie(t,1,Pn,!0),Ba(e,2))})),rs=Pr((function(t){var e=mn(t);return e="function"==typeof e?e:q,qr(Ie(t,1,Pn,!0),q,e)})),as=Pr((function(t,e){return Pn(t)?Ne(t,e):[]})),ns=Pr((function(t){return Zr(l(t,Pn))})),os=Pr((function(t){var e=mn(t);return Pn(e)&&(e=q),Zr(l(t,Pn),Ba(e,2))})),is=Pr((function(t){var e=mn(t);return e="function"==typeof e?e:q,Zr(l(t,Pn),q,e)})),ss=Pr(bn),cs=Pr((function(t){var e=t.length,r=e>1?t[e-1]:q;return r="function"==typeof r?(t.pop(),r):q,wn(t,r)})),ls=Ia((function(t){var e=t.length,r=e?t[0]:0,a=this.__wrapped__,n=function(e){return Ee(e,t)};return!(e>1||this.__actions__.length)&&a instanceof Zt&&Xa(r)?((a=a.slice(r,+r+(e?1:0))).__actions__.push({func:On,args:[n],thisArg:q}),new A(a,this.__chain__).thru((function(t){return e&&!t.length&&t.push(q),t}))):this.thru(n)})),us=ha((function(t,e,r){To.call(t,r)?++t[r]:ke(t,r,1)})),hs=va(pn),ds=va(fn),ps=ha((function(t,e,r){To.call(t,r)?t[r].push(e):ke(t,r,[e])})),fs=Pr((function(t,e,r){var a=-1,o="function"==typeof e,i=Nn(t)?yo(t.length):[];return Ei(t,(function(t){i[++a]=o?n(e,t,r):tr(t,e,r)})),i})),gs=ha((function(t,e,r){ke(t,r,e)})),ys=ha((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]})),ms=Pr((function(t,e){if(null==t)return[];var r=e.length;return r>1&&Ya(t,e[0],e[1])?e=[]:r>2&&Ya(e[0],e[1],e[2])&&(e=[e[0]]),Er(t,Ie(e,1),[])})),_s=Yo||function(){return or.Date.now()},vs=Pr((function(t,e,r){var a=1;if(r.length){var n=j(r,Wa(vs));a|=Z}return Da(t,a,e,r,n)})),bs=Pr((function(t,e,r){var a=3;if(r.length){var n=j(r,Wa(bs));a|=Z}return Da(e,a,t,r,n)})),ws=Pr((function(t,e){return De(t,1,e)})),xs=Pr((function(t,e,r){return De(t,Xn(e)||0,r)}));Tn.Cache=ge;var Os=Pi((function(t,e){var r=(e=1==e.length&&Ts(e[0])?d(e[0],T(Ba())):d(Ie(e,1),T(Ba()))).length;return Pr((function(a){for(var o=-1,i=ii(a.length,r);++o<i;)a[o]=e[o].call(this,a[o]);return n(t,this,a)}))})),Rs=Pr((function(t,e){return Da(t,Z,q,e,j(e,Wa(Rs)))})),As=Pr((function(t,e){return Da(t,Q,q,e,j(e,Wa(As)))})),Cs=Ia((function(t,e){return Da(t,tt,q,q,q,e)})),ks=Ea(qe),Es=Ea((function(t,e){return t>=e})),Ss=ar(function(){return arguments}())?ar:function(t){return jn(t)&&To.call(t,"callee")&&!zo.call(t,"callee")},Ts=yo.isArray,Ls=hr?T(hr):function(t){return jn(t)&&ze(t)==Rt},Ds=ei||go,Ns=dr?T(dr):function(t){return jn(t)&&ze(t)==ht},Ps=pr?T(pr):function(t){return jn(t)&&ji(t)==gt},Us=fr?T(fr):function(t){return jn(t)&&ze(t)==vt},Gs=gr?T(gr):function(t){return jn(t)&&ji(t)==bt},Is=yr?T(yr):function(t){return jn(t)&&Mn(t.length)&&!!Qe[ze(t)]},Ms=Ea(xr),Fs=Ea((function(t,e){return t<=e})),js=da((function(t,e){if(Ja(e)||Nn(e))return ua(e,to(e),t),q;for(var r in e)To.call(e,r)&&Oe(t,r,e[r])})),Ws=da((function(t,e){ua(e,eo(e),t)})),Bs=da((function(t,e,r,a){ua(e,eo(e),t,a)})),zs=da((function(t,e,r,a){ua(e,to(e),t,a)})),Hs=Ia(Ee),Vs=Pr((function(t,e){t=wo(t);var r=-1,a=e.length,n=a>2?e[2]:q;for(n&&Ya(e[0],e[1],n)&&(a=1);++r<a;)for(var o=e[r],i=eo(o),s=-1,c=i.length;++s<c;){var l=i[s],u=t[l];(u===q||Dn(u,ko[l])&&!To.call(t,l))&&(t[l]=o[l])}return t})),qs=Pr((function(t){return t.push(q,Pa),n(Zs,q,t)})),Ks=xa((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=No.call(e)),t[e]=r}),so(co)),$s=xa((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=No.call(e)),To.call(t,e)?t[e].push(r):t[e]=[r]}),Ba),Xs=Pr(tr),Ys=da((function(t,e,r){Cr(t,e,r)})),Zs=da((function(t,e,r,a){Cr(t,e,r,a)})),Qs=Ia((function(t,e){var r={};if(null==t)return r;var a=!1;e=d(e,(function(e){return e=ea(e,t),a||(a=e.length>1),e})),ua(t,Fa(t),r),a&&(r=Te(r,7,Ua));for(var n=e.length;n--;)Kr(r,e[n]);return r})),Js=Ia((function(t,e){return null==t?{}:function(t,e){return Sr(t,e,(function(e,r){return Jn(t,r)}))}(t,e)})),tc=La(to),ec=La(eo),rc=ya((function(t,e,r){return e=e.toLowerCase(),t+(r?no(e):e)})),ac=ya((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),nc=ya((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),oc=ga("toLowerCase"),ic=ya((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()})),sc=ya((function(t,e,r){return t+(r?" ":"")+lc(e)})),cc=ya((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),lc=ga("toUpperCase"),uc=Pr((function(t,e){try{return n(t,q,e)}catch(n){return Un(n)?n:new _o(n)}})),hc=Ia((function(t,e){return i(e,(function(e){e=ln(e),ke(t,e,vs(t[e],t))})),t})),dc=ba(),pc=ba(!0),fc=Pr((function(t,e){return function(r){return tr(r,t,e)}})),gc=Pr((function(t,e){return function(r){return tr(t,r,e)}})),yc=Ra(d),mc=Ra(c),_c=Ra(y),vc=ka(),bc=ka(!0),wc=Oa((function(t,e){return t+e}),0),xc=Ta("ceil"),Oc=Oa((function(t,e){return t/e}),1),Rc=Ta("floor"),Ac=Oa((function(t,e){return t*e}),1),Cc=Ta("round"),kc=Oa((function(t,e){return t-e}),0);return r.after=function(t,e){if("function"!=typeof e)throw new Ro(K);return t=Kn(t),function(){if(--t<1)return e.apply(this,arguments)}},r.ary=kn,r.assign=js,r.assignIn=Ws,r.assignInWith=Bs,r.assignWith=zs,r.at=Hs,r.before=En,r.bind=vs,r.bindAll=hc,r.bindKey=bs,r.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ts(t)?t:[t]},r.chain=xn,r.chunk=function(t,e,r){e=(r?Ya(t,e,r):e===q)?1:oi(Kn(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var n=0,o=0,i=yo(Qo(a/e));n<a;)i[o++]=Fr(t,n,n+=e);return i},r.compact=function(t){for(var e=-1,r=null==t?0:t.length,a=0,n=[];++e<r;){var o=t[e];o&&(n[a++]=o)}return n},r.concat=function(){var t=arguments.length;if(!t)return[];for(var e=yo(t-1),r=arguments[0],a=t;a--;)e[a-1]=arguments[a];return p(Ts(r)?la(r):[r],Ie(e,1))},r.cond=function(t){var e=null==t?0:t.length,r=Ba();return t=e?d(t,(function(t){if("function"!=typeof t[1])throw new Ro(K);return[r(t[0]),t[1]]})):[],Pr((function(r){for(var a=-1;++a<e;){var o=t[a];if(n(o[0],this,r))return n(o[1],this,r)}}))},r.conforms=function(t){return function(t){var e=to(t);return function(r){return Le(r,t,e)}}(Te(t,1))},r.constant=so,r.countBy=us,r.create=function(t,e){var r=ki(t);return null==e?r:Ce(r,e)},r.curry=function t(e,r,a){var n=Da(e,8,q,q,q,q,q,r=a?q:r);return n.placeholder=t.placeholder,n},r.curryRight=function t(e,r,a){var n=Da(e,Y,q,q,q,q,q,r=a?q:r);return n.placeholder=t.placeholder,n},r.debounce=Sn,r.defaults=Vs,r.defaultsDeep=qs,r.defer=ws,r.delay=xs,r.difference=qi,r.differenceBy=Ki,r.differenceWith=$i,r.drop=function(t,e,r){var a=null==t?0:t.length;return a?Fr(t,(e=r||e===q?1:Kn(e))<0?0:e,a):[]},r.dropRight=function(t,e,r){var a=null==t?0:t.length;return a?Fr(t,0,(e=a-(e=r||e===q?1:Kn(e)))<0?0:e):[]},r.dropRightWhile=function(t,e){return t&&t.length?Xr(t,Ba(e,3),!0,!0):[]},r.dropWhile=function(t,e){return t&&t.length?Xr(t,Ba(e,3),!0):[]},r.fill=function(t,e,r,a){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Ya(t,e,r)&&(r=0,a=n),function(t,e,r,a){var n=t.length;for((r=Kn(r))<0&&(r=-r>n?0:n+r),(a=a===q||a>n?n:Kn(a))<0&&(a+=n),a=r>a?0:$n(a);r<a;)t[r++]=e;return t}(t,e,r,a)):[]},r.filter=function(t,e){return(Ts(t)?l:Ge)(t,Ba(e,3))},r.flatMap=function(t,e){return Ie(Cn(t,e),1)},r.flatMapDeep=function(t,e){return Ie(Cn(t,e),et)},r.flatMapDepth=function(t,e,r){return r=r===q?1:Kn(r),Ie(Cn(t,e),r)},r.flatten=gn,r.flattenDeep=function(t){return null!=t&&t.length?Ie(t,et):[]},r.flattenDepth=function(t,e){return null!=t&&t.length?Ie(t,e=e===q?1:Kn(e)):[]},r.flip=function(t){return Da(t,512)},r.flow=dc,r.flowRight=pc,r.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,a={};++e<r;){var n=t[e];a[n[0]]=n[1]}return a},r.functions=function(t){return null==t?[]:je(t,to(t))},r.functionsIn=function(t){return null==t?[]:je(t,eo(t))},r.groupBy=ps,r.initial=function(t){return null!=t&&t.length?Fr(t,0,-1):[]},r.intersection=Xi,r.intersectionBy=Yi,r.intersectionWith=Zi,r.invert=Ks,r.invertBy=$s,r.invokeMap=fs,r.iteratee=lo,r.keyBy=gs,r.keys=to,r.keysIn=eo,r.map=Cn,r.mapKeys=function(t,e){var r={};return e=Ba(e,3),Me(t,(function(t,a,n){ke(r,e(t,a,n),t)})),r},r.mapValues=function(t,e){var r={};return e=Ba(e,3),Me(t,(function(t,a,n){ke(r,a,e(t,a,n))})),r},r.matches=function(t){return Rr(Te(t,1))},r.matchesProperty=function(t,e){return Ar(t,Te(e,1))},r.memoize=Tn,r.merge=Ys,r.mergeWith=Zs,r.method=fc,r.methodOf=gc,r.mixin=uo,r.negate=Ln,r.nthArg=function(t){return t=Kn(t),Pr((function(e){return kr(e,t)}))},r.omit=Qs,r.omitBy=function(t,e){return ro(t,Ln(Ba(e)))},r.once=function(t){return En(2,t)},r.orderBy=function(t,e,r,a){return null==t?[]:(Ts(e)||(e=null==e?[]:[e]),Ts(r=a?q:r)||(r=null==r?[]:[r]),Er(t,e,r))},r.over=yc,r.overArgs=Os,r.overEvery=mc,r.overSome=_c,r.partial=Rs,r.partialRight=As,r.partition=ys,r.pick=Js,r.pickBy=ro,r.property=po,r.propertyOf=function(t){return function(e){return null==t?q:We(t,e)}},r.pull=Qi,r.pullAll=_n,r.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Tr(t,e,Ba(r,2)):t},r.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Tr(t,e,q,r):t},r.pullAt=Ji,r.range=vc,r.rangeRight=bc,r.rearg=Cs,r.reject=function(t,e){return(Ts(t)?l:Ge)(t,Ln(Ba(e,3)))},r.remove=function(t,e){var r=[];if(!t||!t.length)return r;var a=-1,n=[],o=t.length;for(e=Ba(e,3);++a<o;){var i=t[a];e(i,a,t)&&(r.push(i),n.push(a))}return Lr(t,n),r},r.rest=function(t,e){if("function"!=typeof t)throw new Ro(K);return Pr(t,e=e===q?e:Kn(e))},r.reverse=vn,r.sampleSize=function(t,e,r){return e=(r?Ya(t,e,r):e===q)?1:Kn(e),(Ts(t)?be:Gr)(t,e)},r.set=function(t,e,r){return null==t?t:Ir(t,e,r)},r.setWith=function(t,e,r,a){return a="function"==typeof a?a:q,null==t?t:Ir(t,e,r,a)},r.shuffle=function(t){return(Ts(t)?we:Mr)(t)},r.slice=function(t,e,r){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&Ya(t,e,r)?(e=0,r=a):(e=null==e?0:Kn(e),r=r===q?a:Kn(r)),Fr(t,e,r)):[]},r.sortBy=ms,r.sortedUniq=function(t){return t&&t.length?zr(t):[]},r.sortedUniqBy=function(t,e){return t&&t.length?zr(t,Ba(e,2)):[]},r.split=function(t,e,r){return r&&"number"!=typeof r&&Ya(t,e,r)&&(e=r=q),(r=r===q?nt:r>>>0)?(t=Zn(t))&&("string"==typeof e||null!=e&&!Us(e))&&(!(e=Vr(e))&&G(t))?ra(z(t),0,r):t.split(e,r):[]},r.spread=function(t,e){if("function"!=typeof t)throw new Ro(K);return e=null==e?0:oi(Kn(e),0),Pr((function(r){var a=r[e],o=ra(r,0,e);return a&&p(o,a),n(t,this,o)}))},r.tail=function(t){var e=null==t?0:t.length;return e?Fr(t,1,e):[]},r.take=function(t,e,r){return t&&t.length?Fr(t,0,(e=r||e===q?1:Kn(e))<0?0:e):[]},r.takeRight=function(t,e,r){var a=null==t?0:t.length;return a?Fr(t,(e=a-(e=r||e===q?1:Kn(e)))<0?0:e,a):[]},r.takeRightWhile=function(t,e){return t&&t.length?Xr(t,Ba(e,3),!1,!0):[]},r.takeWhile=function(t,e){return t&&t.length?Xr(t,Ba(e,3)):[]},r.tap=function(t,e){return e(t),t},r.throttle=function(t,e,r){var a=!0,n=!0;if("function"!=typeof t)throw new Ro(K);return Fn(r)&&(a="leading"in r?!!r.leading:a,n="trailing"in r?!!r.trailing:n),Sn(t,e,{leading:a,maxWait:e,trailing:n})},r.thru=On,r.toArray=Vn,r.toPairs=tc,r.toPairsIn=ec,r.toPath=function(t){return Ts(t)?d(t,ln):Hn(t)?[t]:la(Vi(Zn(t)))},r.toPlainObject=Yn,r.transform=function(t,e,r){var a=Ts(t),n=a||Ds(t)||Is(t);if(e=Ba(e,4),null==r){var o=t&&t.constructor;r=n?a?new o:[]:Fn(t)&&Gn(o)?ki(Wo(t)):{}}return(n?i:Me)(t,(function(t,a,n){return e(r,t,a,n)})),r},r.unary=function(t){return kn(t,1)},r.union=ts,r.unionBy=es,r.unionWith=rs,r.uniq=function(t){return t&&t.length?qr(t):[]},r.uniqBy=function(t,e){return t&&t.length?qr(t,Ba(e,2)):[]},r.uniqWith=function(t,e){return e="function"==typeof e?e:q,t&&t.length?qr(t,q,e):[]},r.unset=function(t,e){return null==t||Kr(t,e)},r.unzip=bn,r.unzipWith=wn,r.update=function(t,e,r){return null==t?t:$r(t,e,ta(r))},r.updateWith=function(t,e,r,a){return a="function"==typeof a?a:q,null==t?t:$r(t,e,ta(r),a)},r.values=ao,r.valuesIn=function(t){return null==t?[]:L(t,eo(t))},r.without=as,r.words=io,r.wrap=function(t,e){return Rs(ta(e),t)},r.xor=ns,r.xorBy=os,r.xorWith=is,r.zip=ss,r.zipObject=function(t,e){return Qr(t||[],e||[],Oe)},r.zipObjectDeep=function(t,e){return Qr(t||[],e||[],Ir)},r.zipWith=cs,r.entries=tc,r.entriesIn=ec,r.extend=Ws,r.extendWith=Bs,uo(r,r),r.add=wc,r.attempt=uc,r.camelCase=rc,r.capitalize=no,r.ceil=xc,r.clamp=function(t,e,r){return r===q&&(r=e,e=q),r!==q&&(r=(r=Xn(r))===r?r:0),e!==q&&(e=(e=Xn(e))===e?e:0),Se(Xn(t),e,r)},r.clone=function(t){return Te(t,4)},r.cloneDeep=function(t){return Te(t,5)},r.cloneDeepWith=function(t,e){return Te(t,5,e="function"==typeof e?e:q)},r.cloneWith=function(t,e){return Te(t,4,e="function"==typeof e?e:q)},r.conformsTo=function(t,e){return null==e||Le(t,e,to(e))},r.deburr=oo,r.defaultTo=function(t,e){return null==t||t!==t?e:t},r.divide=Oc,r.endsWith=function(t,e,r){t=Zn(t),e=Vr(e);var a=t.length,n=r=r===q?a:Se(Kn(r),0,a);return(r-=e.length)>=0&&t.slice(r,n)==e},r.eq=Dn,r.escape=function(t){return(t=Zn(t))&&Wt.test(t)?t.replace(Ft,vr):t},r.escapeRegExp=function(t){return(t=Zn(t))&&Xt.test(t)?t.replace($t,"\\$&"):t},r.every=function(t,e,r){var a=Ts(t)?c:Pe;return r&&Ya(t,e,r)&&(e=q),a(t,Ba(e,3))},r.find=hs,r.findIndex=pn,r.findKey=function(t,e){return _(t,Ba(e,3),Me)},r.findLast=ds,r.findLastIndex=fn,r.findLastKey=function(t,e){return _(t,Ba(e,3),Fe)},r.floor=Rc,r.forEach=Rn,r.forEachRight=An,r.forIn=function(t,e){return null==t?t:Ti(t,Ba(e,3),eo)},r.forInRight=function(t,e){return null==t?t:Li(t,Ba(e,3),eo)},r.forOwn=function(t,e){return t&&Me(t,Ba(e,3))},r.forOwnRight=function(t,e){return t&&Fe(t,Ba(e,3))},r.get=Qn,r.gt=ks,r.gte=Es,r.has=function(t,e){return null!=t&&qa(t,e,Ke)},r.hasIn=Jn,r.head=yn,r.identity=co,r.includes=function(t,e,r,a){t=Nn(t)?t:ao(t),r=r&&!a?Kn(r):0;var n=t.length;return r<0&&(r=oi(n+r,0)),zn(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&b(t,e,r)>-1},r.indexOf=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var n=null==r?0:Kn(r);return n<0&&(n=oi(a+n,0)),b(t,e,n)},r.inRange=function(t,e,r){return e=qn(e),r===q?(r=e,e=0):r=qn(r),function(t,e,r){return t>=ii(e,r)&&t<oi(e,r)}(t=Xn(t),e,r)},r.invoke=Xs,r.isArguments=Ss,r.isArray=Ts,r.isArrayBuffer=Ls,r.isArrayLike=Nn,r.isArrayLikeObject=Pn,r.isBoolean=function(t){return!0===t||!1===t||jn(t)&&ze(t)==ut},r.isBuffer=Ds,r.isDate=Ns,r.isElement=function(t){return jn(t)&&1===t.nodeType&&!Bn(t)},r.isEmpty=function(t){if(null==t)return!0;if(Nn(t)&&(Ts(t)||"string"==typeof t||"function"==typeof t.splice||Ds(t)||Is(t)||Ss(t)))return!t.length;var e=ji(t);if(e==gt||e==bt)return!t.size;if(Ja(t))return!ur(t).length;for(var r in t)if(To.call(t,r))return!1;return!0},r.isEqual=function(t,e){return nr(t,e)},r.isEqualWith=function(t,e,r){var a=(r="function"==typeof r?r:q)?r(t,e):q;return a===q?nr(t,e,q,r):!!a},r.isError=Un,r.isFinite=function(t){return"number"==typeof t&&ri(t)},r.isFunction=Gn,r.isInteger=In,r.isLength=Mn,r.isMap=Ps,r.isMatch=function(t,e){return t===e||ir(t,e,Ha(e))},r.isMatchWith=function(t,e,r){return r="function"==typeof r?r:q,ir(t,e,Ha(e),r)},r.isNaN=function(t){return Wn(t)&&t!=+t},r.isNative=function(t){if(Wi(t))throw new _o("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return sr(t)},r.isNil=function(t){return null==t},r.isNull=function(t){return null===t},r.isNumber=Wn,r.isObject=Fn,r.isObjectLike=jn,r.isPlainObject=Bn,r.isRegExp=Us,r.isSafeInteger=function(t){return In(t)&&t>=-rt&&t<=rt},r.isSet=Gs,r.isString=zn,r.isSymbol=Hn,r.isTypedArray=Is,r.isUndefined=function(t){return t===q},r.isWeakMap=function(t){return jn(t)&&ji(t)==Ot},r.isWeakSet=function(t){return jn(t)&&"[object WeakSet]"==ze(t)},r.join=function(t,e){return null==t?"":ai.call(t,e)},r.kebabCase=ac,r.last=mn,r.lastIndexOf=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var n=a;return r!==q&&(n=(n=Kn(r))<0?oi(a+n,0):ii(n,a-1)),e===e?function(t,e,r){for(var a=r+1;a--;)if(t[a]===e)return a;return a}(t,e,n):v(t,x,n,!0)},r.lowerCase=nc,r.lowerFirst=oc,r.lt=Ms,r.lte=Fs,r.max=function(t){return t&&t.length?Ue(t,co,qe):q},r.maxBy=function(t,e){return t&&t.length?Ue(t,Ba(e,2),qe):q},r.mean=function(t){return O(t,co)},r.meanBy=function(t,e){return O(t,Ba(e,2))},r.min=function(t){return t&&t.length?Ue(t,co,xr):q},r.minBy=function(t,e){return t&&t.length?Ue(t,Ba(e,2),xr):q},r.stubArray=fo,r.stubFalse=go,r.stubObject=function(){return{}},r.stubString=function(){return""},r.stubTrue=function(){return!0},r.multiply=Ac,r.nth=function(t,e){return t&&t.length?kr(t,Kn(e)):q},r.noConflict=function(){return or._===this&&(or._=Uo),this},r.noop=ho,r.now=_s,r.pad=function(t,e,r){t=Zn(t);var a=(e=Kn(e))?B(t):0;if(!e||a>=e)return t;var n=(e-a)/2;return Aa(Jo(n),r)+t+Aa(Qo(n),r)},r.padEnd=function(t,e,r){t=Zn(t);var a=(e=Kn(e))?B(t):0;return e&&a<e?t+Aa(e-a,r):t},r.padStart=function(t,e,r){t=Zn(t);var a=(e=Kn(e))?B(t):0;return e&&a<e?Aa(e-a,r)+t:t},r.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),ci(Zn(t).replace(Yt,""),e||0)},r.random=function(t,e,r){if(r&&"boolean"!=typeof r&&Ya(t,e,r)&&(e=r=q),r===q&&("boolean"==typeof e?(r=e,e=q):"boolean"==typeof t&&(r=t,t=q)),t===q&&e===q?(t=0,e=1):(t=qn(t),e===q?(e=t,t=0):e=qn(e)),t>e){var a=t;t=e,e=a}if(r||t%1||e%1){var n=li();return ii(t+n*(e-t+er("1e-"+((n+"").length-1))),e)}return Dr(t,e)},r.reduce=function(t,e,r){var a=Ts(t)?f:C,n=arguments.length<3;return a(t,Ba(e,4),r,n,Ei)},r.reduceRight=function(t,e,r){var a=Ts(t)?g:C,n=arguments.length<3;return a(t,Ba(e,4),r,n,Si)},r.repeat=function(t,e,r){return e=(r?Ya(t,e,r):e===q)?1:Kn(e),Nr(Zn(t),e)},r.replace=function(){var t=arguments,e=Zn(t[0]);return t.length<3?e:e.replace(t[1],t[2])},r.result=function(t,e,r){var a=-1,n=(e=ea(e,t)).length;for(n||(n=1,t=q);++a<n;){var o=null==t?q:t[ln(e[a])];o===q&&(a=n,o=r),t=Gn(o)?o.call(t):o}return t},r.round=Cc,r.runInContext=t,r.sample=function(t){return(Ts(t)?ve:Ur)(t)},r.size=function(t){if(null==t)return 0;if(Nn(t))return zn(t)?B(t):t.length;var e=ji(t);return e==gt||e==bt?t.size:ur(t).length},r.snakeCase=ic,r.some=function(t,e,r){var a=Ts(t)?y:jr;return r&&Ya(t,e,r)&&(e=q),a(t,Ba(e,3))},r.sortedIndex=function(t,e){return Wr(t,e)},r.sortedIndexBy=function(t,e,r){return Br(t,e,Ba(r,2))},r.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var a=Wr(t,e);if(a<r&&Dn(t[a],e))return a}return-1},r.sortedLastIndex=function(t,e){return Wr(t,e,!0)},r.sortedLastIndexBy=function(t,e,r){return Br(t,e,Ba(r,2),!0)},r.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=Wr(t,e,!0)-1;if(Dn(t[r],e))return r}return-1},r.startCase=sc,r.startsWith=function(t,e,r){return t=Zn(t),r=null==r?0:Se(Kn(r),0,t.length),e=Vr(e),t.slice(r,r+e.length)==e},r.subtract=kc,r.sum=function(t){return t&&t.length?k(t,co):0},r.sumBy=function(t,e){return t&&t.length?k(t,Ba(e,2)):0},r.template=function(t,e,a){var n=r.templateSettings;a&&Ya(t,e,a)&&(e=q),t=Zn(t),e=Bs({},e,n,Na);var o,i,s=Bs({},e.imports,n.imports,Na),c=to(s),l=L(s,c),u=0,h=e.interpolate||de,d="__p += '",p=xo((e.escape||de).source+"|"+h.source+"|"+(h===Ht?ne:de).source+"|"+(e.evaluate||de).source+"|$","g"),f="//# sourceURL="+(To.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ze+"]")+"\n";t.replace(p,(function(e,r,a,n,s,c){return a||(a=n),d+=t.slice(u,c).replace(pe,U),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),s&&(i=!0,d+="';\n"+s+";\n__p += '"),a&&(d+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),d+="';\n";var g=To.call(e,"variable")&&e.variable;if(g){if(re.test(g))throw new _o("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(Ut,""):d).replace(Gt,"$1").replace(It,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=uc((function(){return vo(c,f+"return "+d).apply(q,l)}));if(y.source=d,Un(y))throw y;return y},r.times=function(t,e){if((t=Kn(t))<1||t>rt)return[];var r=nt,a=ii(t,nt);e=Ba(e),t-=nt;for(var n=E(a,e);++r<t;)e(r);return n},r.toFinite=qn,r.toInteger=Kn,r.toLength=$n,r.toLower=function(t){return Zn(t).toLowerCase()},r.toNumber=Xn,r.toSafeInteger=function(t){return t?Se(Kn(t),-rt,rt):0===t?t:0},r.toString=Zn,r.toUpper=function(t){return Zn(t).toUpperCase()},r.trim=function(t,e,r){if((t=Zn(t))&&(r||e===q))return S(t);if(!t||!(e=Vr(e)))return t;var a=z(t),n=z(e);return ra(a,N(a,n),P(a,n)+1).join("")},r.trimEnd=function(t,e,r){if((t=Zn(t))&&(r||e===q))return t.slice(0,H(t)+1);if(!t||!(e=Vr(e)))return t;var a=z(t);return ra(a,0,P(a,z(e))+1).join("")},r.trimStart=function(t,e,r){if((t=Zn(t))&&(r||e===q))return t.replace(Yt,"");if(!t||!(e=Vr(e)))return t;var a=z(t);return ra(a,N(a,z(e))).join("")},r.truncate=function(t,e){var r=30,a="...";if(Fn(e)){var n="separator"in e?e.separator:n;r="length"in e?Kn(e.length):r,a="omission"in e?Vr(e.omission):a}var o=(t=Zn(t)).length;if(G(t)){var i=z(t);o=i.length}if(r>=o)return t;var s=r-B(a);if(s<1)return a;var c=i?ra(i,0,s).join(""):t.slice(0,s);if(n===q)return c+a;if(i&&(s+=c.length-s),Us(n)){if(t.slice(s).search(n)){var l,u=c;for(n.global||(n=xo(n.source,Zn(oe.exec(n))+"g")),n.lastIndex=0;l=n.exec(u);)var h=l.index;c=c.slice(0,h===q?s:h)}}else if(t.indexOf(Vr(n),s)!=s){var d=c.lastIndexOf(n);d>-1&&(c=c.slice(0,d))}return c+a},r.unescape=function(t){return(t=Zn(t))&&jt.test(t)?t.replace(Mt,br):t},r.uniqueId=function(t){var e=++Lo;return Zn(t)+e},r.upperCase=cc,r.upperFirst=lc,r.each=Rn,r.eachRight=An,r.first=yn,uo(r,function(){var t={};return Me(r,(function(e,a){To.call(r.prototype,a)||(t[a]=e)})),t}(),{chain:!1}),r.VERSION="4.17.21",i(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){r[t].placeholder=r})),i(["drop","take"],(function(t,e){Zt.prototype[t]=function(r){r=r===q?1:oi(Kn(r),0);var a=this.__filtered__&&!e?new Zt(this):this.clone();return a.__filtered__?a.__takeCount__=ii(r,a.__takeCount__):a.__views__.push({size:ii(r,nt),type:t+(a.__dir__<0?"Right":"")}),a},Zt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),i(["filter","map","takeWhile"],(function(t,e){var r=e+1,a=1==r||3==r;Zt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ba(t,3),type:r}),e.__filtered__=e.__filtered__||a,e}})),i(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Zt.prototype[t]=function(){return this[r](1).value()[0]}})),i(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Zt.prototype[t]=function(){return this.__filtered__?new Zt(this):this[r](1)}})),Zt.prototype.compact=function(){return this.filter(co)},Zt.prototype.find=function(t){return this.filter(t).head()},Zt.prototype.findLast=function(t){return this.reverse().find(t)},Zt.prototype.invokeMap=Pr((function(t,e){return"function"==typeof t?new Zt(this):this.map((function(r){return tr(r,t,e)}))})),Zt.prototype.reject=function(t){return this.filter(Ln(Ba(t)))},Zt.prototype.slice=function(t,e){t=Kn(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Zt(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==q&&(r=(e=Kn(e))<0?r.dropRight(-e):r.take(e-t)),r)},Zt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Zt.prototype.toArray=function(){return this.take(nt)},Me(Zt.prototype,(function(t,e){var a=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=r[n?"take"+("last"==e?"Right":""):e],i=n||/^find/.test(e);o&&(r.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,c=e instanceof Zt,l=s[0],u=c||Ts(e),h=function(t){var e=o.apply(r,p([t],s));return n&&d?e[0]:e};u&&a&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=this.__chain__,f=!!this.__actions__.length,g=i&&!d,y=c&&!f;if(!i&&u){e=y?e:new Zt(this);var m=t.apply(e,s);return m.__actions__.push({func:On,args:[h],thisArg:q}),new A(m,d)}return g&&y?t.apply(this,s):(m=this.thru(h),g?n?m.value()[0]:m.value():m)})})),i(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ao[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Ts(r)?r:[],t)}return this[a]((function(r){return e.apply(Ts(r)?r:[],t)}))}})),Me(Zt.prototype,(function(t,e){var a=r[e];if(a){var n=a.name+"";To.call(_i,n)||(_i[n]=[]),_i[n].push({name:e,func:a})}})),_i[wa(q,2).name]=[{name:"wrapper",func:q}],Zt.prototype.clone=function(){var t=new Zt(this.__wrapped__);return t.__actions__=la(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=la(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=la(this.__views__),t},Zt.prototype.reverse=function(){if(this.__filtered__){var t=new Zt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Zt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Ts(t),a=e<0,n=r?t.length:0,o=function(t,e,r){for(var a=-1,n=r.length;++a<n;){var o=r[a],i=o.size;switch(o.type){case"drop":t+=i;break;case"dropRight":e-=i;break;case"take":e=ii(e,t+i);break;case"takeRight":t=oi(t,e-i)}}return{start:t,end:e}}(0,n,this.__views__),i=o.start,s=o.end,c=s-i,l=a?s:i-1,u=this.__iteratees__,h=u.length,d=0,p=ii(c,this.__takeCount__);if(!r||!a&&n==c&&p==c)return Yr(t,this.__actions__);var f=[];t:for(;c--&&d<p;){for(var g=-1,y=t[l+=e];++g<h;){var m=u[g],_=m.iteratee,v=m.type,b=_(y);if(2==v)y=b;else if(!b){if(1==v)continue t;break t}}f[d++]=y}return f},r.prototype.at=ls,r.prototype.chain=function(){return xn(this)},r.prototype.commit=function(){return new A(this.value(),this.__chain__)},r.prototype.next=function(){this.__values__===q&&(this.__values__=Vn(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?q:this.__values__[this.__index__++]}},r.prototype.plant=function(t){for(var e,r=this;r instanceof a;){var n=dn(r);n.__index__=0,n.__values__=q,e?o.__wrapped__=n:e=n;var o=n;r=r.__wrapped__}return o.__wrapped__=t,e},r.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Zt){var e=t;return this.__actions__.length&&(e=new Zt(this)),(e=e.reverse()).__actions__.push({func:On,args:[vn],thisArg:q}),new A(e,this.__chain__)}return this.thru(vn)},r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=function(){return Yr(this.__wrapped__,this.__actions__)},r.prototype.first=r.prototype.head,qo&&(r.prototype[qo]=function(){return this}),r}();or._=wr,void 0===(a=function(){return wr}.call(e,r,e,t))||(t.exports=a)}.call(this)},3176:(t,e,r)=>{"use strict";var a=r(8031);function n(){}function o(){}o.resetWarningCache=n,t.exports=function(){function t(t,e,r,n,o,i){if(i!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r,r}},3188:(t,e,r)=>{var a=r(7650),n=r(4916),o=r(4865);t.exports=function(t){if(!n(t))return!1;var e=a(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}},3191:(t,e,r)=>{"use strict";var a=r(1561),n=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;n=o("react.element"),e.Fragment=o("react.fragment")}var i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,r){var a,o={},l=null,u=null;for(a in void 0!==r&&(l=""+r),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,a)&&!c.hasOwnProperty(a)&&(o[a]=e[a]);if(t&&t.defaultProps)for(a in e=t.defaultProps)void 0===o[a]&&(o[a]=e[a]);return{$$typeof:n,type:t,key:l,ref:u,props:o,_owner:i.current}}e.jsx=l,e.jsxs=l},3199:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.Contrast=function(t){var e,r=Math.pow((this.contrast()+100)/100,2),a=t.data,n=a.length,o=150,i=150,s=150;for(e=0;e<n;e+=4)o=a[e],i=a[e+1],s=a[e+2],o/=255,o-=.5,o*=r,o+=.5,i/=255,i-=.5,i*=r,i+=.5,s/=255,s-=.5,s*=r,s+=.5,o=(o*=255)<0?0:o>255?255:o,i=(i*=255)<0?0:i>255?255:i,s=(s*=255)<0?0:s>255?255:s,a[e]=o,a[e+1]=i,a[e+2]=s},a.Factory.addGetterSetter(n.Node,"contrast",0,o.getNumberValidator(),a.Factory.afterSetFilter)},3293:(t,e,r)=>{var a=r(5699),n=r(7219),o=r(6547),i=o&&o.isTypedArray,s=i?n(i):a;t.exports=s},3312:(t,e,r)=>{var a=r(6062),n=r(4916);t.exports=function t(e,r,o,i,s){return e===r||(null==e||null==r||!n(e)&&!n(r)?e!==e&&r!==r:a(e,r,o,i,t,s))}},3317:(t,e,r)=>{var a=r(6968);t.exports=function(t){return function(e){return a(e,t)}}},3326:t=>{var e=Math.max;t.exports=function(t,r,a,n){for(var o=-1,i=t.length,s=a.length,c=-1,l=r.length,u=e(i-s,0),h=Array(l+u),d=!n;++c<l;)h[c]=r[c];for(;++o<s;)(d||o<i)&&(h[a[o]]=t[o]);for(;u--;)h[c++]=t[o++];return h}},3339:(t,e,r)=>{var a=r(2852),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return a?void 0!==e[t]:n.call(e,t)}},3350:t=>{var e=Math.max;t.exports=function(t,r,a,n){for(var o=-1,i=t.length,s=-1,c=a.length,l=-1,u=r.length,h=e(i-c,0),d=Array(h+u),p=!n;++o<h;)d[o]=t[o];for(var f=o;++l<u;)d[f+l]=r[l];for(;++s<c;)(p||o<i)&&(d[f+a[s]]=t[o++]);return d}},3400:(t,e,r)=>{var a=r(1949),n=r(1502),o=r(9264);t.exports=function(t){return a(t,o,n)}},3477:(t,e,r)=>{"use strict";var a=r(6723);e.__esModule=!0,e.default=e.animationEnd=e.animationDelay=e.animationTiming=e.animationDuration=e.animationName=e.transitionEnd=e.transitionDuration=e.transitionDelay=e.transitionTiming=e.transitionProperty=e.transform=void 0;var n,o,i,s,c,l,u,h,d,p,f,g=a(r(9316)),y="transform";if(e.transform=y,e.animationEnd=i,e.transitionEnd=o,e.transitionDelay=u,e.transitionTiming=l,e.transitionDuration=c,e.transitionProperty=s,e.animationDelay=f,e.animationTiming=p,e.animationDuration=d,e.animationName=h,g.default){var m=function(){for(var t,e,r=document.createElement("div").style,a={O:function(t){return"o"+t.toLowerCase()},Moz:function(t){return t.toLowerCase()},Webkit:function(t){return"webkit"+t},ms:function(t){return"MS"+t}},n=Object.keys(a),o="",i=0;i<n.length;i++){var s=n[i];if(s+"TransitionProperty"in r){o="-"+s.toLowerCase(),t=a[s]("TransitionEnd"),e=a[s]("AnimationEnd");break}}!t&&"transitionProperty"in r&&(t="transitionend");!e&&"animationName"in r&&(e="animationend");return r=null,{animationEnd:e,transitionEnd:t,prefix:o}}();n=m.prefix,e.transitionEnd=o=m.transitionEnd,e.animationEnd=i=m.animationEnd,e.transform=y=n+"-"+y,e.transitionProperty=s=n+"-transition-property",e.transitionDuration=c=n+"-transition-duration",e.transitionDelay=u=n+"-transition-delay",e.transitionTiming=l=n+"-transition-timing-function",e.animationName=h=n+"-animation-name",e.animationDuration=d=n+"-animation-duration",e.animationTiming=p=n+"-animation-delay",e.animationDelay=f=n+"-animation-timing-function"}var _={transform:y,end:o,property:s,timing:l,delay:u,duration:c};e.default=_},3494:(t,e,r)=>{var a=r(2314),n=/^\s+/;t.exports=function(t){return t?t.slice(0,a(t)+1).replace(n,""):t}},3529:t=>{t.exports=function(t){return this.__data__.has(t)}},3531:t=>{var e=Array.isArray;t.exports=e},3557:t=>{var e=Date.now;t.exports=function(t){var r=0,a=0;return function(){var n=e(),o=16-(n-a);if(a=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},3759:(t,e,r)=>{var a=r(7257);t.exports=function(t){return a(this,t).has(t)}},3823:(t,e,r)=>{var a=r(9542),n=r(9824),o=r(339),i=r(3759),s=r(6583);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,t.exports=c},3884:(t,e,r)=>{var a=r(3958),n=r(9605),o=r(8598),i=r(115),s=r(5581),c=r(7650),l=r(5903),u="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",g=l(a),y=l(n),m=l(o),_=l(i),v=l(s),b=c;(a&&b(new a(new ArrayBuffer(1)))!=f||n&&b(new n)!=u||o&&b(o.resolve())!=h||i&&b(new i)!=d||s&&b(new s)!=p)&&(b=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,a=r?l(r):"";if(a)switch(a){case g:return f;case y:return u;case m:return h;case _:return d;case v:return p}return e}),t.exports=b},3887:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(2261),n=r(9614),o="get",i="set";e.Factory={addGetterSetter:function(t,e,r,a,n){this.addGetter(t,e,r),this.addSetter(t,e,a,n),this.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,r){var n=o+a.Util._capitalize(e);t.prototype[n]=t.prototype[n]||function(){var t=this.attrs[e];return void 0===t?r:t}},addSetter:function(t,r,n,o){var s=i+a.Util._capitalize(r);t.prototype[s]||e.Factory.overWriteSetter(t,r,n,o)},overWriteSetter:function(t,e,r,n){var o=i+a.Util._capitalize(e);t.prototype[o]=function(t){return r&&void 0!==t&&null!==t&&(t=r.call(this,t,e)),this._setAttr(e,t),n&&n.call(this),this}},addComponentsGetterSetter:function(t,e,r,s,c){var l,u,h=r.length,d=a.Util._capitalize,p=o+d(e),f=i+d(e);t.prototype[p]=function(){var t={};for(l=0;l<h;l++)t[u=r[l]]=this.getAttr(e+d(u));return t};var g=n.getComponentValidator(r);t.prototype[f]=function(t){var r,a=this.attrs[e];for(r in s&&(t=s.call(this,t)),g&&g.call(this,t,e),t)t.hasOwnProperty(r)&&this._setAttr(e+d(r),t[r]);return this._fireChangeEvent(e,a,t),c&&c.call(this),this},this.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter:function(t,e){var r=a.Util._capitalize(e),n=i+r,s=o+r;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter:function(t,e,r,n){a.Util.error("Adding deprecated "+e);var i=o+a.Util._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){a.Util.error(s);var t=this.attrs[e];return void 0===t?r:t},this.addSetter(t,e,n,(function(){a.Util.error(s)})),this.addOverloadedGetterSetter(t,e)},backCompat:function(t,e){a.Util.each(e,(function(e,r){var n=t.prototype[r],s=o+a.Util._capitalize(e),c=i+a.Util._capitalize(e);function l(){n.apply(this,arguments),a.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[e]=l,t.prototype[s]=l,t.prototype[c]=l}))},afterSetFilter:function(){this._filterUpToDate=!1}}},3947:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.RGBA=function(t){var e,r,a=t.data,n=a.length,o=this.red(),i=this.green(),s=this.blue(),c=this.alpha();for(e=0;e<n;e+=4)r=1-c,a[e]=o*c+a[e]*r,a[e+1]=i*c+a[e+1]*r,a[e+2]=s*c+a[e+2]*r},a.Factory.addGetterSetter(n.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),a.Factory.addGetterSetter(n.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),a.Factory.addGetterSetter(n.Node,"blue",0,o.RGBComponent,a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},3958:(t,e,r)=>{var a=r(2856)(r(8731),"DataView");t.exports=a},4009:(t,e,r)=>{var a=r(7922),n=r(8347);t.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=a(t.prototype),o=t.apply(r,e);return n(o)?o:r}}},4046:(t,e,r)=>{var a=r(615),n=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",r=a[e],o=n.call(a,e)?r.length:0;o--;){var i=r[o],s=i.func;if(null==s||s==t)return i.name}return e}},4082:t=>{"use strict";t.exports=JSON.parse('{"cols":50,"rows":25,"tiles":{"0,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"0,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"1,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"2,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"3,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"4,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"5,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"6,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"7,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"8,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"9,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"10,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,16":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"11,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"11,18":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"11,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"11,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"11,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"11,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,11":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,16":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,17":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"12,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"12,19":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"12,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"12,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"12,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"13,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,14":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,15":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,17":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,19":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"13,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"13,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"13,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"14,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,14":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,15":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,17":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,19":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"14,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"14,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"14,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"15,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"15,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,11":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,12":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"15,13":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"15,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,16":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,17":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"15,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"15,19":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"15,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"15,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"15,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,6":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"16,7":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"16,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"16,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"16,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,16":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"16,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"16,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"16,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"16,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"16,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"16,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,5":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"17,6":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"17,7":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"17,8":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"17,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"17,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"17,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"17,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"17,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"18,5":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"18,6":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"18,7":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"18,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"18,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"18,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"18,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"18,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,3":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"19,4":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"19,5":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"19,6":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"19,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"19,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"19,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"19,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"19,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"20,4":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"20,5":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"20,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"20,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"20,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"21,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"21,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"21,5":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"21,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"21,14":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"21,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"21,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"21,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"21,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"21,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"21,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"22,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"22,14":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"22,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"22,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"22,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"22,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"23,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"23,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"23,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"23,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"23,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"23,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"23,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"24,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"24,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"24,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,13":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"24,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"24,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"24,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"24,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"25,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"25,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"25,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"25,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"25,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"25,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"25,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,12":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,13":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,14":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"25,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"25,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"25,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"25,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"26,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,8":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"26,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"26,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"26,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"26,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"27,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"27,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"27,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,17":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"27,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"27,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"27,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"27,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"28,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"28,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"28,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,17":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"28,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"28,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"28,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"28,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"29,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"29,4":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"29,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"29,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"29,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"29,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"29,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"30,4":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"30,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,10":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"30,11":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"30,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"30,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"30,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"30,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"31,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"31,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"31,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"31,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"31,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"31,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"31,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"31,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"31,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"31,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"31,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"31,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"31,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"32,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"32,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"32,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"32,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"32,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"32,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"32,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"32,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"32,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"32,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"32,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"32,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"32,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"33,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"33,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"33,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"33,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"33,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"33,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"33,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"33,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"33,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"33,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"33,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"33,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"33,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"34,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"34,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"34,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"34,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"34,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"34,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"34,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"34,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"34,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"34,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"34,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"34,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"34,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"35,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,11":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"35,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"35,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"35,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"36,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"36,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"36,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,8":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,16":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"36,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"36,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"36,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"36,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"36,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"36,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,1":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"37,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"37,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"37,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"37,5":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"37,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,8":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"37,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"37,17":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"37,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"37,19":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"37,20":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"37,21":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"37,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"37,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"38,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"38,1":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,2":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"38,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"38,4":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"38,5":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,6":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,9":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"38,10":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"38,11":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"38,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,18":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,20":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"38,21":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"38,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"38,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"38,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"39,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"39,1":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"39,2":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,4":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,5":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,6":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,7":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,14":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,15":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,17":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"39,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"39,20":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"39,21":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"39,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"39,23":{"type":1,"character":",,","color":"#417505","data":{"type":"GROUND"}},"39,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"40,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"40,1":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"40,2":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,4":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,5":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,6":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,7":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,8":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,9":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,10":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,11":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,12":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,13":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,14":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,15":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,17":{"type":1,"character":"+","color":"#9b9b9b","data":{"type":"DOOR"}},"40,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"40,20":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"40,21":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"40,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"40,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"40,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"41,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"41,1":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,2":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"41,3":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"41,4":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"41,5":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,6":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,7":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,8":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,9":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,10":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,11":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,12":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,13":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,14":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"41,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,18":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,20":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"41,21":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"41,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"41,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"41,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,1":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,2":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,3":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,4":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,5":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,15":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,16":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"42,17":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"42,18":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"42,19":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"42,20":{"character":"=","color":"#937255","data":{"type":"FLOOR"}},"42,21":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"42,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"42,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,16":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"43,17":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"43,18":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"43,19":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"43,20":{"type":1,"character":"#","color":"#c3c3c3","data":{"type":"WALL"}},"43,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"43,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"44,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"45,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"46,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"47,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"48,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,0":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,1":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,2":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,3":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,4":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,5":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,6":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,7":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,8":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,9":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,10":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,11":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,12":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,13":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,14":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,15":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,16":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,17":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,18":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,19":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,20":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,21":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,22":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,23":{"character":",,","color":"#417505","data":{"type":"GROUND"}},"49,24":{"character":",,","color":"#417505","data":{"type":"GROUND"}}}}')},4104:(t,e,r)=>{var a=r(3531),n=r(1516),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(a(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!n(t))||(i.test(t)||!o.test(t)||null!=e&&t in Object(e))}},4125:(t,e,r)=>{var a=r(9545),n=r(1502);t.exports=function(t,e){return a(t,n(t),e)}},4126:(t,e,r)=>{var a=r(5581),n=a&&new a;t.exports=n},4164:(t,e,r)=>{var a=r(4311)();t.exports=a},4222:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(3069),s=r(9423),c=r(9614),l=r(8498),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new n.Collection,e}return a(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new n.Collection;return this.children.each((function(r){t(r)&&e.push(r)})),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new n.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new n.Collection,this},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}var a=t[0];if(a.getParent())return a.moveTo(this),this;var n=this.children;return this._validateAdd(a),a._clearCaches(),a.index=n.length,a.parent=this,n.push(a),this._fire("add",{child:a}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return n.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var r=[];return this._descendants((function(a){var n=a._isMatch(t);return n&&r.push(a),!(!n||!e)})),n.Collection.toCollection(r)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var r=this.children[e];if(t(r))return!0;if(r.hasChildren()&&r._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=i.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),r=e.length,a=0;a<r;a++){var n=e[a];t.children.push(n.toObject())}return t},e.prototype._getDescendants=function(t){for(var e=[],r=t.length,a=0;a<r;a++){var n=t[a];this.isAncestorOf(n)&&e.push(n)}return e},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=i.Node.prototype.clone.call(this,t);return this.getChildren().each((function(t){e.add(t.clone())})),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each((function(r){r.isVisible()&&r.intersects(t)&&e.push(r)})),e},e.prototype._setChildrenIndices=function(){this.children.each((function(t,e){t.index=e}))},e.prototype.drawScene=function(t,e,r){var a=this.getLayer(),n=t||a&&a.getCanvas(),o=n&&n.getContext(),i=this._getCanvasCache(),s=i&&i.scene;return(this.isVisible()||r)&&(!r&&s?(o.save(),a._applyTransform(this,o,e),this._drawCachedSceneCanvas(o),o.restore()):this._drawChildren(n,"drawScene",e,!1,r,r)),this},e.prototype.drawHit=function(t,e,r){var a=this.getLayer(),n=t||a&&a.hitCanvas,o=n&&n.getContext(),i=this._getCanvasCache(),s=i&&i.hit;return(this.shouldDrawHit(n)||r)&&(!r&&s?(o.save(),a._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore()):this._drawChildren(n,"drawHit",e,!1,r,r)),this},e.prototype._drawChildren=function(t,e,r,a,n,o){var i,s,c=this.getLayer(),l=t&&t.getContext(),u=this.clipWidth(),h=this.clipHeight(),d=this.clipFunc(),p=u&&h||d;if(p&&c){l.save();var f=this.getAbsoluteTransform(r),g=f.getMatrix();l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.beginPath(),d?d.call(this,l,this):(i=this.clipX(),s=this.clipY(),l.rect(i,s,u,h)),l.clip(),g=f.copy().invert().getMatrix(),l.transform(g[0],g[1],g[2],g[3],g[4],g[5])}var y="source-over"!==this.globalCompositeOperation()&&!o&&"drawScene"===e;y&&c&&(l.save(),l._applyGlobalCompositeOperation(this)),this.children.each((function(o){o[e](t,r,a,n)})),y&&c&&l.restore(),p&&c&&l.restore()},e.prototype.shouldDrawHit=function(t){if(t&&t.isCache)return!0;var e=this.getLayer(),r=!1;s.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&t.node.getLayer()===e&&(r=!0)}));var a=!l.Konva.hitOnDragEnabled&&r;return e&&e.hitGraphEnabled()&&this.isVisible()&&!a},e.prototype.getClientRect=function(t){var e,r,a,n,o=(t=t||{}).skipTransform,i=t.relativeTo,s={x:1/0,y:1/0,width:0,height:0},c=this;this.children.each((function(o){if(o.visible()){var i=o.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===i.width&&0===i.height||(void 0===e?(e=i.x,r=i.y,a=i.x+i.width,n=i.y+i.height):(e=Math.min(e,i.x),r=Math.min(r,i.y),a=Math.max(a,i.x+i.width),n=Math.max(n,i.y+i.height)))}}));for(var l=this.find("Shape"),u=!1,h=0;h<l.length;h++){if(l[h]._isVisible(this)){u=!0;break}}return s=u&&void 0!==e?{x:e,y:r,width:a-e,height:n-r}:{x:0,y:0,width:0,height:0},o?s:this._transformedRect(s,i)},e}(i.Node);e.Container=u,o.Factory.addComponentsGetterSetter(u,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(u,"clipX",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipY",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipWidth",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipHeight",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipFunc"),n.Collection.mapMethods(u)},4302:(t,e,r)=>{var a=r(3884),n=r(4916);t.exports=function(t){return n(t)&&"[object Map]"==a(t)}},4311:(t,e,r)=>{var a=r(35),n=r(9470),o=r(9375),i=r(4046),s=r(3531),c=r(5261);t.exports=function(t){return n((function(e){var r=e.length,n=r,l=a.prototype.thru;for(t&&e.reverse();n--;){var u=e[n];if("function"!=typeof u)throw new TypeError("Expected a function");if(l&&!h&&"wrapper"==i(u))var h=new a([],!0)}for(n=h?n:r;++n<r;){u=e[n];var d=i(u),p="wrapper"==d?o(u):void 0;h=p&&c(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?h[i(p[0])].apply(h,p[3]):1==u.length&&c(u)?h[d]():h.thru(u)}return function(){var t=arguments,a=t[0];if(h&&1==t.length&&s(a))return h.plant(a).value();for(var n=0,o=r?e[n].apply(this,t):a;++n<r;)o=e[n].call(this,o);return o}}))}},4316:(t,e,r)=>{var a=r(5151),n=r(8106),o=r(7202),i=r(1721),s=r(2979),c=r(7065),l=a?a.prototype:void 0,u=l?l.valueOf:void 0;t.exports=function(t,e,r,a,l,h,d){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new n(t),new n(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var f=1&a;if(p||(p=c),t.size!=e.size&&!f)return!1;var g=d.get(t);if(g)return g==e;a|=2,d.set(t,e);var y=i(p(t),p(e),a,l,h,d);return d.delete(t),y;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},4352:(t,e,r)=>{var a=r(516),n=r(1353),o=r(1054),i=n?function(t,e){return n(t,"toString",{configurable:!0,enumerable:!1,value:a(e),writable:!0})}:o;t.exports=i},4405:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);function i(t,e,r){var a=4*(r*t.width+e),n=[];return n.push(t.data[a++],t.data[a++],t.data[a++],t.data[a++]),n}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var r=i(t,0,0),a=i(t,t.width-1,0),n=i(t,0,t.height-1),o=i(t,t.width-1,t.height-1),c=e||10;if(s(r,a)<c&&s(a,o)<c&&s(o,n)<c&&s(n,r)<c){for(var l=function(t){for(var e=[0,0,0],r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([a,r,o,n]),u=[],h=0;h<t.width*t.height;h++){var d=s(l,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);u[h]=d<c?0:255}return u}}(t,this.threshold());return e&&function(t,e){for(var r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}(t,e=function(t,e,r){for(var a=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],n=Math.round(Math.sqrt(a.length)),o=Math.floor(n/2),i=[],s=0;s<r;s++)for(var c=0;c<e;c++){for(var l=s*e+c,u=0,h=0;h<n;h++)for(var d=0;d<n;d++){var p=s+h-o,f=c+d-o;if(p>=0&&p<r&&f>=0&&f<e){var g=a[h*n+d];u+=t[p*e+f]*g}}i[l]=u}return i}(e=function(t,e,r){for(var a=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(a.length)),o=Math.floor(n/2),i=[],s=0;s<r;s++)for(var c=0;c<e;c++){for(var l=s*e+c,u=0,h=0;h<n;h++)for(var d=0;d<n;d++){var p=s+h-o,f=c+d-o;if(p>=0&&p<r&&f>=0&&f<e){var g=a[h*n+d];u+=t[p*e+f]*g}}i[l]=u>=1020?255:0}return i}(e=function(t,e,r){for(var a=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(a.length)),o=Math.floor(n/2),i=[],s=0;s<r;s++)for(var c=0;c<e;c++){for(var l=s*e+c,u=0,h=0;h<n;h++)for(var d=0;d<n;d++){var p=s+h-o,f=c+d-o;if(p>=0&&p<r&&f>=0&&f<e){var g=a[h*n+d];u+=t[p*e+f]*g}}i[l]=2040===u?255:0}return i}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},a.Factory.addGetterSetter(n.Node,"threshold",0,o.getNumberValidator(),a.Factory.afterSetFilter)},4418:(t,e,r)=>{var a=r(9223),n=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=a(e,t);return!(r<0)&&(r==e.length-1?e.pop():n.call(e,r,1),--this.size,!0)}},4458:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9614),c=r(8498),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),e!==r&&t.scale(1,r/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(i.Shape);e.Ellipse=l,l.prototype.className="Ellipse",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radiusX","radiusY"],c._registerNode(l),o.Factory.addComponentsGetterSetter(l,"radius",["x","y"]),o.Factory.addGetterSetter(l,"radiusX",0,s.getNumberValidator()),o.Factory.addGetterSetter(l,"radiusY",0,s.getNumberValidator()),n.Collection.mapMethods(l)},4528:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(2261),i=r(3887),s=r(3069),c=r(9614),l=r(8498),u=r(9509),h="hasShadow",d="shadowRGBA",p="patternImage",f="linearGradient",g="radialGradient";function y(){return n||(n=o.Util.createCanvasElement().getContext("2d"))}function m(){this._clearCache(h)}function _(){this._clearCache(d)}function v(){this._clearCache(p)}function b(){this._clearCache(f)}function w(){this._clearCache(g)}e.shapes={};var x=function(t){function r(r){for(var a,n=t.call(this,r)||this;!(a=o.Util.getRandomColor())||a in e.shapes;);return n.colorKey=a,e.shapes[a]=n,n.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),n.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),n.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",v),n.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",b),n.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",w),n}return a(r,t),r.prototype.getContext=function(){return this.getLayer().getContext()},r.prototype.getCanvas=function(){return this.getLayer().getCanvas()},r.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},r.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},r.prototype.hasShadow=function(){return this._getCache(h,this._hasShadow)},r.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},r.prototype._getFillPattern=function(){return this._getCache(p,this.__getFillPattern)},r.prototype.__getFillPattern=function(){if(this.fillPatternImage())return y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat")},r.prototype._getLinearGradient=function(){return this._getCache(f,this.__getLinearGradient)},r.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=y(),r=this.fillLinearGradientStartPoint(),a=this.fillLinearGradientEndPoint(),n=e.createLinearGradient(r.x,r.y,a.x,a.y),o=0;o<t.length;o+=2)n.addColorStop(t[o],t[o+1]);return n}},r.prototype._getRadialGradient=function(){return this._getCache(g,this.__getRadialGradient)},r.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=y(),r=this.fillRadialGradientStartPoint(),a=this.fillRadialGradientEndPoint(),n=e.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),a.x,a.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)n.addColorStop(t[o],t[o+1]);return n}},r.prototype.getShadowRGBA=function(){return this._getCache(d,this._getShadowRGBA)},r.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=o.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},r.prototype.hasFill=function(){return this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},r.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())},r.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},r.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},r.prototype.destroy=function(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},r.prototype._useBufferCanvas=function(t){return!(t&&!this.hasShadow()||!this.perfectDrawEnabled()||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},r.prototype.setStrokeHitEnabled=function(t){o.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},r.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},r.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},r.prototype.getClientRect=function(t){var e=(t=t||{}).skipTransform,r=t.relativeTo,a=this.getSelfRect(),n=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=a.width+n,i=a.height+n,s=!t.skipShadow&&this.hasShadow(),c=s?this.shadowOffsetX():0,l=s?this.shadowOffsetY():0,u=o+Math.abs(c),h=i+Math.abs(l),d=s&&this.shadowBlur()||0,p=u+2*d,f=h+2*d,g=0;Math.round(n/2)!==n/2&&(g=1);var y={width:p+g,height:f+g,x:-Math.round(n/2+d)+Math.min(c,0)+a.x,y:-Math.round(n/2+d)+Math.min(l,0)+a.y};return e?y:this._transformedRect(y,r)},r.prototype.drawScene=function(t,e,r,a){var n,o,i=this.getLayer(),s=t||i.getCanvas(),c=s.getContext(),l=this._getCanvasCache(),u=this.sceneFunc(),h=this.hasShadow(),d=this.hasStroke();if(!this.isVisible()&&!r)return this;if(l)return c.save(),i._applyTransform(this,c,e),this._drawCachedSceneCanvas(c),c.restore(),this;if(!u)return this;if(c.save(),this._useBufferCanvas(r)&&!a){if((o=(n=this.getStage().bufferCanvas).getContext()).clear(),o.save(),o._applyLineJoin(this),!r)if(i)i._applyTransform(this,o,e);else{var p=this.getAbsoluteTransform(e).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5])}u.call(this,o,this),o.restore();var f=n.pixelRatio;h&&!s.hitCanvas?(c.save(),c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(n._canvas,0,0,n.width/f,n.height/f),c.restore()):(c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(n._canvas,0,0,n.width/f,n.height/f))}else{if(c._applyLineJoin(this),!r)if(i)i._applyTransform(this,c,e);else{var g=this.getAbsoluteTransform(e).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5])}h&&d&&!s.hitCanvas?(c.save(),r||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c._applyShadow(this),u.call(this,c,this),c.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&u.call(this,c,this)):h&&!s.hitCanvas?(c.save(),r||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c._applyShadow(this),u.call(this,c,this),c.restore()):(r||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),u.call(this,c,this))}return c.restore(),this},r.prototype.drawHit=function(t,e,r){var a=this.getLayer(),n=t||a.hitCanvas,i=n&&n.getContext(),s=this.hitFunc()||this.sceneFunc(),c=this._getCanvasCache(),l=c&&c.hit;if(this.colorKey||(console.log(this),o.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),!this.shouldDrawHit()&&!r)return this;if(l)return i.save(),a._applyTransform(this,i,e),this._drawCachedHitCanvas(i),i.restore(),this;if(!s)return this;if(i.save(),i._applyLineJoin(this),!r)if(a)a._applyTransform(this,i,e);else{var u=this.getAbsoluteTransform(e).getMatrix();i.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return s.call(this,i,this),i.restore(),this},r.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,r,a,n,i,s=this._getCanvasCache(),c=this._getCachedSceneCanvas(),l=s.hit,u=l.getContext(),h=l.getWidth(),d=l.getHeight();u.clear(),u.drawImage(c._canvas,0,0,h,d);try{for(a=(r=(e=u.getImageData(0,0,h,d)).data).length,n=o.Util._hexToRgb(this.colorKey),i=0;i<a;i+=4)r[i+3]>t?(r[i]=n.r,r[i+1]=n.g,r[i+2]=n.b,r[i+3]=255):r[i+3]=0;u.putImageData(e,0,0)}catch(p){o.Util.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this},r.prototype.hasPointerCapture=function(t){return u.hasPointerCapture(t,this)},r.prototype.setPointerCapture=function(t){u.setPointerCapture(t,this)},r.prototype.releaseCapture=function(t){u.releaseCapture(t,this)},r}(s.Node);e.Shape=x,x.prototype._fillFunc=function(t){t.fill()},x.prototype._strokeFunc=function(t){t.stroke()},x.prototype._fillFuncHit=function(t){t.fill()},x.prototype._strokeFuncHit=function(t){t.stroke()},x.prototype._centroid=!1,x.prototype.nodeType="Shape",l._registerNode(x),i.Factory.addGetterSetter(x,"stroke",void 0,c.getStringValidator()),i.Factory.addGetterSetter(x,"strokeWidth",2,c.getNumberValidator()),i.Factory.addGetterSetter(x,"hitStrokeWidth","auto",c.getNumberOrAutoValidator()),i.Factory.addGetterSetter(x,"strokeHitEnabled",!0,c.getBooleanValidator()),i.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,c.getBooleanValidator()),i.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,c.getBooleanValidator()),i.Factory.addGetterSetter(x,"lineJoin"),i.Factory.addGetterSetter(x,"lineCap"),i.Factory.addGetterSetter(x,"sceneFunc"),i.Factory.addGetterSetter(x,"hitFunc"),i.Factory.addGetterSetter(x,"dash"),i.Factory.addGetterSetter(x,"dashOffset",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"shadowColor",void 0,c.getStringValidator()),i.Factory.addGetterSetter(x,"shadowBlur",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"shadowOpacity",1,c.getNumberValidator()),i.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(x,"shadowOffsetX",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"shadowOffsetY",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"fillPatternImage"),i.Factory.addGetterSetter(x,"fill",void 0,c.getStringValidator()),i.Factory.addGetterSetter(x,"fillPatternX",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"fillPatternY",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(x,"fillEnabled",!0),i.Factory.addGetterSetter(x,"strokeEnabled",!0),i.Factory.addGetterSetter(x,"shadowEnabled",!0),i.Factory.addGetterSetter(x,"dashEnabled",!0),i.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(x,"fillPriority","color"),i.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(x,"fillPatternOffsetX",0,c.getNumberValidator()),i.Factory.addGetterSetter(x,"fillPatternOffsetY",0,c.getNumberValidator()),i.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(x,"fillPatternScaleX",1,c.getNumberValidator()),i.Factory.addGetterSetter(x,"fillPatternScaleY",1,c.getNumberValidator()),i.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(x,"fillPatternRotation",0),i.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),o.Collection.mapMethods(x)},4553:t=>{t.exports=function(t,e){return t.has(e)}},4568:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var r,a,n,o,l,u,h,d,p,f,g,y,m,_,v,b,w,x,O,R,A,C,k,E,S=t.data,T=t.width,L=t.height,D=e+e+1,N=T-1,P=L-1,U=e+1,G=U*(U+1)/2,I=new i,M=null,F=I,j=null,W=null,B=s[e],z=c[e];for(n=1;n<D;n++)F=F.next=new i,n===U&&(M=F);for(F.next=I,h=u=0,a=0;a<L;a++){for(b=w=x=O=d=p=f=g=0,y=U*(R=S[u]),m=U*(A=S[u+1]),_=U*(C=S[u+2]),v=U*(k=S[u+3]),d+=G*R,p+=G*A,f+=G*C,g+=G*k,F=I,n=0;n<U;n++)F.r=R,F.g=A,F.b=C,F.a=k,F=F.next;for(n=1;n<U;n++)o=u+((N<n?N:n)<<2),d+=(F.r=R=S[o])*(E=U-n),p+=(F.g=A=S[o+1])*E,f+=(F.b=C=S[o+2])*E,g+=(F.a=k=S[o+3])*E,b+=R,w+=A,x+=C,O+=k,F=F.next;for(j=I,W=M,r=0;r<T;r++)S[u+3]=k=g*B>>z,0!==k?(k=255/k,S[u]=(d*B>>z)*k,S[u+1]=(p*B>>z)*k,S[u+2]=(f*B>>z)*k):S[u]=S[u+1]=S[u+2]=0,d-=y,p-=m,f-=_,g-=v,y-=j.r,m-=j.g,_-=j.b,v-=j.a,o=h+((o=r+e+1)<N?o:N)<<2,d+=b+=j.r=S[o],p+=w+=j.g=S[o+1],f+=x+=j.b=S[o+2],g+=O+=j.a=S[o+3],j=j.next,y+=R=W.r,m+=A=W.g,_+=C=W.b,v+=k=W.a,b-=R,w-=A,x-=C,O-=k,W=W.next,u+=4;h+=T}for(r=0;r<T;r++){for(w=x=O=b=p=f=g=d=0,y=U*(R=S[u=r<<2]),m=U*(A=S[u+1]),_=U*(C=S[u+2]),v=U*(k=S[u+3]),d+=G*R,p+=G*A,f+=G*C,g+=G*k,F=I,n=0;n<U;n++)F.r=R,F.g=A,F.b=C,F.a=k,F=F.next;for(l=T,n=1;n<=e;n++)u=l+r<<2,d+=(F.r=R=S[u])*(E=U-n),p+=(F.g=A=S[u+1])*E,f+=(F.b=C=S[u+2])*E,g+=(F.a=k=S[u+3])*E,b+=R,w+=A,x+=C,O+=k,F=F.next,n<P&&(l+=T);for(u=r,j=I,W=M,a=0;a<L;a++)S[3+(o=u<<2)]=k=g*B>>z,k>0?(k=255/k,S[o]=(d*B>>z)*k,S[o+1]=(p*B>>z)*k,S[o+2]=(f*B>>z)*k):S[o]=S[o+1]=S[o+2]=0,d-=y,p-=m,f-=_,g-=v,y-=j.r,m-=j.g,_-=j.b,v-=j.a,o=r+((o=a+U)<P?o:P)*T<<2,d+=b+=j.r=S[o],p+=w+=j.g=S[o+1],f+=x+=j.b=S[o+2],g+=O+=j.a=S[o+3],j=j.next,y+=R=W.r,m+=A=W.g,_+=C=W.b,v+=k=W.a,b-=R,w-=A,x-=C,O-=k,W=W.next,u+=T}}(t,e)},a.Factory.addGetterSetter(n.Node,"blurRadius",0,o.getNumberValidator(),a.Factory.afterSetFilter)},4673:(t,e,r)=>{var a=r(9223);t.exports=function(t){return a(this.__data__,t)>-1}},4674:(t,e,r)=>{"use strict";var a=r(6723);e.__esModule=!0,e.default=function(t,e){t.classList?t.classList.add(e):(0,n.default)(t,e)||("string"===typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))};var n=a(r(971));t.exports=e.default},4695:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4222),s=r(8498),c=r(9685),l=r(9423),u=r(8498),h=r(9509),d="mouseout",p="mouseleave",f="mouseover",g="mouseenter",y="mousemove",m="mousedown",_="mouseup",v="pointermove",b="pointerdown",w="pointerup",x="contextmenu",O="click",R="dblclick",A="touchstart",C="touchend",k="dbltap",E="touchmove",S="wheel",T=[g,m,y,_,d,A,E,C,f,S,x,b,v,w,"pointercancel","lostpointercapture"],L=T.length;function D(t,e){t.content.addEventListener(e,(function(r){t["_"+e](r)}),!1)}function N(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&n.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var P=function(t){function r(r){var a=t.call(this,N(r))||this;return a._pointerPositions=[],a._changedPointerPositions=[],a._buildDOM(),a._bindContentEvents(),e.stages.push(a),a.on("widthChange.konva heightChange.konva",a._resizeDOM),a.on("visibleChange.konva",a._checkVisibility),a.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){N(a.attrs)})),a._checkVisibility(),a}return a(r,t),r.prototype._validateAdd=function(t){var e="Layer"===t.getType(),r="FastLayer"===t.getType();e||r||n.Util.throw("You may only add layers to the stage.")},r.prototype._checkVisibility=function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}},r.prototype.setContainer=function(t){if("string"===typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var r;r="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},r.prototype.shouldDrawHit=function(){return!0},r.prototype.clear=function(){var t,e=this.children,r=e.length;for(t=0;t<r;t++)e[t].clear();return this},r.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),i.Container.prototype.clone.call(this,t)},r.prototype.destroy=function(){t.prototype.destroy.call(this);var r=this.content;r&&n.Util._isInDocument(r)&&this.container().removeChild(r);var a=e.stages.indexOf(this);return a>-1&&e.stages.splice(a,1),this},r.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(n.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},r.prototype._getPointerById=function(t){return this._pointerPositions.find((function(e){return e.id===t}))},r.prototype.getPointersPositions=function(){return this._pointerPositions},r.prototype.getStage=function(){return this},r.prototype.getContent=function(){return this.content},r.prototype._toKonvaCanvas=function(t){var e=(t=t||{}).x||0,r=t.y||0,a=new c.SceneCanvas({width:t.width||this.width(),height:t.height||this.height(),pixelRatio:t.pixelRatio||1}),n=a.getContext()._context,o=this.children;return(e||r)&&n.translate(-1*e,-1*r),o.each((function(a){if(a.isVisible()){var o=a._toKonvaCanvas(t);n.drawImage(o._canvas,e,r,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}})),a},r.prototype.getIntersection=function(t,e){if(!t)return null;var r,a,n=this.children;for(r=n.length-1;r>=0;r--)if(a=n[r].getIntersection(t,e))return a;return null},r.prototype._resizeDOM=function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.each((function(r){r.setSize({width:t,height:e}),r.draw()}))},r.prototype.add=function(e){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}t.prototype.add.call(this,e);var a=this.children.length;return a>5&&n.Util.warn("The stage has "+a+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e._setCanvasSize(this.width(),this.height()),e.draw(),s.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},r.prototype.getParent=function(){return null},r.prototype.getLayer=function(){return null},r.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},r.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},r.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},r.prototype.getLayers=function(){return this.getChildren()},r.prototype._bindContentEvents=function(){if(s.Konva.isBrowser)for(var t=0;t<L;t++)D(this,T[t])},r.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire(g,{evt:t,target:this,currentTarget:this})},r.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire(f,{evt:t,target:this,currentTarget:this})},r.prototype._mouseout=function(t){this.setPointersPositions(t);var e=this.targetShape,r=!l.DD.isDragging||s.Konva.hitOnDragEnabled;e&&r?(e._fireAndBubble(d,{evt:t}),e._fireAndBubble(p,{evt:t}),this._fire(p,{evt:t,target:this,currentTarget:this}),this.targetShape=null):r&&(this._fire(p,{evt:t,target:this,currentTarget:this}),this._fire(d,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},r.prototype._mousemove=function(t){if(s.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var e,r=n.Util._getFirstPointerId(t),a=!l.DD.isDragging||s.Konva.hitOnDragEnabled;if(a){if((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()){var o=!this.targetShape||this.targetShape!==e;a&&o?(this.targetShape&&(this.targetShape._fireAndBubble(d,{evt:t,pointerId:r},e),this.targetShape._fireAndBubble(p,{evt:t,pointerId:r},e)),e._fireAndBubble(f,{evt:t,pointerId:r},this.targetShape),e._fireAndBubble(g,{evt:t,pointerId:r},this.targetShape),e._fireAndBubble(y,{evt:t,pointerId:r}),this.targetShape=e):e._fireAndBubble(y,{evt:t,pointerId:r})}else this.targetShape&&a&&(this.targetShape._fireAndBubble(d,{evt:t,pointerId:r}),this.targetShape._fireAndBubble(p,{evt:t,pointerId:r}),this._fire(f,{evt:t,target:this,currentTarget:this,pointerId:r}),this.targetShape=null),this._fire(y,{evt:t,target:this,currentTarget:this,pointerId:r});this._fire("contentMousemove",{evt:t})}t.cancelable&&t.preventDefault()},r.prototype._mousedown=function(t){if(s.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=n.Util._getFirstPointerId(t),r=this.getIntersection(this.getPointerPosition());l.DD.justDragged=!1,s.Konva.listenClickTap=!0,r&&r.isListening()?(this.clickStartShape=r,r._fireAndBubble(m,{evt:t,pointerId:e})):this._fire(m,{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},r.prototype._mouseup=function(t){if(s.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=n.Util._getFirstPointerId(t),r=this.getIntersection(this.getPointerPosition()),a=this.clickStartShape,o=this.clickEndShape,i=!1;s.Konva.inDblClickWindow?(i=!0,clearTimeout(this.dblTimeout)):l.DD.justDragged||(s.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){s.Konva.inDblClickWindow=!1}),s.Konva.dblClickWindow),r&&r.isListening()?(this.clickEndShape=r,r._fireAndBubble(_,{evt:t,pointerId:e}),s.Konva.listenClickTap&&a&&a._id===r._id&&(r._fireAndBubble(O,{evt:t,pointerId:e}),i&&o&&o===r&&r._fireAndBubble(R,{evt:t,pointerId:e}))):(this._fire(_,{evt:t,target:this,currentTarget:this,pointerId:e}),s.Konva.listenClickTap&&this._fire(O,{evt:t,target:this,currentTarget:this,pointerId:e}),i&&this._fire(R,{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),s.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),i&&this._fire("contentDblclick",{evt:t})),s.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},r.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(x,{evt:t}):this._fire(x,{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},r.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var r=!1;this._changedPointerPositions.forEach((function(a){var n=e.getIntersection(a);s.Konva.listenClickTap=!0,l.DD.justDragged=!1,n&&n.isListening()&&(s.Konva.captureTouchEventsEnabled&&n.setPointerCapture(a.id),e.tapStartShape=n,n._fireAndBubble(A,{evt:t,pointerId:a.id},e),r=!0,n.isListening()&&n.preventDefault()&&t.cancelable&&t.preventDefault())})),r||this._fire(A,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},r.prototype._touchmove=function(t){var e=this;if(this.setPointersPositions(t),!l.DD.isDragging||s.Konva.hitOnDragEnabled){var r=!1,a={};this._changedPointerPositions.forEach((function(n){var o=h.getCapturedShape(n.id)||e.getIntersection(n);o&&o.isListening()&&(a[o._id]||(a[o._id]=!0,o._fireAndBubble(E,{evt:t,pointerId:n.id}),r=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault()))})),r||this._fire(E,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}l.DD.isDragging&&l.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},r.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var r=this.clickEndShape,a=!1;s.Konva.inDblClickWindow?(a=!0,clearTimeout(this.dblTimeout)):l.DD.justDragged||(s.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){s.Konva.inDblClickWindow=!1}),s.Konva.dblClickWindow);var n=!1,o={},i=!1,c=!1;this._changedPointerPositions.forEach((function(l){var u=h.getCapturedShape(l.id)||e.getIntersection(l);u&&u.releaseCapture(l.id),u&&u.isListening()&&(o[u._id]||(o[u._id]=!0,e.clickEndShape=u,u._fireAndBubble(C,{evt:t,pointerId:l.id}),n=!0,s.Konva.listenClickTap&&u===e.tapStartShape&&(i=!0,u._fireAndBubble("tap",{evt:t,pointerId:l.id}),a&&r&&r===u&&(c=!0,u._fireAndBubble(k,{evt:t,pointerId:l.id}))),u.isListening()&&u.preventDefault()&&t.cancelable&&t.preventDefault()))})),n||this._fire(C,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva.listenClickTap&&!i&&this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a&&!c&&this._fire(k,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),s.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),a&&this._fire("contentDbltap",{evt:t})),s.Konva.listenClickTap=!1},r.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(S,{evt:t}):this._fire(S,{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},r.prototype._pointerdown=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(b,h.createEvent(t))}},r.prototype._pointermove=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(v,h.createEvent(t))}},r.prototype._pointerup=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(w,h.createEvent(t)),h.releaseCapture(t.pointerId)}},r.prototype._pointercancel=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(w,h.createEvent(t)),h.releaseCapture(t.pointerId)}},r.prototype._lostpointercapture=function(t){h.releaseCapture(t.pointerId)},r.prototype.setPointersPositions=function(t){var e=this,r=this._getContentPosition(),a=null,o=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],n.Collection.prototype.each.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})})),n.Collection.prototype.each.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})}))):(a=(t.clientX-r.left)/r.scaleX,o=(t.clientY-r.top)/r.scaleY,this.pointerPos={x:a,y:o},this._pointerPositions=[{x:a,y:o,id:n.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:a,y:o,id:n.Util._getFirstPointerId(t)}])},r.prototype._setPointerPosition=function(t){n.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},r.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},r.prototype._buildDOM=function(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),s.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},r.prototype.cache=function(){return n.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},r.prototype.clearCache=function(){return this},r.prototype.batchDraw=function(){return this.children.each((function(t){t.batchDraw()})),this},r}(i.Container);e.Stage=P,P.prototype.nodeType="Stage",u._registerNode(P),o.Factory.addGetterSetter(P,"container")},4749:t=>{var e=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;t.exports=function(t){var a=t.match(e);return a?a[1].split(r):[]}},4788:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},4796:t=>{t.exports=function(){}},4821:(t,e,r)=>{var a=r(2852);t.exports=function(){this.__data__=a?a(null):{},this.size=0}},4837:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9614),c=r(8498),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},e.prototype._sceneFunc=function(t){var e,r,a,n=this.width(),o=this.height(),i=this.image();i&&(e=this.cropWidth(),r=this.cropHeight(),a=e&&r?[i,this.cropX(),this.cropY(),e,r,0,0,n,o]:[i,0,0,n,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,a)},e.prototype._hitFunc=function(t){var e=this.width(),r=this.height();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,e=this.image();return null!==(t=this.attrs.width)&&void 0!==t?t:e?e.width:0},e.prototype.getHeight=function(){var t,e=this.image();return null!==(t=this.attrs.height)&&void 0!==t?t:e?e.height:0},e.fromURL=function(t,r){var a=n.Util.createImageElement();a.onload=function(){var t=new e({image:a});r(t)},a.crossOrigin="Anonymous",a.src=t},e}(i.Shape);e.Image=l,l.prototype.className="Image",c._registerNode(l),o.Factory.addGetterSetter(l,"image"),o.Factory.addComponentsGetterSetter(l,"crop",["x","y","width","height"]),o.Factory.addGetterSetter(l,"cropX",0,s.getNumberValidator()),o.Factory.addGetterSetter(l,"cropY",0,s.getNumberValidator()),o.Factory.addGetterSetter(l,"cropWidth",0,s.getNumberValidator()),o.Factory.addGetterSetter(l,"cropHeight",0,s.getNumberValidator()),n.Collection.mapMethods(l)},4865:(t,e,r)=>{var a=r(7650),n=r(7097),o=r(4916),i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=a(t))return!1;var e=n(t);if(null===e)return!0;var r=l.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},4885:(t,e,r)=>{var a=r(8233),n=r(1123);t.exports=function(t){return n("function"==typeof t?t:a(t,1))}},4916:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},4927:(t,e,r)=>{var a=r(7373);t.exports=function(t,e){return!!(null==t?0:t.length)&&a(t,e,0)>-1}},4933:t=>{"use strict";var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(t){a[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(n){return!1}}()?Object.assign:function(t,n){for(var o,i,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))r.call(o,l)&&(s[l]=o[l]);if(e){i=e(o);for(var u=0;u<i.length;u++)a.call(o,i[u])&&(s[i[u]]=o[i[u]])}}return s}},4956:(t,e,r)=>{var a=r(8753)(Object.keys,Object);t.exports=a},4976:t=>{var e="__lodash_placeholder__";t.exports=function(t,r){for(var a=-1,n=t.length,o=0,i=[];++a<n;){var s=t[a];s!==r&&s!==e||(t[a]=e,i[o++]=a)}return i}},5010:(t,e,r)=>{"use strict";e.__esModule=!0,e.nameShape=void 0,e.transitionTimeout=function(t){var e="transition"+t+"Timeout",r="transition"+t;return function(t){if(t[r]){if(null==t[e])return new Error(e+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof t[e])return new Error(e+" must be a number (in milliseconds)")}return null}};n(r(1561));var a=n(r(9358));function n(t){return t&&t.__esModule?t:{default:t}}e.nameShape=a.default.oneOfType([a.default.string,a.default.shape({enter:a.default.string,leave:a.default.string,active:a.default.string}),a.default.shape({enter:a.default.string,enterActive:a.default.string,leave:a.default.string,leaveActive:a.default.string,appear:a.default.string,appearActive:a.default.string})])},5034:(t,e,r)=>{var a=r(7922),n=r(9795);function o(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}o.prototype=a(n.prototype),o.prototype.constructor=o,t.exports=o},5148:(t,e,r)=>{var a=r(7650),n=r(8347);t.exports=function(t){if(!n(t))return!1;var e=a(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},5151:(t,e,r)=>{var a=r(8731).Symbol;t.exports=a},5163:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},5261:(t,e,r)=>{var a=r(5034),n=r(9375),o=r(4046),i=r(2528);t.exports=function(t){var e=o(t),r=i[e];if("function"!=typeof r||!(e in a.prototype))return!1;if(t===r)return!0;var s=n(r);return!!s&&t===s[0]}},5271:(t,e,r)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=r(5633)},5298:(t,e,r)=>{var a=r(9342);t.exports=function(t){var e=a(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},5306:(t,e,r)=>{var a=r(9223);t.exports=function(t){var e=this.__data__,r=a(e,t);return r<0?void 0:e[r][1]}},5387:(t,e,r)=>{var a=r(3531),n=r(4104),o=r(9616),i=r(2124);t.exports=function(t,e){return a(t)?t:n(t,e)?[t]:o(i(t))}},5396:(t,e,r)=>{var a=r(2925),n=r(351),o=Math.min;t.exports=function(t,e){for(var r=t.length,i=o(e.length,r),s=a(t);i--;){var c=e[i];t[i]=n(c,r)?s[c]:void 0}return t}},5553:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(2356),s=r(9614),c=r(8498),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var r=2*Math.PI,a=this.points(),n=a,o=0!==this.tension()&&a.length>4;o&&(n=this.getTensionPoints());var i,s,c=a.length;o?(i=a[c-2]-(n[n.length-2]+n[n.length-4])/2,s=a[c-1]-(n[n.length-1]+n[n.length-3])/2):(i=a[c-2]-a[c-4],s=a[c-1]-a[c-3]);var l=(Math.atan2(s,i)+r)%r,u=this.pointerLength(),h=this.pointerWidth();e.save(),e.beginPath(),e.translate(a[c-2],a[c-1]),e.rotate(l),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(a[0],a[1]),o?(i=(n[0]+n[2])/2-a[0],s=(n[1]+n[3])/2-a[1]):(i=a[2]-a[0],s=a[3]-a[1]),e.rotate((Math.atan2(-s,-i)+r)%r),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore());var d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),r=this.pointerWidth()/2;return{x:e.x-r,y:e.y-r,width:e.width+2*r,height:e.height+2*r}},e}(i.Line);e.Arrow=l,l.prototype.className="Arrow",c._registerNode(l),o.Factory.addGetterSetter(l,"pointerLength",10,s.getNumberValidator()),o.Factory.addGetterSetter(l,"pointerWidth",10,s.getNumberValidator()),o.Factory.addGetterSetter(l,"pointerAtBeginning",!1),n.Collection.mapMethods(l)},5581:(t,e,r)=>{var a=r(2856)(r(8731),"WeakMap");t.exports=a},5613:(t,e,r)=>{var a,n,o=r(6186),i=r(8467),s=0,c=0;t.exports=function(t,e,r){var l=e&&r||0,u=e||[],h=(t=t||{}).node||a,d=void 0!==t.clockseq?t.clockseq:n;if(null==h||null==d){var p=o();null==h&&(h=a=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=n=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,y=f-s+(g-c)/1e4;if(y<0&&void 0===t.clockseq&&(d=d+1&16383),(y<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,n=d;var m=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=m>>>24&255,u[l++]=m>>>16&255,u[l++]=m>>>8&255,u[l++]=255&m;var _=f/4294967296*1e4&268435455;u[l++]=_>>>8&255,u[l++]=255&_,u[l++]=_>>>24&15|16,u[l++]=_>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var v=0;v<6;++v)u[l+v]=h[v];return e||i(u)}},5614:(t,e,r)=>{var a=r(9987),n=r(4927),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=function(t,e){return a(o,(function(r){var a="_."+r[0];e&r[1]&&!n(t,a)&&t.push(a)})),t.sort()}},5627:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=function(t){var e,r,a,n,o=t.data,i=o.length;for(e=0;e<i;e+=4)r=o[e+0],a=o[e+1],n=o[e+2],o[e+0]=Math.min(255,.393*r+.769*a+.189*n),o[e+1]=Math.min(255,.349*r+.686*a+.168*n),o[e+2]=Math.min(255,.272*r+.534*a+.131*n)}},5633:(t,e,r)=>{"use strict";var a=r(1561),n=r(4933),o=r(7918);function i(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!a)throw Error(i(227));function s(t,e,r,a,n,o,i,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var c=!1,l=null,u=!1,h=null,d={onError:function(t){c=!0,l=t}};function p(t,e,r,a,n,o,i,u,h){c=!1,l=null,s.apply(d,arguments)}var f=null,g=null,y=null;function m(t,e,r){var a=t.type||"unknown-event";t.currentTarget=y(r),function(t,e,r,a,n,o,s,d,f){if(p.apply(this,arguments),c){if(!c)throw Error(i(198));var g=l;c=!1,l=null,u||(u=!0,h=g)}}(a,e,void 0,t),t.currentTarget=null}var _=null,v={};function b(){if(_)for(var t in v){var e=v[t],r=_.indexOf(t);if(!(-1<r))throw Error(i(96,t));if(!x[r]){if(!e.extractEvents)throw Error(i(97,t));for(var a in x[r]=e,r=e.eventTypes){var n=void 0,o=r[a],s=e,c=a;if(O.hasOwnProperty(c))throw Error(i(99,c));O[c]=o;var l=o.phasedRegistrationNames;if(l){for(n in l)l.hasOwnProperty(n)&&w(l[n],s,c);n=!0}else o.registrationName?(w(o.registrationName,s,c),n=!0):n=!1;if(!n)throw Error(i(98,a,t))}}}}function w(t,e,r){if(R[t])throw Error(i(100,t));R[t]=e,A[t]=e.eventTypes[r].dependencies}var x=[],O={},R={},A={};function C(t){var e,r=!1;for(e in t)if(t.hasOwnProperty(e)){var a=t[e];if(!v.hasOwnProperty(e)||v[e]!==a){if(v[e])throw Error(i(102,e));v[e]=a,r=!0}}r&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),E=null,S=null,T=null;function L(t){if(t=g(t)){if("function"!==typeof E)throw Error(i(280));var e=t.stateNode;e&&(e=f(e),E(t.stateNode,t.type,e))}}function D(t){S?T?T.push(t):T=[t]:S=t}function N(){if(S){var t=S,e=T;if(T=S=null,L(t),e)for(t=0;t<e.length;t++)L(e[t])}}function P(t,e){return t(e)}function U(t,e,r,a,n){return t(e,r,a,n)}function G(){}var I=P,M=!1,F=!1;function j(){null===S&&null===T||(G(),N())}function W(t,e,r){if(F)return t(e,r);F=!0;try{return I(t,e,r)}finally{F=!1,j()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,H={},V={};function q(t,e,r,a,n,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){K[t]=new q(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];K[e]=new q(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){K[t]=new q(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){K[t]=new q(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){K[t]=new q(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){K[t]=new q(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){K[t]=new q(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){K[t]=new q(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){K[t]=new q(t,5,!1,t.toLowerCase(),null,!1)}));var $=/[\-:]([a-z])/g;function X(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace($,X);K[e]=new q(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace($,X);K[e]=new q(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace($,X);K[e]=new q(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){K[t]=new q(t,1,!1,t.toLowerCase(),null,!1)})),K.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){K[t]=new q(t,1,!1,t.toLowerCase(),null,!0)}));var Y=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Z(t,e,r,a){var n=K.hasOwnProperty(e)?K[e]:null;(null!==n?0===n.type:!a&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,r,a){if(null===e||"undefined"===typeof e||function(t,e,r,a){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,r,n,a)&&(r=null),a||null===n?function(t){return!!z.call(V,t)||!z.call(H,t)&&(B.test(t)?V[t]=!0:(H[t]=!0,!1))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=null===r?3!==n.type&&"":r:(e=n.attributeName,a=n.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,a?t.setAttributeNS(a,e,r):t.setAttribute(e,r))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var Q=/^(.*)[\\\/]/,J="function"===typeof Symbol&&Symbol.for,tt=J?Symbol.for("react.element"):60103,et=J?Symbol.for("react.portal"):60106,rt=J?Symbol.for("react.fragment"):60107,at=J?Symbol.for("react.strict_mode"):60108,nt=J?Symbol.for("react.profiler"):60114,ot=J?Symbol.for("react.provider"):60109,it=J?Symbol.for("react.context"):60110,st=J?Symbol.for("react.concurrent_mode"):60111,ct=J?Symbol.for("react.forward_ref"):60112,lt=J?Symbol.for("react.suspense"):60113,ut=J?Symbol.for("react.suspense_list"):60120,ht=J?Symbol.for("react.memo"):60115,dt=J?Symbol.for("react.lazy"):60116,pt=J?Symbol.for("react.block"):60121,ft="function"===typeof Symbol&&Symbol.iterator;function gt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=ft&&t[ft]||t["@@iterator"])?t:null}function yt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case rt:return"Fragment";case et:return"Portal";case nt:return"Profiler";case at:return"StrictMode";case lt:return"Suspense";case ut:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case it:return"Context.Consumer";case ot:return"Context.Provider";case ct:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return yt(t.type);case pt:return yt(t.render);case dt:if(t=1===t._status?t._result:null)return yt(t)}return null}function mt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break t;default:var a=t._debugOwner,n=t._debugSource,o=yt(t.type);r=null,a&&(r=yt(a.type)),a=o,o="",n?o=" (at "+n.fileName.replace(Q,"")+":"+n.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(a||"Unknown")+o}e+=r,t=t.return}while(t);return e}function _t(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function vt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function bt(t){t._valueTracker||(t._valueTracker=function(t){var e=vt(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),a=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(t){a=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(t){a=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),a="";return t&&(a=vt(t)?t.checked?"true":"false":t.value),(t=a)!==r&&(e.setValue(t),!0)}function xt(t,e){var r=e.checked;return n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function Ot(t,e){var r=null==e.defaultValue?"":e.defaultValue,a=null!=e.checked?e.checked:e.defaultChecked;r=_t(null!=e.value?e.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Rt(t,e){null!=(e=e.checked)&&Z(t,"checked",e,!1)}function At(t,e){Rt(t,e);var r=_t(e.value),a=e.type;if(null!=r)"number"===a?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===a||"reset"===a)return void t.removeAttribute("value");e.hasOwnProperty("value")?kt(t,e.type,r):e.hasOwnProperty("defaultValue")&&kt(t,e.type,_t(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Ct(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!("submit"!==a&&"reset"!==a||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function kt(t,e,r){"number"===e&&t.ownerDocument.activeElement===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function Et(t,e){return t=n({children:void 0},e),(e=function(t){var e="";return a.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function St(t,e,r,a){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+_t(r),e=null,n=0;n<t.length;n++){if(t[n].value===r)return t[n].selected=!0,void(a&&(t[n].defaultSelected=!0));null!==e||t[n].disabled||(e=t[n])}null!==e&&(e.selected=!0)}}function Tt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(i(91));return n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lt(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(i(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(i(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:_t(r)}}function Dt(t,e){var r=_t(e.value),a=_t(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=a&&(t.defaultValue=""+a)}function Nt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Pt="http://www.w3.org/1999/xhtml",Ut="http://www.w3.org/2000/svg";function Gt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Gt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Mt,Ft,jt=(Ft=function(t,e){if(t.namespaceURI!==Ut||"innerHTML"in t)t.innerHTML=e;else{for((Mt=Mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,a){MSApp.execUnsafeLocalFunction((function(){return Ft(t,e)}))}:Ft);function Wt(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}function Bt(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zt={animationend:Bt("Animation","AnimationEnd"),animationiteration:Bt("Animation","AnimationIteration"),animationstart:Bt("Animation","AnimationStart"),transitionend:Bt("Transition","TransitionEnd")},Ht={},Vt={};function qt(t){if(Ht[t])return Ht[t];if(!zt[t])return t;var e,r=zt[t];for(e in r)if(r.hasOwnProperty(e)&&e in Vt)return Ht[t]=r[e];return t}k&&(Vt=document.createElement("div").style,"AnimationEvent"in window||(delete zt.animationend.animation,delete zt.animationiteration.animation,delete zt.animationstart.animation),"TransitionEvent"in window||delete zt.transitionend.transition);var Kt=qt("animationend"),$t=qt("animationiteration"),Xt=qt("animationstart"),Yt=qt("transitionend"),Zt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qt=new("function"===typeof WeakMap?WeakMap:Map);function Jt(t){var e=Qt.get(t);return void 0===e&&(e=new Map,Qt.set(t,e)),e}function te(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(r=e.return),t=e.return}while(t)}return 3===e.tag?r:null}function ee(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function re(t){if(te(t)!==t)throw Error(i(188))}function ae(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=te(t)))throw Error(i(188));return e!==t?null:t}for(var r=t,a=e;;){var n=r.return;if(null===n)break;var o=n.alternate;if(null===o){if(null!==(a=n.return)){r=a;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===r)return re(n),t;if(o===a)return re(n),e;o=o.sibling}throw Error(i(188))}if(r.return!==a.return)r=n,a=o;else{for(var s=!1,c=n.child;c;){if(c===r){s=!0,r=n,a=o;break}if(c===a){s=!0,a=n,r=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===r){s=!0,r=o,a=n;break}if(c===a){s=!0,a=o,r=n;break}c=c.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==a)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function ne(t,e){if(null==e)throw Error(i(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function oe(t,e,r){Array.isArray(t)?t.forEach(e,r):t&&e.call(r,t)}var ie=null;function se(t){if(t){var e=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(e))for(var a=0;a<e.length&&!t.isPropagationStopped();a++)m(t,e[a],r[a]);else e&&m(t,e,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function ce(t){if(null!==t&&(ie=ne(ie,t)),t=ie,ie=null,t){if(oe(t,se),ie)throw Error(i(95));if(u)throw t=h,u=!1,h=null,t}}function le(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ue(t){if(!k)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var he=[];function de(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>he.length&&he.push(t)}function pe(t,e,r,a){if(he.length){var n=he.pop();return n.topLevelType=t,n.eventSystemFlags=a,n.nativeEvent=e,n.targetInst=r,n}return{topLevelType:t,eventSystemFlags:a,nativeEvent:e,targetInst:r,ancestors:[]}}function fe(t){var e=t.targetInst,r=e;do{if(!r){t.ancestors.push(r);break}var a=r;if(3===a.tag)a=a.stateNode.containerInfo;else{for(;a.return;)a=a.return;a=3!==a.tag?null:a.stateNode.containerInfo}if(!a)break;5!==(e=r.tag)&&6!==e||t.ancestors.push(r),r=Dr(a)}while(r);for(r=0;r<t.ancestors.length;r++){e=t.ancestors[r];var n=le(t.nativeEvent);a=t.topLevelType;var o=t.nativeEvent,i=t.eventSystemFlags;0===r&&(i|=64);for(var s=null,c=0;c<x.length;c++){var l=x[c];l&&(l=l.extractEvents(a,e,o,n,i))&&(s=ne(s,l))}ce(s)}}function ge(t,e,r){if(!r.has(t)){switch(t){case"scroll":Xe(e,"scroll",!0);break;case"focus":case"blur":Xe(e,"focus",!0),Xe(e,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":ue(t)&&Xe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Zt.indexOf(t)&&$e(t,e)}r.set(t,null)}}var ye,me,_e,ve=!1,be=[],we=null,xe=null,Oe=null,Re=new Map,Ae=new Map,Ce=[],ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ee="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Se(t,e,r,a,n){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|r,nativeEvent:n,container:a}}function Te(t,e){switch(t){case"focus":case"blur":we=null;break;case"dragenter":case"dragleave":xe=null;break;case"mouseover":case"mouseout":Oe=null;break;case"pointerover":case"pointerout":Re.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ae.delete(e.pointerId)}}function Le(t,e,r,a,n,o){return null===t||t.nativeEvent!==o?(t=Se(e,r,a,n,o),null!==e&&(null!==(e=Nr(e))&&me(e)),t):(t.eventSystemFlags|=a,t)}function De(t){var e=Dr(t.target);if(null!==e){var r=te(e);if(null!==r)if(13===(e=r.tag)){if(null!==(e=ee(r)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){_e(r)}))}else if(3===e&&r.stateNode.hydrate)return void(t.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}t.blockedOn=null}function Ne(t){if(null!==t.blockedOn)return!1;var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var r=Nr(e);return null!==r&&me(r),t.blockedOn=e,!1}return!0}function Pe(t,e,r){Ne(t)&&r.delete(e)}function Ue(){for(ve=!1;0<be.length;){var t=be[0];if(null!==t.blockedOn){null!==(t=Nr(t.blockedOn))&&ye(t);break}var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:be.shift()}null!==we&&Ne(we)&&(we=null),null!==xe&&Ne(xe)&&(xe=null),null!==Oe&&Ne(Oe)&&(Oe=null),Re.forEach(Pe),Ae.forEach(Pe)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,ve||(ve=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ue)))}function Ie(t){function e(e){return Ge(e,t)}if(0<be.length){Ge(be[0],t);for(var r=1;r<be.length;r++){var a=be[r];a.blockedOn===t&&(a.blockedOn=null)}}for(null!==we&&Ge(we,t),null!==xe&&Ge(xe,t),null!==Oe&&Ge(Oe,t),Re.forEach(e),Ae.forEach(e),r=0;r<Ce.length;r++)(a=Ce[r]).blockedOn===t&&(a.blockedOn=null);for(;0<Ce.length&&null===(r=Ce[0]).blockedOn;)De(r),null===r.blockedOn&&Ce.shift()}var Me={},Fe=new Map,je=new Map,We=["abort","abort",Kt,"animationEnd",$t,"animationIteration",Xt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function Be(t,e){for(var r=0;r<t.length;r+=2){var a=t[r],n=t[r+1],o="on"+(n[0].toUpperCase()+n.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[a],eventPriority:e},je.set(a,e),Fe.set(a,o),Me[n]=o}}Be("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Be("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Be(We,2);for(var ze="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),He=0;He<ze.length;He++)je.set(ze[He],0);var Ve=o.unstable_UserBlockingPriority,qe=o.unstable_runWithPriority,Ke=!0;function $e(t,e){Xe(e,t,!1)}function Xe(t,e,r){var a=je.get(e);switch(void 0===a?2:a){case 0:a=Ye.bind(null,e,1,t);break;case 1:a=Ze.bind(null,e,1,t);break;default:a=Qe.bind(null,e,1,t)}r?t.addEventListener(e,a,!0):t.addEventListener(e,a,!1)}function Ye(t,e,r,a){M||G();var n=Qe,o=M;M=!0;try{U(n,t,e,r,a)}finally{(M=o)||j()}}function Ze(t,e,r,a){qe(Ve,Qe.bind(null,t,e,r,a))}function Qe(t,e,r,a){if(Ke)if(0<be.length&&-1<ke.indexOf(t))t=Se(null,t,e,r,a),be.push(t);else{var n=Je(t,e,r,a);if(null===n)Te(t,a);else if(-1<ke.indexOf(t))t=Se(n,t,e,r,a),be.push(t);else if(!function(t,e,r,a,n){switch(e){case"focus":return we=Le(we,t,e,r,a,n),!0;case"dragenter":return xe=Le(xe,t,e,r,a,n),!0;case"mouseover":return Oe=Le(Oe,t,e,r,a,n),!0;case"pointerover":var o=n.pointerId;return Re.set(o,Le(Re.get(o)||null,t,e,r,a,n)),!0;case"gotpointercapture":return o=n.pointerId,Ae.set(o,Le(Ae.get(o)||null,t,e,r,a,n)),!0}return!1}(n,t,e,r,a)){Te(t,a),t=pe(t,a,null,e);try{W(fe,t)}finally{de(t)}}}}function Je(t,e,r,a){if(null!==(r=Dr(r=le(a)))){var n=te(r);if(null===n)r=null;else{var o=n.tag;if(13===o){if(null!==(r=ee(n)))return r;r=null}else if(3===o){if(n.stateNode.hydrate)return 3===n.tag?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null)}}t=pe(t,a,r,e);try{W(fe,t)}finally{de(t)}return null}var tr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];function rr(t,e,r){return null==e||"boolean"===typeof e||""===e?"":r||"number"!==typeof e||0===e||tr.hasOwnProperty(t)&&tr[t]?(""+e).trim():e+"px"}function ar(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var a=0===r.indexOf("--"),n=rr(r,e[r],a);"float"===r&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}Object.keys(tr).forEach((function(t){er.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tr[e]=tr[t]}))}));var nr=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function or(t,e){if(e){if(nr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(i(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(i(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(i(62,""))}}function ir(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sr=Pt;function cr(t,e){var r=Jt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=A[e];for(var a=0;a<e.length;a++)ge(e[a],t,r)}function lr(){}function ur(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dr(t,e){var r,a=hr(t);for(t=0;a;){if(3===a.nodeType){if(r=t+a.textContent.length,t<=e&&r>=e)return{node:a,offset:e-t};t=r}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=hr(a)}}function pr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?pr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fr(){for(var t=window,e=ur();e instanceof t.HTMLIFrameElement;){try{var r="string"===typeof e.contentWindow.location.href}catch(a){r=!1}if(!r)break;e=ur((t=e.contentWindow).document)}return e}function gr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yr="$",mr="/$",_r="$?",vr="$!",br=null,wr=null;function xr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Or(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Rr="function"===typeof setTimeout?setTimeout:void 0,Ar="function"===typeof clearTimeout?clearTimeout:void 0;function Cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function kr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var r=t.data;if(r===yr||r===vr||r===_r){if(0===e)return t;e--}else r===mr&&e++}t=t.previousSibling}return null}var Er=Math.random().toString(36).slice(2),Sr="__reactInternalInstance$"+Er,Tr="__reactEventHandlers$"+Er,Lr="__reactContainere$"+Er;function Dr(t){var e=t[Sr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Lr]||r[Sr]){if(r=e.alternate,null!==e.child||null!==r&&null!==r.child)for(t=kr(t);null!==t;){if(r=t[Sr])return r;t=kr(t)}return e}r=(t=r).parentNode}return null}function Nr(t){return!(t=t[Sr]||t[Lr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Pr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(i(33))}function Ur(t){return t[Tr]||null}function Gr(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Ir(t,e){var r=t.stateNode;if(!r)return null;var a=f(r);if(!a)return null;r=a[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!a;break t;default:t=!1}if(t)return null;if(r&&"function"!==typeof r)throw Error(i(231,e,typeof r));return r}function Mr(t,e,r){(e=Ir(t,r.dispatchConfig.phasedRegistrationNames[e]))&&(r._dispatchListeners=ne(r._dispatchListeners,e),r._dispatchInstances=ne(r._dispatchInstances,t))}function Fr(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,r=[];e;)r.push(e),e=Gr(e);for(e=r.length;0<e--;)Mr(r[e],"captured",t);for(e=0;e<r.length;e++)Mr(r[e],"bubbled",t)}}function jr(t,e,r){t&&r&&r.dispatchConfig.registrationName&&(e=Ir(t,r.dispatchConfig.registrationName))&&(r._dispatchListeners=ne(r._dispatchListeners,e),r._dispatchInstances=ne(r._dispatchInstances,t))}function Wr(t){t&&t.dispatchConfig.registrationName&&jr(t._targetInst,null,t)}function Br(t){oe(t,Fr)}var zr=null,Hr=null,Vr=null;function qr(){if(Vr)return Vr;var t,e,r=Hr,a=r.length,n="value"in zr?zr.value:zr.textContent,o=n.length;for(t=0;t<a&&r[t]===n[t];t++);var i=a-t;for(e=1;e<=i&&r[a-e]===n[o-e];e++);return Vr=n.slice(t,1<e?1-e:void 0)}function Kr(){return!0}function $r(){return!1}function Xr(t,e,r,a){for(var n in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=r,t=this.constructor.Interface)t.hasOwnProperty(n)&&((e=t[n])?this[n]=e(r):"target"===n?this.target=a:this[n]=r[n]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Kr:$r,this.isPropagationStopped=$r,this}function Yr(t,e,r,a){if(this.eventPool.length){var n=this.eventPool.pop();return this.call(n,t,e,r,a),n}return new this(t,e,r,a)}function Zr(t){if(!(t instanceof this))throw Error(i(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Qr(t){t.eventPool=[],t.getPooled=Yr,t.release=Zr}n(Xr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){this.isPersistent=Kr},isPersistent:$r,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=$r,this._dispatchInstances=this._dispatchListeners=null}}),Xr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Xr.extend=function(t){function e(){}function r(){return a.apply(this,arguments)}var a=this;e.prototype=a.prototype;var o=new e;return n(o,r.prototype),r.prototype=o,r.prototype.constructor=r,r.Interface=n({},a.Interface,t),r.extend=a.extend,Qr(r),r},Qr(Xr);var Jr=Xr.extend({data:null}),ta=Xr.extend({data:null}),ea=[9,13,27,32],ra=k&&"CompositionEvent"in window,aa=null;k&&"documentMode"in document&&(aa=document.documentMode);var na=k&&"TextEvent"in window&&!aa,oa=k&&(!ra||aa&&8<aa&&11>=aa),ia=String.fromCharCode(32),sa={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ca=!1;function la(t,e){switch(t){case"keyup":return-1!==ea.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ua(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var ha=!1;var da={eventTypes:sa,extractEvents:function(t,e,r,a){var n;if(ra)t:{switch(t){case"compositionstart":var o=sa.compositionStart;break t;case"compositionend":o=sa.compositionEnd;break t;case"compositionupdate":o=sa.compositionUpdate;break t}o=void 0}else ha?la(t,r)&&(o=sa.compositionEnd):"keydown"===t&&229===r.keyCode&&(o=sa.compositionStart);return o?(oa&&"ko"!==r.locale&&(ha||o!==sa.compositionStart?o===sa.compositionEnd&&ha&&(n=qr()):(Hr="value"in(zr=a)?zr.value:zr.textContent,ha=!0)),o=Jr.getPooled(o,e,r,a),n?o.data=n:null!==(n=ua(r))&&(o.data=n),Br(o),n=o):n=null,(t=na?function(t,e){switch(t){case"compositionend":return ua(e);case"keypress":return 32!==e.which?null:(ca=!0,ia);case"textInput":return(t=e.data)===ia&&ca?null:t;default:return null}}(t,r):function(t,e){if(ha)return"compositionend"===t||!ra&&la(t,e)?(t=qr(),Vr=Hr=zr=null,ha=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oa&&"ko"!==e.locale?null:e.data}}(t,r))?((e=ta.getPooled(sa.beforeInput,e,r,a)).data=t,Br(e)):e=null,null===n?e:null===e?n:[n,e]}},pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!pa[t.type]:"textarea"===e}var ga={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ya(t,e,r){return(t=Xr.getPooled(ga.change,t,e,r)).type="change",D(r),Br(t),t}var ma=null,_a=null;function va(t){ce(t)}function ba(t){if(wt(Pr(t)))return t}function wa(t,e){if("change"===t)return e}var xa=!1;function Oa(){ma&&(ma.detachEvent("onpropertychange",Ra),_a=ma=null)}function Ra(t){if("value"===t.propertyName&&ba(_a))if(t=ya(_a,t,le(t)),M)ce(t);else{M=!0;try{P(va,t)}finally{M=!1,j()}}}function Aa(t,e,r){"focus"===t?(Oa(),_a=r,(ma=e).attachEvent("onpropertychange",Ra)):"blur"===t&&Oa()}function Ca(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return ba(_a)}function ka(t,e){if("click"===t)return ba(e)}function Ea(t,e){if("input"===t||"change"===t)return ba(e)}k&&(xa=ue("input")&&(!document.documentMode||9<document.documentMode));var Sa={eventTypes:ga,_isInputEventSupported:xa,extractEvents:function(t,e,r,a){var n=e?Pr(e):window,o=n.nodeName&&n.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===n.type)var i=wa;else if(fa(n))if(xa)i=Ea;else{i=Ca;var s=Aa}else(o=n.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===n.type||"radio"===n.type)&&(i=ka);if(i&&(i=i(t,e)))return ya(i,r,a);s&&s(t,n,e),"blur"===t&&(t=n._wrapperState)&&t.controlled&&"number"===n.type&&kt(n,"number",n.value)}},Ta=Xr.extend({view:null,detail:null}),La={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Da(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=La[t])&&!!e[t]}function Na(){return Da}var Pa=0,Ua=0,Ga=!1,Ia=!1,Ma=Ta.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Na,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Pa;return Pa=t.screenX,Ga?"mousemove"===t.type?t.screenX-e:0:(Ga=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ua;return Ua=t.screenY,Ia?"mousemove"===t.type?t.screenY-e:0:(Ia=!0,0)}}),Fa=Ma.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ja={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Wa={eventTypes:ja,extractEvents:function(t,e,r,a,n){var o="mouseover"===t||"pointerover"===t,i="mouseout"===t||"pointerout"===t;if(o&&0===(32&n)&&(r.relatedTarget||r.fromElement)||!i&&!o)return null;(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,i)?(i=e,null!==(e=(e=r.relatedTarget||r.toElement)?Dr(e):null)&&(e!==te(e)||5!==e.tag&&6!==e.tag)&&(e=null)):i=null;if(i===e)return null;if("mouseout"===t||"mouseover"===t)var s=Ma,c=ja.mouseLeave,l=ja.mouseEnter,u="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Fa,c=ja.pointerLeave,l=ja.pointerEnter,u="pointer");if(t=null==i?o:Pr(i),o=null==e?o:Pr(e),(c=s.getPooled(c,i,r,a)).type=u+"leave",c.target=t,c.relatedTarget=o,(r=s.getPooled(l,e,r,a)).type=u+"enter",r.target=o,r.relatedTarget=t,u=e,(a=i)&&u)t:{for(l=u,i=0,t=s=a;t;t=Gr(t))i++;for(t=0,e=l;e;e=Gr(e))t++;for(;0<i-t;)s=Gr(s),i--;for(;0<t-i;)l=Gr(l),t--;for(;i--;){if(s===l||s===l.alternate)break t;s=Gr(s),l=Gr(l)}s=null}else s=null;for(l=s,s=[];a&&a!==l&&(null===(i=a.alternate)||i!==l);)s.push(a),a=Gr(a);for(a=[];u&&u!==l&&(null===(i=u.alternate)||i!==l);)a.push(u),u=Gr(u);for(u=0;u<s.length;u++)jr(s[u],"bubbled",c);for(u=a.length;0<u--;)jr(a[u],"captured",r);return 0===(64&n)?[c]:[c,r]}};var Ba="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},za=Object.prototype.hasOwnProperty;function Ha(t,e){if(Ba(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var r=Object.keys(t),a=Object.keys(e);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++)if(!za.call(e,r[a])||!Ba(t[r[a]],e[r[a]]))return!1;return!0}var Va=k&&"documentMode"in document&&11>=document.documentMode,qa={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ka=null,$a=null,Xa=null,Ya=!1;function Za(t,e){var r=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Ya||null==Ka||Ka!==ur(r)?null:("selectionStart"in(r=Ka)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Xa&&Ha(Xa,r)?null:(Xa=r,(t=Xr.getPooled(qa.select,$a,t,e)).type="select",t.target=Ka,Br(t),t))}var Qa={eventTypes:qa,extractEvents:function(t,e,r,a,n,o){if(!(o=!(n=o||(a.window===a?a.document:9===a.nodeType?a:a.ownerDocument)))){t:{n=Jt(n),o=A.onSelect;for(var i=0;i<o.length;i++)if(!n.has(o[i])){n=!1;break t}n=!0}o=!n}if(o)return null;switch(n=e?Pr(e):window,t){case"focus":(fa(n)||"true"===n.contentEditable)&&(Ka=n,$a=e,Xa=null);break;case"blur":Xa=$a=Ka=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ya=!1,Za(r,a);case"selectionchange":if(Va)break;case"keydown":case"keyup":return Za(r,a)}return null}},Ja=Xr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),tn=Xr.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),en=Ta.extend({relatedTarget:null});function rn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var an={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},on=Ta.extend({key:function(t){if(t.key){var e=an[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=rn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?nn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Na,charCode:function(t){return"keypress"===t.type?rn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?rn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),sn=Ma.extend({dataTransfer:null}),cn=Ta.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Na}),ln=Xr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),un=Ma.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),hn={eventTypes:Me,extractEvents:function(t,e,r,a){var n=Fe.get(t);if(!n)return null;switch(t){case"keypress":if(0===rn(r))return null;case"keydown":case"keyup":t=on;break;case"blur":case"focus":t=en;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=cn;break;case Kt:case $t:case Xt:t=Ja;break;case Yt:t=ln;break;case"scroll":t=Ta;break;case"wheel":t=un;break;case"copy":case"cut":case"paste":t=tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Fa;break;default:t=Xr}return Br(e=t.getPooled(n,e,r,a)),e}};if(_)throw Error(i(101));_=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),f=Ur,g=Nr,y=Pr,C({SimpleEventPlugin:hn,EnterLeaveEventPlugin:Wa,ChangeEventPlugin:Sa,SelectEventPlugin:Qa,BeforeInputEventPlugin:da});var dn=[],pn=-1;function fn(t){0>pn||(t.current=dn[pn],dn[pn]=null,pn--)}function gn(t,e){pn++,dn[pn]=t.current,t.current=e}var yn={},mn={current:yn},_n={current:!1},vn=yn;function bn(t,e){var r=t.type.contextTypes;if(!r)return yn;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in r)o[n]=e[n];return a&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function wn(t){return null!==(t=t.childContextTypes)&&void 0!==t}function xn(){fn(_n),fn(mn)}function On(t,e,r){if(mn.current!==yn)throw Error(i(168));gn(mn,e),gn(_n,r)}function Rn(t,e,r){var a=t.stateNode;if(t=e.childContextTypes,"function"!==typeof a.getChildContext)return r;for(var o in a=a.getChildContext())if(!(o in t))throw Error(i(108,yt(e)||"Unknown",o));return n({},r,{},a)}function An(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yn,vn=mn.current,gn(mn,t),gn(_n,_n.current),!0}function Cn(t,e,r){var a=t.stateNode;if(!a)throw Error(i(169));r?(t=Rn(t,e,vn),a.__reactInternalMemoizedMergedChildContext=t,fn(_n),fn(mn),gn(mn,t)):fn(_n),gn(_n,r)}var kn=o.unstable_runWithPriority,En=o.unstable_scheduleCallback,Sn=o.unstable_cancelCallback,Tn=o.unstable_requestPaint,Ln=o.unstable_now,Dn=o.unstable_getCurrentPriorityLevel,Nn=o.unstable_ImmediatePriority,Pn=o.unstable_UserBlockingPriority,Un=o.unstable_NormalPriority,Gn=o.unstable_LowPriority,In=o.unstable_IdlePriority,Mn={},Fn=o.unstable_shouldYield,jn=void 0!==Tn?Tn:function(){},Wn=null,Bn=null,zn=!1,Hn=Ln(),Vn=1e4>Hn?Ln:function(){return Ln()-Hn};function qn(){switch(Dn()){case Nn:return 99;case Pn:return 98;case Un:return 97;case Gn:return 96;case In:return 95;default:throw Error(i(332))}}function Kn(t){switch(t){case 99:return Nn;case 98:return Pn;case 97:return Un;case 96:return Gn;case 95:return In;default:throw Error(i(332))}}function $n(t,e){return t=Kn(t),kn(t,e)}function Xn(t,e,r){return t=Kn(t),En(t,e,r)}function Yn(t){return null===Wn?(Wn=[t],Bn=En(Nn,Qn)):Wn.push(t),Mn}function Zn(){if(null!==Bn){var t=Bn;Bn=null,Sn(t)}Qn()}function Qn(){if(!zn&&null!==Wn){zn=!0;var t=0;try{var e=Wn;$n(99,(function(){for(;t<e.length;t++){var r=e[t];do{r=r(!0)}while(null!==r)}})),Wn=null}catch(r){throw null!==Wn&&(Wn=Wn.slice(t+1)),En(Nn,Zn),r}finally{zn=!1}}}function Jn(t,e,r){return 1073741821-(1+((1073741821-t+e/10)/(r/=10)|0))*r}function to(t,e){if(t&&t.defaultProps)for(var r in e=n({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}var eo={current:null},ro=null,ao=null,no=null;function oo(){no=ao=ro=null}function io(t){var e=eo.current;fn(eo),t.type._context._currentValue=e}function so(t,e){for(;null!==t;){var r=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==r&&r.childExpirationTime<e&&(r.childExpirationTime=e);else{if(!(null!==r&&r.childExpirationTime<e))break;r.childExpirationTime=e}t=t.return}}function co(t,e){ro=t,no=ao=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Gi=!0),t.firstContext=null)}function lo(t,e){if(no!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(no=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ao){if(null===ro)throw Error(i(308));ao=e,ro.dependencies={expirationTime:0,firstContext:e,responders:null}}else ao=ao.next=e;return t._currentValue}var uo=!1;function ho(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function po(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function fo(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function go(t,e){if(null!==(t=t.updateQueue)){var r=(t=t.shared).pending;null===r?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function yo(t,e){var r=t.alternate;null!==r&&po(r,t),null===(r=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=r.next,r.next=e)}function mo(t,e,r,a){var o=t.updateQueue;uo=!1;var i=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==i){var c=i.next;i.next=s.next,s.next=c}i=s,o.shared.pending=null,null!==(c=t.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=s))}if(null!==i){c=i.next;var l=o.baseState,u=0,h=null,d=null,p=null;if(null!==c)for(var f=c;;){if((s=f.expirationTime)<a){var g={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===p?(d=p=g,h=l):p=p.next=g,s>u&&(u=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),xc(s,f.suspenseConfig);t:{var y=t,m=f;switch(s=e,g=r,m.tag){case 1:if("function"===typeof(y=m.payload)){l=y.call(g,l,s);break t}l=y;break t;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(s="function"===typeof(y=m.payload)?y.call(g,l,s):y)||void 0===s)break t;l=n({},l,s);break t;case 2:uo=!0}}null!==f.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[f]:s.push(f))}if(null===(f=f.next)||f===c){if(null===(s=o.shared.pending))break;f=i.next=s.next,s.next=c,o.baseQueue=i=s,o.shared.pending=null}}null===p?h=l:p.next=d,o.baseState=h,o.baseQueue=p,Oc(u),t.expirationTime=u,t.memoizedState=l}}function _o(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var a=t[e],n=a.callback;if(null!==n){if(a.callback=null,a=n,n=r,"function"!==typeof a)throw Error(i(191,a));a.call(n)}}}var vo=Y.ReactCurrentBatchConfig,bo=(new a.Component).refs;function wo(t,e,r,a){r=null===(r=r(a,e=t.memoizedState))||void 0===r?e:n({},e,r),t.memoizedState=r,0===t.expirationTime&&(t.updateQueue.baseState=r)}var xo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&te(t)===t},enqueueSetState:function(t,e,r){t=t._reactInternalFiber;var a=lc(),n=vo.suspense;(n=fo(a=uc(a,t,n),n)).payload=e,void 0!==r&&null!==r&&(n.callback=r),go(t,n),hc(t,a)},enqueueReplaceState:function(t,e,r){t=t._reactInternalFiber;var a=lc(),n=vo.suspense;(n=fo(a=uc(a,t,n),n)).tag=1,n.payload=e,void 0!==r&&null!==r&&(n.callback=r),go(t,n),hc(t,a)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var r=lc(),a=vo.suspense;(a=fo(r=uc(r,t,a),a)).tag=2,void 0!==e&&null!==e&&(a.callback=e),go(t,a),hc(t,r)}};function Oo(t,e,r,a,n,o,i){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(a,o,i):!e.prototype||!e.prototype.isPureReactComponent||(!Ha(r,a)||!Ha(n,o))}function Ro(t,e,r){var a=!1,n=yn,o=e.contextType;return"object"===typeof o&&null!==o?o=lo(o):(n=wn(e)?vn:mn.current,o=(a=null!==(a=e.contextTypes)&&void 0!==a)?bn(t,n):yn),e=new e(r,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=xo,t.stateNode=e,e._reactInternalFiber=t,a&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ao(t,e,r,a){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,a),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,a),e.state!==t&&xo.enqueueReplaceState(e,e.state,null)}function Co(t,e,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs=bo,ho(t);var o=e.contextType;"object"===typeof o&&null!==o?n.context=lo(o):(o=wn(e)?vn:mn.current,n.context=bn(t,o)),mo(t,r,n,a),n.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(wo(t,e,o,r),n.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(e=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),e!==n.state&&xo.enqueueReplaceState(n,n.state,null),mo(t,r,n,a),n.state=t.memoizedState),"function"===typeof n.componentDidMount&&(t.effectTag|=4)}var ko=Array.isArray;function Eo(t,e,r){if(null!==(t=r.ref)&&"function"!==typeof t&&"object"!==typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var a=r.stateNode}if(!a)throw Error(i(147,t));var n=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===n?e.ref:(e=function(t){var e=a.refs;e===bo&&(e=a.refs={}),null===t?delete e[n]:e[n]=t},e._stringRef=n,e)}if("string"!==typeof t)throw Error(i(284));if(!r._owner)throw Error(i(290,t))}return t}function So(t,e){if("textarea"!==t.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function To(t){function e(e,r){if(t){var a=e.lastEffect;null!==a?(a.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,a){if(!t)return null;for(;null!==a;)e(r,a),a=a.sibling;return null}function a(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(t,e){return(t=zc(t,e)).index=0,t.sibling=null,t}function o(e,r,a){return e.index=a,t?null!==(a=e.alternate)?(a=a.index)<r?(e.effectTag=2,r):a:(e.effectTag=2,r):r}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function c(t,e,r,a){return null===e||6!==e.tag?((e=qc(r,t.mode,a)).return=t,e):((e=n(e,r)).return=t,e)}function l(t,e,r,a){return null!==e&&e.elementType===r.type?((a=n(e,r.props)).ref=Eo(t,e,r),a.return=t,a):((a=Hc(r.type,r.key,r.props,null,t.mode,a)).ref=Eo(t,e,r),a.return=t,a)}function u(t,e,r,a){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?((e=Kc(r,t.mode,a)).return=t,e):((e=n(e,r.children||[])).return=t,e)}function h(t,e,r,a,o){return null===e||7!==e.tag?((e=Vc(r,t.mode,a,o)).return=t,e):((e=n(e,r)).return=t,e)}function d(t,e,r){if("string"===typeof e||"number"===typeof e)return(e=qc(""+e,t.mode,r)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(r=Hc(e.type,e.key,e.props,null,t.mode,r)).ref=Eo(t,null,e),r.return=t,r;case et:return(e=Kc(e,t.mode,r)).return=t,e}if(ko(e)||gt(e))return(e=Vc(e,t.mode,r,null)).return=t,e;So(t,e)}return null}function p(t,e,r,a){var n=null!==e?e.key:null;if("string"===typeof r||"number"===typeof r)return null!==n?null:c(t,e,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case tt:return r.key===n?r.type===rt?h(t,e,r.props.children,a,n):l(t,e,r,a):null;case et:return r.key===n?u(t,e,r,a):null}if(ko(r)||gt(r))return null!==n?null:h(t,e,r,a,null);So(t,r)}return null}function f(t,e,r,a,n){if("string"===typeof a||"number"===typeof a)return c(e,t=t.get(r)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case tt:return t=t.get(null===a.key?r:a.key)||null,a.type===rt?h(e,t,a.props.children,n,a.key):l(e,t,a,n);case et:return u(e,t=t.get(null===a.key?r:a.key)||null,a,n)}if(ko(a)||gt(a))return h(e,t=t.get(r)||null,a,n,null);So(e,a)}return null}function g(n,i,s,c){for(var l=null,u=null,h=i,g=i=0,y=null;null!==h&&g<s.length;g++){h.index>g?(y=h,h=null):y=h.sibling;var m=p(n,h,s[g],c);if(null===m){null===h&&(h=y);break}t&&h&&null===m.alternate&&e(n,h),i=o(m,i,g),null===u?l=m:u.sibling=m,u=m,h=y}if(g===s.length)return r(n,h),l;if(null===h){for(;g<s.length;g++)null!==(h=d(n,s[g],c))&&(i=o(h,i,g),null===u?l=h:u.sibling=h,u=h);return l}for(h=a(n,h);g<s.length;g++)null!==(y=f(h,n,g,s[g],c))&&(t&&null!==y.alternate&&h.delete(null===y.key?g:y.key),i=o(y,i,g),null===u?l=y:u.sibling=y,u=y);return t&&h.forEach((function(t){return e(n,t)})),l}function y(n,s,c,l){var u=gt(c);if("function"!==typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var h=u=null,g=s,y=s=0,m=null,_=c.next();null!==g&&!_.done;y++,_=c.next()){g.index>y?(m=g,g=null):m=g.sibling;var v=p(n,g,_.value,l);if(null===v){null===g&&(g=m);break}t&&g&&null===v.alternate&&e(n,g),s=o(v,s,y),null===h?u=v:h.sibling=v,h=v,g=m}if(_.done)return r(n,g),u;if(null===g){for(;!_.done;y++,_=c.next())null!==(_=d(n,_.value,l))&&(s=o(_,s,y),null===h?u=_:h.sibling=_,h=_);return u}for(g=a(n,g);!_.done;y++,_=c.next())null!==(_=f(g,n,y,_.value,l))&&(t&&null!==_.alternate&&g.delete(null===_.key?y:_.key),s=o(_,s,y),null===h?u=_:h.sibling=_,h=_);return t&&g.forEach((function(t){return e(n,t)})),u}return function(t,a,o,c){var l="object"===typeof o&&null!==o&&o.type===rt&&null===o.key;l&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case tt:t:{for(u=o.key,l=a;null!==l;){if(l.key===u){if(7===l.tag){if(o.type===rt){r(t,l.sibling),(a=n(l,o.props.children)).return=t,t=a;break t}}else if(l.elementType===o.type){r(t,l.sibling),(a=n(l,o.props)).ref=Eo(t,l,o),a.return=t,t=a;break t}r(t,l);break}e(t,l),l=l.sibling}o.type===rt?((a=Vc(o.props.children,t.mode,c,o.key)).return=t,t=a):((c=Hc(o.type,o.key,o.props,null,t.mode,c)).ref=Eo(t,a,o),c.return=t,t=c)}return s(t);case et:t:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){r(t,a.sibling),(a=n(a,o.children||[])).return=t,t=a;break t}r(t,a);break}e(t,a),a=a.sibling}(a=Kc(o,t.mode,c)).return=t,t=a}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==a&&6===a.tag?(r(t,a.sibling),(a=n(a,o)).return=t,t=a):(r(t,a),(a=qc(o,t.mode,c)).return=t,t=a),s(t);if(ko(o))return g(t,a,o,c);if(gt(o))return y(t,a,o,c);if(u&&So(t,o),"undefined"===typeof o&&!l)switch(t.tag){case 1:case 0:throw t=t.type,Error(i(152,t.displayName||t.name||"Component"))}return r(t,a)}}var Lo=To(!0),Do=To(!1),No={},Po={current:No},Uo={current:No},Go={current:No};function Io(t){if(t===No)throw Error(i(174));return t}function Mo(t,e){switch(gn(Go,e),gn(Uo,t),gn(Po,No),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:It(null,"");break;default:e=It(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}fn(Po),gn(Po,e)}function Fo(){fn(Po),fn(Uo),fn(Go)}function jo(t){Io(Go.current);var e=Io(Po.current),r=It(e,t.type);e!==r&&(gn(Uo,t),gn(Po,r))}function Wo(t){Uo.current===t&&(fn(Po),fn(Uo))}var Bo={current:0};function zo(t){for(var e=t;null!==e;){if(13===e.tag){var r=e.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||r.data===_r||r.data===vr))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Ho(t,e){return{responder:t,props:e}}var Vo=Y.ReactCurrentDispatcher,qo=Y.ReactCurrentBatchConfig,Ko=0,$o=null,Xo=null,Yo=null,Zo=!1;function Qo(){throw Error(i(321))}function Jo(t,e){if(null===e)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ba(t[r],e[r]))return!1;return!0}function ti(t,e,r,a,n,o){if(Ko=o,$o=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Vo.current=null===t||null===t.memoizedState?Oi:Ri,t=r(a,n),e.expirationTime===Ko){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(i(301));o+=1,Yo=Xo=null,e.updateQueue=null,Vo.current=Ai,t=r(a,n)}while(e.expirationTime===Ko)}if(Vo.current=xi,e=null!==Xo&&null!==Xo.next,Ko=0,Yo=Xo=$o=null,Zo=!1,e)throw Error(i(300));return t}function ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Yo?$o.memoizedState=Yo=t:Yo=Yo.next=t,Yo}function ri(){if(null===Xo){var t=$o.alternate;t=null!==t?t.memoizedState:null}else t=Xo.next;var e=null===Yo?$o.memoizedState:Yo.next;if(null!==e)Yo=e,Xo=t;else{if(null===t)throw Error(i(310));t={memoizedState:(Xo=t).memoizedState,baseState:Xo.baseState,baseQueue:Xo.baseQueue,queue:Xo.queue,next:null},null===Yo?$o.memoizedState=Yo=t:Yo=Yo.next=t}return Yo}function ai(t,e){return"function"===typeof e?e(t):e}function ni(t){var e=ri(),r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=t;var a=Xo,n=a.baseQueue,o=r.pending;if(null!==o){if(null!==n){var s=n.next;n.next=o.next,o.next=s}a.baseQueue=n=o,r.pending=null}if(null!==n){n=n.next,a=a.baseState;var c=s=o=null,l=n;do{var u=l.expirationTime;if(u<Ko){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(s=c=h,o=a):c=c.next=h,u>$o.expirationTime&&($o.expirationTime=u,Oc(u))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),xc(u,l.suspenseConfig),a=l.eagerReducer===t?l.eagerState:t(a,l.action);l=l.next}while(null!==l&&l!==n);null===c?o=a:c.next=s,Ba(a,e.memoizedState)||(Gi=!0),e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return[e.memoizedState,r.dispatch]}function oi(t){var e=ri(),r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,o=e.memoizedState;if(null!==n){r.pending=null;var s=n=n.next;do{o=t(o,s.action),s=s.next}while(s!==n);Ba(o,e.memoizedState)||(Gi=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),r.lastRenderedState=o}return[o,a]}function ii(t){var e=ei();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ai,lastRenderedState:t}).dispatch=wi.bind(null,$o,t),[e.memoizedState,t]}function si(t,e,r,a){return t={tag:t,create:e,destroy:r,deps:a,next:null},null===(e=$o.updateQueue)?(e={lastEffect:null},$o.updateQueue=e,e.lastEffect=t.next=t):null===(r=e.lastEffect)?e.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,e.lastEffect=t),t}function ci(){return ri().memoizedState}function li(t,e,r,a){var n=ei();$o.effectTag|=t,n.memoizedState=si(1|e,r,void 0,void 0===a?null:a)}function ui(t,e,r,a){var n=ri();a=void 0===a?null:a;var o=void 0;if(null!==Xo){var i=Xo.memoizedState;if(o=i.destroy,null!==a&&Jo(a,i.deps))return void si(e,r,o,a)}$o.effectTag|=t,n.memoizedState=si(1|e,r,o,a)}function hi(t,e){return li(516,4,t,e)}function di(t,e){return ui(516,4,t,e)}function pi(t,e){return ui(4,2,t,e)}function fi(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function gi(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,ui(4,2,fi.bind(null,e,t),r)}function yi(){}function mi(t,e){return ei().memoizedState=[t,void 0===e?null:e],t}function _i(t,e){var r=ri();e=void 0===e?null:e;var a=r.memoizedState;return null!==a&&null!==e&&Jo(e,a[1])?a[0]:(r.memoizedState=[t,e],t)}function vi(t,e){var r=ri();e=void 0===e?null:e;var a=r.memoizedState;return null!==a&&null!==e&&Jo(e,a[1])?a[0]:(t=t(),r.memoizedState=[t,e],t)}function bi(t,e,r){var a=qn();$n(98>a?98:a,(function(){t(!0)})),$n(97<a?97:a,(function(){var a=qo.suspense;qo.suspense=void 0===e?null:e;try{t(!1),r()}finally{qo.suspense=a}}))}function wi(t,e,r){var a=lc(),n=vo.suspense;n={expirationTime:a=uc(a,t,n),suspenseConfig:n,action:r,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?n.next=n:(n.next=o.next,o.next=n),e.pending=n,o=t.alternate,t===$o||null!==o&&o===$o)Zo=!0,n.expirationTime=Ko,$o.expirationTime=Ko;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var i=e.lastRenderedState,s=o(i,r);if(n.eagerReducer=o,n.eagerState=s,Ba(s,i))return}catch(c){}hc(t,a)}}var xi={readContext:lo,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useResponder:Qo,useDeferredValue:Qo,useTransition:Qo},Oi={readContext:lo,useCallback:mi,useContext:lo,useEffect:hi,useImperativeHandle:function(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,li(4,2,fi.bind(null,e,t),r)},useLayoutEffect:function(t,e){return li(4,2,t,e)},useMemo:function(t,e){var r=ei();return e=void 0===e?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var a=ei();return e=void 0!==r?r(e):e,a.memoizedState=a.baseState=e,t=(t=a.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=wi.bind(null,$o,t),[a.memoizedState,t]},useRef:function(t){return t={current:t},ei().memoizedState=t},useState:ii,useDebugValue:yi,useResponder:Ho,useDeferredValue:function(t,e){var r=ii(t),a=r[0],n=r[1];return hi((function(){var r=qo.suspense;qo.suspense=void 0===e?null:e;try{n(t)}finally{qo.suspense=r}}),[t,e]),a},useTransition:function(t){var e=ii(!1),r=e[0];return e=e[1],[mi(bi.bind(null,e,t),[e,t]),r]}},Ri={readContext:lo,useCallback:_i,useContext:lo,useEffect:di,useImperativeHandle:gi,useLayoutEffect:pi,useMemo:vi,useReducer:ni,useRef:ci,useState:function(){return ni(ai)},useDebugValue:yi,useResponder:Ho,useDeferredValue:function(t,e){var r=ni(ai),a=r[0],n=r[1];return di((function(){var r=qo.suspense;qo.suspense=void 0===e?null:e;try{n(t)}finally{qo.suspense=r}}),[t,e]),a},useTransition:function(t){var e=ni(ai),r=e[0];return e=e[1],[_i(bi.bind(null,e,t),[e,t]),r]}},Ai={readContext:lo,useCallback:_i,useContext:lo,useEffect:di,useImperativeHandle:gi,useLayoutEffect:pi,useMemo:vi,useReducer:oi,useRef:ci,useState:function(){return oi(ai)},useDebugValue:yi,useResponder:Ho,useDeferredValue:function(t,e){var r=oi(ai),a=r[0],n=r[1];return di((function(){var r=qo.suspense;qo.suspense=void 0===e?null:e;try{n(t)}finally{qo.suspense=r}}),[t,e]),a},useTransition:function(t){var e=oi(ai),r=e[0];return e=e[1],[_i(bi.bind(null,e,t),[e,t]),r]}},Ci=null,ki=null,Ei=!1;function Si(t,e){var r=Wc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function Ti(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Li(t){if(Ei){var e=ki;if(e){var r=e;if(!Ti(t,e)){if(!(e=Cr(r.nextSibling))||!Ti(t,e))return t.effectTag=-1025&t.effectTag|2,Ei=!1,void(Ci=t);Si(Ci,r)}Ci=t,ki=Cr(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Ei=!1,Ci=t}}function Di(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ci=t}function Ni(t){if(t!==Ci)return!1;if(!Ei)return Di(t),Ei=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Or(e,t.memoizedProps))for(e=ki;e;)Si(t,e),e=Cr(e.nextSibling);if(Di(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(i(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if(r===mr){if(0===e){ki=Cr(t.nextSibling);break t}e--}else r!==yr&&r!==vr&&r!==_r||e++}t=t.nextSibling}ki=null}}else ki=Ci?Cr(t.stateNode.nextSibling):null;return!0}function Pi(){ki=Ci=null,Ei=!1}var Ui=Y.ReactCurrentOwner,Gi=!1;function Ii(t,e,r,a){e.child=null===t?Do(e,null,r,a):Lo(e,t.child,r,a)}function Mi(t,e,r,a,n){r=r.render;var o=e.ref;return co(e,n),a=ti(t,e,r,a,o,n),null===t||Gi?(e.effectTag|=1,Ii(t,e,a,n),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=n&&(t.expirationTime=0),es(t,e,n))}function Fi(t,e,r,a,n,o){if(null===t){var i=r.type;return"function"!==typeof i||Bc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Hc(r.type,null,a,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=i,ji(t,e,i,a,n,o))}return i=t.child,n<o&&(n=i.memoizedProps,(r=null!==(r=r.compare)?r:Ha)(n,a)&&t.ref===e.ref)?es(t,e,o):(e.effectTag|=1,(t=zc(i,a)).ref=e.ref,t.return=e,e.child=t)}function ji(t,e,r,a,n,o){return null!==t&&Ha(t.memoizedProps,a)&&t.ref===e.ref&&(Gi=!1,n<o)?(e.expirationTime=t.expirationTime,es(t,e,o)):Bi(t,e,r,a,o)}function Wi(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.effectTag|=128)}function Bi(t,e,r,a,n){var o=wn(r)?vn:mn.current;return o=bn(e,o),co(e,n),r=ti(t,e,r,a,o,n),null===t||Gi?(e.effectTag|=1,Ii(t,e,r,n),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=n&&(t.expirationTime=0),es(t,e,n))}function zi(t,e,r,a,n){if(wn(r)){var o=!0;An(e)}else o=!1;if(co(e,n),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Ro(e,r,a),Co(e,r,a,n),a=!0;else if(null===t){var i=e.stateNode,s=e.memoizedProps;i.props=s;var c=i.context,l=r.contextType;"object"===typeof l&&null!==l?l=lo(l):l=bn(e,l=wn(r)?vn:mn.current);var u=r.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;h||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==a||c!==l)&&Ao(e,i,a,l),uo=!1;var d=e.memoizedState;i.state=d,mo(e,a,i,n),c=e.memoizedState,s!==a||d!==c||_n.current||uo?("function"===typeof u&&(wo(e,r,u,a),c=e.memoizedState),(s=uo||Oo(e,r,s,a,d,c,l))?(h||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(e.effectTag|=4)):("function"===typeof i.componentDidMount&&(e.effectTag|=4),e.memoizedProps=a,e.memoizedState=c),i.props=a,i.state=c,i.context=l,a=s):("function"===typeof i.componentDidMount&&(e.effectTag|=4),a=!1)}else i=e.stateNode,po(t,e),s=e.memoizedProps,i.props=e.type===e.elementType?s:to(e.type,s),c=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=lo(l):l=bn(e,l=wn(r)?vn:mn.current),(h="function"===typeof(u=r.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==a||c!==l)&&Ao(e,i,a,l),uo=!1,c=e.memoizedState,i.state=c,mo(e,a,i,n),d=e.memoizedState,s!==a||c!==d||_n.current||uo?("function"===typeof u&&(wo(e,r,u,a),d=e.memoizedState),(u=uo||Oo(e,r,s,a,c,d,l))?(h||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,d,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,d,l)),"function"===typeof i.componentDidUpdate&&(e.effectTag|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof i.componentDidUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),e.memoizedProps=a,e.memoizedState=d),i.props=a,i.state=d,i.context=l,a=u):("function"!==typeof i.componentDidUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),a=!1);return Hi(t,e,r,a,o,n)}function Hi(t,e,r,a,n,o){Wi(t,e);var i=0!==(64&e.effectTag);if(!a&&!i)return n&&Cn(e,r,!1),es(t,e,o);a=e.stateNode,Ui.current=e;var s=i&&"function"!==typeof r.getDerivedStateFromError?null:a.render();return e.effectTag|=1,null!==t&&i?(e.child=Lo(e,t.child,null,o),e.child=Lo(e,null,s,o)):Ii(t,e,s,o),e.memoizedState=a.state,n&&Cn(e,r,!0),e.child}function Vi(t){var e=t.stateNode;e.pendingContext?On(0,e.pendingContext,e.pendingContext!==e.context):e.context&&On(0,e.context,!1),Mo(t,e.containerInfo)}var qi,Ki,$i,Xi,Yi={dehydrated:null,retryTime:0};function Zi(t,e,r){var a,n=e.mode,o=e.pendingProps,i=Bo.current,s=!1;if((a=0!==(64&e.effectTag))||(a=0!==(2&i)&&(null===t||null!==t.memoizedState)),a?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),gn(Bo,1&i),null===t){if(void 0!==o.fallback&&Li(e),s){if(s=o.fallback,(o=Vc(null,n,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(r=Vc(s,n,r,null)).return=e,o.sibling=r,e.memoizedState=Yi,e.child=o,r}return n=o.children,e.memoizedState=null,e.child=Do(e,null,n,r)}if(null!==t.memoizedState){if(n=(t=t.child).sibling,s){if(o=o.fallback,(r=zc(t,t.pendingProps)).return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(r.child=s;null!==s;)s.return=r,s=s.sibling;return(n=zc(n,o)).return=e,r.sibling=n,r.childExpirationTime=0,e.memoizedState=Yi,e.child=r,n}return r=Lo(e,t.child,o.children,r),e.memoizedState=null,e.child=r}if(t=t.child,s){if(s=o.fallback,(o=Vc(null,n,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(r=Vc(s,n,r,null)).return=e,o.sibling=r,r.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Yi,e.child=o,r}return e.memoizedState=null,e.child=Lo(e,t,o.children,r)}function Qi(t,e){t.expirationTime<e&&(t.expirationTime=e);var r=t.alternate;null!==r&&r.expirationTime<e&&(r.expirationTime=e),so(t.return,e)}function Ji(t,e,r,a,n,o){var i=t.memoizedState;null===i?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:r,tailExpiration:0,tailMode:n,lastEffect:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailExpiration=0,i.tailMode=n,i.lastEffect=o)}function ts(t,e,r){var a=e.pendingProps,n=a.revealOrder,o=a.tail;if(Ii(t,e,a.children,r),0!==(2&(a=Bo.current)))a=1&a|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Qi(t,r);else if(19===t.tag)Qi(t,r);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(gn(Bo,a),0===(2&e.mode))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;null!==r;)null!==(t=r.alternate)&&null===zo(t)&&(n=r),r=r.sibling;null===(r=n)?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),Ji(e,!1,n,r,o,e.lastEffect);break;case"backwards":for(r=null,n=e.child,e.child=null;null!==n;){if(null!==(t=n.alternate)&&null===zo(t)){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Ji(e,!0,r,null,o,e.lastEffect);break;case"together":Ji(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function es(t,e,r){null!==t&&(e.dependencies=t.dependencies);var a=e.expirationTime;if(0!==a&&Oc(a),e.childExpirationTime<r)return null;if(null!==t&&e.child!==t.child)throw Error(i(153));if(null!==e.child){for(r=zc(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=zc(t,t.pendingProps)).return=e;r.sibling=null}return e.child}function rs(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;null!==e;)null!==e.alternate&&(r=e),e=e.sibling;null===r?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;null!==r;)null!==r.alternate&&(a=r),r=r.sibling;null===a?e||null===t.tail?t.tail=null:t.tail.sibling=null:a.sibling=null}}function as(t,e,r){var a=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return wn(e.type)&&xn(),null;case 3:return Fo(),fn(_n),fn(mn),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||!Ni(e)||(e.effectTag|=4),Ki(e),null;case 5:Wo(e),r=Io(Go.current);var o=e.type;if(null!==t&&null!=e.stateNode)$i(t,e,o,a,r),t.ref!==e.ref&&(e.effectTag|=128);else{if(!a){if(null===e.stateNode)throw Error(i(166));return null}if(t=Io(Po.current),Ni(e)){a=e.stateNode,o=e.type;var s=e.memoizedProps;switch(a[Sr]=e,a[Tr]=s,o){case"iframe":case"object":case"embed":$e("load",a);break;case"video":case"audio":for(t=0;t<Zt.length;t++)$e(Zt[t],a);break;case"source":$e("error",a);break;case"img":case"image":case"link":$e("error",a),$e("load",a);break;case"form":$e("reset",a),$e("submit",a);break;case"details":$e("toggle",a);break;case"input":Ot(a,s),$e("invalid",a),cr(r,"onChange");break;case"select":a._wrapperState={wasMultiple:!!s.multiple},$e("invalid",a),cr(r,"onChange");break;case"textarea":Lt(a,s),$e("invalid",a),cr(r,"onChange")}for(var c in or(o,s),t=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?a.textContent!==l&&(t=["children",l]):"number"===typeof l&&a.textContent!==""+l&&(t=["children",""+l]):R.hasOwnProperty(c)&&null!=l&&cr(r,c)}switch(o){case"input":bt(a),Ct(a,s,!0);break;case"textarea":bt(a),Nt(a);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(a.onclick=lr)}r=t,e.updateQueue=r,null!==r&&(e.effectTag|=4)}else{switch(c=9===r.nodeType?r:r.ownerDocument,t===sr&&(t=Gt(o)),t===sr?"script"===o?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof a.is?t=c.createElement(o,{is:a.is}):(t=c.createElement(o),"select"===o&&(c=t,a.multiple?c.multiple=!0:a.size&&(c.size=a.size))):t=c.createElementNS(t,o),t[Sr]=e,t[Tr]=a,qi(t,e,!1,!1),e.stateNode=t,c=ir(o,a),o){case"iframe":case"object":case"embed":$e("load",t),l=a;break;case"video":case"audio":for(l=0;l<Zt.length;l++)$e(Zt[l],t);l=a;break;case"source":$e("error",t),l=a;break;case"img":case"image":case"link":$e("error",t),$e("load",t),l=a;break;case"form":$e("reset",t),$e("submit",t),l=a;break;case"details":$e("toggle",t),l=a;break;case"input":Ot(t,a),l=xt(t,a),$e("invalid",t),cr(r,"onChange");break;case"option":l=Et(t,a);break;case"select":t._wrapperState={wasMultiple:!!a.multiple},l=n({},a,{value:void 0}),$e("invalid",t),cr(r,"onChange");break;case"textarea":Lt(t,a),l=Tt(t,a),$e("invalid",t),cr(r,"onChange");break;default:l=a}or(o,l);var u=l;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?ar(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&jt(t,h):"children"===s?"string"===typeof h?("textarea"!==o||""!==h)&&Wt(t,h):"number"===typeof h&&Wt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(R.hasOwnProperty(s)?null!=h&&cr(r,s):null!=h&&Z(t,s,h,c))}switch(o){case"input":bt(t),Ct(t,a,!1);break;case"textarea":bt(t),Nt(t);break;case"option":null!=a.value&&t.setAttribute("value",""+_t(a.value));break;case"select":t.multiple=!!a.multiple,null!=(r=a.value)?St(t,!!a.multiple,r,!1):null!=a.defaultValue&&St(t,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof l.onClick&&(t.onclick=lr)}xr(o,a)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Xi(t,e,t.memoizedProps,a);else{if("string"!==typeof a&&null===e.stateNode)throw Error(i(166));r=Io(Go.current),Io(Po.current),Ni(e)?(r=e.stateNode,a=e.memoizedProps,r[Sr]=e,r.nodeValue!==a&&(e.effectTag|=4)):((r=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[Sr]=e,e.stateNode=r)}return null;case 13:return fn(Bo),a=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=r,e):(r=null!==a,a=!1,null===t?void 0!==e.memoizedProps.fallback&&Ni(e):(a=null!==(o=t.memoizedState),r||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),r&&!a&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Bo.current)?zs===Ns&&(zs=Gs):(zs!==Ns&&zs!==Gs||(zs=Is),0!==$s&&null!==js&&(Yc(js,Bs),Zc(js,$s)))),(r||a)&&(e.effectTag|=4),null);case 4:return Fo(),Ki(e),null;case 10:return io(e),null;case 19:if(fn(Bo),null===(a=e.memoizedState))return null;if(o=0!==(64&e.effectTag),null===(s=a.rendering)){if(o)rs(a,!1);else if(zs!==Ns||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=zo(s))){for(e.effectTag|=64,rs(a,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===a.lastEffect&&(e.firstEffect=null),e.lastEffect=a.lastEffect,a=e.child;null!==a;)s=r,(o=a).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),a=a.sibling;return gn(Bo,1&Bo.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=zo(s))){if(e.effectTag|=64,o=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.effectTag|=4),rs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate)return null!==(e=e.lastEffect=a.lastEffect)&&(e.nextEffect=null),null}else 2*Vn()-a.renderingStartTime>a.tailExpiration&&1<r&&(e.effectTag|=64,o=!0,rs(a,!1),e.expirationTime=e.childExpirationTime=r-1);a.isBackwards?(s.sibling=e.child,e.child=s):(null!==(r=a.last)?r.sibling=s:e.child=s,a.last=s)}return null!==a.tail?(0===a.tailExpiration&&(a.tailExpiration=Vn()+500),r=a.tail,a.rendering=r,a.tail=r.sibling,a.lastEffect=e.lastEffect,a.renderingStartTime=Vn(),r.sibling=null,e=Bo.current,gn(Bo,o?1&e|2:1&e),r):null}throw Error(i(156,e.tag))}function ns(t){switch(t.tag){case 1:wn(t.type)&&xn();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Fo(),fn(_n),fn(mn),0!==(64&(e=t.effectTag)))throw Error(i(285));return t.effectTag=-4097&e|64,t;case 5:return Wo(t),null;case 13:return fn(Bo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return fn(Bo),null;case 4:return Fo(),null;case 10:return io(t),null;default:return null}}function os(t,e){return{value:t,source:e,stack:mt(e)}}qi=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ki=function(){},$i=function(t,e,r,a,o){var i=t.memoizedProps;if(i!==a){var s,c,l=e.stateNode;switch(Io(Po.current),t=null,r){case"input":i=xt(l,i),a=xt(l,a),t=[];break;case"option":i=Et(l,i),a=Et(l,a),t=[];break;case"select":i=n({},i,{value:void 0}),a=n({},a,{value:void 0}),t=[];break;case"textarea":i=Tt(l,i),a=Tt(l,a),t=[];break;default:"function"!==typeof i.onClick&&"function"===typeof a.onClick&&(l.onclick=lr)}for(s in or(r,a),r=null,i)if(!a.hasOwnProperty(s)&&i.hasOwnProperty(s)&&null!=i[s])if("style"===s)for(c in l=i[s])l.hasOwnProperty(c)&&(r||(r={}),r[c]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(R.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in a){var u=a[s];if(l=null!=i?i[s]:void 0,a.hasOwnProperty(s)&&u!==l&&(null!=u||null!=l))if("style"===s)if(l){for(c in l)!l.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in u)u.hasOwnProperty(c)&&l[c]!==u[c]&&(r||(r={}),r[c]=u[c])}else r||(t||(t=[]),t.push(s,r)),r=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(t=t||[]).push(s,u)):"children"===s?l===u||"string"!==typeof u&&"number"!==typeof u||(t=t||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(R.hasOwnProperty(s)?(null!=u&&cr(o,s),t||l===u||(t=[])):(t=t||[]).push(s,u))}r&&(t=t||[]).push("style",r),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Xi=function(t,e,r,a){r!==a&&(e.effectTag|=4)};var is="function"===typeof WeakSet?WeakSet:Set;function ss(t,e){var r=e.source,a=e.stack;null===a&&null!==r&&(a=mt(r)),null!==r&&yt(r.type),e=e.value,null!==t&&1===t.tag&&yt(t.type);try{console.error(e)}catch(n){setTimeout((function(){throw n}))}}function cs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(r){Uc(t,r)}else e.current=null}function ls(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&e.effectTag&&null!==t){var r=t.memoizedProps,a=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?r:to(e.type,r),a),t.__reactInternalSnapshotBeforeUpdate=e}return}throw Error(i(163))}function us(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var r=e=e.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,void 0!==a&&a()}r=r.next}while(r!==e)}}function hs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var r=e=e.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==e)}}function ds(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:return void hs(3,r);case 1:if(t=r.stateNode,4&r.effectTag)if(null===e)t.componentDidMount();else{var a=r.elementType===r.type?e.memoizedProps:to(r.type,e.memoizedProps);t.componentDidUpdate(a,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=r.updateQueue)&&_o(r,e,t));case 3:if(null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 5:case 1:t=r.child.stateNode}_o(r,e,t)}return;case 5:return t=r.stateNode,void(null===e&&4&r.effectTag&&xr(r.type,r.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Ie(r)))))}throw Error(i(163))}function ps(t,e,r){switch("function"===typeof Fc&&Fc(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var a=t.next;$n(97<r?97:r,(function(){var t=a;do{var r=t.destroy;if(void 0!==r){var n=e;try{r()}catch(o){Uc(n,o)}}t=t.next}while(t!==a)}))}break;case 1:cs(e),"function"===typeof(r=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(r){Uc(t,r)}}(e,r);break;case 5:cs(e);break;case 4:vs(t,e,r)}}function fs(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&fs(e)}function gs(t){return 5===t.tag||3===t.tag||4===t.tag}function ys(t){t:{for(var e=t.return;null!==e;){if(gs(e)){var r=e;break t}e=e.return}throw Error(i(160))}switch(e=r.stateNode,r.tag){case 5:var a=!1;break;case 3:case 4:e=e.containerInfo,a=!0;break;default:throw Error(i(161))}16&r.effectTag&&(Wt(e,""),r.effectTag&=-17);t:e:for(r=t;;){for(;null===r.sibling;){if(null===r.return||gs(r.return)){r=null;break t}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue e;if(null===r.child||4===r.tag)continue e;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break t}}a?ms(t,r,e):_s(t,r,e)}function ms(t,e,r){var a=t.tag,n=5===a||6===a;if(n)t=n?t.stateNode:t.stateNode.instance,e?8===r.nodeType?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(8===r.nodeType?(e=r.parentNode).insertBefore(t,r):(e=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==e.onclick||(e.onclick=lr));else if(4!==a&&null!==(t=t.child))for(ms(t,e,r),t=t.sibling;null!==t;)ms(t,e,r),t=t.sibling}function _s(t,e,r){var a=t.tag,n=5===a||6===a;if(n)t=n?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(4!==a&&null!==(t=t.child))for(_s(t,e,r),t=t.sibling;null!==t;)_s(t,e,r),t=t.sibling}function vs(t,e,r){for(var a,n,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(i(160));switch(a=s.stateNode,s.tag){case 5:n=!1;break t;case 3:case 4:a=a.containerInfo,n=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var c=t,l=o,u=r,h=l;;)if(ps(c,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break t;for(;null===h.sibling;){if(null===h.return||h.return===l)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n?(c=a,l=o.stateNode,8===c.nodeType?c.parentNode.removeChild(l):c.removeChild(l)):a.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){a=o.stateNode.containerInfo,n=!0,o.child.return=o,o=o.child;continue}}else if(ps(t,o,r),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function bs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void us(3,e);case 1:case 12:case 17:return;case 5:var r=e.stateNode;if(null!=r){var a=e.memoizedProps,n=null!==t?t.memoizedProps:a;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(r[Tr]=a,"input"===t&&"radio"===a.type&&null!=a.name&&Rt(r,a),ir(t,n),e=ir(t,a),n=0;n<o.length;n+=2){var s=o[n],c=o[n+1];"style"===s?ar(r,c):"dangerouslySetInnerHTML"===s?jt(r,c):"children"===s?Wt(r,c):Z(r,s,c,e)}switch(t){case"input":At(r,a);break;case"textarea":Dt(r,a);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!a.multiple,null!=(t=a.value)?St(r,!!a.multiple,t,!1):e!==!!a.multiple&&(null!=a.defaultValue?St(r,!!a.multiple,a.defaultValue,!0):St(r,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(i(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Ie(e.containerInfo)));case 13:if(r=e,null===e.memoizedState?a=!1:(a=!0,r=e.child,Ys=Vn()),null!==r)t:for(t=r;;){if(5===t.tag)o=t.stateNode,a?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,n=void 0!==(n=t.memoizedProps.style)&&null!==n&&n.hasOwnProperty("display")?n.display:null,o.style.display=rr("display",n));else if(6===t.tag)t.stateNode.nodeValue=a?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===r)break;for(;null===t.sibling;){if(null===t.return||t.return===r)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void ws(e);case 19:return void ws(e)}throw Error(i(163))}function ws(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var r=t.stateNode;null===r&&(r=t.stateNode=new is),e.forEach((function(e){var a=Ic.bind(null,t,e);r.has(e)||(r.add(e),e.then(a,a))}))}}var xs="function"===typeof WeakMap?WeakMap:Map;function Os(t,e,r){(r=fo(r,null)).tag=3,r.payload={element:null};var a=e.value;return r.callback=function(){Js||(Js=!0,tc=a),ss(t,e)},r}function Rs(t,e,r){(r=fo(r,null)).tag=3;var a=t.type.getDerivedStateFromError;if("function"===typeof a){var n=e.value;r.payload=function(){return ss(t,e),a(n)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){"function"!==typeof a&&(null===ec?ec=new Set([this]):ec.add(this),ss(t,e));var r=e.stack;this.componentDidCatch(e.value,{componentStack:null!==r?r:""})}),r}var As,Cs=Math.ceil,ks=Y.ReactCurrentDispatcher,Es=Y.ReactCurrentOwner,Ss=0,Ts=8,Ls=16,Ds=32,Ns=0,Ps=1,Us=2,Gs=3,Is=4,Ms=5,Fs=Ss,js=null,Ws=null,Bs=0,zs=Ns,Hs=null,Vs=1073741823,qs=1073741823,Ks=null,$s=0,Xs=!1,Ys=0,Zs=500,Qs=null,Js=!1,tc=null,ec=null,rc=!1,ac=null,nc=90,oc=null,ic=0,sc=null,cc=0;function lc(){return(Fs&(Ls|Ds))!==Ss?1073741821-(Vn()/10|0):0!==cc?cc:cc=1073741821-(Vn()/10|0)}function uc(t,e,r){if(0===(2&(e=e.mode)))return 1073741823;var a=qn();if(0===(4&e))return 99===a?1073741823:1073741822;if((Fs&Ls)!==Ss)return Bs;if(null!==r)t=Jn(t,0|r.timeoutMs||5e3,250);else switch(a){case 99:t=1073741823;break;case 98:t=Jn(t,150,100);break;case 97:case 96:t=Jn(t,5e3,250);break;case 95:t=2;break;default:throw Error(i(326))}return null!==js&&t===Bs&&--t,t}function hc(t,e){if(50<ic)throw ic=0,sc=null,Error(i(185));if(null!==(t=dc(t,e))){var r=qn();1073741823===e?(Fs&Ts)!==Ss&&(Fs&(Ls|Ds))===Ss?yc(t):(fc(t),Fs===Ss&&Zn()):fc(t),(4&Fs)===Ss||98!==r&&99!==r||(null===oc?oc=new Map([[t,e]]):(void 0===(r=oc.get(t))||r>e)&&oc.set(t,e))}}function dc(t,e){t.expirationTime<e&&(t.expirationTime=e);var r=t.alternate;null!==r&&r.expirationTime<e&&(r.expirationTime=e);var a=t.return,n=null;if(null===a&&3===t.tag)n=t.stateNode;else for(;null!==a;){if(r=a.alternate,a.childExpirationTime<e&&(a.childExpirationTime=e),null!==r&&r.childExpirationTime<e&&(r.childExpirationTime=e),null===a.return&&3===a.tag){n=a.stateNode;break}a=a.return}return null!==n&&(js===n&&(Oc(e),zs===Is&&Yc(n,Bs)),Zc(n,e)),n}function pc(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Xc(t,e=t.firstPendingTime))return e;var r=t.lastPingedTime;return 2>=(t=r>(t=t.nextKnownPendingLevel)?r:t)&&e!==t?0:t}function fc(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Yn(yc.bind(null,t));else{var e=pc(t),r=t.callbackNode;if(0===e)null!==r&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var a=lc();if(1073741823===e?a=99:1===e||2===e?a=95:a=0>=(a=10*(1073741821-e)-10*(1073741821-a))?99:250>=a?98:5250>=a?97:95,null!==r){var n=t.callbackPriority;if(t.callbackExpirationTime===e&&n>=a)return;r!==Mn&&Sn(r)}t.callbackExpirationTime=e,t.callbackPriority=a,e=1073741823===e?Yn(yc.bind(null,t)):Xn(a,gc.bind(null,t),{timeout:10*(1073741821-e)-Vn()}),t.callbackNode=e}}}function gc(t,e){if(cc=0,e)return Qc(t,e=lc()),fc(t),null;var r=pc(t);if(0!==r){if(e=t.callbackNode,(Fs&(Ls|Ds))!==Ss)throw Error(i(327));if(Dc(),t===js&&r===Bs||vc(t,r),null!==Ws){var a=Fs;Fs|=Ls;for(var n=wc();;)try{Ac();break}catch(c){bc(t,c)}if(oo(),Fs=a,ks.current=n,zs===Ps)throw e=Hs,vc(t,r),Yc(t,r),fc(t),e;if(null===Ws)switch(n=t.finishedWork=t.current.alternate,t.finishedExpirationTime=r,a=zs,js=null,a){case Ns:case Ps:throw Error(i(345));case Us:Qc(t,2<r?2:r);break;case Gs:if(Yc(t,r),r===(a=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Ec(n)),1073741823===Vs&&10<(n=Ys+Zs-Vn())){if(Xs){var o=t.lastPingedTime;if(0===o||o>=r){t.lastPingedTime=r,vc(t,r);break}}if(0!==(o=pc(t))&&o!==r)break;if(0!==a&&a!==r){t.lastPingedTime=a;break}t.timeoutHandle=Rr(Sc.bind(null,t),n);break}Sc(t);break;case Is:if(Yc(t,r),r===(a=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Ec(n)),Xs&&(0===(n=t.lastPingedTime)||n>=r)){t.lastPingedTime=r,vc(t,r);break}if(0!==(n=pc(t))&&n!==r)break;if(0!==a&&a!==r){t.lastPingedTime=a;break}if(1073741823!==qs?a=10*(1073741821-qs)-Vn():1073741823===Vs?a=0:(a=10*(1073741821-Vs)-5e3,0>(a=(n=Vn())-a)&&(a=0),(r=10*(1073741821-r)-n)<(a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Cs(a/1960))-a)&&(a=r)),10<a){t.timeoutHandle=Rr(Sc.bind(null,t),a);break}Sc(t);break;case Ms:if(1073741823!==Vs&&null!==Ks){o=Vs;var s=Ks;if(0>=(a=0|s.busyMinDurationMs)?a=0:(n=0|s.busyDelayMs,a=(o=Vn()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=n?0:n+a-o),10<a){Yc(t,r),t.timeoutHandle=Rr(Sc.bind(null,t),a);break}}Sc(t);break;default:throw Error(i(329))}if(fc(t),t.callbackNode===e)return gc.bind(null,t)}}return null}function yc(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,(Fs&(Ls|Ds))!==Ss)throw Error(i(327));if(Dc(),t===js&&e===Bs||vc(t,e),null!==Ws){var r=Fs;Fs|=Ls;for(var a=wc();;)try{Rc();break}catch(n){bc(t,n)}if(oo(),Fs=r,ks.current=a,zs===Ps)throw r=Hs,vc(t,e),Yc(t,e),fc(t),r;if(null!==Ws)throw Error(i(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,js=null,Sc(t),fc(t)}return null}function mc(t,e){var r=Fs;Fs|=1;try{return t(e)}finally{(Fs=r)===Ss&&Zn()}}function _c(t,e){var r=Fs;Fs&=-2,Fs|=Ts;try{return t(e)}finally{(Fs=r)===Ss&&Zn()}}function vc(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var r=t.timeoutHandle;if(-1!==r&&(t.timeoutHandle=-1,Ar(r)),null!==Ws)for(r=Ws.return;null!==r;){var a=r;switch(a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&xn();break;case 3:Fo(),fn(_n),fn(mn);break;case 5:Wo(a);break;case 4:Fo();break;case 13:case 19:fn(Bo);break;case 10:io(a)}r=r.return}js=t,Ws=zc(t.current,null),Bs=e,zs=Ns,Hs=null,qs=Vs=1073741823,Ks=null,$s=0,Xs=!1}function bc(t,e){for(;;){try{if(oo(),Vo.current=xi,Zo)for(var r=$o.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}if(Ko=0,Yo=Xo=$o=null,Zo=!1,null===Ws||null===Ws.return)return zs=Ps,Hs=e,Ws=null;t:{var n=t,o=Ws.return,i=Ws,s=e;if(e=Bs,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&i.mode)){var l=i.alternate;l?(i.updateQueue=l.updateQueue,i.memoizedState=l.memoizedState,i.expirationTime=l.expirationTime):(i.updateQueue=null,i.memoizedState=null)}var u=0!==(1&Bo.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var f=h.memoizedProps;d=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!u)}}if(d){var g=h.updateQueue;if(null===g){var y=new Set;y.add(c),h.updateQueue=y}else g.add(c);if(0===(2&h.mode)){if(h.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var m=fo(1073741823,null);m.tag=2,go(i,m)}i.expirationTime=1073741823;break t}s=void 0,i=e;var _=n.pingCache;if(null===_?(_=n.pingCache=new xs,s=new Set,_.set(c,s)):void 0===(s=_.get(c))&&(s=new Set,_.set(c,s)),!s.has(i)){s.add(i);var v=Gc.bind(null,n,c,i);c.then(v,v)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((yt(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+mt(i))}zs!==Ms&&(zs=Us),s=os(s,i),h=o;do{switch(h.tag){case 3:c=s,h.effectTag|=4096,h.expirationTime=e,yo(h,Os(h,c,e));break t;case 1:c=s;var b=h.type,w=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===ec||!ec.has(w)))){h.effectTag|=4096,h.expirationTime=e,yo(h,Rs(h,c,e));break t}}h=h.return}while(null!==h)}Ws=kc(Ws)}catch(x){e=x;continue}break}}function wc(){var t=ks.current;return ks.current=xi,null===t?xi:t}function xc(t,e){t<Vs&&2<t&&(Vs=t),null!==e&&t<qs&&2<t&&(qs=t,Ks=e)}function Oc(t){t>$s&&($s=t)}function Rc(){for(;null!==Ws;)Ws=Cc(Ws)}function Ac(){for(;null!==Ws&&!Fn();)Ws=Cc(Ws)}function Cc(t){var e=As(t.alternate,t,Bs);return t.memoizedProps=t.pendingProps,null===e&&(e=kc(t)),Es.current=null,e}function kc(t){Ws=t;do{var e=Ws.alternate;if(t=Ws.return,0===(2048&Ws.effectTag)){if(e=as(e,Ws,Bs),1===Bs||1!==Ws.childExpirationTime){for(var r=0,a=Ws.child;null!==a;){var n=a.expirationTime,o=a.childExpirationTime;n>r&&(r=n),o>r&&(r=o),a=a.sibling}Ws.childExpirationTime=r}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ws.firstEffect),null!==Ws.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ws.firstEffect),t.lastEffect=Ws.lastEffect),1<Ws.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ws:t.firstEffect=Ws,t.lastEffect=Ws))}else{if(null!==(e=ns(Ws)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ws.sibling))return e;Ws=t}while(null!==Ws);return zs===Ns&&(zs=Ms),null}function Ec(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function Sc(t){var e=qn();return $n(99,Tc.bind(null,t,e)),null}function Tc(t,e){do{Dc()}while(null!==ac);if((Fs&(Ls|Ds))!==Ss)throw Error(i(327));var r=t.finishedWork,a=t.finishedExpirationTime;if(null===r)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,r===t.current)throw Error(i(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var n=Ec(r);if(t.firstPendingTime=n,a<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:a<=t.firstSuspendedTime&&(t.firstSuspendedTime=a-1),a<=t.lastPingedTime&&(t.lastPingedTime=0),a<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===js&&(Ws=js=null,Bs=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){var o=Fs;Fs|=Ds,Es.current=null,br=Ke;var s=fr();if(gr(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{var l=(c=(c=s.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(l&&0!==l.rangeCount){c=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{c.nodeType,h.nodeType}catch(C){c=null;break t}var d=0,p=-1,f=-1,g=0,y=0,m=s,_=null;e:for(;;){for(var v;m!==c||0!==u&&3!==m.nodeType||(p=d+u),m!==h||0!==l&&3!==m.nodeType||(f=d+l),3===m.nodeType&&(d+=m.nodeValue.length),null!==(v=m.firstChild);)_=m,m=v;for(;;){if(m===s)break e;if(_===c&&++g===u&&(p=d),_===h&&++y===l&&(f=d),null!==(v=m.nextSibling))break;_=(m=_).parentNode}m=v}c=-1===p||-1===f?null:{start:p,end:f}}else c=null}c=c||{start:0,end:0}}else c=null;wr={activeElementDetached:null,focusedElem:s,selectionRange:c},Ke=!1,Qs=n;do{try{Lc()}catch(C){if(null===Qs)throw Error(i(330));Uc(Qs,C),Qs=Qs.nextEffect}}while(null!==Qs);Qs=n;do{try{for(s=t,c=e;null!==Qs;){var b=Qs.effectTag;if(16&b&&Wt(Qs.stateNode,""),128&b){var w=Qs.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:ys(Qs),Qs.effectTag&=-3;break;case 6:ys(Qs),Qs.effectTag&=-3,bs(Qs.alternate,Qs);break;case 1024:Qs.effectTag&=-1025;break;case 1028:Qs.effectTag&=-1025,bs(Qs.alternate,Qs);break;case 4:bs(Qs.alternate,Qs);break;case 8:vs(s,u=Qs,c),fs(u)}Qs=Qs.nextEffect}}catch(C){if(null===Qs)throw Error(i(330));Uc(Qs,C),Qs=Qs.nextEffect}}while(null!==Qs);if(x=wr,w=fr(),b=x.focusedElem,c=x.selectionRange,w!==b&&b&&b.ownerDocument&&pr(b.ownerDocument.documentElement,b)){null!==c&&gr(b)&&(w=c.start,void 0===(x=c.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),u=b.textContent.length,s=Math.min(c.start,u),c=void 0===c.end?s:Math.min(c.end,u),!x.extend&&s>c&&(u=c,c=s,s=u),u=dr(b,s),h=dr(b,c),u&&h&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==h.node||x.focusOffset!==h.offset)&&((w=w.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),s>c?(x.addRange(w),x.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ke=!!br,wr=br=null,t.current=r,Qs=n;do{try{for(b=t;null!==Qs;){var O=Qs.effectTag;if(36&O&&ds(b,Qs.alternate,Qs),128&O){w=void 0;var R=Qs.ref;if(null!==R){var A=Qs.stateNode;Qs.tag,w=A,"function"===typeof R?R(w):R.current=w}}Qs=Qs.nextEffect}}catch(C){if(null===Qs)throw Error(i(330));Uc(Qs,C),Qs=Qs.nextEffect}}while(null!==Qs);Qs=null,jn(),Fs=o}else t.current=r;if(rc)rc=!1,ac=t,nc=e;else for(Qs=n;null!==Qs;)e=Qs.nextEffect,Qs.nextEffect=null,Qs=e;if(0===(e=t.firstPendingTime)&&(ec=null),1073741823===e?t===sc?ic++:(ic=0,sc=t):ic=0,"function"===typeof Mc&&Mc(r.stateNode,a),fc(t),Js)throw Js=!1,t=tc,tc=null,t;return(Fs&Ts)!==Ss||Zn(),null}function Lc(){for(;null!==Qs;){var t=Qs.effectTag;0!==(256&t)&&ls(Qs.alternate,Qs),0===(512&t)||rc||(rc=!0,Xn(97,(function(){return Dc(),null}))),Qs=Qs.nextEffect}}function Dc(){if(90!==nc){var t=97<nc?97:nc;return nc=90,$n(t,Nc)}}function Nc(){if(null===ac)return!1;var t=ac;if(ac=null,(Fs&(Ls|Ds))!==Ss)throw Error(i(331));var e=Fs;for(Fs|=Ds,t=t.current.firstEffect;null!==t;){try{var r=t;if(0!==(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:case 22:us(5,r),hs(5,r)}}catch(a){if(null===t)throw Error(i(330));Uc(t,a)}r=t.nextEffect,t.nextEffect=null,t=r}return Fs=e,Zn(),!0}function Pc(t,e,r){go(t,e=Os(t,e=os(r,e),1073741823)),null!==(t=dc(t,1073741823))&&fc(t)}function Uc(t,e){if(3===t.tag)Pc(t,t,e);else for(var r=t.return;null!==r;){if(3===r.tag){Pc(r,t,e);break}if(1===r.tag){var a=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===ec||!ec.has(a))){go(r,t=Rs(r,t=os(e,t),1073741823)),null!==(r=dc(r,1073741823))&&fc(r);break}}r=r.return}}function Gc(t,e,r){var a=t.pingCache;null!==a&&a.delete(e),js===t&&Bs===r?zs===Is||zs===Gs&&1073741823===Vs&&Vn()-Ys<Zs?vc(t,Bs):Xs=!0:Xc(t,r)&&(0!==(e=t.lastPingedTime)&&e<r||(t.lastPingedTime=r,fc(t)))}function Ic(t,e){var r=t.stateNode;null!==r&&r.delete(e),0===(e=0)&&(e=uc(e=lc(),t,null)),null!==(t=dc(t,e))&&fc(t)}As=function(t,e,r){var a=e.expirationTime;if(null!==t){var n=e.pendingProps;if(t.memoizedProps!==n||_n.current)Gi=!0;else{if(a<r){switch(Gi=!1,e.tag){case 3:Vi(e),Pi();break;case 5:if(jo(e),4&e.mode&&1!==r&&n.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:wn(e.type)&&An(e);break;case 4:Mo(e,e.stateNode.containerInfo);break;case 10:a=e.memoizedProps.value,n=e.type._context,gn(eo,n._currentValue),n._currentValue=a;break;case 13:if(null!==e.memoizedState)return 0!==(a=e.child.childExpirationTime)&&a>=r?Zi(t,e,r):(gn(Bo,1&Bo.current),null!==(e=es(t,e,r))?e.sibling:null);gn(Bo,1&Bo.current);break;case 19:if(a=e.childExpirationTime>=r,0!==(64&t.effectTag)){if(a)return ts(t,e,r);e.effectTag|=64}if(null!==(n=e.memoizedState)&&(n.rendering=null,n.tail=null),gn(Bo,Bo.current),!a)return null}return es(t,e,r)}Gi=!1}}else Gi=!1;switch(e.expirationTime=0,e.tag){case 2:if(a=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,n=bn(e,mn.current),co(e,r),n=ti(null,e,a,t,n,r),e.effectTag|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(a)){var o=!0;An(e)}else o=!1;e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,ho(e);var s=a.getDerivedStateFromProps;"function"===typeof s&&wo(e,a,s,t),n.updater=xo,e.stateNode=n,n._reactInternalFiber=e,Co(e,a,t,r),e=Hi(null,e,a,!0,o,r)}else e.tag=0,Ii(null,e,n,r),e=e.child;return e;case 16:t:{if(n=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(n),1!==n._status)throw n._result;switch(n=n._result,e.type=n,o=e.tag=function(t){if("function"===typeof t)return Bc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ct)return 11;if(t===ht)return 14}return 2}(n),t=to(n,t),o){case 0:e=Bi(null,e,n,t,r);break t;case 1:e=zi(null,e,n,t,r);break t;case 11:e=Mi(null,e,n,t,r);break t;case 14:e=Fi(null,e,n,to(n.type,t),a,r);break t}throw Error(i(306,n,""))}return e;case 0:return a=e.type,n=e.pendingProps,Bi(t,e,a,n=e.elementType===a?n:to(a,n),r);case 1:return a=e.type,n=e.pendingProps,zi(t,e,a,n=e.elementType===a?n:to(a,n),r);case 3:if(Vi(e),a=e.updateQueue,null===t||null===a)throw Error(i(282));if(a=e.pendingProps,n=null!==(n=e.memoizedState)?n.element:null,po(t,e),mo(e,a,null,r),(a=e.memoizedState.element)===n)Pi(),e=es(t,e,r);else{if((n=e.stateNode.hydrate)&&(ki=Cr(e.stateNode.containerInfo.firstChild),Ci=e,n=Ei=!0),n)for(r=Do(e,null,a,r),e.child=r;r;)r.effectTag=-3&r.effectTag|1024,r=r.sibling;else Ii(t,e,a,r),Pi();e=e.child}return e;case 5:return jo(e),null===t&&Li(e),a=e.type,n=e.pendingProps,o=null!==t?t.memoizedProps:null,s=n.children,Or(a,n)?s=null:null!==o&&Or(a,o)&&(e.effectTag|=16),Wi(t,e),4&e.mode&&1!==r&&n.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ii(t,e,s,r),e=e.child),e;case 6:return null===t&&Li(e),null;case 13:return Zi(t,e,r);case 4:return Mo(e,e.stateNode.containerInfo),a=e.pendingProps,null===t?e.child=Lo(e,null,a,r):Ii(t,e,a,r),e.child;case 11:return a=e.type,n=e.pendingProps,Mi(t,e,a,n=e.elementType===a?n:to(a,n),r);case 7:return Ii(t,e,e.pendingProps,r),e.child;case 8:case 12:return Ii(t,e,e.pendingProps.children,r),e.child;case 10:t:{a=e.type._context,n=e.pendingProps,s=e.memoizedProps,o=n.value;var c=e.type._context;if(gn(eo,c._currentValue),c._currentValue=o,null!==s)if(c=s.value,0===(o=Ba(c,o)?0:0|("function"===typeof a._calculateChangedBits?a._calculateChangedBits(c,o):1073741823))){if(s.children===n.children&&!_n.current){e=es(t,e,r);break t}}else for(null!==(c=e.child)&&(c.return=e);null!==c;){var l=c.dependencies;if(null!==l){s=c.child;for(var u=l.firstContext;null!==u;){if(u.context===a&&0!==(u.observedBits&o)){1===c.tag&&((u=fo(r,null)).tag=2,go(c,u)),c.expirationTime<r&&(c.expirationTime=r),null!==(u=c.alternate)&&u.expirationTime<r&&(u.expirationTime=r),so(c.return,r),l.expirationTime<r&&(l.expirationTime=r);break}u=u.next}}else s=10===c.tag&&c.type===e.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===e){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Ii(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,a=(o=e.pendingProps).children,co(e,r),a=a(n=lo(n,o.unstable_observedBits)),e.effectTag|=1,Ii(t,e,a,r),e.child;case 14:return o=to(n=e.type,e.pendingProps),Fi(t,e,n,o=to(n.type,o),a,r);case 15:return ji(t,e,e.type,e.pendingProps,a,r);case 17:return a=e.type,n=e.pendingProps,n=e.elementType===a?n:to(a,n),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,wn(a)?(t=!0,An(e)):t=!1,co(e,r),Ro(e,a,n),Co(e,a,n,r),Hi(null,e,a,!0,t,r);case 19:return ts(t,e,r)}throw Error(i(156,e.tag))};var Mc=null,Fc=null;function jc(t,e,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Wc(t,e,r,a){return new jc(t,e,r,a)}function Bc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function zc(t,e){var r=t.alternate;return null===r?((r=Wc(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=t.childExpirationTime,r.expirationTime=t.expirationTime,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Hc(t,e,r,a,n,o){var s=2;if(a=t,"function"===typeof t)Bc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case rt:return Vc(r.children,n,o,e);case st:s=8,n|=7;break;case at:s=8,n|=1;break;case nt:return(t=Wc(12,r,e,8|n)).elementType=nt,t.type=nt,t.expirationTime=o,t;case lt:return(t=Wc(13,r,e,n)).type=lt,t.elementType=lt,t.expirationTime=o,t;case ut:return(t=Wc(19,r,e,n)).elementType=ut,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case it:s=9;break t;case ct:s=11;break t;case ht:s=14;break t;case dt:s=16,a=null;break t;case pt:s=22;break t}throw Error(i(130,null==t?t:typeof t,""))}return(e=Wc(s,r,e,n)).elementType=t,e.type=a,e.expirationTime=o,e}function Vc(t,e,r,a){return(t=Wc(7,t,a,e)).expirationTime=r,t}function qc(t,e,r){return(t=Wc(6,t,null,e)).expirationTime=r,t}function Kc(t,e,r){return(e=Wc(4,null!==t.children?t.children:[],t.key,e)).expirationTime=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $c(t,e,r){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Xc(t,e){var r=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==r&&r>=e&&t<=e}function Yc(t,e){var r=t.firstSuspendedTime,a=t.lastSuspendedTime;r<e&&(t.firstSuspendedTime=e),(a>e||0===r)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Zc(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var r=t.firstSuspendedTime;0!==r&&(e>=r?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Qc(t,e){var r=t.lastExpiredTime;(0===r||r>e)&&(t.lastExpiredTime=e)}function Jc(t,e,r,a){var n=e.current,o=lc(),s=vo.suspense;o=uc(o,n,s);t:if(r){e:{if(te(r=r._reactInternalFiber)!==r||1!==r.tag)throw Error(i(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(wn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(null!==c);throw Error(i(171))}if(1===r.tag){var l=r.type;if(wn(l)){r=Rn(r,l,c);break t}}r=c}else r=yn;return null===e.context?e.context=r:e.pendingContext=r,(e=fo(o,s)).payload={element:t},null!==(a=void 0===a?null:a)&&(e.callback=a),go(n,e),hc(n,o),o}function tl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function el(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function rl(t,e){el(t,e),(t=t.alternate)&&el(t,e)}function al(t,e,r){var a=new $c(t,e,r=null!=r&&!0===r.hydrate),n=Wc(3,null,null,2===e?7:1===e?3:0);a.current=n,n.stateNode=a,ho(n),t[Lr]=a.current,r&&0!==e&&function(t,e){var r=Jt(e);ke.forEach((function(t){ge(t,e,r)})),Ee.forEach((function(t){ge(t,e,r)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=a}function nl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function ol(t,e,r,a,n){var o=r._reactRootContainer;if(o){var i=o._internalRoot;if("function"===typeof n){var s=n;n=function(){var t=tl(i);s.call(t)}}Jc(e,i,t,n)}else{if(o=r._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new al(t,0,e?{hydrate:!0}:void 0)}(r,a),i=o._internalRoot,"function"===typeof n){var c=n;n=function(){var t=tl(i);c.call(t)}}_c((function(){Jc(e,i,t,n)}))}return tl(i)}function il(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(e))throw Error(i(200));return function(t,e,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==a?null:""+a,children:t,containerInfo:e,implementation:r}}(t,e,null,r)}al.prototype.render=function(t){Jc(t,this._internalRoot,null,null)},al.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Jc(null,t,null,(function(){e[Lr]=null}))},ye=function(t){if(13===t.tag){var e=Jn(lc(),150,100);hc(t,e),rl(t,e)}},me=function(t){13===t.tag&&(hc(t,3),rl(t,3))},_e=function(t){if(13===t.tag){var e=lc();hc(t,e=uc(e,t,null)),rl(t,e)}},E=function(t,e,r){switch(e){case"input":if(At(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var a=r[e];if(a!==t&&a.form===t.form){var n=Ur(a);if(!n)throw Error(i(90));wt(a),At(a,n)}}}break;case"textarea":Dt(t,r);break;case"select":null!=(e=r.value)&&St(t,!!r.multiple,e,!1)}},P=mc,U=function(t,e,r,a,n){var o=Fs;Fs|=4;try{return $n(98,t.bind(null,e,r,a,n))}finally{(Fs=o)===Ss&&Zn()}},G=function(){(Fs&(1|Ls|Ds))===Ss&&(function(){if(null!==oc){var t=oc;oc=null,t.forEach((function(t,e){Qc(e,t),fc(e)})),Zn()}}(),Dc())},I=function(t,e){var r=Fs;Fs|=2;try{return t(e)}finally{(Fs=r)===Ss&&Zn()}};var sl={Events:[Nr,Pr,Ur,C,O,Br,function(t){oe(t,Wr)},D,N,Qe,ce,Dc,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var r=e.inject(t);Mc=function(t){try{e.onCommitFiberRoot(r,t,void 0,64===(64&t.current.effectTag))}catch(a){}},Fc=function(t){try{e.onCommitFiberUnmount(r,t)}catch(a){}}}catch(a){}})(n({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ae(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Dr,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl,e.createPortal=il,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(i(188));throw Error(i(268,Object.keys(t)))}return t=null===(t=ae(e))?null:t.stateNode},e.flushSync=function(t,e){if((Fs&(Ls|Ds))!==Ss)throw Error(i(187));var r=Fs;Fs|=1;try{return $n(99,t.bind(null,e))}finally{Fs=r,Zn()}},e.hydrate=function(t,e,r){if(!nl(e))throw Error(i(200));return ol(null,t,e,!0,r)},e.render=function(t,e,r){if(!nl(e))throw Error(i(200));return ol(null,t,e,!1,r)},e.unmountComponentAtNode=function(t){if(!nl(t))throw Error(i(40));return!!t._reactRootContainer&&(_c((function(){ol(null,null,t,!1,(function(){t._reactRootContainer=null,t[Lr]=null}))})),!0)},e.unstable_batchedUpdates=mc,e.unstable_createPortal=function(t,e){return il(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,r,a){if(!nl(r))throw Error(i(200));if(null==t||void 0===t._reactInternalFiber)throw Error(i(38));return ol(t,e,r,!1,a)},e.version="16.14.0"},5699:(t,e,r)=>{var a=r(7650),n=r(4788),o=r(4916),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&n(t.length)&&!!i[a(t)]}},5710:(t,e,r)=>{var a=r(8347);t.exports=function(t){return t===t&&!a(t)}},5748:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},5903:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(r){}try{return t+""}catch(r){}}return""}},5987:t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},6003:(t,e,r)=>{var a=r(7636),n=r(6708),o=r(1536),i=r(8481),s=r(522),c=r(9375),l=r(2367),u=r(9051),h=r(7827),d=r(7791),p=Math.max;t.exports=function(t,e,r,f,g,y,m,_){var v=2&e;if(!v&&"function"!=typeof t)throw new TypeError("Expected a function");var b=f?f.length:0;if(b||(e&=-97,f=g=void 0),m=void 0===m?m:p(d(m),0),_=void 0===_?_:d(_),b-=g?g.length:0,64&e){var w=f,x=g;f=g=void 0}var O=v?void 0:c(t),R=[t,e,r,f,g,w,x,y,m,_];if(O&&l(R,O),t=R[0],e=R[1],r=R[2],f=R[3],g=R[4],!(_=R[9]=void 0===R[9]?v?0:t.length:p(R[9]-b,0))&&24&e&&(e&=-25),e&&1!=e)A=8==e||16==e?o(t,e,_):32!=e&&33!=e||g.length?i.apply(void 0,R):s(t,e,r,f);else var A=n(t,e,r);return h((O?a:u)(A,R),t,e)}},6062:(t,e,r)=>{var a=r(6891),n=r(1721),o=r(4316),i=r(863),s=r(3884),c=r(3531),l=r(2470),u=r(3293),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,g,y,m){var _=c(t),v=c(e),b=_?d:s(t),w=v?d:s(e),x=(b=b==h?p:b)==p,O=(w=w==h?p:w)==p,R=b==w;if(R&&l(t)){if(!l(e))return!1;_=!0,x=!1}if(R&&!x)return m||(m=new a),_||u(t)?n(t,e,r,g,y,m):o(t,e,b,r,g,y,m);if(!(1&r)){var A=x&&f.call(t,"__wrapped__"),C=O&&f.call(e,"__wrapped__");if(A||C){var k=A?t.value():t,E=C?e.value():e;return m||(m=new a),y(k,E,r,g,m)}}return!!R&&(m||(m=new a),i(t,e,r,g,y,m))}},6099:t=>{t.exports=function(t){return this.__data__.has(t)}},6142:(t,e,r)=>{var a=r(9545),n=r(361);t.exports=function(t,e){return a(t,n(t),e)}},6186:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var r=new Uint8Array(16);t.exports=function(){return e(r),r}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}},6285:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=function(t){var e,r=t.data,a=r.length;for(e=0;e<a;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2]}},6342:(t,e,r)=>{var a=r(9520),n=r(4916),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=a(function(){return arguments}())?a:function(t){return n(t)&&i.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},6351:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var r=t.length,a=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(a.index=t.index,a.input=t.input),a}},6373:(t,e,r)=>{var a=r(7983).k;a._injectGlobal(a),e.default=a,t.exports=e.default},6409:(t,e,r)=>{var a=r(9223);t.exports=function(t,e){var r=this.__data__,n=a(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}},6461:t=>{t.exports=function(t,e,r,a){for(var n=t.length,o=r+(a?1:-1);a?o--:++o<n;)if(e(t[o],o,t))return o;return-1}},6547:(t,e,r)=>{t=r.nmd(t);var a=r(9078),n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,i=o&&o.exports===n&&a.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(e){}}();t.exports=s},6583:(t,e,r)=>{var a=r(7257);t.exports=function(t,e){var r=a(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}},6643:(t,e,r)=>{var a=r(4821),n=r(5748),o=r(9911),i=r(3339),s=r(7651);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,t.exports=c},6659:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},6708:(t,e,r)=>{var a=r(4009),n=r(8731);t.exports=function(t,e,r){var o=1&e,i=a(t);return function e(){return(this&&this!==n&&this instanceof e?i:t).apply(o?r:this,arguments)}}},6723:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},6785:(t,e,r)=>{"use strict";e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=d(r(4674)),o=d(r(1531)),i=d(r(2255)),s=r(3477),c=d(r(1561)),l=d(r(9358)),u=r(5271),h=r(5010);function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var f=[];s.transitionEnd&&f.push(s.transitionEnd),s.animationEnd&&f.push(s.animationEnd);l.default.node,h.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var g=function(t){function e(){var r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=a=p(this,t.call.apply(t,[this].concat(o))),a.componentWillAppear=function(t){a.props.appear?a.transition("appear",t,a.props.appearTimeout):t()},a.componentWillEnter=function(t){a.props.enter?a.transition("enter",t,a.props.enterTimeout):t()},a.componentWillLeave=function(t){a.props.leave?a.transition("leave",t,a.props.leaveTimeout):t()},p(a,r)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},e.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(t){clearTimeout(t)})),this.classNameAndNodeQueue.length=0},e.prototype.transition=function(t,e,r){var a=(0,u.findDOMNode)(this);if(a){var i=this.props.name[t]||this.props.name+"-"+t,c=this.props.name[t+"Active"]||i+"-active",l=null,h=void 0;(0,n.default)(a,i),this.queueClassAndNode(c,a);var d=function(t){t&&t.target!==a||(clearTimeout(l),h&&h(),(0,o.default)(a,i),(0,o.default)(a,c),h&&h(),e&&e())};r?(l=setTimeout(d,r),this.transitionTimeouts.push(l)):s.transitionEnd&&(h=function(t,e){return f.length?f.forEach((function(r){return t.addEventListener(r,e,!1)})):setTimeout(e,0),function(){f.length&&f.forEach((function(r){return t.removeEventListener(r,e,!1)}))}}(a,d))}else e&&e()},e.prototype.queueClassAndNode=function(t,e){var r=this;this.classNameAndNodeQueue.push({className:t,node:e}),this.rafHandle||(this.rafHandle=(0,i.default)((function(){return r.flushClassNameAndNodeQueue()})))},e.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(t){t.node.scrollTop,(0,n.default)(t.node,t.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},e.prototype.render=function(){var t=a({},this.props);return delete t.name,delete t.appear,delete t.enter,delete t.leave,delete t.appearTimeout,delete t.enterTimeout,delete t.leaveTimeout,delete t.children,c.default.cloneElement(c.default.Children.only(this.props.children),t)},e}(c.default.Component);g.displayName="CSSTransitionGroupChild",g.propTypes={},e.default=g,t.exports=e.default},6799:t=>{t.exports=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}},6891:(t,e,r)=>{var a=r(2009),n=r(954),o=r(7340),i=r(2207),s=r(6099),c=r(9787);function l(t){var e=this.__data__=new a(t);this.size=e.size}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,t.exports=l},6912:t=>{t.exports={}},6968:(t,e,r)=>{var a=r(5387),n=r(9811);t.exports=function(t,e){for(var r=0,o=(e=a(e,t)).length;null!=t&&r<o;)t=t[n(e[r++])];return r&&r==o?t:void 0}},6976:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=function(t){var e=t.data,r=t.width,a=4*r,n=t.height;do{var o=(n-1)*a,i=r;do{var s=o+4*(i-1),c=e[s],l=e[s+1],u=e[s+2];c>127&&(c=255-c),l>127&&(l=255-l),u>127&&(u=255-u),e[s]=c,e[s+1]=l,e[s+2]=u}while(--i)}while(--n)}},6982:(t,e,r)=>{var a=r(5151),n=a?a.prototype:void 0,o=n?n.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},6986:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9614),c=r(8498),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var n=1;n<2*a;n++){var o=n%2===0?r:e,i=o*Math.sin(n*Math.PI/a),s=-1*o*Math.cos(n*Math.PI/a);t.lineTo(i,s)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(i.Shape);e.Star=l,l.prototype.className="Star",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(l),o.Factory.addGetterSetter(l,"numPoints",5,s.getNumberValidator()),o.Factory.addGetterSetter(l,"innerRadius",0,s.getNumberValidator()),o.Factory.addGetterSetter(l,"outerRadius",0,s.getNumberValidator()),n.Collection.mapMethods(l)},7065:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},7097:(t,e,r)=>{var a=r(8753)(Object.getPrototypeOf,Object);t.exports=a},7130:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.Brighten=function(t){var e,r=255*this.brightness(),a=t.data,n=a.length;for(e=0;e<n;e+=4)a[e]+=r,a[e+1]+=r,a[e+2]+=r},a.Factory.addGetterSetter(n.Node,"brightness",0,o.getNumberValidator(),a.Factory.afterSetFilter)},7194:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(2261),i=r(9614);e.Emboss=function(t){var e=10*this.embossStrength(),r=255*this.embossWhiteLevel(),a=this.embossDirection(),n=this.embossBlend(),i=0,s=0,c=t.data,l=t.width,u=t.height,h=4*l,d=u;switch(a){case"top-left":i=-1,s=-1;break;case"top":i=-1,s=0;break;case"top-right":i=-1,s=1;break;case"right":i=0,s=1;break;case"bottom-right":i=1,s=1;break;case"bottom":i=1,s=0;break;case"bottom-left":i=1,s=-1;break;case"left":i=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+a)}do{var p=(d-1)*h,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var g=(d-1+f)*l*4,y=l;do{var m=p+4*(y-1),_=s;y+_<1&&(_=0),y+_>l&&(_=0);var v=g+4*(y-1+_),b=c[m]-c[v],w=c[m+1]-c[v+1],x=c[m+2]-c[v+2],O=b,R=O>0?O:-O;if((w>0?w:-w)>R&&(O=w),(x>0?x:-x)>R&&(O=x),O*=e,n){var A=c[m]+O,C=c[m+1]+O,k=c[m+2]+O;c[m]=A>255?255:A<0?0:A,c[m+1]=C>255?255:C<0?0:C,c[m+2]=k>255?255:k<0?0:k}else{var E=r-O;E<0?E=0:E>255&&(E=255),c[m]=c[m+1]=c[m+2]=E}}while(--y)}while(--d)},a.Factory.addGetterSetter(n.Node,"embossStrength",.5,i.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"embossWhiteLevel",.5,i.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"embossDirection","top-left",null,a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"embossBlend",!1,null,a.Factory.afterSetFilter)},7202:t=>{t.exports=function(t,e){return t===e||t!==t&&e!==e}},7208:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9614),c=r(8498),l=2*Math.PI,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,l,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),l,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(i.Shape);e.Ring=u,u.prototype.className="Ring",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(u),o.Factory.addGetterSetter(u,"innerRadius",0,s.getNumberValidator()),o.Factory.addGetterSetter(u,"outerRadius",0,s.getNumberValidator()),n.Collection.mapMethods(u)},7219:t=>{t.exports=function(t){return function(e){return t(e)}}},7255:(t,e,r)=>{var a=r(8731)["__core-js_shared__"];t.exports=a},7257:(t,e,r)=>{var a=r(7516);t.exports=function(t,e){var r=t.__data__;return a(e)?r["string"==typeof e?"string":"hash"]:r.map}},7290:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},7340:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},7363:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.Noise=function(t){var e,r=255*this.noise(),a=t.data,n=a.length,o=r/2;for(e=0;e<n;e+=4)a[e+0]+=o-2*o*Math.random(),a[e+1]+=o-2*o*Math.random(),a[e+2]+=o-2*o*Math.random()},a.Factory.addGetterSetter(n.Node,"noise",.2,o.getNumberValidator(),a.Factory.afterSetFilter)},7373:(t,e,r)=>{var a=r(6461),n=r(8641),o=r(2557);t.exports=function(t,e,r){return e===e?o(t,e,r):a(t,n,r)}},7387:(t,e,r)=>{var a=r(2091);t.exports=function(t,e){var r=e?a(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},7389:(t,e,r)=>{t.exports=r(2613)},7396:t=>{t.exports=function(){this.__data__=[],this.size=0}},7488:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(4222),i=r(3887),s=r(1091),c=r(9685),l=r(4528),u=r(9614),h=r(8498),d=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=d.length,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitCanvas=new c.HitCanvas({pixelRatio:1}),e}return a(e,t),e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._checkSmooth()},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&n.Util.throw("You may only add groups and shapes to a layer.")},e.prototype.getIntersection=function(t,e){var r,a,n,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var i=1,s=!1;;){for(a=0;a<p;a++){if(n=d[a],(o=(r=this._getIntersection({x:t.x+n.x*i,y:t.y+n.y*i})).shape)&&e)return o.findAncestor(e,!0);if(o)return o;if(s=!!r.antialiased,!r.antialiased)break}if(!s)return null;i+=1}},e.prototype._getIntersection=function(t){var e,r,a=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(t.x*a),Math.round(t.y*a),1,1).data,i=o[3];return 255===i?(e=n.Util._rgbToHex(o[0],o[1],o[2]),(r=l.shapes["#"+e])?{shape:r}:{antialiased:!0}):i>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var r=this.getLayer(),a=t||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&a.getContext().clear(),o.Container.prototype.drawScene.call(this,a,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var r=this.getLayer(),a=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),o.Container.prototype.drawHit.call(this,a,e),this},e.prototype.clear=function(t){return s.BaseLayer.prototype.clear.call(this,t),this.getHitCanvas().getContext().clear(t),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e.prototype.setSize=function(e){var r=e.width,a=e.height;return t.prototype.setSize.call(this,{width:r,height:a}),this.hitCanvas.setSize(r,a),this},e}(s.BaseLayer);e.Layer=f,f.prototype.nodeType="Layer",h._registerNode(f),i.Factory.addGetterSetter(f,"hitGraphEnabled",!0,u.getBooleanValidator()),n.Collection.mapMethods(f)},7502:(t,e,r)=>{var a=r(1500),n=r(6912),o=Array.prototype.push;function i(t,e){return 2==e?function(e,r){return t(e,r)}:function(e){return t(e)}}function s(t){for(var e=t?t.length:0,r=Array(e);e--;)r[e]=t[e];return r}function c(t,e){return function(){var r=arguments.length;if(r){for(var a=Array(r);r--;)a[r]=arguments[r];var n=a[0]=e.apply(void 0,a);return t.apply(void 0,a),n}}}t.exports=function t(e,r,l,u){var h="function"==typeof r,d=r===Object(r);if(d&&(u=l,l=r,r=void 0),null==l)throw new TypeError;u||(u={});var p=!("cap"in u)||u.cap,f=!("curry"in u)||u.curry,g=!("fixed"in u)||u.fixed,y=!("immutable"in u)||u.immutable,m=!("rearg"in u)||u.rearg,_=h?l:n,v="curry"in u&&u.curry,b="fixed"in u&&u.fixed,w="rearg"in u&&u.rearg,x=h?l.runInContext():void 0,O=h?l:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},R=O.ary,A=O.assign,C=O.clone,k=O.curry,E=O.forEach,S=O.isArray,T=O.isError,L=O.isFunction,D=O.isWeakMap,N=O.keys,P=O.rearg,U=O.toInteger,G=O.toPath,I=N(a.aryMethod),M={castArray:function(t){return function(){var e=arguments[0];return S(e)?t(s(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[1],r=t(arguments[0],e),a=r.length;return p&&"number"==typeof e?(e=e>2?e-2:1,a&&a<=e?r:i(r,e)):r}},mixin:function(t){return function(e){var r=this;if(!L(r))return t(r,Object(e));var a=[];return E(N(e),(function(t){L(e[t])&&a.push([t,r.prototype[t]])})),t(r,Object(e)),E(a,(function(t){var e=t[1];L(e)?r.prototype[t[0]]=e:delete r.prototype[t[0]]})),r}},nthArg:function(t){return function(e){var r=e<0?1:U(e)+1;return k(t(e),r)}},rearg:function(t){return function(e,r){var a=r?r.length:0;return k(t(e,r),a)}},runInContext:function(r){return function(a){return t(e,r(a),u)}}};function F(t,e){if(p){var r=a.iterateeRearg[t];if(r)return function(t,e){return H(t,(function(t){var r=e.length;return function(t,e){return 2==e?function(e,r){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(P(i(t,r),e),r)}))}(e,r);var n=!h&&a.iterateeAry[t];if(n)return function(t,e){return H(t,(function(t){return"function"==typeof t?i(t,e):t}))}(e,n)}return e}function j(t,e,r){if(g&&(b||!a.skipFixed[t])){var n=a.methodSpread[t],i=n&&n.start;return void 0===i?R(e,r):function(t,e){return function(){for(var r=arguments.length,a=r-1,n=Array(r);r--;)n[r]=arguments[r];var i=n[e],s=n.slice(0,e);return i&&o.apply(s,i),e!=a&&o.apply(s,n.slice(e+1)),t.apply(this,s)}}(e,i)}return e}function W(t,e,r){return m&&r>1&&(w||!a.skipRearg[t])?P(e,a.methodRearg[t]||a.aryRearg[r]):e}function B(t,e){for(var r=-1,a=(e=G(e)).length,n=a-1,o=C(Object(t)),i=o;null!=i&&++r<a;){var s=e[r],c=i[s];null==c||L(c)||T(c)||D(c)||(i[s]=C(r==n?c:Object(c))),i=i[s]}return o}function z(e,r){var n=a.aliasToReal[e]||e,o=a.remap[n]||n,i=u;return function(e){var a=h?x:O,s=h?x[o]:r,c=A(A({},i),e);return t(a,n,s,c)}}function H(t,e){return function(){var r=arguments.length;if(!r)return t();for(var a=Array(r);r--;)a[r]=arguments[r];var n=m?0:r-1;return a[n]=e(a[n]),t.apply(void 0,a)}}function V(t,e,r){var n,o=a.aliasToReal[t]||t,i=e,l=M[o];return l?i=l(e):y&&(a.mutate.array[o]?i=c(e,s):a.mutate.object[o]?i=c(e,function(t){return function(e){return t({},e)}}(e)):a.mutate.set[o]&&(i=c(e,B))),E(I,(function(t){return E(a.aryMethod[t],(function(e){if(o==e){var r=a.methodSpread[o],s=r&&r.afterRearg;return n=s?j(o,W(o,i,t),t):W(o,j(o,i,t),t),n=function(t,e,r){return v||f&&r>1?k(e,r):e}(0,n=F(o,n),t),!1}})),!n})),n||(n=i),n==e&&(n=v?k(n,1):function(){return e.apply(this,arguments)}),n.convert=z(o,e),n.placeholder=e.placeholder=r,n}if(!d)return V(r,l,_);var q=l,K=[];return E(I,(function(t){E(a.aryMethod[t],(function(t){var e=q[a.remap[t]||t];e&&K.push([t,V(t,e,q)])}))})),E(N(q),(function(t){var e=q[t];if("function"==typeof e){for(var r=K.length;r--;)if(K[r][0]==t)return;e.convert=z(t,e),K.push([t,e])}})),E(K,(function(t){q[t[0]]=t[1]})),q.convert=function(t){return q.runInContext.convert(t)(void 0)},q.placeholder=q,E(N(q),(function(t){E(a.realToAlias[t]||[],(function(e){q[e]=q[t]}))})),q}},7516:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},7562:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9614),c=r(8498),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(i.Shape);e.Circle=l,l.prototype._centroid=!0,l.prototype.className="Circle",l.prototype._attrsAffectingSize=["radius"],c._registerNode(l),o.Factory.addGetterSetter(l,"radius",0,s.getNumberValidator()),n.Collection.mapMethods(l)},7594:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);a.Factory.addGetterSetter(n.Node,"hue",0,o.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"saturation",0,o.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"luminance",0,o.getNumberValidator(),a.Factory.afterSetFilter),e.HSL=function(t){var e,r,a,n,o,i=t.data,s=i.length,c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=127*this.luminance(),h=1*c*Math.cos(l*Math.PI/180),d=1*c*Math.sin(l*Math.PI/180),p=.299+.701*h+.167*d,f=.587-.587*h+.33*d,g=.114-.114*h-.497*d,y=.299-.299*h-.328*d,m=.587+.413*h+.035*d,_=.114-.114*h+.293*d,v=.299-.3*h+1.25*d,b=.587-.586*h-1.05*d,w=.114+.886*h-.2*d;for(e=0;e<s;e+=4)r=i[e+0],a=i[e+1],n=i[e+2],o=i[e+3],i[e+0]=p*r+f*a+g*n+u,i[e+1]=y*r+m*a+_*n+u,i[e+2]=v*r+b*a+w*n+u,i[e+3]=o}},7636:(t,e,r)=>{var a=r(1054),n=r(4126),o=n?function(t,e){return n.set(t,e),t}:a;t.exports=o},7641:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(2261),i=r(3887),s=r(4528),c=r(8498),l=r(9614),u=r(8498),h="auto",d="justify",p="left",f="middle",g="normal",y=" ",m=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],_=m.length;function v(){return n||(n=o.Util.createCanvasElement().getContext("2d"))}String.prototype.trimRight;var b=function(t){function e(e){var r=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;r._partialTextX=0,r._partialTextY=0;for(var a=0;a<_;a++)r.on(m[a]+"Change.konva",r._setTextData);return r._setTextData(),r}return a(e,t),e.prototype._sceneFunc=function(t){var e,r=this.padding(),a=this.fontSize(),n=this.lineHeight()*a,o=this.textArr,i=o.length,s=this.verticalAlign(),c=0,l=this.align(),u=this.getWidth(),h=this.letterSpacing(),g=this.fill(),y=this.textDecoration(),m=-1!==y.indexOf("underline"),_=-1!==y.indexOf("line-through"),v=0,b=(v=n/2,0),w=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",f),t.setAttr("textAlign",p),s===f?c=(this.getHeight()-i*n-2*r)/2:"bottom"===s&&(c=this.getHeight()-i*n-2*r),t.translate(r,c+r),e=0;e<i;e++){b=0,w=0;var x,O,R,A=o[e],C=A.text,k=A.width,E=e!==i-1;if(t.save(),"right"===l?b+=u-k-2*r:"center"===l&&(b+=(u-k-2*r)/2),m&&(t.save(),t.beginPath(),t.moveTo(b,v+w+Math.round(a/2)),O=0===(x=C.split(" ").length-1),R=l===d&&E&&!O?u-2*r:k,t.lineTo(b+Math.round(R),v+w+Math.round(a/2)),t.lineWidth=a/15,t.strokeStyle=g,t.stroke(),t.restore()),_&&(t.save(),t.beginPath(),t.moveTo(b,v+w),O=0===(x=C.split(" ").length-1),R=l===d&&E&&!O?u-2*r:k,t.lineTo(b+Math.round(R),v+w),t.lineWidth=a/15,t.strokeStyle=g,t.stroke(),t.restore()),0!==h||l===d){x=C.split(" ").length-1;for(var S=0;S<C.length;S++){var T=C[S];" "===T&&e!==i-1&&l===d&&(b+=Math.floor((u-2*r-k)/x)),this._partialTextX=b,this._partialTextY=v+w,this._partialText=T,t.fillStrokeShape(this),b+=Math.round(this.measureSize(T).width)+h}}else this._partialTextX=b,this._partialTextY=v+w,this._partialText=C,t.fillStrokeShape(this);t.restore(),i>1&&(v+=n)}},e.prototype._hitFunc=function(t){var e=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=o.Util._isString(t)?t:null===t||void 0===t?"":t+"";return this._setAttr("text",e),this},e.prototype.getWidth=function(){return this.attrs.width===h||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){return this.attrs.height===h||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,r=v(),a=this.fontSize();return r.save(),r.font=this._getContextFont(),e=r.measureText(t),r.restore(),{width:e.width,height:a}},e.prototype._getContextFont=function(){return c.Konva.UA.isIE?this.fontStyle()+y+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+y+this.fontVariant()+y+this.fontSize()+"px "+this.fontFamily()},e.prototype._addTextLine=function(t){this.align()===d&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),r=t.length;return v().measureText(t).width+(r?e*(r-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),r=0,a=this.lineHeight()*e,n=this.attrs.width,o=this.attrs.height,i=n!==h&&void 0!==n,s=o!==h&&void 0!==o,c=this.padding(),l=n-2*c,u=o-2*c,d=0,p=this.wrap(),f="none"!==p,g="char"!==p&&f,m=this.ellipsis()&&!f;this.textArr=[],v().font=this._getContextFont();for(var _=m?this._getTextWidth("\u2026"):0,b=0,w=t.length;b<w;++b){var x=t[b],O=this._getTextWidth(x);if(i&&O>l)for(;x.length>0;){for(var R=0,A=x.length,C="",k=0;R<A;){var E=R+A>>>1,S=x.slice(0,E+1),T=this._getTextWidth(S)+_;T<=l?(R=E+1,C=S+(m?"\u2026":""),k=T):A=E}if(!C)break;if(g){var L,D=x[C.length];(L=(D===y||"-"===D)&&k<=l?C.length:Math.max(C.lastIndexOf(y),C.lastIndexOf("-"))+1)>0&&(R=L,C=C.slice(0,R),k=this._getTextWidth(C))}if(C=C.trimRight(),this._addTextLine(C),r=Math.max(r,k),d+=a,!f||s&&d+a>u)break;if((x=(x=x.slice(R)).trimLeft()).length>0&&(O=this._getTextWidth(x))<=l){this._addTextLine(x),d+=a,r=Math.max(r,O);break}}else this._addTextLine(x),d+=a,r=Math.max(r,O);if(s&&d+a>u)break}this.textHeight=e,this.textWidth=r},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(s.Shape);e.Text=b,b.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},b.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},b.prototype.className="Text",b.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],u._registerNode(b),i.Factory.overWriteSetter(b,"width",l.getNumberOrAutoValidator()),i.Factory.overWriteSetter(b,"height",l.getNumberOrAutoValidator()),i.Factory.addGetterSetter(b,"fontFamily","Arial"),i.Factory.addGetterSetter(b,"fontSize",12,l.getNumberValidator()),i.Factory.addGetterSetter(b,"fontStyle",g),i.Factory.addGetterSetter(b,"fontVariant",g),i.Factory.addGetterSetter(b,"padding",0,l.getNumberValidator()),i.Factory.addGetterSetter(b,"align",p),i.Factory.addGetterSetter(b,"verticalAlign","top"),i.Factory.addGetterSetter(b,"lineHeight",1,l.getNumberValidator()),i.Factory.addGetterSetter(b,"wrap","word"),i.Factory.addGetterSetter(b,"ellipsis",!1),i.Factory.addGetterSetter(b,"letterSpacing",0,l.getNumberValidator()),i.Factory.addGetterSetter(b,"text","",l.getStringValidator()),i.Factory.addGetterSetter(b,"textDecoration",""),o.Collection.mapMethods(b)},7650:(t,e,r)=>{var a=r(5151),n=r(9137),o=r(1428),i=a?a.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?n(t):o(t)}},7651:(t,e,r)=>{var a=r(2852);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=a&&void 0===e?"__lodash_hash_undefined__":e,this}},7656:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.HSV=function(t){var e,r,a,n,o,i=t.data,s=i.length,c=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=c*l*Math.cos(u*Math.PI/180),d=c*l*Math.sin(u*Math.PI/180),p=.299*c+.701*h+.167*d,f=.587*c-.587*h+.33*d,g=.114*c-.114*h-.497*d,y=.299*c-.299*h-.328*d,m=.587*c+.413*h+.035*d,_=.114*c-.114*h+.293*d,v=.299*c-.3*h+1.25*d,b=.587*c-.586*h-1.05*d,w=.114*c+.886*h-.2*d;for(e=0;e<s;e+=4)r=i[e+0],a=i[e+1],n=i[e+2],o=i[e+3],i[e+0]=p*r+f*a+g*n,i[e+1]=y*r+m*a+_*n,i[e+2]=v*r+b*a+w*n,i[e+3]=o},a.Factory.addGetterSetter(n.Node,"hue",0,o.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"saturation",0,o.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"value",0,o.getNumberValidator(),a.Factory.afterSetFilter)},7670:(t,e,r)=>{var a=r(7502),n=r(1412);t.exports=function(t,e,r){return a(n,t,e,r)}},7671:(t,e,r)=>{var a=r(8233);t.exports=function(t){return a(t,4)}},7748:(t,e,r)=>{var a=r(5148),n=r(4788);t.exports=function(t){return null!=t&&n(t.length)&&!a(t)}},7791:(t,e,r)=>{var a=r(1206);t.exports=function(t){var e=a(t),r=e%1;return e===e?r?e-r:e:0}},7827:(t,e,r)=>{var a=r(4749),n=r(2954),o=r(2399),i=r(5614);t.exports=function(t,e,r){var s=e+"";return o(t,n(s,i(a(s),r)))}},7837:(t,e,r)=>{var a=r(9882),n=r(7202),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var i=t[e];o.call(t,e)&&n(i,r)&&(void 0!==r||e in t)||a(t,e,r)}},7853:(t,e,r)=>{var a=r(6003);function n(t,e,r){var o=a(t,8,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return o.placeholder=n.placeholder,o}n.placeholder={},t.exports=n},7918:(t,e,r)=>{"use strict";t.exports=r(2311)},7922:(t,e,r)=>{var a=r(8347),n=Object.create,o=function(){function t(){}return function(e){if(!a(e))return{};if(n)return n(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=o},7952:t=>{t.exports=function(t,e){for(var r=-1,a=null==t?0:t.length,n=0,o=[];++r<a;){var i=t[r];e(i,r,t)&&(o[n++]=i)}return o}},7983:(t,e,r)=>{"use strict";var a=r(121),n=r(1008),o=r(5553),i=r(7562),s=r(4458),c=r(4837),l=r(9126),u=r(2356),h=r(1633),d=r(2732),p=r(8612),f=r(7208),g=r(2059),y=r(6986),m=r(7641),_=r(9582),v=r(2871),b=r(2388),w=r(4568),x=r(7130),O=r(3199),R=r(7194),A=r(8707),C=r(2134),k=r(7594),E=r(7656),S=r(6285),T=r(9636),L=r(4405),D=r(7363),N=r(1205),P=r(8120),U=r(9942),G=r(3947),I=r(5627),M=r(6976),F=r(1790);e.k=a.Konva.Util._assign(a.Konva,{Arc:n.Arc,Arrow:o.Arrow,Circle:i.Circle,Ellipse:s.Ellipse,Image:c.Image,Label:l.Label,Tag:l.Tag,Line:u.Line,Path:h.Path,Rect:d.Rect,RegularPolygon:p.RegularPolygon,Ring:f.Ring,Sprite:g.Sprite,Star:y.Star,Text:m.Text,TextPath:_.TextPath,Transformer:v.Transformer,Wedge:b.Wedge,Filters:{Blur:w.Blur,Brighten:x.Brighten,Contrast:O.Contrast,Emboss:R.Emboss,Enhance:A.Enhance,Grayscale:C.Grayscale,HSL:k.HSL,HSV:E.HSV,Invert:S.Invert,Kaleidoscope:T.Kaleidoscope,Mask:L.Mask,Noise:D.Noise,Pixelate:N.Pixelate,Posterize:P.Posterize,RGB:U.RGB,RGBA:G.RGBA,Sepia:I.Sepia,Solarize:M.Solarize,Threshold:F.Threshold}})},8031:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8049:t=>{t.exports=function(t){return t.placeholder}},8105:function(t,e,r){var a;t=r.nmd(t),function(){var n,o="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",c=16,l=32,u=64,h=128,d=256,p=1/0,f=9007199254740991,g=NaN,y=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",u],["rearg",d]],_="[object Arguments]",v="[object Array]",b="[object Boolean]",w="[object Date]",x="[object Error]",O="[object Function]",R="[object GeneratorFunction]",A="[object Map]",C="[object Number]",k="[object Object]",E="[object Promise]",S="[object RegExp]",T="[object Set]",L="[object String]",D="[object Symbol]",N="[object WeakMap]",P="[object ArrayBuffer]",U="[object DataView]",G="[object Float32Array]",I="[object Float64Array]",M="[object Int8Array]",F="[object Int16Array]",j="[object Int32Array]",W="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp($.source),Z=RegExp(X.source),Q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rt=/^\w*$/,at=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(nt.source),it=/^\s+/,st=/\s/,ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,pt=/\\(\\)?/g,ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xt=/($^)/,Ot=/['\n\r\u2028\u2029\\]/g,Rt="\\ud800-\\udfff",At="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ct="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lt="['\u2019]",Dt="["+Rt+"]",Nt="["+Tt+"]",Pt="["+At+"]",Ut="\\d+",Gt="["+Ct+"]",It="["+kt+"]",Mt="[^"+Rt+Tt+Ut+Ct+kt+Et+"]",Ft="\\ud83c[\\udffb-\\udfff]",jt="[^"+Rt+"]",Wt="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+Et+"]",Ht="\\u200d",Vt="(?:"+It+"|"+Mt+")",qt="(?:"+zt+"|"+Mt+")",Kt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$t="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xt="(?:"+Pt+"|"+Ft+")"+"?",Yt="["+St+"]?",Zt=Yt+Xt+("(?:"+Ht+"(?:"+[jt,Wt,Bt].join("|")+")"+Yt+Xt+")*"),Qt="(?:"+[Gt,Wt,Bt].join("|")+")"+Zt,Jt="(?:"+[jt+Pt+"?",Pt,Wt,Bt,Dt].join("|")+")",te=RegExp(Lt,"g"),ee=RegExp(Pt,"g"),re=RegExp(Ft+"(?="+Ft+")|"+Jt+Zt,"g"),ae=RegExp([zt+"?"+It+"+"+Kt+"(?="+[Nt,zt,"$"].join("|")+")",qt+"+"+$t+"(?="+[Nt,zt+Vt,"$"].join("|")+")",zt+"?"+Vt+"+"+Kt,zt+"+"+$t,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ut,Qt].join("|"),"g"),ne=RegExp("["+Ht+Rt+At+St+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,ce={};ce[G]=ce[I]=ce[M]=ce[F]=ce[j]=ce[W]=ce[B]=ce[z]=ce[H]=!0,ce[_]=ce[v]=ce[P]=ce[b]=ce[U]=ce[w]=ce[x]=ce[O]=ce[A]=ce[C]=ce[k]=ce[S]=ce[T]=ce[L]=ce[N]=!1;var le={};le[_]=le[v]=le[P]=le[U]=le[b]=le[w]=le[G]=le[I]=le[M]=le[F]=le[j]=le[A]=le[C]=le[k]=le[S]=le[T]=le[L]=le[D]=le[W]=le[B]=le[z]=le[H]=!0,le[x]=le[O]=le[N]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,de=parseInt,pe="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,fe="object"==typeof self&&self&&self.Object===Object&&self,ge=pe||fe||Function("return this")(),ye=e&&!e.nodeType&&e,me=ye&&t&&!t.nodeType&&t,_e=me&&me.exports===ye,ve=_e&&pe.process,be=function(){try{var t=me&&me.require&&me.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(e){}}(),we=be&&be.isArrayBuffer,xe=be&&be.isDate,Oe=be&&be.isMap,Re=be&&be.isRegExp,Ae=be&&be.isSet,Ce=be&&be.isTypedArray;function ke(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ee(t,e,r,a){for(var n=-1,o=null==t?0:t.length;++n<o;){var i=t[n];e(a,i,r(i),t)}return a}function Se(t,e){for(var r=-1,a=null==t?0:t.length;++r<a&&!1!==e(t[r],r,t););return t}function Te(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function Le(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(!e(t[r],r,t))return!1;return!0}function De(t,e){for(var r=-1,a=null==t?0:t.length,n=0,o=[];++r<a;){var i=t[r];e(i,r,t)&&(o[n++]=i)}return o}function Ne(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function Pe(t,e,r){for(var a=-1,n=null==t?0:t.length;++a<n;)if(r(e,t[a]))return!0;return!1}function Ue(t,e){for(var r=-1,a=null==t?0:t.length,n=Array(a);++r<a;)n[r]=e(t[r],r,t);return n}function Ge(t,e){for(var r=-1,a=e.length,n=t.length;++r<a;)t[n+r]=e[r];return t}function Ie(t,e,r,a){var n=-1,o=null==t?0:t.length;for(a&&o&&(r=t[++n]);++n<o;)r=e(r,t[n],n,t);return r}function Me(t,e,r,a){var n=null==t?0:t.length;for(a&&n&&(r=t[--n]);n--;)r=e(r,t[n],n,t);return r}function Fe(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(e(t[r],r,t))return!0;return!1}var je=Ke("length");function We(t,e,r){var a;return r(t,(function(t,r,n){if(e(t,r,n))return a=r,!1})),a}function Be(t,e,r,a){for(var n=t.length,o=r+(a?1:-1);a?o--:++o<n;)if(e(t[o],o,t))return o;return-1}function ze(t,e,r){return e===e?function(t,e,r){var a=r-1,n=t.length;for(;++a<n;)if(t[a]===e)return a;return-1}(t,e,r):Be(t,Ve,r)}function He(t,e,r,a){for(var n=r-1,o=t.length;++n<o;)if(a(t[n],e))return n;return-1}function Ve(t){return t!==t}function qe(t,e){var r=null==t?0:t.length;return r?Ye(t,e)/r:g}function Ke(t){return function(e){return null==e?n:e[t]}}function $e(t){return function(e){return null==t?n:t[e]}}function Xe(t,e,r,a,n){return n(t,(function(t,n,o){r=a?(a=!1,t):e(r,t,n,o)})),r}function Ye(t,e){for(var r,a=-1,o=t.length;++a<o;){var i=e(t[a]);i!==n&&(r=r===n?i:r+i)}return r}function Ze(t,e){for(var r=-1,a=Array(t);++r<t;)a[r]=e(r);return a}function Qe(t){return t?t.slice(0,gr(t)+1).replace(it,""):t}function Je(t){return function(e){return t(e)}}function tr(t,e){return Ue(e,(function(e){return t[e]}))}function er(t,e){return t.has(e)}function rr(t,e){for(var r=-1,a=t.length;++r<a&&ze(e,t[r],0)>-1;);return r}function ar(t,e){for(var r=t.length;r--&&ze(e,t[r],0)>-1;);return r}var nr=$e({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),or=$e({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(t){return"\\"+ue[t]}function sr(t){return ne.test(t)}function cr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,a){r[++e]=[a,t]})),r}function lr(t,e){return function(r){return t(e(r))}}function ur(t,e){for(var r=-1,a=t.length,n=0,o=[];++r<a;){var i=t[r];i!==e&&i!==s||(t[r]=s,o[n++]=r)}return o}function hr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function dr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function pr(t){return sr(t)?function(t){var e=re.lastIndex=0;for(;re.test(t);)++e;return e}(t):je(t)}function fr(t){return sr(t)?function(t){return t.match(re)||[]}(t):function(t){return t.split("")}(t)}function gr(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var yr=$e({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mr=function t(e){var r=(e=null==e?ge:mr.defaults(ge.Object(),e,mr.pick(ge,ie))).Array,a=e.Date,st=e.Error,Rt=e.Function,At=e.Math,Ct=e.Object,kt=e.RegExp,Et=e.String,St=e.TypeError,Tt=r.prototype,Lt=Rt.prototype,Dt=Ct.prototype,Nt=e["__core-js_shared__"],Pt=Lt.toString,Ut=Dt.hasOwnProperty,Gt=0,It=function(){var t=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Mt=Dt.toString,Ft=Pt.call(Ct),jt=ge._,Wt=kt("^"+Pt.call(Ut).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=_e?e.Buffer:n,zt=e.Symbol,Ht=e.Uint8Array,Vt=Bt?Bt.allocUnsafe:n,qt=lr(Ct.getPrototypeOf,Ct),Kt=Ct.create,$t=Dt.propertyIsEnumerable,Xt=Tt.splice,Yt=zt?zt.isConcatSpreadable:n,Zt=zt?zt.iterator:n,Qt=zt?zt.toStringTag:n,Jt=function(){try{var t=ho(Ct,"defineProperty");return t({},"",{}),t}catch(e){}}(),re=e.clearTimeout!==ge.clearTimeout&&e.clearTimeout,ne=a&&a.now!==ge.Date.now&&a.now,ue=e.setTimeout!==ge.setTimeout&&e.setTimeout,pe=At.ceil,fe=At.floor,ye=Ct.getOwnPropertySymbols,me=Bt?Bt.isBuffer:n,ve=e.isFinite,be=Tt.join,je=lr(Ct.keys,Ct),$e=At.max,_r=At.min,vr=a.now,br=e.parseInt,wr=At.random,xr=Tt.reverse,Or=ho(e,"DataView"),Rr=ho(e,"Map"),Ar=ho(e,"Promise"),Cr=ho(e,"Set"),kr=ho(e,"WeakMap"),Er=ho(Ct,"create"),Sr=kr&&new kr,Tr={},Lr=Mo(Or),Dr=Mo(Rr),Nr=Mo(Ar),Pr=Mo(Cr),Ur=Mo(kr),Gr=zt?zt.prototype:n,Ir=Gr?Gr.valueOf:n,Mr=Gr?Gr.toString:n;function Fr(t){if(es(t)&&!Hi(t)&&!(t instanceof zr)){if(t instanceof Br)return t;if(Ut.call(t,"__wrapped__"))return Fo(t)}return new Br(t)}var jr=function(){function t(){}return function(e){if(!ts(e))return{};if(Kt)return Kt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Wr(){}function Br(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function zr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Hr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function Vr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function qr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function Kr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new qr;++e<r;)this.add(t[e])}function $r(t){var e=this.__data__=new Vr(t);this.size=e.size}function Xr(t,e){var r=Hi(t),a=!r&&zi(t),n=!r&&!a&&$i(t),o=!r&&!a&&!n&&ls(t),i=r||a||n||o,s=i?Ze(t.length,Et):[],c=s.length;for(var l in t)!e&&!Ut.call(t,l)||i&&("length"==l||n&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,c))||s.push(l);return s}function Yr(t){var e=t.length;return e?t[Ka(0,e-1)]:n}function Zr(t,e){return Uo(Sn(t),ia(e,0,t.length))}function Qr(t){return Uo(Sn(t))}function Jr(t,e,r){(r!==n&&!ji(t[e],r)||r===n&&!(e in t))&&na(t,e,r)}function ta(t,e,r){var a=t[e];Ut.call(t,e)&&ji(a,r)&&(r!==n||e in t)||na(t,e,r)}function ea(t,e){for(var r=t.length;r--;)if(ji(t[r][0],e))return r;return-1}function ra(t,e,r,a){return ha(t,(function(t,n,o){e(a,t,r(t),o)})),a}function aa(t,e){return t&&Tn(e,Ls(e),t)}function na(t,e,r){"__proto__"==e&&Jt?Jt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function oa(t,e){for(var a=-1,o=e.length,i=r(o),s=null==t;++a<o;)i[a]=s?n:Cs(t,e[a]);return i}function ia(t,e,r){return t===t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function sa(t,e,r,a,o,i){var s,c=1&e,l=2&e,u=4&e;if(r&&(s=o?r(t,a,o,i):r(t)),s!==n)return s;if(!ts(t))return t;var h=Hi(t);if(h){if(s=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Ut.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!c)return Sn(t,s)}else{var d=go(t),p=d==O||d==R;if($i(t))return On(t,c);if(d==k||d==_||p&&!o){if(s=l||p?{}:mo(t),!c)return l?function(t,e){return Tn(t,fo(t),e)}(t,function(t,e){return t&&Tn(e,Ds(e),t)}(s,t)):function(t,e){return Tn(t,po(t),e)}(t,aa(s,t))}else{if(!le[d])return o?t:{};s=function(t,e,r){var a=t.constructor;switch(e){case P:return Rn(t);case b:case w:return new a(+t);case U:return function(t,e){var r=e?Rn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case G:case I:case M:case F:case j:case W:case B:case z:case H:return An(t,r);case A:return new a;case C:case L:return new a(t);case S:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new a;case D:return n=t,Ir?Ct(Ir.call(n)):{}}var n}(t,d,c)}}i||(i=new $r);var f=i.get(t);if(f)return f;i.set(t,s),is(t)?t.forEach((function(a){s.add(sa(a,e,r,a,t,i))})):rs(t)&&t.forEach((function(a,n){s.set(n,sa(a,e,r,n,t,i))}));var g=h?n:(u?l?no:ao:l?Ds:Ls)(t);return Se(g||t,(function(a,n){g&&(a=t[n=a]),ta(s,n,sa(a,e,r,n,t,i))})),s}function ca(t,e,r){var a=r.length;if(null==t)return!a;for(t=Ct(t);a--;){var o=r[a],i=e[o],s=t[o];if(s===n&&!(o in t)||!i(s))return!1}return!0}function la(t,e,r){if("function"!=typeof t)throw new St(o);return Lo((function(){t.apply(n,r)}),e)}function ua(t,e,r,a){var n=-1,o=Ne,i=!0,s=t.length,c=[],l=e.length;if(!s)return c;r&&(e=Ue(e,Je(r))),a?(o=Pe,i=!1):e.length>=200&&(o=er,i=!1,e=new Kr(e));t:for(;++n<s;){var u=t[n],h=null==r?u:r(u);if(u=a||0!==u?u:0,i&&h===h){for(var d=l;d--;)if(e[d]===h)continue t;c.push(u)}else o(e,h,a)||c.push(u)}return c}Fr.templateSettings={escape:Q,evaluate:J,interpolate:tt,variable:"",imports:{_:Fr}},Fr.prototype=Wr.prototype,Fr.prototype.constructor=Fr,Br.prototype=jr(Wr.prototype),Br.prototype.constructor=Br,zr.prototype=jr(Wr.prototype),zr.prototype.constructor=zr,Hr.prototype.clear=function(){this.__data__=Er?Er(null):{},this.size=0},Hr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hr.prototype.get=function(t){var e=this.__data__;if(Er){var r=e[t];return r===i?n:r}return Ut.call(e,t)?e[t]:n},Hr.prototype.has=function(t){var e=this.__data__;return Er?e[t]!==n:Ut.call(e,t)},Hr.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Er&&e===n?i:e,this},Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(t){var e=this.__data__,r=ea(e,t);return!(r<0)&&(r==e.length-1?e.pop():Xt.call(e,r,1),--this.size,!0)},Vr.prototype.get=function(t){var e=this.__data__,r=ea(e,t);return r<0?n:e[r][1]},Vr.prototype.has=function(t){return ea(this.__data__,t)>-1},Vr.prototype.set=function(t,e){var r=this.__data__,a=ea(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(Rr||Vr),string:new Hr}},qr.prototype.delete=function(t){var e=lo(this,t).delete(t);return this.size-=e?1:0,e},qr.prototype.get=function(t){return lo(this,t).get(t)},qr.prototype.has=function(t){return lo(this,t).has(t)},qr.prototype.set=function(t,e){var r=lo(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this},Kr.prototype.add=Kr.prototype.push=function(t){return this.__data__.set(t,i),this},Kr.prototype.has=function(t){return this.__data__.has(t)},$r.prototype.clear=function(){this.__data__=new Vr,this.size=0},$r.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},$r.prototype.get=function(t){return this.__data__.get(t)},$r.prototype.has=function(t){return this.__data__.has(t)},$r.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Vr){var a=r.__data__;if(!Rr||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new qr(a)}return r.set(t,e),this.size=r.size,this};var ha=Nn(va),da=Nn(ba,!0);function pa(t,e){var r=!0;return ha(t,(function(t,a,n){return r=!!e(t,a,n)})),r}function fa(t,e,r){for(var a=-1,o=t.length;++a<o;){var i=t[a],s=e(i);if(null!=s&&(c===n?s===s&&!cs(s):r(s,c)))var c=s,l=i}return l}function ga(t,e){var r=[];return ha(t,(function(t,a,n){e(t,a,n)&&r.push(t)})),r}function ya(t,e,r,a,n){var o=-1,i=t.length;for(r||(r=_o),n||(n=[]);++o<i;){var s=t[o];e>0&&r(s)?e>1?ya(s,e-1,r,a,n):Ge(n,s):a||(n[n.length]=s)}return n}var ma=Pn(),_a=Pn(!0);function va(t,e){return t&&ma(t,e,Ls)}function ba(t,e){return t&&_a(t,e,Ls)}function wa(t,e){return De(e,(function(e){return Zi(t[e])}))}function xa(t,e){for(var r=0,a=(e=vn(e,t)).length;null!=t&&r<a;)t=t[Io(e[r++])];return r&&r==a?t:n}function Oa(t,e,r){var a=e(t);return Hi(t)?a:Ge(a,r(t))}function Ra(t){return null==t?t===n?"[object Undefined]":"[object Null]":Qt&&Qt in Ct(t)?function(t){var e=Ut.call(t,Qt),r=t[Qt];try{t[Qt]=n;var a=!0}catch(i){}var o=Mt.call(t);a&&(e?t[Qt]=r:delete t[Qt]);return o}(t):function(t){return Mt.call(t)}(t)}function Aa(t,e){return t>e}function Ca(t,e){return null!=t&&Ut.call(t,e)}function ka(t,e){return null!=t&&e in Ct(t)}function Ea(t,e,a){for(var o=a?Pe:Ne,i=t[0].length,s=t.length,c=s,l=r(s),u=1/0,h=[];c--;){var d=t[c];c&&e&&(d=Ue(d,Je(e))),u=_r(d.length,u),l[c]=!a&&(e||i>=120&&d.length>=120)?new Kr(c&&d):n}d=t[0];var p=-1,f=l[0];t:for(;++p<i&&h.length<u;){var g=d[p],y=e?e(g):g;if(g=a||0!==g?g:0,!(f?er(f,y):o(h,y,a))){for(c=s;--c;){var m=l[c];if(!(m?er(m,y):o(t[c],y,a)))continue t}f&&f.push(y),h.push(g)}}return h}function Sa(t,e,r){var a=null==(t=Eo(t,e=vn(e,t)))?t:t[Io(Yo(e))];return null==a?n:ke(a,t,r)}function Ta(t){return es(t)&&Ra(t)==_}function La(t,e,r,a,o){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!==t&&e!==e:function(t,e,r,a,o,i){var s=Hi(t),c=Hi(e),l=s?v:go(t),u=c?v:go(e),h=(l=l==_?k:l)==k,d=(u=u==_?k:u)==k,p=l==u;if(p&&$i(t)){if(!$i(e))return!1;s=!0,h=!1}if(p&&!h)return i||(i=new $r),s||ls(t)?eo(t,e,r,a,o,i):function(t,e,r,a,n,o,i){switch(r){case U:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case b:case w:case C:return ji(+t,+e);case x:return t.name==e.name&&t.message==e.message;case S:case L:return t==e+"";case A:var s=cr;case T:var c=1&a;if(s||(s=hr),t.size!=e.size&&!c)return!1;var l=i.get(t);if(l)return l==e;a|=2,i.set(t,e);var u=eo(s(t),s(e),a,n,o,i);return i.delete(t),u;case D:if(Ir)return Ir.call(t)==Ir.call(e)}return!1}(t,e,l,r,a,o,i);if(!(1&r)){var f=h&&Ut.call(t,"__wrapped__"),g=d&&Ut.call(e,"__wrapped__");if(f||g){var y=f?t.value():t,m=g?e.value():e;return i||(i=new $r),o(y,m,r,a,i)}}if(!p)return!1;return i||(i=new $r),function(t,e,r,a,o,i){var s=1&r,c=ao(t),l=c.length,u=ao(e),h=u.length;if(l!=h&&!s)return!1;var d=l;for(;d--;){var p=c[d];if(!(s?p in e:Ut.call(e,p)))return!1}var f=i.get(t),g=i.get(e);if(f&&g)return f==e&&g==t;var y=!0;i.set(t,e),i.set(e,t);var m=s;for(;++d<l;){var _=t[p=c[d]],v=e[p];if(a)var b=s?a(v,_,p,e,t,i):a(_,v,p,t,e,i);if(!(b===n?_===v||o(_,v,r,a,i):b)){y=!1;break}m||(m="constructor"==p)}if(y&&!m){var w=t.constructor,x=e.constructor;w==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(y=!1)}return i.delete(t),i.delete(e),y}(t,e,r,a,o,i)}(t,e,r,a,La,o))}function Da(t,e,r,a){var o=r.length,i=o,s=!a;if(null==t)return!i;for(t=Ct(t);o--;){var c=r[o];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<i;){var l=(c=r[o])[0],u=t[l],h=c[1];if(s&&c[2]){if(u===n&&!(l in t))return!1}else{var d=new $r;if(a)var p=a(u,h,l,t,e,d);if(!(p===n?La(h,u,3,a,d):p))return!1}}return!0}function Na(t){return!(!ts(t)||(e=t,It&&It in e))&&(Zi(t)?Wt:_t).test(Mo(t));var e}function Pa(t){return"function"==typeof t?t:null==t?ac:"object"==typeof t?Hi(t)?ja(t[0],t[1]):Fa(t):dc(t)}function Ua(t){if(!Ro(t))return je(t);var e=[];for(var r in Ct(t))Ut.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Ga(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var r in Ct(t))e.push(r);return e}(t);var e=Ro(t),r=[];for(var a in t)("constructor"!=a||!e&&Ut.call(t,a))&&r.push(a);return r}function Ia(t,e){return t<e}function Ma(t,e){var a=-1,n=qi(t)?r(t.length):[];return ha(t,(function(t,r,o){n[++a]=e(t,r,o)})),n}function Fa(t){var e=uo(t);return 1==e.length&&e[0][2]?Co(e[0][0],e[0][1]):function(r){return r===t||Da(r,t,e)}}function ja(t,e){return wo(t)&&Ao(e)?Co(Io(t),e):function(r){var a=Cs(r,t);return a===n&&a===e?ks(r,t):La(e,a,3)}}function Wa(t,e,r,a,o){t!==e&&ma(e,(function(i,s){if(o||(o=new $r),ts(i))!function(t,e,r,a,o,i,s){var c=So(t,r),l=So(e,r),u=s.get(l);if(u)return void Jr(t,r,u);var h=i?i(c,l,r+"",t,e,s):n,d=h===n;if(d){var p=Hi(l),f=!p&&$i(l),g=!p&&!f&&ls(l);h=l,p||f||g?Hi(c)?h=c:Ki(c)?h=Sn(c):f?(d=!1,h=On(l,!0)):g?(d=!1,h=An(l,!0)):h=[]:ns(l)||zi(l)?(h=c,zi(c)?h=ms(c):ts(c)&&!Zi(c)||(h=mo(l))):d=!1}d&&(s.set(l,h),o(h,l,a,i,s),s.delete(l));Jr(t,r,h)}(t,e,s,r,Wa,a,o);else{var c=a?a(So(t,s),i,s+"",t,e,o):n;c===n&&(c=i),Jr(t,s,c)}}),Ds)}function Ba(t,e){var r=t.length;if(r)return vo(e+=e<0?r:0,r)?t[e]:n}function za(t,e,r){e=e.length?Ue(e,(function(t){return Hi(t)?function(e){return xa(e,1===t.length?t[0]:t)}:t})):[ac];var a=-1;e=Ue(e,Je(co()));var n=Ma(t,(function(t,r,n){var o=Ue(e,(function(e){return e(t)}));return{criteria:o,index:++a,value:t}}));return function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(n,(function(t,e){return function(t,e,r){var a=-1,n=t.criteria,o=e.criteria,i=n.length,s=r.length;for(;++a<i;){var c=Cn(n[a],o[a]);if(c)return a>=s?c:c*("desc"==r[a]?-1:1)}return t.index-e.index}(t,e,r)}))}function Ha(t,e,r){for(var a=-1,n=e.length,o={};++a<n;){var i=e[a],s=xa(t,i);r(s,i)&&Qa(o,vn(i,t),s)}return o}function Va(t,e,r,a){var n=a?He:ze,o=-1,i=e.length,s=t;for(t===e&&(e=Sn(e)),r&&(s=Ue(t,Je(r)));++o<i;)for(var c=0,l=e[o],u=r?r(l):l;(c=n(s,u,c,a))>-1;)s!==t&&Xt.call(s,c,1),Xt.call(t,c,1);return t}function qa(t,e){for(var r=t?e.length:0,a=r-1;r--;){var n=e[r];if(r==a||n!==o){var o=n;vo(n)?Xt.call(t,n,1):hn(t,n)}}return t}function Ka(t,e){return t+fe(wr()*(e-t+1))}function $a(t,e){var r="";if(!t||e<1||e>f)return r;do{e%2&&(r+=t),(e=fe(e/2))&&(t+=t)}while(e);return r}function Xa(t,e){return Do(ko(t,e,ac),t+"")}function Ya(t){return Yr(js(t))}function Za(t,e){var r=js(t);return Uo(r,ia(e,0,r.length))}function Qa(t,e,r,a){if(!ts(t))return t;for(var o=-1,i=(e=vn(e,t)).length,s=i-1,c=t;null!=c&&++o<i;){var l=Io(e[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var h=c[l];(u=a?a(h,l,c):n)===n&&(u=ts(h)?h:vo(e[o+1])?[]:{})}ta(c,l,u),c=c[l]}return t}var Ja=Sr?function(t,e){return Sr.set(t,e),t}:ac,tn=Jt?function(t,e){return Jt(t,"toString",{configurable:!0,enumerable:!1,value:tc(e),writable:!0})}:ac;function en(t){return Uo(js(t))}function rn(t,e,a){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(a=a>o?o:a)<0&&(a+=o),o=e>a?0:a-e>>>0,e>>>=0;for(var i=r(o);++n<o;)i[n]=t[n+e];return i}function an(t,e){var r;return ha(t,(function(t,a,n){return!(r=e(t,a,n))})),!!r}function nn(t,e,r){var a=0,n=null==t?a:t.length;if("number"==typeof e&&e===e&&n<=2147483647){for(;a<n;){var o=a+n>>>1,i=t[o];null!==i&&!cs(i)&&(r?i<=e:i<e)?a=o+1:n=o}return n}return on(t,e,ac,r)}function on(t,e,r,a){var o=0,i=null==t?0:t.length;if(0===i)return 0;for(var s=(e=r(e))!==e,c=null===e,l=cs(e),u=e===n;o<i;){var h=fe((o+i)/2),d=r(t[h]),p=d!==n,f=null===d,g=d===d,y=cs(d);if(s)var m=a||g;else m=u?g&&(a||p):c?g&&p&&(a||!f):l?g&&p&&!f&&(a||!y):!f&&!y&&(a?d<=e:d<e);m?o=h+1:i=h}return _r(i,4294967294)}function sn(t,e){for(var r=-1,a=t.length,n=0,o=[];++r<a;){var i=t[r],s=e?e(i):i;if(!r||!ji(s,c)){var c=s;o[n++]=0===i?0:i}}return o}function cn(t){return"number"==typeof t?t:cs(t)?g:+t}function ln(t){if("string"==typeof t)return t;if(Hi(t))return Ue(t,ln)+"";if(cs(t))return Mr?Mr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function un(t,e,r){var a=-1,n=Ne,o=t.length,i=!0,s=[],c=s;if(r)i=!1,n=Pe;else if(o>=200){var l=e?null:Xn(t);if(l)return hr(l);i=!1,n=er,c=new Kr}else c=e?[]:s;t:for(;++a<o;){var u=t[a],h=e?e(u):u;if(u=r||0!==u?u:0,i&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),s.push(u)}else n(c,h,r)||(c!==s&&c.push(h),s.push(u))}return s}function hn(t,e){return null==(t=Eo(t,e=vn(e,t)))||delete t[Io(Yo(e))]}function dn(t,e,r,a){return Qa(t,e,r(xa(t,e)),a)}function pn(t,e,r,a){for(var n=t.length,o=a?n:-1;(a?o--:++o<n)&&e(t[o],o,t););return r?rn(t,a?0:o,a?o+1:n):rn(t,a?o+1:0,a?n:o)}function fn(t,e){var r=t;return r instanceof zr&&(r=r.value()),Ie(e,(function(t,e){return e.func.apply(e.thisArg,Ge([t],e.args))}),r)}function gn(t,e,a){var n=t.length;if(n<2)return n?un(t[0]):[];for(var o=-1,i=r(n);++o<n;)for(var s=t[o],c=-1;++c<n;)c!=o&&(i[o]=ua(i[o]||s,t[c],e,a));return un(ya(i,1),e,a)}function yn(t,e,r){for(var a=-1,o=t.length,i=e.length,s={};++a<o;){var c=a<i?e[a]:n;r(s,t[a],c)}return s}function mn(t){return Ki(t)?t:[]}function _n(t){return"function"==typeof t?t:ac}function vn(t,e){return Hi(t)?t:wo(t,e)?[t]:Go(_s(t))}var bn=Xa;function wn(t,e,r){var a=t.length;return r=r===n?a:r,!e&&r>=a?t:rn(t,e,r)}var xn=re||function(t){return ge.clearTimeout(t)};function On(t,e){if(e)return t.slice();var r=t.length,a=Vt?Vt(r):new t.constructor(r);return t.copy(a),a}function Rn(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function An(t,e){var r=e?Rn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Cn(t,e){if(t!==e){var r=t!==n,a=null===t,o=t===t,i=cs(t),s=e!==n,c=null===e,l=e===e,u=cs(e);if(!c&&!u&&!i&&t>e||i&&s&&l&&!c&&!u||a&&s&&l||!r&&l||!o)return 1;if(!a&&!i&&!u&&t<e||u&&r&&o&&!a&&!i||c&&r&&o||!s&&o||!l)return-1}return 0}function kn(t,e,a,n){for(var o=-1,i=t.length,s=a.length,c=-1,l=e.length,u=$e(i-s,0),h=r(l+u),d=!n;++c<l;)h[c]=e[c];for(;++o<s;)(d||o<i)&&(h[a[o]]=t[o]);for(;u--;)h[c++]=t[o++];return h}function En(t,e,a,n){for(var o=-1,i=t.length,s=-1,c=a.length,l=-1,u=e.length,h=$e(i-c,0),d=r(h+u),p=!n;++o<h;)d[o]=t[o];for(var f=o;++l<u;)d[f+l]=e[l];for(;++s<c;)(p||o<i)&&(d[f+a[s]]=t[o++]);return d}function Sn(t,e){var a=-1,n=t.length;for(e||(e=r(n));++a<n;)e[a]=t[a];return e}function Tn(t,e,r,a){var o=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var c=e[i],l=a?a(r[c],t[c],c,r,t):n;l===n&&(l=t[c]),o?na(r,c,l):ta(r,c,l)}return r}function Ln(t,e){return function(r,a){var n=Hi(r)?Ee:ra,o=e?e():{};return n(r,t,co(a,2),o)}}function Dn(t){return Xa((function(e,r){var a=-1,o=r.length,i=o>1?r[o-1]:n,s=o>2?r[2]:n;for(i=t.length>3&&"function"==typeof i?(o--,i):n,s&&bo(r[0],r[1],s)&&(i=o<3?n:i,o=1),e=Ct(e);++a<o;){var c=r[a];c&&t(e,c,a,i)}return e}))}function Nn(t,e){return function(r,a){if(null==r)return r;if(!qi(r))return t(r,a);for(var n=r.length,o=e?n:-1,i=Ct(r);(e?o--:++o<n)&&!1!==a(i[o],o,i););return r}}function Pn(t){return function(e,r,a){for(var n=-1,o=Ct(e),i=a(e),s=i.length;s--;){var c=i[t?s:++n];if(!1===r(o[c],c,o))break}return e}}function Un(t){return function(e){var r=sr(e=_s(e))?fr(e):n,a=r?r[0]:e.charAt(0),o=r?wn(r,1).join(""):e.slice(1);return a[t]()+o}}function Gn(t){return function(e){return Ie(Zs(zs(e).replace(te,"")),t,"")}}function In(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=jr(t.prototype),a=t.apply(r,e);return ts(a)?a:r}}function Mn(t){return function(e,r,a){var o=Ct(e);if(!qi(e)){var i=co(r,3);e=Ls(e),r=function(t){return i(o[t],t,o)}}var s=t(e,r,a);return s>-1?o[i?e[s]:s]:n}}function Fn(t){return ro((function(e){var r=e.length,a=r,i=Br.prototype.thru;for(t&&e.reverse();a--;){var s=e[a];if("function"!=typeof s)throw new St(o);if(i&&!c&&"wrapper"==io(s))var c=new Br([],!0)}for(a=c?a:r;++a<r;){var l=io(s=e[a]),u="wrapper"==l?oo(s):n;c=u&&xo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[io(u[0])].apply(c,u[3]):1==s.length&&xo(s)?c[l]():c.thru(s)}return function(){var t=arguments,a=t[0];if(c&&1==t.length&&Hi(a))return c.plant(a).value();for(var n=0,o=r?e[n].apply(this,t):a;++n<r;)o=e[n].call(this,o);return o}}))}function jn(t,e,a,o,i,s,c,l,u,d){var p=e&h,f=1&e,g=2&e,y=24&e,m=512&e,_=g?n:In(t);return function h(){for(var v=arguments.length,b=r(v),w=v;w--;)b[w]=arguments[w];if(y)var x=so(h),O=function(t,e){for(var r=t.length,a=0;r--;)t[r]===e&&++a;return a}(b,x);if(o&&(b=kn(b,o,i,y)),s&&(b=En(b,s,c,y)),v-=O,y&&v<d){var R=ur(b,x);return Kn(t,e,jn,h.placeholder,a,b,R,l,u,d-v)}var A=f?a:this,C=g?A[t]:t;return v=b.length,l?b=function(t,e){var r=t.length,a=_r(e.length,r),o=Sn(t);for(;a--;){var i=e[a];t[a]=vo(i,r)?o[i]:n}return t}(b,l):m&&v>1&&b.reverse(),p&&u<v&&(b.length=u),this&&this!==ge&&this instanceof h&&(C=_||In(C)),C.apply(A,b)}}function Wn(t,e){return function(r,a){return function(t,e,r,a){return va(t,(function(t,n,o){e(a,r(t),n,o)})),a}(r,t,e(a),{})}}function Bn(t,e){return function(r,a){var o;if(r===n&&a===n)return e;if(r!==n&&(o=r),a!==n){if(o===n)return a;"string"==typeof r||"string"==typeof a?(r=ln(r),a=ln(a)):(r=cn(r),a=cn(a)),o=t(r,a)}return o}}function zn(t){return ro((function(e){return e=Ue(e,Je(co())),Xa((function(r){var a=this;return t(e,(function(t){return ke(t,a,r)}))}))}))}function Hn(t,e){var r=(e=e===n?" ":ln(e)).length;if(r<2)return r?$a(e,t):e;var a=$a(e,pe(t/pr(e)));return sr(e)?wn(fr(a),0,t).join(""):a.slice(0,t)}function Vn(t){return function(e,a,o){return o&&"number"!=typeof o&&bo(e,a,o)&&(a=o=n),e=ps(e),a===n?(a=e,e=0):a=ps(a),function(t,e,a,n){for(var o=-1,i=$e(pe((e-t)/(a||1)),0),s=r(i);i--;)s[n?i:++o]=t,t+=a;return s}(e,a,o=o===n?e<a?1:-1:ps(o),t)}}function qn(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=ys(e),r=ys(r)),t(e,r)}}function Kn(t,e,r,a,o,i,s,c,h,d){var p=8&e;e|=p?l:u,4&(e&=~(p?u:l))||(e&=-4);var f=[t,e,o,p?i:n,p?s:n,p?n:i,p?n:s,c,h,d],g=r.apply(n,f);return xo(t)&&To(g,f),g.placeholder=a,No(g,t,e)}function $n(t){var e=At[t];return function(t,r){if(t=ys(t),(r=null==r?0:_r(fs(r),292))&&ve(t)){var a=(_s(t)+"e").split("e");return+((a=(_s(e(a[0]+"e"+(+a[1]+r)))+"e").split("e"))[0]+"e"+(+a[1]-r))}return e(t)}}var Xn=Cr&&1/hr(new Cr([,-0]))[1]==p?function(t){return new Cr(t)}:cc;function Yn(t){return function(e){var r=go(e);return r==A?cr(e):r==T?dr(e):function(t,e){return Ue(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Zn(t,e,a,i,p,f,g,y){var m=2&e;if(!m&&"function"!=typeof t)throw new St(o);var _=i?i.length:0;if(_||(e&=-97,i=p=n),g=g===n?g:$e(fs(g),0),y=y===n?y:fs(y),_-=p?p.length:0,e&u){var v=i,b=p;i=p=n}var w=m?n:oo(t),x=[t,e,a,i,p,v,b,f,g,y];if(w&&function(t,e){var r=t[1],a=e[1],n=r|a,o=n<131,i=a==h&&8==r||a==h&&r==d&&t[7].length<=e[8]||384==a&&e[7].length<=e[8]&&8==r;if(!o&&!i)return t;1&a&&(t[2]=e[2],n|=1&r?0:4);var c=e[3];if(c){var l=t[3];t[3]=l?kn(l,c,e[4]):c,t[4]=l?ur(t[3],s):e[4]}(c=e[5])&&(l=t[5],t[5]=l?En(l,c,e[6]):c,t[6]=l?ur(t[5],s):e[6]);(c=e[7])&&(t[7]=c);a&h&&(t[8]=null==t[8]?e[8]:_r(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=n}(x,w),t=x[0],e=x[1],a=x[2],i=x[3],p=x[4],!(y=x[9]=x[9]===n?m?0:t.length:$e(x[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)O=8==e||e==c?function(t,e,a){var o=In(t);return function i(){for(var s=arguments.length,c=r(s),l=s,u=so(i);l--;)c[l]=arguments[l];var h=s<3&&c[0]!==u&&c[s-1]!==u?[]:ur(c,u);return(s-=h.length)<a?Kn(t,e,jn,i.placeholder,n,c,h,n,n,a-s):ke(this&&this!==ge&&this instanceof i?o:t,this,c)}}(t,e,y):e!=l&&33!=e||p.length?jn.apply(n,x):function(t,e,a,n){var o=1&e,i=In(t);return function e(){for(var s=-1,c=arguments.length,l=-1,u=n.length,h=r(u+c),d=this&&this!==ge&&this instanceof e?i:t;++l<u;)h[l]=n[l];for(;c--;)h[l++]=arguments[++s];return ke(d,o?a:this,h)}}(t,e,a,i);else var O=function(t,e,r){var a=1&e,n=In(t);return function e(){return(this&&this!==ge&&this instanceof e?n:t).apply(a?r:this,arguments)}}(t,e,a);return No((w?Ja:To)(O,x),t,e)}function Qn(t,e,r,a){return t===n||ji(t,Dt[r])&&!Ut.call(a,r)?e:t}function Jn(t,e,r,a,o,i){return ts(t)&&ts(e)&&(i.set(e,t),Wa(t,e,n,Jn,i),i.delete(e)),t}function to(t){return ns(t)?n:t}function eo(t,e,r,a,o,i){var s=1&r,c=t.length,l=e.length;if(c!=l&&!(s&&l>c))return!1;var u=i.get(t),h=i.get(e);if(u&&h)return u==e&&h==t;var d=-1,p=!0,f=2&r?new Kr:n;for(i.set(t,e),i.set(e,t);++d<c;){var g=t[d],y=e[d];if(a)var m=s?a(y,g,d,e,t,i):a(g,y,d,t,e,i);if(m!==n){if(m)continue;p=!1;break}if(f){if(!Fe(e,(function(t,e){if(!er(f,e)&&(g===t||o(g,t,r,a,i)))return f.push(e)}))){p=!1;break}}else if(g!==y&&!o(g,y,r,a,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function ro(t){return Do(ko(t,n,Vo),t+"")}function ao(t){return Oa(t,Ls,po)}function no(t){return Oa(t,Ds,fo)}var oo=Sr?function(t){return Sr.get(t)}:cc;function io(t){for(var e=t.name+"",r=Tr[e],a=Ut.call(Tr,e)?r.length:0;a--;){var n=r[a],o=n.func;if(null==o||o==t)return n.name}return e}function so(t){return(Ut.call(Fr,"placeholder")?Fr:t).placeholder}function co(){var t=Fr.iteratee||nc;return t=t===nc?Pa:t,arguments.length?t(arguments[0],arguments[1]):t}function lo(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function uo(t){for(var e=Ls(t),r=e.length;r--;){var a=e[r],n=t[a];e[r]=[a,n,Ao(n)]}return e}function ho(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Na(r)?r:n}var po=ye?function(t){return null==t?[]:(t=Ct(t),De(ye(t),(function(e){return $t.call(t,e)})))}:gc,fo=ye?function(t){for(var e=[];t;)Ge(e,po(t)),t=qt(t);return e}:gc,go=Ra;function yo(t,e,r){for(var a=-1,n=(e=vn(e,t)).length,o=!1;++a<n;){var i=Io(e[a]);if(!(o=null!=t&&r(t,i)))break;t=t[i]}return o||++a!=n?o:!!(n=null==t?0:t.length)&&Ji(n)&&vo(i,n)&&(Hi(t)||zi(t))}function mo(t){return"function"!=typeof t.constructor||Ro(t)?{}:jr(qt(t))}function _o(t){return Hi(t)||zi(t)||!!(Yt&&t&&t[Yt])}function vo(t,e){var r=typeof t;return!!(e=null==e?f:e)&&("number"==r||"symbol"!=r&&bt.test(t))&&t>-1&&t%1==0&&t<e}function bo(t,e,r){if(!ts(r))return!1;var a=typeof e;return!!("number"==a?qi(r)&&vo(e,r.length):"string"==a&&e in r)&&ji(r[e],t)}function wo(t,e){if(Hi(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!cs(t))||(rt.test(t)||!et.test(t)||null!=e&&t in Ct(e))}function xo(t){var e=io(t),r=Fr[e];if("function"!=typeof r||!(e in zr.prototype))return!1;if(t===r)return!0;var a=oo(r);return!!a&&t===a[0]}(Or&&go(new Or(new ArrayBuffer(1)))!=U||Rr&&go(new Rr)!=A||Ar&&go(Ar.resolve())!=E||Cr&&go(new Cr)!=T||kr&&go(new kr)!=N)&&(go=function(t){var e=Ra(t),r=e==k?t.constructor:n,a=r?Mo(r):"";if(a)switch(a){case Lr:return U;case Dr:return A;case Nr:return E;case Pr:return T;case Ur:return N}return e});var Oo=Nt?Zi:yc;function Ro(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function Ao(t){return t===t&&!ts(t)}function Co(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Ct(r)))}}function ko(t,e,a){return e=$e(e===n?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=$e(n.length-e,0),s=r(i);++o<i;)s[o]=n[e+o];o=-1;for(var c=r(e+1);++o<e;)c[o]=n[o];return c[e]=a(s),ke(t,this,c)}}function Eo(t,e){return e.length<2?t:xa(t,rn(e,0,-1))}function So(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var To=Po(Ja),Lo=ue||function(t,e){return ge.setTimeout(t,e)},Do=Po(tn);function No(t,e,r){var a=e+"";return Do(t,function(t,e){var r=e.length;if(!r)return t;var a=r-1;return e[a]=(r>1?"& ":"")+e[a],e=e.join(r>2?", ":" "),t.replace(ct,"{\n/* [wrapped with "+e+"] */\n")}(a,function(t,e){return Se(m,(function(r){var a="_."+r[0];e&r[1]&&!Ne(t,a)&&t.push(a)})),t.sort()}(function(t){var e=t.match(lt);return e?e[1].split(ut):[]}(a),r)))}function Po(t){var e=0,r=0;return function(){var a=vr(),o=16-(a-r);if(r=a,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Uo(t,e){var r=-1,a=t.length,o=a-1;for(e=e===n?a:e;++r<e;){var i=Ka(r,o),s=t[i];t[i]=t[r],t[r]=s}return t.length=e,t}var Go=function(t){var e=Pi(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(at,(function(t,r,a,n){e.push(a?n.replace(pt,"$1"):r||t)})),e}));function Io(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Mo(t){if(null!=t){try{return Pt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fo(t){if(t instanceof zr)return t.clone();var e=new Br(t.__wrapped__,t.__chain__);return e.__actions__=Sn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var jo=Xa((function(t,e){return Ki(t)?ua(t,ya(e,1,Ki,!0)):[]})),Wo=Xa((function(t,e){var r=Yo(e);return Ki(r)&&(r=n),Ki(t)?ua(t,ya(e,1,Ki,!0),co(r,2)):[]})),Bo=Xa((function(t,e){var r=Yo(e);return Ki(r)&&(r=n),Ki(t)?ua(t,ya(e,1,Ki,!0),n,r):[]}));function zo(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var n=null==r?0:fs(r);return n<0&&(n=$e(a+n,0)),Be(t,co(e,3),n)}function Ho(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var o=a-1;return r!==n&&(o=fs(r),o=r<0?$e(a+o,0):_r(o,a-1)),Be(t,co(e,3),o,!0)}function Vo(t){return(null==t?0:t.length)?ya(t,1):[]}function qo(t){return t&&t.length?t[0]:n}var Ko=Xa((function(t){var e=Ue(t,mn);return e.length&&e[0]===t[0]?Ea(e):[]})),$o=Xa((function(t){var e=Yo(t),r=Ue(t,mn);return e===Yo(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Ea(r,co(e,2)):[]})),Xo=Xa((function(t){var e=Yo(t),r=Ue(t,mn);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Ea(r,n,e):[]}));function Yo(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Zo=Xa(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Va(t,e):t}var Jo=ro((function(t,e){var r=null==t?0:t.length,a=oa(t,e);return qa(t,Ue(e,(function(t){return vo(t,r)?+t:t})).sort(Cn)),a}));function ti(t){return null==t?t:xr.call(t)}var ei=Xa((function(t){return un(ya(t,1,Ki,!0))})),ri=Xa((function(t){var e=Yo(t);return Ki(e)&&(e=n),un(ya(t,1,Ki,!0),co(e,2))})),ai=Xa((function(t){var e=Yo(t);return e="function"==typeof e?e:n,un(ya(t,1,Ki,!0),n,e)}));function ni(t){if(!t||!t.length)return[];var e=0;return t=De(t,(function(t){if(Ki(t))return e=$e(t.length,e),!0})),Ze(e,(function(e){return Ue(t,Ke(e))}))}function oi(t,e){if(!t||!t.length)return[];var r=ni(t);return null==e?r:Ue(r,(function(t){return ke(e,n,t)}))}var ii=Xa((function(t,e){return Ki(t)?ua(t,e):[]})),si=Xa((function(t){return gn(De(t,Ki))})),ci=Xa((function(t){var e=Yo(t);return Ki(e)&&(e=n),gn(De(t,Ki),co(e,2))})),li=Xa((function(t){var e=Yo(t);return e="function"==typeof e?e:n,gn(De(t,Ki),n,e)})),ui=Xa(ni);var hi=Xa((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,oi(t,r)}));function di(t){var e=Fr(t);return e.__chain__=!0,e}function pi(t,e){return e(t)}var fi=ro((function(t){var e=t.length,r=e?t[0]:0,a=this.__wrapped__,o=function(e){return oa(e,t)};return!(e>1||this.__actions__.length)&&a instanceof zr&&vo(r)?((a=a.slice(r,+r+(e?1:0))).__actions__.push({func:pi,args:[o],thisArg:n}),new Br(a,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(o)}));var gi=Ln((function(t,e,r){Ut.call(t,r)?++t[r]:na(t,r,1)}));var yi=Mn(zo),mi=Mn(Ho);function _i(t,e){return(Hi(t)?Se:ha)(t,co(e,3))}function vi(t,e){return(Hi(t)?Te:da)(t,co(e,3))}var bi=Ln((function(t,e,r){Ut.call(t,r)?t[r].push(e):na(t,r,[e])}));var wi=Xa((function(t,e,a){var n=-1,o="function"==typeof e,i=qi(t)?r(t.length):[];return ha(t,(function(t){i[++n]=o?ke(e,t,a):Sa(t,e,a)})),i})),xi=Ln((function(t,e,r){na(t,r,e)}));function Oi(t,e){return(Hi(t)?Ue:Ma)(t,co(e,3))}var Ri=Ln((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var Ai=Xa((function(t,e){if(null==t)return[];var r=e.length;return r>1&&bo(t,e[0],e[1])?e=[]:r>2&&bo(e[0],e[1],e[2])&&(e=[e[0]]),za(t,ya(e,1),[])})),Ci=ne||function(){return ge.Date.now()};function ki(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Zn(t,h,n,n,n,n,e)}function Ei(t,e){var r;if("function"!=typeof e)throw new St(o);return t=fs(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=n),r}}var Si=Xa((function(t,e,r){var a=1;if(r.length){var n=ur(r,so(Si));a|=l}return Zn(t,a,e,r,n)})),Ti=Xa((function(t,e,r){var a=3;if(r.length){var n=ur(r,so(Ti));a|=l}return Zn(e,a,t,r,n)}));function Li(t,e,r){var a,i,s,c,l,u,h=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new St(o);function g(e){var r=a,o=i;return a=i=n,h=e,c=t.apply(o,r)}function y(t){var r=t-u;return u===n||r>=e||r<0||p&&t-h>=s}function m(){var t=Ci();if(y(t))return _(t);l=Lo(m,function(t){var r=e-(t-u);return p?_r(r,s-(t-h)):r}(t))}function _(t){return l=n,f&&a?g(t):(a=i=n,c)}function v(){var t=Ci(),r=y(t);if(a=arguments,i=this,u=t,r){if(l===n)return function(t){return h=t,l=Lo(m,e),d?g(t):c}(u);if(p)return xn(l),l=Lo(m,e),g(u)}return l===n&&(l=Lo(m,e)),c}return e=ys(e)||0,ts(r)&&(d=!!r.leading,s=(p="maxWait"in r)?$e(ys(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f),v.cancel=function(){l!==n&&xn(l),h=0,a=u=i=l=n},v.flush=function(){return l===n?c:_(Ci())},v}var Di=Xa((function(t,e){return la(t,1,e)})),Ni=Xa((function(t,e,r){return la(t,ys(e)||0,r)}));function Pi(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new St(o);var r=function(){var a=arguments,n=e?e.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var i=t.apply(this,a);return r.cache=o.set(n,i)||o,i};return r.cache=new(Pi.Cache||qr),r}function Ui(t){if("function"!=typeof t)throw new St(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Pi.Cache=qr;var Gi=bn((function(t,e){var r=(e=1==e.length&&Hi(e[0])?Ue(e[0],Je(co())):Ue(ya(e,1),Je(co()))).length;return Xa((function(a){for(var n=-1,o=_r(a.length,r);++n<o;)a[n]=e[n].call(this,a[n]);return ke(t,this,a)}))})),Ii=Xa((function(t,e){var r=ur(e,so(Ii));return Zn(t,l,n,e,r)})),Mi=Xa((function(t,e){var r=ur(e,so(Mi));return Zn(t,u,n,e,r)})),Fi=ro((function(t,e){return Zn(t,d,n,n,n,e)}));function ji(t,e){return t===e||t!==t&&e!==e}var Wi=qn(Aa),Bi=qn((function(t,e){return t>=e})),zi=Ta(function(){return arguments}())?Ta:function(t){return es(t)&&Ut.call(t,"callee")&&!$t.call(t,"callee")},Hi=r.isArray,Vi=we?Je(we):function(t){return es(t)&&Ra(t)==P};function qi(t){return null!=t&&Ji(t.length)&&!Zi(t)}function Ki(t){return es(t)&&qi(t)}var $i=me||yc,Xi=xe?Je(xe):function(t){return es(t)&&Ra(t)==w};function Yi(t){if(!es(t))return!1;var e=Ra(t);return e==x||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ns(t)}function Zi(t){if(!ts(t))return!1;var e=Ra(t);return e==O||e==R||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qi(t){return"number"==typeof t&&t==fs(t)}function Ji(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var rs=Oe?Je(Oe):function(t){return es(t)&&go(t)==A};function as(t){return"number"==typeof t||es(t)&&Ra(t)==C}function ns(t){if(!es(t)||Ra(t)!=k)return!1;var e=qt(t);if(null===e)return!0;var r=Ut.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Pt.call(r)==Ft}var os=Re?Je(Re):function(t){return es(t)&&Ra(t)==S};var is=Ae?Je(Ae):function(t){return es(t)&&go(t)==T};function ss(t){return"string"==typeof t||!Hi(t)&&es(t)&&Ra(t)==L}function cs(t){return"symbol"==typeof t||es(t)&&Ra(t)==D}var ls=Ce?Je(Ce):function(t){return es(t)&&Ji(t.length)&&!!ce[Ra(t)]};var us=qn(Ia),hs=qn((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(qi(t))return ss(t)?fr(t):Sn(t);if(Zt&&t[Zt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Zt]());var e=go(t);return(e==A?cr:e==T?hr:js)(t)}function ps(t){return t?(t=ys(t))===p||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function fs(t){var e=ps(t),r=e%1;return e===e?r?e-r:e:0}function gs(t){return t?ia(fs(t),0,y):0}function ys(t){if("number"==typeof t)return t;if(cs(t))return g;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qe(t);var r=mt.test(t);return r||vt.test(t)?de(t.slice(2),r?2:8):yt.test(t)?g:+t}function ms(t){return Tn(t,Ds(t))}function _s(t){return null==t?"":ln(t)}var vs=Dn((function(t,e){if(Ro(e)||qi(e))Tn(e,Ls(e),t);else for(var r in e)Ut.call(e,r)&&ta(t,r,e[r])})),bs=Dn((function(t,e){Tn(e,Ds(e),t)})),ws=Dn((function(t,e,r,a){Tn(e,Ds(e),t,a)})),xs=Dn((function(t,e,r,a){Tn(e,Ls(e),t,a)})),Os=ro(oa);var Rs=Xa((function(t,e){t=Ct(t);var r=-1,a=e.length,o=a>2?e[2]:n;for(o&&bo(e[0],e[1],o)&&(a=1);++r<a;)for(var i=e[r],s=Ds(i),c=-1,l=s.length;++c<l;){var u=s[c],h=t[u];(h===n||ji(h,Dt[u])&&!Ut.call(t,u))&&(t[u]=i[u])}return t})),As=Xa((function(t){return t.push(n,Jn),ke(Ps,n,t)}));function Cs(t,e,r){var a=null==t?n:xa(t,e);return a===n?r:a}function ks(t,e){return null!=t&&yo(t,e,ka)}var Es=Wn((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),t[e]=r}),tc(ac)),Ss=Wn((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),Ut.call(t,e)?t[e].push(r):t[e]=[r]}),co),Ts=Xa(Sa);function Ls(t){return qi(t)?Xr(t):Ua(t)}function Ds(t){return qi(t)?Xr(t,!0):Ga(t)}var Ns=Dn((function(t,e,r){Wa(t,e,r)})),Ps=Dn((function(t,e,r,a){Wa(t,e,r,a)})),Us=ro((function(t,e){var r={};if(null==t)return r;var a=!1;e=Ue(e,(function(e){return e=vn(e,t),a||(a=e.length>1),e})),Tn(t,no(t),r),a&&(r=sa(r,7,to));for(var n=e.length;n--;)hn(r,e[n]);return r}));var Gs=ro((function(t,e){return null==t?{}:function(t,e){return Ha(t,e,(function(e,r){return ks(t,r)}))}(t,e)}));function Is(t,e){if(null==t)return{};var r=Ue(no(t),(function(t){return[t]}));return e=co(e),Ha(t,r,(function(t,r){return e(t,r[0])}))}var Ms=Yn(Ls),Fs=Yn(Ds);function js(t){return null==t?[]:tr(t,Ls(t))}var Ws=Gn((function(t,e,r){return e=e.toLowerCase(),t+(r?Bs(e):e)}));function Bs(t){return Ys(_s(t).toLowerCase())}function zs(t){return(t=_s(t))&&t.replace(wt,nr).replace(ee,"")}var Hs=Gn((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Vs=Gn((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),qs=Un("toLowerCase");var Ks=Gn((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var $s=Gn((function(t,e,r){return t+(r?" ":"")+Ys(e)}));var Xs=Gn((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Ys=Un("toUpperCase");function Zs(t,e,r){return t=_s(t),(e=r?n:e)===n?function(t){return oe.test(t)}(t)?function(t){return t.match(ae)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Qs=Xa((function(t,e){try{return ke(t,n,e)}catch(r){return Yi(r)?r:new st(r)}})),Js=ro((function(t,e){return Se(e,(function(e){e=Io(e),na(t,e,Si(t[e],t))})),t}));function tc(t){return function(){return t}}var ec=Fn(),rc=Fn(!0);function ac(t){return t}function nc(t){return Pa("function"==typeof t?t:sa(t,1))}var oc=Xa((function(t,e){return function(r){return Sa(r,t,e)}})),ic=Xa((function(t,e){return function(r){return Sa(t,r,e)}}));function sc(t,e,r){var a=Ls(e),n=wa(e,a);null!=r||ts(e)&&(n.length||!a.length)||(r=e,e=t,t=this,n=wa(e,Ls(e)));var o=!(ts(r)&&"chain"in r)||!!r.chain,i=Zi(t);return Se(n,(function(r){var a=e[r];t[r]=a,i&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=Sn(this.__actions__)).push({func:a,args:arguments,thisArg:t}),r.__chain__=e,r}return a.apply(t,Ge([this.value()],arguments))})})),t}function cc(){}var lc=zn(Ue),uc=zn(Le),hc=zn(Fe);function dc(t){return wo(t)?Ke(Io(t)):function(t){return function(e){return xa(e,t)}}(t)}var pc=Vn(),fc=Vn(!0);function gc(){return[]}function yc(){return!1}var mc=Bn((function(t,e){return t+e}),0),_c=$n("ceil"),vc=Bn((function(t,e){return t/e}),1),bc=$n("floor");var wc=Bn((function(t,e){return t*e}),1),xc=$n("round"),Oc=Bn((function(t,e){return t-e}),0);return Fr.after=function(t,e){if("function"!=typeof e)throw new St(o);return t=fs(t),function(){if(--t<1)return e.apply(this,arguments)}},Fr.ary=ki,Fr.assign=vs,Fr.assignIn=bs,Fr.assignInWith=ws,Fr.assignWith=xs,Fr.at=Os,Fr.before=Ei,Fr.bind=Si,Fr.bindAll=Js,Fr.bindKey=Ti,Fr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hi(t)?t:[t]},Fr.chain=di,Fr.chunk=function(t,e,a){e=(a?bo(t,e,a):e===n)?1:$e(fs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var i=0,s=0,c=r(pe(o/e));i<o;)c[s++]=rn(t,i,i+=e);return c},Fr.compact=function(t){for(var e=-1,r=null==t?0:t.length,a=0,n=[];++e<r;){var o=t[e];o&&(n[a++]=o)}return n},Fr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),a=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Ge(Hi(a)?Sn(a):[a],ya(e,1))},Fr.cond=function(t){var e=null==t?0:t.length,r=co();return t=e?Ue(t,(function(t){if("function"!=typeof t[1])throw new St(o);return[r(t[0]),t[1]]})):[],Xa((function(r){for(var a=-1;++a<e;){var n=t[a];if(ke(n[0],this,r))return ke(n[1],this,r)}}))},Fr.conforms=function(t){return function(t){var e=Ls(t);return function(r){return ca(r,t,e)}}(sa(t,1))},Fr.constant=tc,Fr.countBy=gi,Fr.create=function(t,e){var r=jr(t);return null==e?r:aa(r,e)},Fr.curry=function t(e,r,a){var o=Zn(e,8,n,n,n,n,n,r=a?n:r);return o.placeholder=t.placeholder,o},Fr.curryRight=function t(e,r,a){var o=Zn(e,c,n,n,n,n,n,r=a?n:r);return o.placeholder=t.placeholder,o},Fr.debounce=Li,Fr.defaults=Rs,Fr.defaultsDeep=As,Fr.defer=Di,Fr.delay=Ni,Fr.difference=jo,Fr.differenceBy=Wo,Fr.differenceWith=Bo,Fr.drop=function(t,e,r){var a=null==t?0:t.length;return a?rn(t,(e=r||e===n?1:fs(e))<0?0:e,a):[]},Fr.dropRight=function(t,e,r){var a=null==t?0:t.length;return a?rn(t,0,(e=a-(e=r||e===n?1:fs(e)))<0?0:e):[]},Fr.dropRightWhile=function(t,e){return t&&t.length?pn(t,co(e,3),!0,!0):[]},Fr.dropWhile=function(t,e){return t&&t.length?pn(t,co(e,3),!0):[]},Fr.fill=function(t,e,r,a){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&bo(t,e,r)&&(r=0,a=o),function(t,e,r,a){var o=t.length;for((r=fs(r))<0&&(r=-r>o?0:o+r),(a=a===n||a>o?o:fs(a))<0&&(a+=o),a=r>a?0:gs(a);r<a;)t[r++]=e;return t}(t,e,r,a)):[]},Fr.filter=function(t,e){return(Hi(t)?De:ga)(t,co(e,3))},Fr.flatMap=function(t,e){return ya(Oi(t,e),1)},Fr.flatMapDeep=function(t,e){return ya(Oi(t,e),p)},Fr.flatMapDepth=function(t,e,r){return r=r===n?1:fs(r),ya(Oi(t,e),r)},Fr.flatten=Vo,Fr.flattenDeep=function(t){return(null==t?0:t.length)?ya(t,p):[]},Fr.flattenDepth=function(t,e){return(null==t?0:t.length)?ya(t,e=e===n?1:fs(e)):[]},Fr.flip=function(t){return Zn(t,512)},Fr.flow=ec,Fr.flowRight=rc,Fr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,a={};++e<r;){var n=t[e];a[n[0]]=n[1]}return a},Fr.functions=function(t){return null==t?[]:wa(t,Ls(t))},Fr.functionsIn=function(t){return null==t?[]:wa(t,Ds(t))},Fr.groupBy=bi,Fr.initial=function(t){return(null==t?0:t.length)?rn(t,0,-1):[]},Fr.intersection=Ko,Fr.intersectionBy=$o,Fr.intersectionWith=Xo,Fr.invert=Es,Fr.invertBy=Ss,Fr.invokeMap=wi,Fr.iteratee=nc,Fr.keyBy=xi,Fr.keys=Ls,Fr.keysIn=Ds,Fr.map=Oi,Fr.mapKeys=function(t,e){var r={};return e=co(e,3),va(t,(function(t,a,n){na(r,e(t,a,n),t)})),r},Fr.mapValues=function(t,e){var r={};return e=co(e,3),va(t,(function(t,a,n){na(r,a,e(t,a,n))})),r},Fr.matches=function(t){return Fa(sa(t,1))},Fr.matchesProperty=function(t,e){return ja(t,sa(e,1))},Fr.memoize=Pi,Fr.merge=Ns,Fr.mergeWith=Ps,Fr.method=oc,Fr.methodOf=ic,Fr.mixin=sc,Fr.negate=Ui,Fr.nthArg=function(t){return t=fs(t),Xa((function(e){return Ba(e,t)}))},Fr.omit=Us,Fr.omitBy=function(t,e){return Is(t,Ui(co(e)))},Fr.once=function(t){return Ei(2,t)},Fr.orderBy=function(t,e,r,a){return null==t?[]:(Hi(e)||(e=null==e?[]:[e]),Hi(r=a?n:r)||(r=null==r?[]:[r]),za(t,e,r))},Fr.over=lc,Fr.overArgs=Gi,Fr.overEvery=uc,Fr.overSome=hc,Fr.partial=Ii,Fr.partialRight=Mi,Fr.partition=Ri,Fr.pick=Gs,Fr.pickBy=Is,Fr.property=dc,Fr.propertyOf=function(t){return function(e){return null==t?n:xa(t,e)}},Fr.pull=Zo,Fr.pullAll=Qo,Fr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Va(t,e,co(r,2)):t},Fr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Va(t,e,n,r):t},Fr.pullAt=Jo,Fr.range=pc,Fr.rangeRight=fc,Fr.rearg=Fi,Fr.reject=function(t,e){return(Hi(t)?De:ga)(t,Ui(co(e,3)))},Fr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var a=-1,n=[],o=t.length;for(e=co(e,3);++a<o;){var i=t[a];e(i,a,t)&&(r.push(i),n.push(a))}return qa(t,n),r},Fr.rest=function(t,e){if("function"!=typeof t)throw new St(o);return Xa(t,e=e===n?e:fs(e))},Fr.reverse=ti,Fr.sampleSize=function(t,e,r){return e=(r?bo(t,e,r):e===n)?1:fs(e),(Hi(t)?Zr:Za)(t,e)},Fr.set=function(t,e,r){return null==t?t:Qa(t,e,r)},Fr.setWith=function(t,e,r,a){return a="function"==typeof a?a:n,null==t?t:Qa(t,e,r,a)},Fr.shuffle=function(t){return(Hi(t)?Qr:en)(t)},Fr.slice=function(t,e,r){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&bo(t,e,r)?(e=0,r=a):(e=null==e?0:fs(e),r=r===n?a:fs(r)),rn(t,e,r)):[]},Fr.sortBy=Ai,Fr.sortedUniq=function(t){return t&&t.length?sn(t):[]},Fr.sortedUniqBy=function(t,e){return t&&t.length?sn(t,co(e,2)):[]},Fr.split=function(t,e,r){return r&&"number"!=typeof r&&bo(t,e,r)&&(e=r=n),(r=r===n?y:r>>>0)?(t=_s(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=ln(e))&&sr(t)?wn(fr(t),0,r):t.split(e,r):[]},Fr.spread=function(t,e){if("function"!=typeof t)throw new St(o);return e=null==e?0:$e(fs(e),0),Xa((function(r){var a=r[e],n=wn(r,0,e);return a&&Ge(n,a),ke(t,this,n)}))},Fr.tail=function(t){var e=null==t?0:t.length;return e?rn(t,1,e):[]},Fr.take=function(t,e,r){return t&&t.length?rn(t,0,(e=r||e===n?1:fs(e))<0?0:e):[]},Fr.takeRight=function(t,e,r){var a=null==t?0:t.length;return a?rn(t,(e=a-(e=r||e===n?1:fs(e)))<0?0:e,a):[]},Fr.takeRightWhile=function(t,e){return t&&t.length?pn(t,co(e,3),!1,!0):[]},Fr.takeWhile=function(t,e){return t&&t.length?pn(t,co(e,3)):[]},Fr.tap=function(t,e){return e(t),t},Fr.throttle=function(t,e,r){var a=!0,n=!0;if("function"!=typeof t)throw new St(o);return ts(r)&&(a="leading"in r?!!r.leading:a,n="trailing"in r?!!r.trailing:n),Li(t,e,{leading:a,maxWait:e,trailing:n})},Fr.thru=pi,Fr.toArray=ds,Fr.toPairs=Ms,Fr.toPairsIn=Fs,Fr.toPath=function(t){return Hi(t)?Ue(t,Io):cs(t)?[t]:Sn(Go(_s(t)))},Fr.toPlainObject=ms,Fr.transform=function(t,e,r){var a=Hi(t),n=a||$i(t)||ls(t);if(e=co(e,4),null==r){var o=t&&t.constructor;r=n?a?new o:[]:ts(t)&&Zi(o)?jr(qt(t)):{}}return(n?Se:va)(t,(function(t,a,n){return e(r,t,a,n)})),r},Fr.unary=function(t){return ki(t,1)},Fr.union=ei,Fr.unionBy=ri,Fr.unionWith=ai,Fr.uniq=function(t){return t&&t.length?un(t):[]},Fr.uniqBy=function(t,e){return t&&t.length?un(t,co(e,2)):[]},Fr.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?un(t,n,e):[]},Fr.unset=function(t,e){return null==t||hn(t,e)},Fr.unzip=ni,Fr.unzipWith=oi,Fr.update=function(t,e,r){return null==t?t:dn(t,e,_n(r))},Fr.updateWith=function(t,e,r,a){return a="function"==typeof a?a:n,null==t?t:dn(t,e,_n(r),a)},Fr.values=js,Fr.valuesIn=function(t){return null==t?[]:tr(t,Ds(t))},Fr.without=ii,Fr.words=Zs,Fr.wrap=function(t,e){return Ii(_n(e),t)},Fr.xor=si,Fr.xorBy=ci,Fr.xorWith=li,Fr.zip=ui,Fr.zipObject=function(t,e){return yn(t||[],e||[],ta)},Fr.zipObjectDeep=function(t,e){return yn(t||[],e||[],Qa)},Fr.zipWith=hi,Fr.entries=Ms,Fr.entriesIn=Fs,Fr.extend=bs,Fr.extendWith=ws,sc(Fr,Fr),Fr.add=mc,Fr.attempt=Qs,Fr.camelCase=Ws,Fr.capitalize=Bs,Fr.ceil=_c,Fr.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=ys(r))===r?r:0),e!==n&&(e=(e=ys(e))===e?e:0),ia(ys(t),e,r)},Fr.clone=function(t){return sa(t,4)},Fr.cloneDeep=function(t){return sa(t,5)},Fr.cloneDeepWith=function(t,e){return sa(t,5,e="function"==typeof e?e:n)},Fr.cloneWith=function(t,e){return sa(t,4,e="function"==typeof e?e:n)},Fr.conformsTo=function(t,e){return null==e||ca(t,e,Ls(e))},Fr.deburr=zs,Fr.defaultTo=function(t,e){return null==t||t!==t?e:t},Fr.divide=vc,Fr.endsWith=function(t,e,r){t=_s(t),e=ln(e);var a=t.length,o=r=r===n?a:ia(fs(r),0,a);return(r-=e.length)>=0&&t.slice(r,o)==e},Fr.eq=ji,Fr.escape=function(t){return(t=_s(t))&&Z.test(t)?t.replace(X,or):t},Fr.escapeRegExp=function(t){return(t=_s(t))&&ot.test(t)?t.replace(nt,"\\$&"):t},Fr.every=function(t,e,r){var a=Hi(t)?Le:pa;return r&&bo(t,e,r)&&(e=n),a(t,co(e,3))},Fr.find=yi,Fr.findIndex=zo,Fr.findKey=function(t,e){return We(t,co(e,3),va)},Fr.findLast=mi,Fr.findLastIndex=Ho,Fr.findLastKey=function(t,e){return We(t,co(e,3),ba)},Fr.floor=bc,Fr.forEach=_i,Fr.forEachRight=vi,Fr.forIn=function(t,e){return null==t?t:ma(t,co(e,3),Ds)},Fr.forInRight=function(t,e){return null==t?t:_a(t,co(e,3),Ds)},Fr.forOwn=function(t,e){return t&&va(t,co(e,3))},Fr.forOwnRight=function(t,e){return t&&ba(t,co(e,3))},Fr.get=Cs,Fr.gt=Wi,Fr.gte=Bi,Fr.has=function(t,e){return null!=t&&yo(t,e,Ca)},Fr.hasIn=ks,Fr.head=qo,Fr.identity=ac,Fr.includes=function(t,e,r,a){t=qi(t)?t:js(t),r=r&&!a?fs(r):0;var n=t.length;return r<0&&(r=$e(n+r,0)),ss(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&ze(t,e,r)>-1},Fr.indexOf=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var n=null==r?0:fs(r);return n<0&&(n=$e(a+n,0)),ze(t,e,n)},Fr.inRange=function(t,e,r){return e=ps(e),r===n?(r=e,e=0):r=ps(r),function(t,e,r){return t>=_r(e,r)&&t<$e(e,r)}(t=ys(t),e,r)},Fr.invoke=Ts,Fr.isArguments=zi,Fr.isArray=Hi,Fr.isArrayBuffer=Vi,Fr.isArrayLike=qi,Fr.isArrayLikeObject=Ki,Fr.isBoolean=function(t){return!0===t||!1===t||es(t)&&Ra(t)==b},Fr.isBuffer=$i,Fr.isDate=Xi,Fr.isElement=function(t){return es(t)&&1===t.nodeType&&!ns(t)},Fr.isEmpty=function(t){if(null==t)return!0;if(qi(t)&&(Hi(t)||"string"==typeof t||"function"==typeof t.splice||$i(t)||ls(t)||zi(t)))return!t.length;var e=go(t);if(e==A||e==T)return!t.size;if(Ro(t))return!Ua(t).length;for(var r in t)if(Ut.call(t,r))return!1;return!0},Fr.isEqual=function(t,e){return La(t,e)},Fr.isEqualWith=function(t,e,r){var a=(r="function"==typeof r?r:n)?r(t,e):n;return a===n?La(t,e,n,r):!!a},Fr.isError=Yi,Fr.isFinite=function(t){return"number"==typeof t&&ve(t)},Fr.isFunction=Zi,Fr.isInteger=Qi,Fr.isLength=Ji,Fr.isMap=rs,Fr.isMatch=function(t,e){return t===e||Da(t,e,uo(e))},Fr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Da(t,e,uo(e),r)},Fr.isNaN=function(t){return as(t)&&t!=+t},Fr.isNative=function(t){if(Oo(t))throw new st("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Na(t)},Fr.isNil=function(t){return null==t},Fr.isNull=function(t){return null===t},Fr.isNumber=as,Fr.isObject=ts,Fr.isObjectLike=es,Fr.isPlainObject=ns,Fr.isRegExp=os,Fr.isSafeInteger=function(t){return Qi(t)&&t>=-9007199254740991&&t<=f},Fr.isSet=is,Fr.isString=ss,Fr.isSymbol=cs,Fr.isTypedArray=ls,Fr.isUndefined=function(t){return t===n},Fr.isWeakMap=function(t){return es(t)&&go(t)==N},Fr.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==Ra(t)},Fr.join=function(t,e){return null==t?"":be.call(t,e)},Fr.kebabCase=Hs,Fr.last=Yo,Fr.lastIndexOf=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var o=a;return r!==n&&(o=(o=fs(r))<0?$e(a+o,0):_r(o,a-1)),e===e?function(t,e,r){for(var a=r+1;a--;)if(t[a]===e)return a;return a}(t,e,o):Be(t,Ve,o,!0)},Fr.lowerCase=Vs,Fr.lowerFirst=qs,Fr.lt=us,Fr.lte=hs,Fr.max=function(t){return t&&t.length?fa(t,ac,Aa):n},Fr.maxBy=function(t,e){return t&&t.length?fa(t,co(e,2),Aa):n},Fr.mean=function(t){return qe(t,ac)},Fr.meanBy=function(t,e){return qe(t,co(e,2))},Fr.min=function(t){return t&&t.length?fa(t,ac,Ia):n},Fr.minBy=function(t,e){return t&&t.length?fa(t,co(e,2),Ia):n},Fr.stubArray=gc,Fr.stubFalse=yc,Fr.stubObject=function(){return{}},Fr.stubString=function(){return""},Fr.stubTrue=function(){return!0},Fr.multiply=wc,Fr.nth=function(t,e){return t&&t.length?Ba(t,fs(e)):n},Fr.noConflict=function(){return ge._===this&&(ge._=jt),this},Fr.noop=cc,Fr.now=Ci,Fr.pad=function(t,e,r){t=_s(t);var a=(e=fs(e))?pr(t):0;if(!e||a>=e)return t;var n=(e-a)/2;return Hn(fe(n),r)+t+Hn(pe(n),r)},Fr.padEnd=function(t,e,r){t=_s(t);var a=(e=fs(e))?pr(t):0;return e&&a<e?t+Hn(e-a,r):t},Fr.padStart=function(t,e,r){t=_s(t);var a=(e=fs(e))?pr(t):0;return e&&a<e?Hn(e-a,r)+t:t},Fr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),br(_s(t).replace(it,""),e||0)},Fr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&bo(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=ps(t),e===n?(e=t,t=0):e=ps(e)),t>e){var a=t;t=e,e=a}if(r||t%1||e%1){var o=wr();return _r(t+o*(e-t+he("1e-"+((o+"").length-1))),e)}return Ka(t,e)},Fr.reduce=function(t,e,r){var a=Hi(t)?Ie:Xe,n=arguments.length<3;return a(t,co(e,4),r,n,ha)},Fr.reduceRight=function(t,e,r){var a=Hi(t)?Me:Xe,n=arguments.length<3;return a(t,co(e,4),r,n,da)},Fr.repeat=function(t,e,r){return e=(r?bo(t,e,r):e===n)?1:fs(e),$a(_s(t),e)},Fr.replace=function(){var t=arguments,e=_s(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fr.result=function(t,e,r){var a=-1,o=(e=vn(e,t)).length;for(o||(o=1,t=n);++a<o;){var i=null==t?n:t[Io(e[a])];i===n&&(a=o,i=r),t=Zi(i)?i.call(t):i}return t},Fr.round=xc,Fr.runInContext=t,Fr.sample=function(t){return(Hi(t)?Yr:Ya)(t)},Fr.size=function(t){if(null==t)return 0;if(qi(t))return ss(t)?pr(t):t.length;var e=go(t);return e==A||e==T?t.size:Ua(t).length},Fr.snakeCase=Ks,Fr.some=function(t,e,r){var a=Hi(t)?Fe:an;return r&&bo(t,e,r)&&(e=n),a(t,co(e,3))},Fr.sortedIndex=function(t,e){return nn(t,e)},Fr.sortedIndexBy=function(t,e,r){return on(t,e,co(r,2))},Fr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var a=nn(t,e);if(a<r&&ji(t[a],e))return a}return-1},Fr.sortedLastIndex=function(t,e){return nn(t,e,!0)},Fr.sortedLastIndexBy=function(t,e,r){return on(t,e,co(r,2),!0)},Fr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=nn(t,e,!0)-1;if(ji(t[r],e))return r}return-1},Fr.startCase=$s,Fr.startsWith=function(t,e,r){return t=_s(t),r=null==r?0:ia(fs(r),0,t.length),e=ln(e),t.slice(r,r+e.length)==e},Fr.subtract=Oc,Fr.sum=function(t){return t&&t.length?Ye(t,ac):0},Fr.sumBy=function(t,e){return t&&t.length?Ye(t,co(e,2)):0},Fr.template=function(t,e,r){var a=Fr.templateSettings;r&&bo(t,e,r)&&(e=n),t=_s(t),e=ws({},e,a,Qn);var o,i,s=ws({},e.imports,a.imports,Qn),c=Ls(s),l=tr(s,c),u=0,h=e.interpolate||xt,d="__p += '",p=kt((e.escape||xt).source+"|"+h.source+"|"+(h===tt?ft:xt).source+"|"+(e.evaluate||xt).source+"|$","g"),f="//# sourceURL="+(Ut.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(p,(function(e,r,a,n,s,c){return a||(a=n),d+=t.slice(u,c).replace(Ot,ir),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),s&&(i=!0,d+="';\n"+s+";\n__p += '"),a&&(d+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),d+="';\n";var g=Ut.call(e,"variable")&&e.variable;if(g){if(dt.test(g))throw new st("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(V,""):d).replace(q,"$1").replace(K,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Qs((function(){return Rt(c,f+"return "+d).apply(n,l)}));if(y.source=d,Yi(y))throw y;return y},Fr.times=function(t,e){if((t=fs(t))<1||t>f)return[];var r=y,a=_r(t,y);e=co(e),t-=y;for(var n=Ze(a,e);++r<t;)e(r);return n},Fr.toFinite=ps,Fr.toInteger=fs,Fr.toLength=gs,Fr.toLower=function(t){return _s(t).toLowerCase()},Fr.toNumber=ys,Fr.toSafeInteger=function(t){return t?ia(fs(t),-9007199254740991,f):0===t?t:0},Fr.toString=_s,Fr.toUpper=function(t){return _s(t).toUpperCase()},Fr.trim=function(t,e,r){if((t=_s(t))&&(r||e===n))return Qe(t);if(!t||!(e=ln(e)))return t;var a=fr(t),o=fr(e);return wn(a,rr(a,o),ar(a,o)+1).join("")},Fr.trimEnd=function(t,e,r){if((t=_s(t))&&(r||e===n))return t.slice(0,gr(t)+1);if(!t||!(e=ln(e)))return t;var a=fr(t);return wn(a,0,ar(a,fr(e))+1).join("")},Fr.trimStart=function(t,e,r){if((t=_s(t))&&(r||e===n))return t.replace(it,"");if(!t||!(e=ln(e)))return t;var a=fr(t);return wn(a,rr(a,fr(e))).join("")},Fr.truncate=function(t,e){var r=30,a="...";if(ts(e)){var o="separator"in e?e.separator:o;r="length"in e?fs(e.length):r,a="omission"in e?ln(e.omission):a}var i=(t=_s(t)).length;if(sr(t)){var s=fr(t);i=s.length}if(r>=i)return t;var c=r-pr(a);if(c<1)return a;var l=s?wn(s,0,c).join(""):t.slice(0,c);if(o===n)return l+a;if(s&&(c+=l.length-c),os(o)){if(t.slice(c).search(o)){var u,h=l;for(o.global||(o=kt(o.source,_s(gt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;l=l.slice(0,d===n?c:d)}}else if(t.indexOf(ln(o),c)!=c){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+a},Fr.unescape=function(t){return(t=_s(t))&&Y.test(t)?t.replace($,yr):t},Fr.uniqueId=function(t){var e=++Gt;return _s(t)+e},Fr.upperCase=Xs,Fr.upperFirst=Ys,Fr.each=_i,Fr.eachRight=vi,Fr.first=qo,sc(Fr,function(){var t={};return va(Fr,(function(e,r){Ut.call(Fr.prototype,r)||(t[r]=e)})),t}(),{chain:!1}),Fr.VERSION="4.17.21",Se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fr[t].placeholder=Fr})),Se(["drop","take"],(function(t,e){zr.prototype[t]=function(r){r=r===n?1:$e(fs(r),0);var a=this.__filtered__&&!e?new zr(this):this.clone();return a.__filtered__?a.__takeCount__=_r(r,a.__takeCount__):a.__views__.push({size:_r(r,y),type:t+(a.__dir__<0?"Right":"")}),a},zr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Se(["filter","map","takeWhile"],(function(t,e){var r=e+1,a=1==r||3==r;zr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:co(t,3),type:r}),e.__filtered__=e.__filtered__||a,e}})),Se(["head","last"],(function(t,e){var r="take"+(e?"Right":"");zr.prototype[t]=function(){return this[r](1).value()[0]}})),Se(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");zr.prototype[t]=function(){return this.__filtered__?new zr(this):this[r](1)}})),zr.prototype.compact=function(){return this.filter(ac)},zr.prototype.find=function(t){return this.filter(t).head()},zr.prototype.findLast=function(t){return this.reverse().find(t)},zr.prototype.invokeMap=Xa((function(t,e){return"function"==typeof t?new zr(this):this.map((function(r){return Sa(r,t,e)}))})),zr.prototype.reject=function(t){return this.filter(Ui(co(t)))},zr.prototype.slice=function(t,e){t=fs(t);var r=this;return r.__filtered__&&(t>0||e<0)?new zr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=fs(e))<0?r.dropRight(-e):r.take(e-t)),r)},zr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},zr.prototype.toArray=function(){return this.take(y)},va(zr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=Fr[a?"take"+("last"==e?"Right":""):e],i=a||/^find/.test(e);o&&(Fr.prototype[e]=function(){var e=this.__wrapped__,s=a?[1]:arguments,c=e instanceof zr,l=s[0],u=c||Hi(e),h=function(t){var e=o.apply(Fr,Ge([t],s));return a&&d?e[0]:e};u&&r&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=this.__chain__,p=!!this.__actions__.length,f=i&&!d,g=c&&!p;if(!i&&u){e=g?e:new zr(this);var y=t.apply(e,s);return y.__actions__.push({func:pi,args:[h],thisArg:n}),new Br(y,d)}return f&&g?t.apply(this,s):(y=this.thru(h),f?a?y.value()[0]:y.value():y)})})),Se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Tt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",a=/^(?:pop|shift)$/.test(t);Fr.prototype[t]=function(){var t=arguments;if(a&&!this.__chain__){var n=this.value();return e.apply(Hi(n)?n:[],t)}return this[r]((function(r){return e.apply(Hi(r)?r:[],t)}))}})),va(zr.prototype,(function(t,e){var r=Fr[e];if(r){var a=r.name+"";Ut.call(Tr,a)||(Tr[a]=[]),Tr[a].push({name:e,func:r})}})),Tr[jn(n,2).name]=[{name:"wrapper",func:n}],zr.prototype.clone=function(){var t=new zr(this.__wrapped__);return t.__actions__=Sn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Sn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Sn(this.__views__),t},zr.prototype.reverse=function(){if(this.__filtered__){var t=new zr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},zr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Hi(t),a=e<0,n=r?t.length:0,o=function(t,e,r){var a=-1,n=r.length;for(;++a<n;){var o=r[a],i=o.size;switch(o.type){case"drop":t+=i;break;case"dropRight":e-=i;break;case"take":e=_r(e,t+i);break;case"takeRight":t=$e(t,e-i)}}return{start:t,end:e}}(0,n,this.__views__),i=o.start,s=o.end,c=s-i,l=a?s:i-1,u=this.__iteratees__,h=u.length,d=0,p=_r(c,this.__takeCount__);if(!r||!a&&n==c&&p==c)return fn(t,this.__actions__);var f=[];t:for(;c--&&d<p;){for(var g=-1,y=t[l+=e];++g<h;){var m=u[g],_=m.iteratee,v=m.type,b=_(y);if(2==v)y=b;else if(!b){if(1==v)continue t;break t}}f[d++]=y}return f},Fr.prototype.at=fi,Fr.prototype.chain=function(){return di(this)},Fr.prototype.commit=function(){return new Br(this.value(),this.__chain__)},Fr.prototype.next=function(){this.__values__===n&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Fr.prototype.plant=function(t){for(var e,r=this;r instanceof Wr;){var a=Fo(r);a.__index__=0,a.__values__=n,e?o.__wrapped__=a:e=a;var o=a;r=r.__wrapped__}return o.__wrapped__=t,e},Fr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof zr){var e=t;return this.__actions__.length&&(e=new zr(this)),(e=e.reverse()).__actions__.push({func:pi,args:[ti],thisArg:n}),new Br(e,this.__chain__)}return this.thru(ti)},Fr.prototype.toJSON=Fr.prototype.valueOf=Fr.prototype.value=function(){return fn(this.__wrapped__,this.__actions__)},Fr.prototype.first=Fr.prototype.head,Zt&&(Fr.prototype[Zt]=function(){return this}),Fr}();ge._=mr,(a=function(){return mr}.call(e,r,e,t))===n||(t.exports=a)}.call(this)},8106:(t,e,r)=>{var a=r(8731).Uint8Array;t.exports=a},8120:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.Posterize=function(t){var e,r=Math.round(254*this.levels())+1,a=t.data,n=a.length,o=255/r;for(e=0;e<n;e+=1)a[e]=Math.floor(a[e]/o)*o},a.Factory.addGetterSetter(n.Node,"levels",.5,o.getNumberValidator(),a.Factory.afterSetFilter)},8233:(t,e,r)=>{var a=r(6891),n=r(9987),o=r(7837),i=r(9799),s=r(1996),c=r(9548),l=r(2925),u=r(4125),h=r(6142),d=r(3400),p=r(1095),f=r(3884),g=r(6351),y=r(9121),m=r(9855),_=r(3531),v=r(2470),b=r(876),w=r(8347),x=r(718),O=r(9264),R=r(1503),A="[object Arguments]",C="[object Function]",k="[object Object]",E={};E[A]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[k]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[C]=E["[object WeakMap]"]=!1,t.exports=function t(e,r,S,T,L,D){var N,P=1&r,U=2&r,G=4&r;if(S&&(N=L?S(e,T,L,D):S(e)),void 0!==N)return N;if(!w(e))return e;var I=_(e);if(I){if(N=g(e),!P)return l(e,N)}else{var M=f(e),F=M==C||"[object GeneratorFunction]"==M;if(v(e))return c(e,P);if(M==k||M==A||F&&!L){if(N=U||F?{}:m(e),!P)return U?h(e,s(N,e)):u(e,i(N,e))}else{if(!E[M])return L?e:{};N=y(e,M,P)}}D||(D=new a);var j=D.get(e);if(j)return j;D.set(e,N),x(e)?e.forEach((function(a){N.add(t(a,r,S,a,e,D))})):b(e)&&e.forEach((function(a,n){N.set(n,t(a,r,S,n,e,D))}));var W=I?void 0:(G?U?p:d:U?R:O)(e);return n(W||e,(function(a,n){W&&(a=e[n=a]),o(N,n,t(a,r,S,n,e,D))})),N}},8347:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},8377:(t,e,r)=>{"use strict";t.exports=r(2359)},8412:(t,e,r)=>{var a=r(6003);t.exports=function(t,e,r){return e=r?void 0:e,e=t&&null==e?t.length:e,a(t,128,void 0,void 0,void 0,void 0,e)}},8437:(t,e,r)=>{var a=r(6659),n=r(1904);t.exports=function(t,e){return null!=t&&n(t,e,a)}},8467:t=>{for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);t.exports=function(t,r){var a=r||0,n=e;return[n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]]].join("")}},8481:(t,e,r)=>{var a=r(3326),n=r(3350),o=r(2053),i=r(4009),s=r(1007),c=r(8049),l=r(5396),u=r(4976),h=r(8731);t.exports=function t(e,r,d,p,f,g,y,m,_,v){var b=128&r,w=1&r,x=2&r,O=24&r,R=512&r,A=x?void 0:i(e);return function C(){for(var k=arguments.length,E=Array(k),S=k;S--;)E[S]=arguments[S];if(O)var T=c(C),L=o(E,T);if(p&&(E=a(E,p,f,O)),g&&(E=n(E,g,y,O)),k-=L,O&&k<v){var D=u(E,T);return s(e,r,t,C.placeholder,d,E,D,m,_,v-k)}var N=w?d:this,P=x?N[e]:e;return k=E.length,m?E=l(E,m):R&&k>1&&E.reverse(),b&&_<k&&(E.length=_),this&&this!==h&&this instanceof C&&(P=A||i(P)),P.apply(N,E)}}},8494:(t,e,r)=>{var a=r(3099).runInContext();t.exports=r(7502)(a,a)},8498:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Math.PI/180;var n=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var a=t.indexOf("edge/");return a>0&&parseInt(t.substring(a+5,t.indexOf(".",a)),10)};e._parseUA=function(t){var e=t.toLowerCase(),r=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],a=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:r[1]||"",version:r[2]||"0",isIE:n(e),mobile:a,ieMobile:o}},e.glob="undefined"!==typeof r.g?r.g:"undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"4.2.2",isBrowser:"undefined"!==typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*a:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}},8598:(t,e,r)=>{var a=r(2856)(r(8731),"Promise");t.exports=a},8612:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9614),c=r(8498),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){var e,r,a,n=this.sides(),o=this.radius();for(t.beginPath(),t.moveTo(0,0-o),e=1;e<n;e++)r=o*Math.sin(2*e*Math.PI/n),a=-1*o*Math.cos(2*e*Math.PI/n),t.lineTo(r,a);t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(i.Shape);e.RegularPolygon=l,l.prototype.className="RegularPolygon",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radius"],c._registerNode(l),o.Factory.addGetterSetter(l,"radius",0,s.getNumberValidator()),o.Factory.addGetterSetter(l,"sides",0,s.getNumberValidator()),n.Collection.mapMethods(l)},8619:(t,e,r)=>{var a=r(3055),n=Math.max;t.exports=function(t,e,r){return e=n(void 0===e?t.length-1:e,0),function(){for(var o=arguments,i=-1,s=n(o.length-e,0),c=Array(s);++i<s;)c[i]=o[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=o[i];return l[e]=r(c),a(t,this,l)}}},8641:t=>{t.exports=function(t){return t!==t}},8707:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);function i(t,e,r,a,n){var o=r-e,i=n-a;return 0===o?a+i/2:0===i?a:i*((t-e)/o)+a}e.Enhance=function(t){var e,r,a,n,o=t.data,s=o.length,c=o[0],l=c,u=o[1],h=u,d=o[2],p=d,f=this.enhance();if(0!==f){for(n=0;n<s;n+=4)(e=o[n+0])<c?c=e:e>l&&(l=e),(r=o[n+1])<u?u=r:r>h&&(h=r),(a=o[n+2])<d?d=a:a>p&&(p=a);var g,y,m,_,v,b,w,x,O;for(l===c&&(l=255,c=0),h===u&&(h=255,u=0),p===d&&(p=255,d=0),f>0?(y=l+f*(255-l),m=c-f*(c-0),v=h+f*(255-h),b=u-f*(u-0),x=p+f*(255-p),O=d-f*(d-0)):(y=l+f*(l-(g=.5*(l+c))),m=c+f*(c-g),v=h+f*(h-(_=.5*(h+u))),b=u+f*(u-_),x=p+f*(p-(w=.5*(p+d))),O=d+f*(d-w)),n=0;n<s;n+=4)o[n+0]=i(o[n+0],c,l,m,y),o[n+1]=i(o[n+1],u,h,b,v),o[n+2]=i(o[n+2],d,p,O,x)}},a.Factory.addGetterSetter(n.Node,"enhance",0,o.getNumberValidator(),a.Factory.afterSetFilter)},8710:(t,e,r)=>{var a=r(6968);t.exports=function(t,e,r){var n=null==t?void 0:a(t,e);return void 0===n?r:n}},8719:t=>{t.exports=function(){return[]}},8731:(t,e,r)=>{var a=r(9078),n="object"==typeof self&&self&&self.Object===Object&&self,o=a||n||Function("return this")();t.exports=o},8753:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},8819:(t,e,r)=>{var a=r(5034),n=r(35),o=r(2925);t.exports=function(t){if(t instanceof a)return t.clone();var e=new n(t.__wrapped__,t.__chain__);return e.__actions__=o(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},8868:(t,e,r)=>{var a=r(3312),n=r(8710),o=r(8437),i=r(4104),s=r(5710),c=r(6799),l=r(9811);t.exports=function(t,e){return i(t)&&s(e)?c(l(t),e):function(r){var i=n(r,t);return void 0===i&&i===e?o(r,t):a(e,i,3)}}},8922:(t,e,r)=>{var a=r(5710),n=r(9264);t.exports=function(t){for(var e=n(t),r=e.length;r--;){var o=e[r],i=t[o];e[r]=[o,i,a(i)]}return e}},8952:(t,e,r)=>{var a=r(3494),n=r(8347),o=r(1516),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=a(t);var r=s.test(t);return r||c.test(t)?l(t.slice(2),r?2:8):i.test(t)?NaN:+t}},8974:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},9051:(t,e,r)=>{var a=r(7636),n=r(3557)(a);t.exports=n},9077:t=>{t.exports=function(){return!1}},9078:(t,e,r)=>{var a="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=a},9120:(t,e,r)=>{"use strict";e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=c(r(2799)),o=c(r(1561)),i=c(r(9358)),s=(c(r(1372)),r(1494));function c(t){return t&&t.__esModule?t:{default:t}}i.default.any,i.default.func,i.default.node;var l=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this,r,n));return o.performAppear=function(t,e){o.currentlyTransitioningKeys[t]=!0,e.componentWillAppear?e.componentWillAppear(o._handleDoneAppearing.bind(o,t,e)):o._handleDoneAppearing(t,e)},o._handleDoneAppearing=function(t,e){e.componentDidAppear&&e.componentDidAppear(),delete o.currentlyTransitioningKeys[t];var r=(0,s.getChildMapping)(o.props.children);r&&r.hasOwnProperty(t)||o.performLeave(t,e)},o.performEnter=function(t,e){o.currentlyTransitioningKeys[t]=!0,e.componentWillEnter?e.componentWillEnter(o._handleDoneEntering.bind(o,t,e)):o._handleDoneEntering(t,e)},o._handleDoneEntering=function(t,e){e.componentDidEnter&&e.componentDidEnter(),delete o.currentlyTransitioningKeys[t];var r=(0,s.getChildMapping)(o.props.children);r&&r.hasOwnProperty(t)||o.performLeave(t,e)},o.performLeave=function(t,e){o.currentlyTransitioningKeys[t]=!0,e.componentWillLeave?e.componentWillLeave(o._handleDoneLeaving.bind(o,t,e)):o._handleDoneLeaving(t,e)},o._handleDoneLeaving=function(t,e){e.componentDidLeave&&e.componentDidLeave(),delete o.currentlyTransitioningKeys[t];var r=(0,s.getChildMapping)(o.props.children);r&&r.hasOwnProperty(t)?o.keysToEnter.push(t):o.setState((function(e){var r=a({},e.children);return delete r[t],{children:r}}))},o.childRefs=Object.create(null),o.state={children:(0,s.getChildMapping)(r.children)},o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},e.prototype.componentDidMount=function(){var t=this.state.children;for(var e in t)t[e]&&this.performAppear(e,this.childRefs[e])},e.prototype.componentWillReceiveProps=function(t){var e=(0,s.getChildMapping)(t.children),r=this.state.children;for(var a in this.setState({children:(0,s.mergeChildMappings)(r,e)}),e){var n=r&&r.hasOwnProperty(a);!e[a]||n||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var o in r){var i=e&&e.hasOwnProperty(o);!r[o]||i||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},e.prototype.componentDidUpdate=function(){var t=this,e=this.keysToEnter;this.keysToEnter=[],e.forEach((function(e){return t.performEnter(e,t.childRefs[e])}));var r=this.keysToLeave;this.keysToLeave=[],r.forEach((function(e){return t.performLeave(e,t.childRefs[e])}))},e.prototype.render=function(){var t=this,e=[],r=function(r){var a=t.state.children[r];if(a){var i="string"!==typeof a.ref,s=t.props.childFactory(a),c=function(e){t.childRefs[r]=e};s===a&&i&&(c=(0,n.default)(a.ref,c)),e.push(o.default.cloneElement(s,{key:r,ref:c}))}};for(var i in this.state.children)r(i);var s=a({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,o.default.createElement(this.props.component,s,e)},e}(o.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(t){return t}},e.default=l,t.exports=e.default},9121:(t,e,r)=>{var a=r(2091),n=r(227),o=r(2387),i=r(6982),s=r(7387);t.exports=function(t,e,r){var c=t.constructor;switch(e){case"[object ArrayBuffer]":return a(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return n(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,r);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return o(t);case"[object Symbol]":return i(t)}}},9126:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(9338),c=r(9614),l=r(8498),u=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],h="up",d="right",p="down",f="left",g=u.length,y=function(t){function e(e){var r=t.call(this,e)||this;return r.on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),r}return a(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,r=this,a=function(){r._sync()};for(e=0;e<g;e++)t.on(u[e]+"Change.konva",a)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,r,a,n,o,i,s=this.getText(),c=this.getTag();if(s&&c){switch(t=s.width(),e=s.height(),r=c.pointerDirection(),a=c.pointerWidth(),i=c.pointerHeight(),n=0,o=0,r){case h:n=t/2,o=-1*i;break;case d:n=t+a,o=e/2;break;case p:n=t/2,o=e+i;break;case f:n=-1*a,o=e/2}c.setAttrs({x:-1*n,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*n,y:-1*o})}},e}(s.Group);e.Label=y,y.prototype.className="Label",l._registerNode(y),n.Collection.mapMethods(y);var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),r=this.height(),a=this.pointerDirection(),n=this.pointerWidth(),o=this.pointerHeight(),i=Math.min(this.cornerRadius(),e/2,r/2);t.beginPath(),i?t.moveTo(i,0):t.moveTo(0,0),a===h&&(t.lineTo((e-n)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+n)/2,0)),i?(t.lineTo(e-i,0),t.arc(e-i,i,i,3*Math.PI/2,0,!1)):t.lineTo(e,0),a===d&&(t.lineTo(e,(r-o)/2),t.lineTo(e+n,r/2),t.lineTo(e,(r+o)/2)),i?(t.lineTo(e,r-i),t.arc(e-i,r-i,i,0,Math.PI/2,!1)):t.lineTo(e,r),a===p&&(t.lineTo((e+n)/2,r),t.lineTo(e/2,r+o),t.lineTo((e-n)/2,r)),i?(t.lineTo(i,r),t.arc(i,r-i,i,Math.PI/2,Math.PI,!1)):t.lineTo(0,r),a===f&&(t.lineTo(0,(r+o)/2),t.lineTo(-1*n,r/2),t.lineTo(0,(r-o)/2)),i&&(t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,r=this.pointerWidth(),a=this.pointerHeight(),n=this.pointerDirection(),o=this.width(),i=this.height();return n===h?(e-=a,i+=a):n===p?i+=a:n===f?(t-=1.5*r,o+=r):n===d&&(o+=1.5*r),{x:t,y:e,width:o,height:i}},e}(i.Shape);e.Tag=m,m.prototype.className="Tag",l._registerNode(m),o.Factory.addGetterSetter(m,"pointerDirection","none"),o.Factory.addGetterSetter(m,"pointerWidth",0,c.getNumberValidator()),o.Factory.addGetterSetter(m,"pointerHeight",0,c.getNumberValidator()),o.Factory.addGetterSetter(m,"cornerRadius",0,c.getNumberValidator()),n.Collection.mapMethods(m)},9137:(t,e,r)=>{var a=r(5151),n=Object.prototype,o=n.hasOwnProperty,i=n.toString,s=a?a.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),r=t[s];try{t[s]=void 0;var a=!0}catch(c){}var n=i.call(t);return a&&(e?t[s]=r:delete t[s]),n}},9223:(t,e,r)=>{var a=r(7202);t.exports=function(t,e){for(var r=t.length;r--;)if(a(t[r][0],e))return r;return-1}},9264:(t,e,r)=>{var a=r(2969),n=r(2962),o=r(7748);t.exports=function(t){return o(t)?a(t):n(t)}},9316:(t,e)=>{"use strict";e.__esModule=!0,e.default=void 0;var r=!("undefined"===typeof window||!window.document||!window.document.createElement);e.default=r,t.exports=e.default},9338:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(4222),i=r(8498),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&n.Util.throw("You may only add groups and shapes to groups.")},e}(o.Container);e.Group=s,s.prototype.nodeType="Group",i._registerNode(s),n.Collection.mapMethods(s)},9342:(t,e,r)=>{var a=r(3823);function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var a=arguments,n=e?e.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var i=t.apply(this,a);return r.cache=o.set(n,i)||o,i};return r.cache=new(n.Cache||a),r}n.Cache=a,t.exports=n},9358:(t,e,r)=>{t.exports=r(3176)()},9375:(t,e,r)=>{var a=r(4126),n=r(4796),o=a?function(t){return a.get(t)}:n;t.exports=o},9423:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(8498),n=r(2261);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){e.DD._dragElements.forEach((function(e,r){var a=e.node,o=a.getStage();o.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=n.Util._getFirstPointerId(t));var i=o._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(i){if("dragging"!==e.dragStatus){var s=a.dragDistance();if(Math.max(Math.abs(i.x-e.startPointerPos.x),Math.abs(i.y-e.startPointerPos.y))<s)return;if(a.startDrag({evt:t}),!a.isDragging())return}a._setDragPosition(t,e),a.fire("dragmove",{type:"dragmove",target:a,evt:t},!0)}}))},_endDragBefore:function(t){e.DD._dragElements.forEach((function(r,n){var o=r.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find((function(t){return t.id===r.pointerId}))){"dragging"!==r.dragStatus&&"stopped"!==r.dragStatus||(e.DD.justDragged=!0,a.Konva.listenClickTap=!1,r.dragStatus="stopped");var i=r.node.getLayer()||r.node instanceof a.Konva.Stage&&r.node;i&&i.draw()}}))},_endDragAfter:function(t){e.DD._dragElements.forEach((function(r,a){"stopped"===r.dragStatus&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),"dragging"!==r.dragStatus&&e.DD._dragElements.delete(a)}))}},a.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},9461:(t,e,r)=>{var a=r(6891),n=r(3312);t.exports=function(t,e,r,o){var i=r.length,s=i,c=!o;if(null==t)return!s;for(t=Object(t);i--;){var l=r[i];if(c&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<s;){var u=(l=r[i])[0],h=t[u],d=l[1];if(c&&l[2]){if(void 0===h&&!(u in t))return!1}else{var p=new a;if(o)var f=o(h,d,u,t,e,p);if(!(void 0===f?n(d,h,3,o,p):f))return!1}}return!0}},9470:(t,e,r)=>{var a=r(9800),n=r(8619),o=r(2399);t.exports=function(t){return o(n(t,void 0,a),t+"")}},9509:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(8498),n=new Map,o=void 0!==a.Konva._global.PointerEvent;function i(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var r=n.get(t);if(r){var a=r.getStage();a&&a.content,n.delete(t),o&&r._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return n.get(t)},e.createEvent=i,e.hasPointerCapture=function(t,e){return n.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(n.set(t,e),o&&e._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},9520:(t,e,r)=>{var a=r(7650),n=r(4916);t.exports=function(t){return n(t)&&"[object Arguments]"==a(t)}},9542:(t,e,r)=>{var a=r(6643),n=r(2009),o=r(9605);t.exports=function(){this.size=0,this.__data__={hash:new a,map:new(o||n),string:new a}}},9545:(t,e,r)=>{var a=r(7837),n=r(9882);t.exports=function(t,e,r,o){var i=!r;r||(r={});for(var s=-1,c=e.length;++s<c;){var l=e[s],u=o?o(r[l],t[l],l,r,t):void 0;void 0===u&&(u=t[l]),i?n(r,l,u):a(r,l,u)}return r}},9548:(t,e,r)=>{t=r.nmd(t);var a=r(8731),n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,i=o&&o.exports===n?a.Buffer:void 0,s=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,a=s?s(r):new t.constructor(r);return t.copy(a),a}},9582:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(2261),o=r(3887),i=r(4528),s=r(1633),c=r(7641),l=r(9614),u=r(8498),h="normal";function d(t){t.fillText(this.partialText,0,0)}function p(t){t.strokeText(this.partialText,0,0)}var f=function(t){function e(e){var r=t.call(this,e)||this;return r.dummyCanvas=n.Util.createCanvasElement(),r.dataArray=[],r.dataArray=s.Path.parsePathData(r.attrs.data),r.on("dataChange.konva",(function(){this.dataArray=s.Path.parsePathData(this.attrs.data),this._setTextData()})),r.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",r._setTextData),e&&e.getKerning&&(n.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),r.kerningFunc(e.getKerning)),r._setTextData(),r}return a(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),r=this.fill(),a=this.fontSize(),n=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<n.length;o++){t.save();var i=n[o].p0;t.translate(i.x,i.y),t.rotate(n[o].rotation),this.partialText=n[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,a/2+1),t.lineTo(a,a/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=r,t.lineWidth=a/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var r=e[0].p0;t.moveTo(r.x,r.y)}for(var a=0;a<e.length;a++){var n=e[a].p1;t.lineTo(n.x,n.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return c.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return c.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var r=e.measureText(t);return e.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),r=this.letterSpacing(),a=this.align(),n=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var i=0,c=0;c<t.dataArray.length;c++)t.dataArray[c].pathLength>0&&(i+=t.dataArray[c].pathLength);var l=0;"center"===a&&(l=Math.max(0,i/2-o/2)),"right"===a&&(l=Math.max(0,i-o));for(var u,h,d,p=this.text().split(""),f=this.text().split(" ").length-1,g=-1,y=0,m=function(){y=0;for(var e=t.dataArray,r=g+1;r<e.length;r++){if(e[r].pathLength>0)return g=r,e[r];"M"===e[r].command&&(u={x:e[r].points[0],y:e[r].points[1]})}return{}},_=function(e){var n=t._getTextSize(e).width+r;" "===e&&"justify"===a&&(n+=(i-o)/f);var c=0,l=0;for(h=void 0;Math.abs(n-c)/n>.01&&l<25;){l++;for(var p=c;void 0===d;)(d=m())&&p+d.pathLength<n&&(p+=d.pathLength,d=void 0);if(d==={}||void 0===u)return;var g=!1;switch(d.command){case"L":s.Path.getLineLength(u.x,u.y,d.points[0],d.points[1])>n?h=s.Path.getPointOnLine(n,u.x,u.y,d.points[0],d.points[1],u.x,u.y):d=void 0;break;case"A":var _=d.points[4],v=d.points[5],b=d.points[4]+v;0===y?y=_+1e-8:n>c?y+=Math.PI/180*v/Math.abs(v):y-=Math.PI/360*v/Math.abs(v),(v<0&&y<b||v>=0&&y>b)&&(y=b,g=!0),h=s.Path.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],y,d.points[6]);break;case"C":0===y?y=n>d.pathLength?1e-8:n/d.pathLength:n>c?y+=(n-c)/d.pathLength:y-=(c-n)/d.pathLength,y>1&&(y=1,g=!0),h=s.Path.getPointOnCubicBezier(y,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===y?y=n/d.pathLength:n>c?y+=(n-c)/d.pathLength:y-=(c-n)/d.pathLength,y>1&&(y=1,g=!0),h=s.Path.getPointOnQuadraticBezier(y,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==h&&(c=s.Path.getLineLength(u.x,u.y,h.x,h.y)),g&&(g=!1,d=void 0)}},v=l/(t._getTextSize("C").width+r)-1,b=0;b<v&&(_("C"),void 0!==u&&void 0!==h);b++)u=h;for(var w=0;w<p.length&&(_(p[w]),void 0!==u&&void 0!==h);w++){var x=s.Path.getLineLength(u.x,u.y,h.x,h.y),O=0;if(n)try{O=n(p[w-1],p[w])*this.fontSize()}catch(C){O=0}u.x+=O,h.x+=O,this.textWidth+=O;var R=s.Path.getPointOnLine(O+x/2,u.x,u.y,h.x,h.y),A=Math.atan2(h.y-u.y,h.x-u.x);this.glyphInfo.push({transposeX:R.x,transposeY:R.y,text:p[w],rotation:A,p0:u,p1:h}),u=h}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,r,a=t[0]||0,n=t[0]||0,o=t[1]||0,i=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],r=t[2*s+1],a=Math.min(a,e),n=Math.max(n,e),o=Math.min(o,r),i=Math.max(i,r);var c=this.fontSize();return{x:a-c/2,y:o-c/2,width:n-a+c,height:i-o+c}},e}(i.Shape);e.TextPath=f,f.prototype._fillFunc=d,f.prototype._strokeFunc=p,f.prototype._fillFuncHit=d,f.prototype._strokeFuncHit=p,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],u._registerNode(f),o.Factory.addGetterSetter(f,"data"),o.Factory.addGetterSetter(f,"fontFamily","Arial"),o.Factory.addGetterSetter(f,"fontSize",12,l.getNumberValidator()),o.Factory.addGetterSetter(f,"fontStyle",h),o.Factory.addGetterSetter(f,"align","left"),o.Factory.addGetterSetter(f,"letterSpacing",0,l.getNumberValidator()),o.Factory.addGetterSetter(f,"textBaseline","middle"),o.Factory.addGetterSetter(f,"fontVariant",h),o.Factory.addGetterSetter(f,"text",""),o.Factory.addGetterSetter(f,"textDecoration",null),o.Factory.addGetterSetter(f,"kerningFunc",null),n.Collection.mapMethods(f)},9605:(t,e,r)=>{var a=r(2856)(r(8731),"Map");t.exports=a},9614:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(8498),n=r(2261);function o(t){return n.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||n.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(a.Konva.isUnminified)return function(t,e){return n.Util._isNumber(t)||n.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrAutoValidator=function(){if(a.Konva.isUnminified)return function(t,e){return n.Util._isNumber(t)||"auto"===t||n.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(a.Konva.isUnminified)return function(t,e){return n.Util._isString(t)||n.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getFunctionValidator=function(){if(a.Konva.isUnminified)return function(t,e){return n.Util._isFunction(t)||n.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(a.Konva.isUnminified)return function(t,e){return n.Util._isArray(t)?t.forEach((function(t){n.Util._isNumber(t)||n.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):n.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(a.Konva.isUnminified)return function(t,e){return!0===t||!1===t||n.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(a.Konva.isUnminified)return function(e,r){return n.Util.isObject(e)||n.Util.warn(o(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}},9616:(t,e,r)=>{var a=r(5298),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=a((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(n,(function(t,r,a,n){e.push(a?n.replace(o,"$1"):r||t)})),e}));t.exports=i},9636:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(2261),i=r(9614);e.Kaleidoscope=function(t){var e,r,a,n,i,s,c,l,u,h=t.width,d=t.height,p=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),g=Math.floor(h*(f%360)/360);if(!(p<1)){var y=o.Util.createCanvasElement();y.width=h,y.height=d;var m=y.getContext("2d").getImageData(0,0,h,d);!function(t,e,r){var a,n,o,i,s=t.data,c=e.data,l=t.width,u=t.height,h=r.polarCenterX||l/2,d=r.polarCenterY||u/2,p=0,f=0,g=0,y=0,m=Math.sqrt(h*h+d*d);n=l-h,o=u-d,m=(i=Math.sqrt(n*n+o*o))>m?i:m;var _,v,b,w,x=u,O=l,R=360/O*Math.PI/180;for(v=0;v<O;v+=1)for(b=Math.sin(v*R),w=Math.cos(v*R),_=0;_<x;_+=1)n=Math.floor(h+m*_/x*w),p=s[0+(a=4*((o=Math.floor(d+m*_/x*b))*l+n))],f=s[a+1],g=s[a+2],y=s[a+3],c[0+(a=4*(v+_*l))]=p,c[a+1]=f,c[a+2]=g,c[a+3]=y}(t,m,{polarCenterX:h/2,polarCenterY:d/2});for(var _=h/Math.pow(2,p);_<=8;)_*=2,p-=1;var v=_=Math.ceil(_),b=0,w=v,x=1;for(g+_>h&&(b=v,w=0,x=-1),r=0;r<d;r+=1)for(e=b;e!==w;e+=x)l=4*(h*r+Math.round(e+g)%h),n=m.data[l+0],i=m.data[l+1],s=m.data[l+2],c=m.data[l+3],u=4*(h*r+e),m.data[u+0]=n,m.data[u+1]=i,m.data[u+2]=s,m.data[u+3]=c;for(r=0;r<d;r+=1)for(v=Math.floor(_),a=0;a<p;a+=1){for(e=0;e<v+1;e+=1)l=4*(h*r+e),n=m.data[l+0],i=m.data[l+1],s=m.data[l+2],c=m.data[l+3],u=4*(h*r+2*v-e-1),m.data[u+0]=n,m.data[u+1]=i,m.data[u+2]=s,m.data[u+3]=c;v*=2}!function(t,e,r){var a,n,o,i,s,c,l=t.data,u=e.data,h=t.width,d=t.height,p=r.polarCenterX||h/2,f=r.polarCenterY||d/2,g=0,y=0,m=0,_=0,v=Math.sqrt(p*p+f*f);n=h-p,o=d-f,v=(c=Math.sqrt(n*n+o*o))>v?c:v;var b,w,x,O=d,R=h,A=r.polarRotation||0;for(n=0;n<h;n+=1)for(o=0;o<d;o+=1)i=n-p,s=o-f,b=Math.sqrt(i*i+s*s)*O/v,w=(w=(180*Math.atan2(s,i)/Math.PI+360+A)%360)*R/360,x=Math.floor(w),g=l[0+(a=4*(Math.floor(b)*h+x))],y=l[a+1],m=l[a+2],_=l[a+3],u[0+(a=4*(o*h+n))]=g,u[a+1]=y,u[a+2]=m,u[a+3]=_}(m,t,{polarRotation:0})}},a.Factory.addGetterSetter(n.Node,"kaleidoscopePower",2,i.getNumberValidator(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(n.Node,"kaleidoscopeAngle",0,i.getNumberValidator(),a.Factory.afterSetFilter)},9685:function(t,e,r){"use strict";var a=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(2261),i=r(1890),s=r(8498),c=r(3887),l=r(9614);var u=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||s.Konva.pixelRatio||function(){if(n)return n;var t=o.Util.createCanvasElement().getContext("2d");return n=(s.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(r){try{return this._canvas.toDataURL()}catch(a){return o.Util.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t}();e.Canvas=u,c.Factory.addGetterSetter(u,"pixelRatio",void 0,l.getNumberValidator());var h=function(t){function e(e){void 0===e&&(e={width:0,height:0});var r=t.call(this,e)||this;return r.context=new i.SceneContext(r),r.setSize(e.width,e.height),r}return a(e,t),e}(u);e.SceneCanvas=h;var d=function(t){function e(e){void 0===e&&(e={width:0,height:0});var r=t.call(this,e)||this;return r.hitCanvas=!0,r.context=new i.HitContext(r),r.setSize(e.width,e.height),r}return a(e,t),e}(u);e.HitCanvas=d},9787:(t,e,r)=>{var a=r(2009),n=r(9605),o=r(3823);t.exports=function(t,e){var r=this.__data__;if(r instanceof a){var i=r.__data__;if(!n||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new o(i)}return r.set(t,e),this.size=r.size,this}},9795:t=>{t.exports=function(){}},9799:(t,e,r)=>{var a=r(9545),n=r(9264);t.exports=function(t,e){return t&&a(e,n(e),t)}},9800:(t,e,r)=>{var a=r(1702);t.exports=function(t){return(null==t?0:t.length)?a(t,1):[]}},9811:(t,e,r)=>{var a=r(1516);t.exports=function(t){if("string"==typeof t||a(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},9824:(t,e,r)=>{var a=r(7257);t.exports=function(t){var e=a(this,t).delete(t);return this.size-=e?1:0,e}},9855:(t,e,r)=>{var a=r(7922),n=r(7097),o=r(1229);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:a(n(t))}},9882:(t,e,r)=>{var a=r(1353);t.exports=function(t,e,r){"__proto__"==e&&a?a(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},9911:(t,e,r)=>{var a=r(2852),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(a){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(e,t)?e[t]:void 0}},9942:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3887),n=r(3069),o=r(9614);e.RGB=function(t){var e,r,a=t.data,n=a.length,o=this.red(),i=this.green(),s=this.blue();for(e=0;e<n;e+=4)r=(.34*a[e]+.5*a[e+1]+.16*a[e+2])/255,a[e]=r*o,a[e+1]=r*i,a[e+2]=r*s,a[e+3]=a[e+3]},a.Factory.addGetterSetter(n.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),a.Factory.addGetterSetter(n.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),a.Factory.addGetterSetter(n.Node,"blue",0,o.RGBComponent,a.Factory.afterSetFilter)},9987:t=>{t.exports=function(t,e){for(var r=-1,a=null==t?0:t.length;++r<a&&!1!==e(t[r],r,t););return t}}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};r.r(t),r.d(t,{addDrone:()=>Br,addDroneGrenadier:()=>zr,addHunter:()=>Hr,addRandomGrub:()=>Kr,addScion:()=>Vr,addSkorge:()=>qr,addWretch:()=>Wr,createRandomBasicGrub:()=>Yr});var e=r(1561),a=r(5271),n=r(8377),o=r.n(n);const i="Title",s="Level",c="Lose",l="Win",u="CharacterSelect",h="ModeSelect",d=2.3283064365386963e-10;class p{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(t){return t=t<1?1/t:t,this._seed=t,this._s0=(t>>>0)*d,t=69069*t+1>>>0,this._s1=t*d,t=69069*t+1>>>0,this._s2=t*d,this._c=1,this}getUniform(){let t=2091639*this._s0+this._c*d;return this._s0=this._s1,this._s1=this._s2,this._c=0|t,this._s2=t-this._c,this._s2}getUniformInt(t,e){let r=Math.max(t,e),a=Math.min(t,e);return Math.floor(this.getUniform()*(r-a+1))+a}getNormal(){let t,e,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;do{t=2*this.getUniform()-1,e=2*this.getUniform()-1,r=t*t+e*e}while(r>1||0==r);return a+t*Math.sqrt(-2*Math.log(r)/r)*n}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(t){return t.length?t[Math.floor(this.getUniform()*t.length)]:null}shuffle(t){let e=[],r=t.slice();for(;r.length;){let t=r.indexOf(this.getItem(r));e.push(r.splice(t,1)[0])}return e}getWeightedValue(t){let e=0;for(let o in t)e+=t[o];let r,a=this.getUniform()*e,n=0;for(r in t)if(n+=t[r],a<n)return r;return r}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(t){return this._s0=t[0],this._s1=t[1],this._s2=t[2],this._c=t[3],this}clone(){return(new p).setState(this.getState())}}const f=(new p).setSeed(Date.now());class g{getContainer(){return null}setOptions(t){this._options=t}}class y extends g{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(t){requestAnimationFrame(t)}getContainer(){return this._ctx.canvas}setOptions(t){super.setOptions(t);const e=`${t.fontStyle?`${t.fontStyle} `:""} ${t.fontSize}px ${t.fontFamily}`;this._ctx.font=e,this._updateSize(),this._ctx.font=e,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){const t=this._ctx.globalCompositeOperation;this._ctx.globalCompositeOperation="copy",this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._ctx.globalCompositeOperation=t}eventToPosition(t,e){let r=this._ctx.canvas,a=r.getBoundingClientRect();return t-=a.left,e-=a.top,t*=r.width/a.width,e*=r.height/a.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}}function m(t,e){return(t%e+e)%e}class _ extends y{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(t,e){let[r,a,n,o,i]=t,s=[(r+1)*this._spacingX,a*this._spacingY+this._hexSize];if(this._options.transpose&&s.reverse(),e&&(this._ctx.fillStyle=i,this._fill(s[0],s[1])),!n)return;this._ctx.fillStyle=o;let c=[].concat(n);for(let l=0;l<c.length;l++)this._ctx.fillText(c[l],s[0],Math.ceil(s[1]))}computeSize(t,e){return this._options.transpose&&(t+=e,t-=e=t-e),[Math.floor(t/this._spacingX)-1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]}computeFontSize(t,e){this._options.transpose&&(t+=e,t-=e=t-e);let r=2*t/((this._options.width+1)*Math.sqrt(3))-1,a=e/(2+1.5*(this._options.height-1)),n=Math.min(r,a),o=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let i=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=o;let s=i/100;n=Math.floor(n)+1;let c=2*n/(this._options.spacing*(1+s/Math.sqrt(3)));return Math.ceil(c)-1}_normalizedEventToPosition(t,e){let r;this._options.transpose?(t+=e,t-=e=t-e,r=this._ctx.canvas.width):r=this._ctx.canvas.height;let a=r/this._options.height;return m(e=Math.floor(e/a),2)?(t-=this._spacingX,t=1+2*Math.floor(t/(2*this._spacingX))):t=2*Math.floor(t/(2*this._spacingX)),[t,e]}_fill(t,e){let r=this._hexSize,a=this._options.border;const n=this._ctx;n.beginPath(),this._options.transpose?(n.moveTo(t-r+a,e),n.lineTo(t-r/2+a,e+this._spacingX-a),n.lineTo(t+r/2-a,e+this._spacingX-a),n.lineTo(t+r-a,e),n.lineTo(t+r/2-a,e-this._spacingX+a),n.lineTo(t-r/2+a,e-this._spacingX+a),n.lineTo(t-r+a,e)):(n.moveTo(t,e-r+a),n.lineTo(t+this._spacingX-a,e-r/2+a),n.lineTo(t+this._spacingX-a,e+r/2-a),n.lineTo(t,e+r-a),n.lineTo(t-this._spacingX+a,e+r/2-a),n.lineTo(t-this._spacingX+a,e-r/2+a),n.lineTo(t,e-r+a)),n.fill()}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);let r,a;this._hexSize=Math.floor(t.spacing*(t.fontSize+e/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,t.transpose?(r="height",a="width"):(r="width",a="height"),this._ctx.canvas[r]=Math.ceil((t.width+1)*this._spacingX),this._ctx.canvas[a]=Math.ceil((t.height-1)*this._spacingY+2*this._hexSize)}}class v extends y{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(t){super.setOptions(t),this._canvasCache={}}draw(t,e){v.cache?this._drawWithCache(t):this._drawNoCache(t,e)}_drawWithCache(t){let e,[r,a,n,o,i]=t,s=""+n+o+i;if(s in this._canvasCache)e=this._canvasCache[s];else{let t=this._options.border;e=document.createElement("canvas");let r=e.getContext("2d");if(e.width=this._spacingX,e.height=this._spacingY,r.fillStyle=i,r.fillRect(t,t,e.width-t,e.height-t),n){r.fillStyle=o,r.font=this._ctx.font,r.textAlign="center",r.textBaseline="middle";let t=[].concat(n);for(let e=0;e<t.length;e++)r.fillText(t[e],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[s]=e}this._ctx.drawImage(e,r*this._spacingX,a*this._spacingY)}_drawNoCache(t,e){let[r,a,n,o,i]=t;if(e){let t=this._options.border;this._ctx.fillStyle=i,this._ctx.fillRect(r*this._spacingX+t,a*this._spacingY+t,this._spacingX-t,this._spacingY-t)}if(!n)return;this._ctx.fillStyle=o;let s=[].concat(n);for(let c=0;c<s.length;c++)this._ctx.fillText(s[c],(r+.5)*this._spacingX,Math.ceil((a+.5)*this._spacingY))}computeSize(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}computeFontSize(t,e){let r=Math.floor(t/this._options.width),a=Math.floor(e/this._options.height),n=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let o=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=n;let i=o/100*a/r;return i>1&&(a=Math.floor(a/i)),Math.floor(a/this._options.spacing)}_normalizedEventToPosition(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(t.spacing*e),this._spacingY=Math.ceil(t.spacing*t.fontSize),t.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=t.width*this._spacingX,this._ctx.canvas.height=t.height*this._spacingY}}v.cache=!1;class b extends y{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(t,e){let[r,a,n,o,i]=t,s=this._options.tileWidth,c=this._options.tileHeight;if(e&&(this._options.tileColorize?this._ctx.clearRect(r*s,a*c,s,c):(this._ctx.fillStyle=i,this._ctx.fillRect(r*s,a*c,s,c))),!n)return;let l=[].concat(n),u=[].concat(o),h=[].concat(i);for(let d=0;d<l.length;d++){let t=this._options.tileMap[l[d]];if(!t)throw new Error(`Char "${l[d]}" not found in tileMap`);if(this._options.tileColorize){let e=this._colorCanvas,n=e.getContext("2d");n.globalCompositeOperation="source-over",n.clearRect(0,0,s,c);let o=u[d],i=h[d];n.drawImage(this._options.tileSet,t[0],t[1],s,c,0,0,s,c),"transparent"!=o&&(n.fillStyle=o,n.globalCompositeOperation="source-atop",n.fillRect(0,0,s,c)),"transparent"!=i&&(n.fillStyle=i,n.globalCompositeOperation="destination-over",n.fillRect(0,0,s,c)),this._ctx.drawImage(e,r*s,a*c,s,c)}else this._ctx.drawImage(this._options.tileSet,t[0],t[1],s,c,r*s,a*c,s,c)}}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._options;this._ctx.canvas.width=t.width*t.tileWidth,this._ctx.canvas.height=t.height*t.tileHeight,this._colorCanvas.width=t.tileWidth,this._colorCanvas.height=t.tileHeight}}function w(t){let e,r;if(t in x)e=x[t];else{if("#"==t.charAt(0)){let r=(t.match(/[0-9a-f]/gi)||[]).map((t=>parseInt(t,16)));if(3==r.length)e=r.map((t=>17*t));else{for(let t=0;t<3;t++)r[t+1]+=16*r[t],r.splice(t,1);e=r}}else e=(r=t.match(/rgb\(([0-9, ]+)\)/i))?r[1].split(/\s*,\s*/).map((t=>parseInt(t))):[0,0,0];x[t]=e}return e.slice()}const x={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]};class O extends g{constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(t){"string"===typeof t?alert(t):t instanceof Error&&alert(t.message)}}static isSupported(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}schedule(t){requestAnimationFrame(t)}getContainer(){return this._gl.canvas}setOptions(t){super.setOptions(t),this._updateSize();let e=this._options.tileSet;e&&"complete"in e&&!e.complete?e.addEventListener("load",(()=>this._updateTexture(e))):this._updateTexture(e)}draw(t,e){const r=this._gl,a=this._options;let[n,o,i,s,c]=t,l=r.canvas.height-(o+1)*a.tileHeight;if(r.scissor(n*a.tileWidth,l,a.tileWidth,a.tileHeight),e&&(a.tileColorize?r.clearColor(0,0,0,0):r.clearColor(...E(c)),r.clear(r.COLOR_BUFFER_BIT)),!i)return;let u=[].concat(i),h=[].concat(c),d=[].concat(s);r.uniform2fv(this._uniforms.targetPosRel,[n,o]);for(let p=0;p<u.length;p++){let t=this._options.tileMap[u[p]];if(!t)throw new Error(`Char "${u[p]}" not found in tileMap`);r.uniform1f(this._uniforms.colorize,a.tileColorize?1:0),r.uniform2fv(this._uniforms.tilesetPosAbs,t),a.tileColorize&&(r.uniform4fv(this._uniforms.tint,E(d[p])),r.uniform4fv(this._uniforms.bg,E(h[p]))),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}clear(){const t=this._gl;t.clearColor(...E(this._options.bg)),t.scissor(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(t,e){let r=this._gl.canvas,a=r.getBoundingClientRect();return t-=a.left,e-=a.top,t*=r.width/a.width,e*=r.height/a.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}_initWebGL(){let t=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=t;let e=function(t,e,r){const a=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(a,e),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(a)||"");const n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n)||"");const o=t.createProgram();if(t.attachShader(o,a),t.attachShader(o,n),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(o)||"");return o}(t,A,C);return t.useProgram(e),function(t){const e=new Float32Array([0,0,1,0,0,1,1,1]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0)}(t),R.forEach((r=>this._uniforms[r]=t.getUniformLocation(e,r))),this._program=e,t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.SCISSOR_TEST),t}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._gl,e=this._options,r=[e.width*e.tileWidth,e.height*e.tileHeight];t.canvas.width=r[0],t.canvas.height=r[1],t.viewport(0,0,r[0],r[1]),t.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]),t.uniform2fv(this._uniforms.targetSize,r)}_updateTexture(t){!function(t,e){let r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}(this._gl,t)}}const R=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],A="\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim(),C="\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}".trim();let k={};function E(t){if(!(t in k)){let e;if("transparent"==t)e=[0,0,0,0];else if(t.indexOf("rgba")>-1){e=(t.match(/[\d.]+/g)||[]).map(Number);for(let t=0;t<3;t++)e[t]=e[t]/255}else e=w(t).map((t=>t/255)),e.push(1);k[t]=e}return k[t]}function S(t){const e=6/256;let r=w(t);return 36*Math.floor(r[0]*e)+6*Math.floor(r[1]*e)+1*Math.floor(r[2]*e)+16}class T extends g{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}schedule(t){setTimeout(t,1e3/60)}setOptions(t){super.setOptions(t);let e=[t.width,t.height],r=this.computeSize();this._offset=r.map(((t,r)=>Math.floor((t-e[r])/2)))}clear(){process.stdout.write(`\x1b[0;48;5;${S(this._options.bg)}m\x1b[2J`)}draw(t,e){let[r,a,n,o,i]=t,s=this._offset[0]+r,c=this._offset[1]+a,l=this.computeSize();if(s<0||s>=l[0])return;if(c<0||c>=l[1])return;if(s===this._cursor[0]&&c===this._cursor[1]||(process.stdout.write(function(t,e){return`\x1b[${e+1};${t+1}H`}(s,c)),this._cursor[0]=s,this._cursor[1]=c),e&&(n||(n=" ")),!n)return;let u=function(t,e){return`\x1b[0;38;5;${S(t)};48;5;${S(e)}m`}(o,i);if(u!==this._lastColor&&(process.stdout.write(u),this._lastColor=u),"\t"!=n){let t=[].concat(n);process.stdout.write(t[0])}this._cursor[0]++,this._cursor[0]>=l[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(t,e){return[t,e]}computeSize(){return[process.stdout.columns,process.stdout.rows]}}const L=/%([bc]){([^}]*)}/g;function D(t,e){let r=[],a=0;t.replace(L,(function(e,n,o,i){let s=t.substring(a,i);return s.length&&r.push({type:0,value:s}),r.push({type:"c"==n?2:3,value:o.trim()}),a=i+e.length,""}));let n=t.substring(a);return n.length&&r.push({type:0,value:n}),function(t,e){e||(e=1/0);let r=0,a=0,n=-1;for(;r<t.length;){let o=t[r];if(1==o.type&&(a=0,n=-1),0!=o.type){r++;continue}for(;0==a&&" "==o.value.charAt(0);)o.value=o.value.substring(1);let i=o.value.indexOf("\n");if(-1!=i){o.value=N(t,r,i,!0);let e=o.value.split("");for(;e.length&&" "==e[e.length-1];)e.pop();o.value=e.join("")}if(o.value.length){if(a+o.value.length>e){let i=-1;for(;;){let t=o.value.indexOf(" ",i+1);if(-1==t)break;if(a+t>e)break;i=t}if(-1!=i)o.value=N(t,r,i,!0);else if(-1!=n){let e=t[n],a=e.value.lastIndexOf(" ");e.value=N(t,n,a,!0),r=n}else o.value=N(t,r,e-a,!1)}else a+=o.value.length,-1!=o.value.indexOf(" ")&&(n=r);r++}else t.splice(r,1)}t.push({type:1});let o=null;for(let i=0;i<t.length;i++){let e=t[i];switch(e.type){case 0:o=e;break;case 1:if(o){let t=o.value.split("");for(;t.length&&" "==t[t.length-1];)t.pop();o.value=t.join("")}o=null}}return t.pop(),t}(r,e)}function N(t,e,r,a){let n={type:1},o={type:0,value:t[e].value.substring(r+(a?1:0))};return t.splice(e+1,0,n,o),t[e].value.substring(0,r)}const P={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},U={hex:_,rect:v,tile:b,"tile-gl":O,term:T},G={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class I{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._data={},this._dirty=!1,this._options={},t=Object.assign({},G,t),this.setOptions(t),this.DEBUG=this.DEBUG.bind(this),this._tick=this._tick.bind(this),this._backend.schedule(this._tick)}DEBUG(t,e,r){let a=[this._options.bg,this._options.fg];this.draw(t,e,null,null,a[r%a.length])}clear(){this._data={},this._dirty=!0}setOptions(t){if(Object.assign(this._options,t),t.width||t.height||t.fontSize||t.fontFamily||t.spacing||t.layout){if(t.layout){let e=U[t.layout];this._backend=new e}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(t,e){return this._backend.computeSize(t,e)}computeFontSize(t,e){return this._backend.computeFontSize(t,e)}computeTileSize(t,e){return[Math.floor(t/this._options.width),Math.floor(e/this._options.height)]}eventToPosition(t){let e,r;return"touches"in t?(e=t.touches[0].clientX,r=t.touches[0].clientY):(e=t.clientX,r=t.clientY),this._backend.eventToPosition(e,r)}draw(t,e,r,a,n){a||(a=this._options.fg),n||(n=this._options.bg);let o=`${t},${e}`;this._data[o]=[t,e,r,a,n],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[o]=!0)}drawOver(t,e,r,a,n){const o=`${t},${e}`,i=this._data[o];i?(i[2]=r||i[2],i[3]=a||i[3],i[4]=n||i[4]):this.draw(t,e,r,a,n)}drawText(t,e,r,a){let n=null,o=null,i=t,s=e,c=1;a||(a=this._options.width-t);let l=D(r,a);for(;l.length;){let e=l.shift();switch(e.type){case 0:let r=!1,a=!1,l=!1,u=!1;for(let t=0;t<e.value.length;t++){let c=e.value.charCodeAt(t),h=e.value.charAt(t);if("term"===this._options.layout){let t=c>>8;if(17===t||t>=46&&t<=159||t>=172&&t<=215||c>=43360&&c<=43391){this.draw(i+0,s,h,n,o),this.draw(i+1,s,"\t",n,o),i+=2;continue}}l=c>65280&&c<65377||c>65500&&c<65512||c>65518,r=32==h.charCodeAt(0)||12288==h.charCodeAt(0),!u||l||r||i++,l&&!a&&i++,this.draw(i++,s,h,n,o),a=r,u=l}break;case 2:n=e.value||null;break;case 3:o=e.value||null;break;case 1:i=t,s++,c++}}return c}_tick(){if(this._backend.schedule(this._tick),this._dirty){if(!0===this._dirty){this._backend.clear();for(let t in this._data)this._draw(t,!1)}else for(let t in this._dirty)this._draw(t,!0);this._dirty=!1}}_draw(t,e){let r=this._data[t];r[4]!=this._options.bg&&(e=!0),this._backend.draw(r,e)}}I.Rect=v,I.Hex=_,I.Tile=b,I.TileGL=O,I.Term=T;class M{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._lightPasses=t,this._options=Object.assign({topology:8},e)}_getCircle(t,e,r){let a,n,o,i=[];switch(this._options.topology){case 4:n=1,o=[0,1],a=[P[8][7],P[8][1],P[8][3],P[8][5]];break;case 6:a=P[6],n=1,o=[-1,1];break;case 8:a=P[4],n=2,o=[-1,1];break;default:throw new Error("Incorrect topology for FOV computation")}let s=t+o[0]*r,c=e+o[1]*r;for(let l=0;l<a.length;l++)for(let t=0;t<r*n;t++)i.push([s,c]),s+=a[l][0],c+=a[l][1];return i}}const F=[[-1,0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];const j={DiscreteShadowcasting:class extends M{compute(t,e,r,a){if(a(t,e,0,1),!this._lightPasses(t,e))return;let n,o,i,s,c,l=[];for(let u=1;u<=r;u++){let r=this._getCircle(t,e,u),h=360/r.length;for(let t=0;t<r.length;t++)if(i=r[t][0],s=r[t][1],n=h*(t-.5),o=n+h,c=!this._lightPasses(i,s),this._visibleCoords(Math.floor(n),Math.ceil(o),c,l)&&a(i,s,u,1),2==l.length&&0==l[0]&&360==l[1])return}}_visibleCoords(t,e,r,a){if(t<0){let n=this._visibleCoords(0,e,r,a),o=this._visibleCoords(360+t,360,r,a);return n||o}let n=0;for(;n<a.length&&a[n]<t;)n++;if(n==a.length)return r&&a.push(t,e),!0;let o=0;if(n%2){for(;n<a.length&&a[n]<e;)n++,o++;return 0!=o&&(r&&(o%2?a.splice(n-o,o,e):a.splice(n-o,o)),!0)}for(;n<a.length&&a[n]<e;)n++,o++;return(t!=a[n-o]||1!=o)&&(r&&(o%2?a.splice(n-o,o,t):a.splice(n-o,o,t,e)),!0)}},PreciseShadowcasting:class extends M{compute(t,e,r,a){if(a(t,e,0,1),!this._lightPasses(t,e))return;let n,o,i,s,c,l,u=[];for(let h=1;h<=r;h++){let r=this._getCircle(t,e,h),d=r.length;for(let t=0;t<d;t++)if(n=r[t][0],o=r[t][1],s=[t?2*t-1:2*d-1,2*d],c=[2*t+1,2*d],i=!this._lightPasses(n,o),l=this._checkVisibility(s,c,i,u),l&&a(n,o,h,l),2==u.length&&0==u[0][0]&&u[1][0]==u[1][1])return}}_checkVisibility(t,e,r,a){if(t[0]>e[0]){return(this._checkVisibility(t,[t[1],t[1]],r,a)+this._checkVisibility([0,1],e,r,a))/2}let n=0,o=!1;for(;n<a.length;){let e=a[n],r=e[0]*t[1]-t[0]*e[1];if(r>=0){0!=r||n%2||(o=!0);break}n++}let i=a.length,s=!1;for(;i--;){let t=a[i],r=e[0]*t[1]-t[0]*e[1];if(r>=0){0==r&&i%2&&(s=!0);break}}let c,l=!0;if((n==i&&(o||s)||o&&s&&n+1==i&&i%2||n>i&&n%2)&&(l=!1),!l)return 0;let u=i-n+1;if(u%2)if(n%2){let t=a[n];c=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]),r&&a.splice(n,u,e)}else{let e=a[i];c=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]),r&&a.splice(n,u,t)}else{if(!(n%2))return r&&a.splice(n,u,t,e),1;{let t=a[n],e=a[i];c=(e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]),r&&a.splice(n,u)}}return c/((e[0]*t[1]-t[0]*e[1])/(t[1]*e[1]))}},RecursiveShadowcasting:class extends M{compute(t,e,r,a){a(t,e,0,1);for(let n=0;n<F.length;n++)this._renderOctant(t,e,F[n],r,a)}compute180(t,e,r,a,n){n(t,e,0,1);let o=(a-1+8)%8,i=(a-2+8)%8,s=(a+1+8)%8;this._renderOctant(t,e,F[i],r,n),this._renderOctant(t,e,F[o],r,n),this._renderOctant(t,e,F[a],r,n),this._renderOctant(t,e,F[s],r,n)}compute90(t,e,r,a,n){n(t,e,0,1);let o=(a-1+8)%8;this._renderOctant(t,e,F[a],r,n),this._renderOctant(t,e,F[o],r,n)}_renderOctant(t,e,r,a,n){this._castVisibility(t,e,1,1,0,a+1,r[0],r[1],r[2],r[3],n)}_castVisibility(t,e,r,a,n,o,i,s,c,l,u){if(!(a<n))for(let h=r;h<=o;h++){let r=-h-1,d=-h,p=!1,f=0;for(;r<=0;){r+=1;let g=t+r*i+d*s,y=e+r*c+d*l,m=(r-.5)/(d+.5),_=(r+.5)/(d-.5);if(!(_>a)){if(m<n)break;if(r*r+d*d<o*o&&u(g,y,h,1),p){if(!this._lightPasses(g,y)){f=_;continue}p=!1,a=f}else!this._lightPasses(g,y)&&h<o&&(p=!0,this._castVisibility(t,e,h+1,a,m,o,i,s,c,l,u),f=_)}}if(p)break}}}};class W{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:80,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;this._width=t,this._height=e}_fillMap(t){let e=[];for(let r=0;r<this._width;r++){e.push([]);for(let a=0;a<this._height;a++)e[r].push(t)}return e}}class B extends W{constructor(t,e){super(t,e),this._rooms=[],this._corridors=[]}getRooms(){return this._rooms}getCorridors(){return this._corridors}}class z{}class H extends z{constructor(t,e,r,a,n,o){super(),this._x1=t,this._y1=e,this._x2=r,this._y2=a,this._doors={},void 0!==n&&void 0!==o&&this.addDoor(n,o)}static createRandomAt(t,e,r,a,n){let o=n.roomWidth[0],i=n.roomWidth[1],s=f.getUniformInt(o,i);o=n.roomHeight[0],i=n.roomHeight[1];let c=f.getUniformInt(o,i);if(1==r){let r=e-Math.floor(f.getUniform()*c);return new this(t+1,r,t+s,r+c-1,t,e)}if(-1==r){let r=e-Math.floor(f.getUniform()*c);return new this(t-s,r,t-1,r+c-1,t,e)}if(1==a){let r=t-Math.floor(f.getUniform()*s);return new this(r,e+1,r+s-1,e+c,t,e)}if(-1==a){let r=t-Math.floor(f.getUniform()*s);return new this(r,e-c,r+s-1,e-1,t,e)}throw new Error("dx or dy must be 1 or -1")}static createRandomCenter(t,e,r){let a=r.roomWidth[0],n=r.roomWidth[1],o=f.getUniformInt(a,n);a=r.roomHeight[0],n=r.roomHeight[1];let i=f.getUniformInt(a,n),s=t-Math.floor(f.getUniform()*o),c=e-Math.floor(f.getUniform()*i);return new this(s,c,s+o-1,c+i-1)}static createRandom(t,e,r){let a=r.roomWidth[0],n=r.roomWidth[1],o=f.getUniformInt(a,n);a=r.roomHeight[0],n=r.roomHeight[1];let i=f.getUniformInt(a,n),s=t-o-1,c=e-i-1,l=1+Math.floor(f.getUniform()*s),u=1+Math.floor(f.getUniform()*c);return new this(l,u,l+o-1,u+i-1)}addDoor(t,e){return this._doors[t+","+e]=1,this}getDoors(t){for(let e in this._doors){let r=e.split(",");t(parseInt(r[0]),parseInt(r[1]))}return this}clearDoors(){return this._doors={},this}addDoors(t){let e=this._x1-1,r=this._x2+1,a=this._y1-1,n=this._y2+1;for(let o=e;o<=r;o++)for(let i=a;i<=n;i++)o!=e&&o!=r&&i!=a&&i!=n||t(o,i)||this.addDoor(o,i);return this}debug(){console.log("room",this._x1,this._y1,this._x2,this._y2)}isValid(t,e){let r=this._x1-1,a=this._x2+1,n=this._y1-1,o=this._y2+1;for(let i=r;i<=a;i++)for(let s=n;s<=o;s++)if(i==r||i==a||s==n||s==o){if(!t(i,s))return!1}else if(!e(i,s))return!1;return!0}create(t){let e=this._x1-1,r=this._x2+1,a=this._y1-1,n=this._y2+1,o=0;for(let i=e;i<=r;i++)for(let s=a;s<=n;s++)o=i+","+s in this._doors?2:i==e||i==r||s==a||s==n?1:0,t(i,s,o)}getCenter(){return[Math.round((this._x1+this._x2)/2),Math.round((this._y1+this._y2)/2)]}getLeft(){return this._x1}getRight(){return this._x2}getTop(){return this._y1}getBottom(){return this._y2}}class V extends z{constructor(t,e,r,a){super(),this._startX=t,this._startY=e,this._endX=r,this._endY=a,this._endsWithAWall=!0}static createRandomAt(t,e,r,a,n){let o=n.corridorLength[0],i=n.corridorLength[1],s=f.getUniformInt(o,i);return new this(t,e,t+r*s,e+a*s)}debug(){console.log("corridor",this._startX,this._startY,this._endX,this._endY)}isValid(t,e){let r=this._startX,a=this._startY,n=this._endX-r,o=this._endY-a,i=1+Math.max(Math.abs(n),Math.abs(o));n&&(n/=Math.abs(n)),o&&(o/=Math.abs(o));let s=o,c=-n,l=!0;for(let d=0;d<i;d++){let u=r+d*n,h=a+d*o;if(e(u,h)||(l=!1),t(u+s,h+c)||(l=!1),t(u-s,h-c)||(l=!1),!l){i=d,this._endX=u-n,this._endY=h-o;break}}if(0==i)return!1;if(1==i&&t(this._endX+n,this._endY+o))return!1;let u=!t(this._endX+n+s,this._endY+o+c),h=!t(this._endX+n-s,this._endY+o-c);return this._endsWithAWall=t(this._endX+n,this._endY+o),!u&&!h||!this._endsWithAWall}create(t){let e=this._startX,r=this._startY,a=this._endX-e,n=this._endY-r,o=1+Math.max(Math.abs(a),Math.abs(n));a&&(a/=Math.abs(a)),n&&(n/=Math.abs(n));for(let i=0;i<o;i++){t(e+i*a,r+i*n,0)}return!0}createPriorityWalls(t){if(!this._endsWithAWall)return;let e=this._startX,r=this._startY,a=this._endX-e,n=this._endY-r;a&&(a/=Math.abs(a)),n&&(n/=Math.abs(n));let o=n,i=-a;t(this._endX+a,this._endY+n),t(this._endX+o,this._endY+i),t(this._endX-o,this._endY-i)}}const q={room:H,corridor:V};function K(t,e,r){r[e[t+1]]=r[t],e[r[t]]=e[t+1],r[t]=t+1,e[t+1]=t}function $(t,e,r){r[e[t]]=r[t],e[r[t]]=e[t],r[t]=t,e[t]=t}const X={Arena:class extends W{create(t){let e=this._width-1,r=this._height-1;for(let a=0;a<=e;a++)for(let n=0;n<=r;n++){t(a,n,a&&n&&a<e&&n<r?0:1)}return this}},Uniform:class extends B{constructor(t,e,r){super(t,e),this._options={roomWidth:[3,9],roomHeight:[3,5],roomDugPercentage:.1,timeLimit:1e3},Object.assign(this._options,r),this._map=[],this._dug=0,this._roomAttempts=20,this._corridorAttempts=20,this._connected=[],this._unconnected=[],this._digCallback=this._digCallback.bind(this),this._canBeDugCallback=this._canBeDugCallback.bind(this),this._isWallCallback=this._isWallCallback.bind(this)}create(t){let e=Date.now();for(;;){if(Date.now()-e>this._options.timeLimit)return null;if(this._map=this._fillMap(1),this._dug=0,this._rooms=[],this._unconnected=[],this._generateRooms(),!(this._rooms.length<2)&&this._generateCorridors())break}if(t)for(let r=0;r<this._width;r++)for(let e=0;e<this._height;e++)t(r,e,this._map[r][e]);return this}_generateRooms(){let t,e=this._width-2,r=this._height-2;do{if(t=this._generateRoom(),this._dug/(e*r)>this._options.roomDugPercentage)break}while(t)}_generateRoom(){let t=0;for(;t<this._roomAttempts;){t++;let e=H.createRandom(this._width,this._height,this._options);if(e.isValid(this._isWallCallback,this._canBeDugCallback))return e.create(this._digCallback),this._rooms.push(e),e}return null}_generateCorridors(){let t=0;for(;t<this._corridorAttempts;){t++,this._corridors=[],this._map=this._fillMap(1);for(let t=0;t<this._rooms.length;t++){let e=this._rooms[t];e.clearDoors(),e.create(this._digCallback)}for(this._unconnected=f.shuffle(this._rooms.slice()),this._connected=[],this._unconnected.length&&this._connected.push(this._unconnected.pop());;){let t=f.getItem(this._connected);if(!t)break;let e=this._closestRoom(this._unconnected,t);if(!e)break;let r=this._closestRoom(this._connected,e);if(!r)break;if(!this._connectRooms(e,r))break;if(!this._unconnected.length)return!0}}return!1}_closestRoom(t,e){let r=1/0,a=e.getCenter(),n=null;for(let o=0;o<t.length;o++){let e=t[o],i=e.getCenter(),s=i[0]-a[0],c=i[1]-a[1],l=s*s+c*c;l<r&&(r=l,n=e)}return n}_connectRooms(t,e){let r,a,n,o,i,s,c,l=t.getCenter(),u=e.getCenter(),h=u[0]-l[0],d=u[1]-l[1];if(Math.abs(h)<Math.abs(d)?(n=d>0?2:0,o=(n+2)%4,i=e.getLeft(),s=e.getRight(),c=0):(n=h>0?1:3,o=(n+2)%4,i=e.getTop(),s=e.getBottom(),c=1),r=this._placeInWall(t,n),!r)return!1;if(r[c]>=i&&r[c]<=s){a=r.slice();let t=0;switch(o){case 0:t=e.getTop()-1;break;case 1:t=e.getRight()+1;break;case 2:t=e.getBottom()+1;break;case 3:t=e.getLeft()-1}a[(c+1)%2]=t,this._digLine([r,a])}else if(r[c]<i-1||r[c]>s+1){let t=r[c]-u[c],n=0;switch(o){case 0:case 1:n=t<0?3:1;break;case 2:case 3:n=t<0?1:3}if(o=(o+n)%4,a=this._placeInWall(e,o),!a)return!1;let i=[0,0];i[c]=r[c];let s=(c+1)%2;i[s]=a[s],this._digLine([r,i,a])}else{let t=(c+1)%2;if(a=this._placeInWall(e,o),!a)return!1;let n=Math.round((a[t]+r[t])/2),i=[0,0],s=[0,0];i[c]=r[c],i[t]=n,s[c]=a[c],s[t]=n,this._digLine([r,i,s,a])}return t.addDoor(r[0],r[1]),e.addDoor(a[0],a[1]),c=this._unconnected.indexOf(t),-1!=c&&(this._unconnected.splice(c,1),this._connected.push(t)),c=this._unconnected.indexOf(e),-1!=c&&(this._unconnected.splice(c,1),this._connected.push(e)),!0}_placeInWall(t,e){let r=[0,0],a=[0,0],n=0;switch(e){case 0:a=[1,0],r=[t.getLeft(),t.getTop()-1],n=t.getRight()-t.getLeft()+1;break;case 1:a=[0,1],r=[t.getRight()+1,t.getTop()],n=t.getBottom()-t.getTop()+1;break;case 2:a=[1,0],r=[t.getLeft(),t.getBottom()+1],n=t.getRight()-t.getLeft()+1;break;case 3:a=[0,1],r=[t.getLeft()-1,t.getTop()],n=t.getBottom()-t.getTop()+1}let o=[],i=-2;for(let s=0;s<n;s++){let t=r[0]+s*a[0],e=r[1]+s*a[1];o.push(null),1==this._map[t][e]?i!=s-1&&(o[s]=[t,e]):(i=s,s&&(o[s-1]=null))}for(let s=o.length-1;s>=0;s--)o[s]||o.splice(s,1);return o.length?f.getItem(o):null}_digLine(t){for(let e=1;e<t.length;e++){let r=t[e-1],a=t[e],n=new V(r[0],r[1],a[0],a[1]);n.create(this._digCallback),this._corridors.push(n)}}_digCallback(t,e,r){this._map[t][e]=r,0==r&&this._dug++}_isWallCallback(t,e){return!(t<0||e<0||t>=this._width||e>=this._height)&&1==this._map[t][e]}_canBeDugCallback(t,e){return!(t<1||e<1||t+1>=this._width||e+1>=this._height)&&1==this._map[t][e]}},Cellular:class extends W{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(t,e),this._options={born:[5,6,7,8],survive:[4,5,6,7,8],topology:8},this.setOptions(r),this._dirs=P[this._options.topology],this._map=this._fillMap(0)}randomize(t){for(let e=0;e<this._width;e++)for(let r=0;r<this._height;r++)this._map[e][r]=f.getUniform()<t?1:0;return this}setOptions(t){Object.assign(this._options,t)}set(t,e,r){this._map[t][e]=r}create(t){let e=this._fillMap(0),r=this._options.born,a=this._options.survive;for(let n=0;n<this._height;n++){let t=1,o=0;6==this._options.topology&&(t=2,o=n%2);for(let i=o;i<this._width;i+=t){let t=this._map[i][n],o=this._getNeighbors(i,n);t&&-1!=a.indexOf(o)?e[i][n]=1:t||-1==r.indexOf(o)||(e[i][n]=1)}}this._map=e,t&&this._serviceCallback(t)}_serviceCallback(t){for(let e=0;e<this._height;e++){let r=1,a=0;6==this._options.topology&&(r=2,a=e%2);for(let n=a;n<this._width;n+=r)t(n,e,this._map[n][e])}}_getNeighbors(t,e){let r=0;for(let a=0;a<this._dirs.length;a++){let n=this._dirs[a],o=t+n[0],i=e+n[1];o<0||o>=this._width||i<0||i>=this._height||(r+=1==this._map[o][i]?1:0)}return r}connect(t,e,r){e||(e=0);let a=[],n={},o=1,i=[0,0];6==this._options.topology&&(o=2,i=[0,1]);for(let u=0;u<this._height;u++)for(let t=i[u%2];t<this._width;t+=o)if(this._freeSpace(t,u,e)){let e=[t,u];n[this._pointKey(e)]=e,a.push([t,u])}let s=a[f.getUniformInt(0,a.length-1)],c=this._pointKey(s),l={};for(l[c]=s,delete n[c],this._findConnected(l,n,[s],!1,e);Object.keys(n).length>0;){let t=this._getFromTo(l,n),a=t[0],o=t[1],i={};i[this._pointKey(a)]=a,this._findConnected(i,n,[a],!0,e),(6==this._options.topology?this._tunnelToConnected6:this._tunnelToConnected).call(this,o,a,l,n,e,r);for(let r in i){let t=i[r];this._map[t[0]][t[1]]=e,l[r]=t,delete n[r]}}t&&this._serviceCallback(t)}_getFromTo(t,e){let r,a=[0,0],n=[0,0],o=Object.keys(t),i=Object.keys(e);for(let s=0;s<5;s++){if(o.length<i.length){let r=o;n=t[r[f.getUniformInt(0,r.length-1)]],a=this._getClosest(n,e)}else{let r=i;a=e[r[f.getUniformInt(0,r.length-1)]],n=this._getClosest(a,t)}if(r=(a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1]),r<64)break}return[a,n]}_getClosest(t,e){let r=null,a=null;for(let n in e){let o=e[n],i=(o[0]-t[0])*(o[0]-t[0])+(o[1]-t[1])*(o[1]-t[1]);(null==a||i<a)&&(a=i,r=o)}return r}_findConnected(t,e,r,a,n){for(;r.length>0;){let o,i=r.splice(0,1)[0];o=6==this._options.topology?[[i[0]+2,i[1]],[i[0]+1,i[1]-1],[i[0]-1,i[1]-1],[i[0]-2,i[1]],[i[0]-1,i[1]+1],[i[0]+1,i[1]+1]]:[[i[0]+1,i[1]],[i[0]-1,i[1]],[i[0],i[1]+1],[i[0],i[1]-1]];for(let s=0;s<o.length;s++){let i=this._pointKey(o[s]);null==t[i]&&this._freeSpace(o[s][0],o[s][1],n)&&(t[i]=o[s],a||delete e[i],r.push(o[s]))}}}_tunnelToConnected(t,e,r,a,n,o){let i,s;e[0]<t[0]?(i=e,s=t):(i=t,s=e);for(let l=i[0];l<=s[0];l++){this._map[l][i[1]]=n;let t=[l,i[1]],e=this._pointKey(t);r[e]=t,delete a[e]}o&&i[0]<s[0]&&o(i,[s[0],i[1]]);let c=s[0];e[1]<t[1]?(i=e,s=t):(i=t,s=e);for(let l=i[1];l<s[1];l++){this._map[c][l]=n;let t=[c,l],e=this._pointKey(t);r[e]=t,delete a[e]}o&&i[1]<s[1]&&o([s[0],i[1]],[s[0],s[1]])}_tunnelToConnected6(t,e,r,a,n,o){let i,s;e[0]<t[0]?(i=e,s=t):(i=t,s=e);let c=i[0],l=i[1];for(;c!=s[0]||l!=s[1];){let t=2;l<s[1]?(l++,t=1):l>s[1]&&(l--,t=1),c<s[0]?c+=t:c>s[0]||s[1]%2?c-=t:c+=t,this._map[c][l]=n;let e=[c,l],o=this._pointKey(e);r[o]=e,delete a[o]}o&&o(e,t)}_freeSpace(t,e,r){return t>=0&&t<this._width&&e>=0&&e<this._height&&this._map[t][e]==r}_pointKey(t){return t[0]+"."+t[1]}},Digger:class extends B{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(t,e),this._options=Object.assign({roomWidth:[3,9],roomHeight:[3,5],corridorLength:[3,10],dugPercentage:.2,timeLimit:1e3},r),this._features={room:4,corridor:4},this._map=[],this._featureAttempts=20,this._walls={},this._dug=0,this._digCallback=this._digCallback.bind(this),this._canBeDugCallback=this._canBeDugCallback.bind(this),this._isWallCallback=this._isWallCallback.bind(this),this._priorityWallCallback=this._priorityWallCallback.bind(this)}create(t){this._rooms=[],this._corridors=[],this._map=this._fillMap(1),this._walls={},this._dug=0;let e=(this._width-2)*(this._height-2);this._firstRoom();let r,a=Date.now();do{if(r=0,Date.now()-a>this._options.timeLimit)break;let t=this._findWall();if(!t)break;let e=t.split(","),n=parseInt(e[0]),o=parseInt(e[1]),i=this._getDiggingDirection(n,o);if(!i)continue;let s=0;do{if(s++,this._tryFeature(n,o,i[0],i[1])){this._removeSurroundingWalls(n,o),this._removeSurroundingWalls(n-i[0],o-i[1]);break}}while(s<this._featureAttempts);for(let a in this._walls)this._walls[a]>1&&r++}while(this._dug/e<this._options.dugPercentage||r);if(this._addDoors(),t)for(let n=0;n<this._width;n++)for(let e=0;e<this._height;e++)t(n,e,this._map[n][e]);return this._walls={},this._map=[],this}_digCallback(t,e,r){0==r||2==r?(this._map[t][e]=0,this._dug++):this._walls[t+","+e]=1}_isWallCallback(t,e){return!(t<0||e<0||t>=this._width||e>=this._height)&&1==this._map[t][e]}_canBeDugCallback(t,e){return!(t<1||e<1||t+1>=this._width||e+1>=this._height)&&1==this._map[t][e]}_priorityWallCallback(t,e){this._walls[t+","+e]=2}_firstRoom(){let t=Math.floor(this._width/2),e=Math.floor(this._height/2),r=H.createRandomCenter(t,e,this._options);this._rooms.push(r),r.create(this._digCallback)}_findWall(){let t=[],e=[];for(let n in this._walls){2==this._walls[n]?e.push(n):t.push(n)}let r=e.length?e:t;if(!r.length)return null;let a=f.getItem(r.sort());return delete this._walls[a],a}_tryFeature(t,e,r,a){let n=f.getWeightedValue(this._features),o=q[n].createRandomAt(t,e,r,a,this._options);return!!o.isValid(this._isWallCallback,this._canBeDugCallback)&&(o.create(this._digCallback),o instanceof H&&this._rooms.push(o),o instanceof V&&(o.createPriorityWalls(this._priorityWallCallback),this._corridors.push(o)),!0)}_removeSurroundingWalls(t,e){let r=P[4];for(let a=0;a<r.length;a++){let n=r[a],o=t+n[0],i=e+n[1];delete this._walls[o+","+i],o=t+2*n[0],i=e+2*n[1],delete this._walls[o+","+i]}}_getDiggingDirection(t,e){if(t<=0||e<=0||t>=this._width-1||e>=this._height-1)return null;let r=null,a=P[4];for(let n=0;n<a.length;n++){let o=a[n],i=t+o[0],s=e+o[1];if(!this._map[i][s]){if(r)return null;r=o}}return r?[-r[0],-r[1]]:null}_addDoors(){let t=this._map;function e(e,r){return 1==t[e][r]}for(let r=0;r<this._rooms.length;r++){let t=this._rooms[r];t.clearDoors(),t.addDoors(e)}}},EllerMaze:class extends W{create(t){let e,r=this._fillMap(1),a=Math.ceil((this._width-2)/2),n=9/24,o=[],i=[];for(let s=0;s<a;s++)o.push(s),i.push(s);for(o.push(a-1),e=1;e+3<this._height;e+=2)for(let t=0;t<a;t++){let a=2*t+1,s=e;r[a][s]=0,t!=o[t+1]&&f.getUniform()>n&&(K(t,o,i),r[a+1][s]=0),t!=o[t]&&f.getUniform()>n?$(t,o,i):r[a][s+1]=0}for(let s=0;s<a;s++){let t=2*s+1,a=e;r[t][a]=0,s!=o[s+1]&&(s==o[s]||f.getUniform()>n)&&(K(s,o,i),r[t+1][a]=0),$(s,o,i)}for(let s=0;s<this._width;s++)for(let e=0;e<this._height;e++)t(s,e,r[s][e]);return this}},DividedMaze:class extends W{constructor(){super(...arguments),this._stack=[],this._map=[]}create(t){let e=this._width,r=this._height;this._map=[];for(let a=0;a<e;a++){this._map.push([]);for(let t=0;t<r;t++){let n=0==a||0==t||a+1==e||t+1==r;this._map[a].push(n?1:0)}}this._stack=[[1,1,e-2,r-2]],this._process();for(let a=0;a<e;a++)for(let e=0;e<r;e++)t(a,e,this._map[a][e]);return this._map=[],this}_process(){for(;this._stack.length;){let t=this._stack.shift();this._partitionRoom(t)}}_partitionRoom(t){let e=[],r=[];for(let c=t[0]+1;c<t[2];c++){let r=this._map[c][t[1]-1],a=this._map[c][t[3]+1];!r||!a||c%2||e.push(c)}for(let c=t[1]+1;c<t[3];c++){let e=this._map[t[0]-1][c],a=this._map[t[2]+1][c];!e||!a||c%2||r.push(c)}if(!e.length||!r.length)return;let a=f.getItem(e),n=f.getItem(r);this._map[a][n]=1;let o=[],i=[];o.push(i);for(let c=t[0];c<a;c++)this._map[c][n]=1,c%2&&i.push([c,n]);i=[],o.push(i);for(let c=a+1;c<=t[2];c++)this._map[c][n]=1,c%2&&i.push([c,n]);i=[],o.push(i);for(let c=t[1];c<n;c++)this._map[a][c]=1,c%2&&i.push([a,c]);i=[],o.push(i);for(let c=n+1;c<=t[3];c++)this._map[a][c]=1,c%2&&i.push([a,c]);let s=f.getItem(o);for(let c=0;c<o.length;c++){let t=o[c];if(t==s)continue;let e=f.getItem(t);this._map[e[0]][e[1]]=0}this._stack.push([t[0],t[1],a-1,n-1]),this._stack.push([a+1,t[1],t[2],n-1]),this._stack.push([t[0],n+1,a-1,t[3]]),this._stack.push([a+1,n+1,t[2],t[3]])}},IceyMaze:class extends W{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(t,e),this._regularity=r,this._map=[]}create(t){let e=this._width,r=this._height,a=this._fillMap(1);e-=e%2?1:2,r-=r%2?1:2;let n=0,o=0,i=0,s=0,c=0,l=!1,u=[[0,0],[0,0],[0,0],[0,0]];do{if(n=1+2*Math.floor(f.getUniform()*(e-1)/2),o=1+2*Math.floor(f.getUniform()*(r-1)/2),c||(a[n][o]=0),!a[n][o]){this._randomize(u);do{0==Math.floor(f.getUniform()*(this._regularity+1))&&this._randomize(u),l=!0;for(let t=0;t<4;t++)if(i=n+2*u[t][0],s=o+2*u[t][1],this._isFree(a,i,s,e,r)){a[i][s]=0,a[n+u[t][0]][o+u[t][1]]=0,n=i,o=s,l=!1,c++;break}}while(!l)}}while(c+1<e*r/4);for(let h=0;h<this._width;h++)for(let e=0;e<this._height;e++)t(h,e,a[h][e]);return this._map=[],this}_randomize(t){for(let e=0;e<4;e++)t[e][0]=0,t[e][1]=0;switch(Math.floor(4*f.getUniform())){case 0:t[0][0]=-1,t[1][0]=1,t[2][1]=-1,t[3][1]=1;break;case 1:t[3][0]=-1,t[2][0]=1,t[1][1]=-1,t[0][1]=1;break;case 2:t[2][0]=-1,t[3][0]=1,t[0][1]=-1,t[1][1]=1;break;case 3:t[1][0]=-1,t[0][0]=1,t[3][1]=-1,t[2][1]=1}}_isFree(t,e,r,a,n){return!(e<1||r<1||e>=a||r>=n)&&t[e][r]}},Rogue:class extends W{constructor(t,e,r){super(t,e),this.map=[],this.rooms=[],this.connectedCells=[],(r=Object.assign({cellWidth:3,cellHeight:3},r)).hasOwnProperty("roomWidth")||(r.roomWidth=this._calculateRoomSize(this._width,r.cellWidth)),r.hasOwnProperty("roomHeight")||(r.roomHeight=this._calculateRoomSize(this._height,r.cellHeight)),this._options=r}create(t){if(this.map=this._fillMap(1),this.rooms=[],this.connectedCells=[],this._initRooms(),this._connectRooms(),this._connectUnconnectedRooms(),this._createRandomRoomConnections(),this._createRooms(),this._createCorridors(),t)for(let e=0;e<this._width;e++)for(let r=0;r<this._height;r++)t(e,r,this.map[e][r]);return this}_calculateRoomSize(t,e){let r=Math.floor(t/e*.8),a=Math.floor(t/e*.25);return a<2&&(a=2),r<2&&(r=2),[a,r]}_initRooms(){for(let t=0;t<this._options.cellWidth;t++){this.rooms.push([]);for(let e=0;e<this._options.cellHeight;e++)this.rooms[t].push({x:0,y:0,width:0,height:0,connections:[],cellx:t,celly:e})}}_connectRooms(){let t,e,r,a,n,o,i=f.getUniformInt(0,this._options.cellWidth-1),s=f.getUniformInt(0,this._options.cellHeight-1),c=!1;do{o=[0,2,4,6],o=f.shuffle(o);do{if(c=!1,t=o.pop(),e=i+P[8][t][0],r=s+P[8][t][1],!(e<0||e>=this._options.cellWidth)&&!(r<0||r>=this._options.cellHeight)){if(a=this.rooms[i][s],a.connections.length>0&&a.connections[0][0]==e&&a.connections[0][1]==r)break;n=this.rooms[e][r],0==n.connections.length&&(n.connections.push([i,s]),this.connectedCells.push([e,r]),i=e,s=r,c=!0)}}while(o.length>0&&0==c)}while(o.length>0)}_connectUnconnectedRooms(){let t,e,r,a=this._options.cellWidth,n=this._options.cellHeight;this.connectedCells=f.shuffle(this.connectedCells);for(let o=0;o<this._options.cellWidth;o++)for(let i=0;i<this._options.cellHeight;i++)if(t=this.rooms[o][i],0==t.connections.length){let s=[0,2,4,6];s=f.shuffle(s),r=!1;do{let t=s.pop(),c=o+P[8][t][0],l=i+P[8][t][1];if(!(c<0||c>=a||l<0||l>=n)){if(e=this.rooms[c][l],r=!0,0==e.connections.length)break;for(let t=0;t<e.connections.length;t++)if(e.connections[t][0]==o&&e.connections[t][1]==i){r=!1;break}if(r)break}}while(s.length);r?t.connections.push([e.cellx,e.celly]):console.log("-- Unable to connect room.")}}_createRandomRoomConnections(){}_createRooms(){let t,e,r,a,n,o=this._width,i=this._height,s=this._options.cellWidth,c=this._options.cellHeight,l=Math.floor(this._width/s),u=Math.floor(this._height/c),h=this._options.roomWidth,d=this._options.roomHeight;for(let p=0;p<s;p++)for(let s=0;s<c;s++){if(r=l*p,a=u*s,0==r&&(r=1),0==a&&(a=1),t=f.getUniformInt(h[0],h[1]),e=f.getUniformInt(d[0],d[1]),s>0)for(n=this.rooms[p][s-1];a-(n.y+n.height)<3;)a++;if(p>0)for(n=this.rooms[p-1][s];r-(n.x+n.width)<3;)r++;let c=Math.round(f.getUniformInt(0,l-t)/2),g=Math.round(f.getUniformInt(0,u-e)/2);for(;r+c+t>=o;)c?c--:t--;for(;a+g+e>=i;)g?g--:e--;r+=c,a+=g,this.rooms[p][s].x=r,this.rooms[p][s].y=a,this.rooms[p][s].width=t,this.rooms[p][s].height=e;for(let n=r;n<r+t;n++)for(let t=a;t<a+e;t++)this.map[n][t]=0}}_getWallPosition(t,e){let r,a,n;return 1==e||3==e?(r=f.getUniformInt(t.x+1,t.x+t.width-2),1==e?(a=t.y-2,n=a+1):(a=t.y+t.height+1,n=a-1),this.map[r][n]=0):(a=f.getUniformInt(t.y+1,t.y+t.height-2),2==e?(r=t.x+t.width+1,n=r-1):(r=t.x-2,n=r+1),this.map[n][a]=0),[r,a]}_drawCorridor(t,e){let r,a,n,o,i=e[0]-t[0],s=e[1]-t[1],c=t[0],l=t[1],u=[],h=Math.abs(i),d=Math.abs(s),p=f.getUniform(),g=p,y=1-p;for(a=i>0?2:6,n=s>0?4:0,h<d?(r=Math.ceil(d*g),u.push([n,r]),u.push([a,h]),r=Math.floor(d*y),u.push([n,r])):(r=Math.ceil(h*g),u.push([a,r]),u.push([n,d]),r=Math.floor(h*y),u.push([a,r])),this.map[c][l]=0;u.length>0;)for(o=u.pop();o[1]>0;)c+=P[8][o[0]][0],l+=P[8][o[0]][1],this.map[c][l]=0,o[1]=o[1]-1}_createCorridors(){let t,e,r,a,n,o=this._options.cellWidth,i=this._options.cellHeight;for(let s=0;s<o;s++)for(let o=0;o<i;o++){t=this.rooms[s][o];for(let o=0;o<t.connections.length;o++)e=t.connections[o],r=this.rooms[e[0]][e[1]],r.cellx>t.cellx?(a=2,n=4):r.cellx<t.cellx?(a=4,n=2):r.celly>t.celly?(a=3,n=1):(a=1,n=3),this._drawCorridor(this._getWallPosition(t,a),this._getWallPosition(r,n))}}}};Math.sqrt(3),Math.sqrt(3);class Y{constructor(t,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._toX=t,this._toY=e,this._passableCallback=r,this._options=Object.assign({topology:8},a),this._dirs=P[this._options.topology],8==this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(t,e){let r=[];for(let a=0;a<this._dirs.length;a++){let n=this._dirs[a],o=t+n[0],i=e+n[1];this._passableCallback(o,i)&&r.push([o,i])}return r}}const Z={Dijkstra:class extends Y{constructor(t,e,r,a){super(t,e,r,a),this._computed={},this._todo=[],this._add(t,e,null)}compute(t,e,r){let a=t+","+e;if(a in this._computed||this._compute(t,e),!(a in this._computed))return;let n=this._computed[a];for(;n;)r(n.x,n.y),n=n.prev}_compute(t,e){for(;this._todo.length;){let r=this._todo.shift();if(r.x==t&&r.y==e)return;let a=this._getNeighbors(r.x,r.y);for(let t=0;t<a.length;t++){let e=a[t],n=e[0],o=e[1];n+","+o in this._computed||this._add(n,o,r)}}}_add(t,e,r){let a={x:t,y:e,prev:r};this._computed[t+","+e]=a,this._todo.push(a)}},AStar:class extends Y{constructor(t,e,r){super(t,e,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this._todo=[],this._done={}}compute(t,e,r){for(this._todo=[],this._done={},this._fromX=t,this._fromY=e,this._add(this._toX,this._toY,null);this._todo.length;){let r=this._todo.shift(),a=r.x+","+r.y;if(a in this._done)continue;if(this._done[a]=r,r.x==t&&r.y==e)break;let n=this._getNeighbors(r.x,r.y);for(let t=0;t<n.length;t++){let e=n[t],a=e[0],o=e[1];a+","+o in this._done||this._add(a,o,r)}}let a=this._done[t+","+e];if(a)for(;a;)r(a.x,a.y),a=a.prev}_add(t,e,r){let a=this._distance(t,e),n={x:t,y:e,prev:r,g:r?r.g+1:0,h:a},o=n.g+n.h;for(let i=0;i<this._todo.length;i++){let t=this._todo[i],e=t.g+t.h;if(o<e||o==e&&a<t.h)return void this._todo.splice(i,0,n)}this._todo.push(n)}_distance(t,e){switch(this._options.topology){case 4:return Math.abs(t-this._fromX)+Math.abs(e-this._fromY);case 6:let r=Math.abs(t-this._fromX),a=Math.abs(e-this._fromY);return a+Math.max(0,(r-a)/2);case 8:return Math.max(Math.abs(t-this._fromX),Math.abs(e-this._fromY))}}}};const Q=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!(t<=0))return new Promise((e=>setTimeout(e,t)))},J=t=>[...Array(t).keys()],tt=(t,e,r)=>Math.min(Math.max(t,e),r),et=t=>t[Math.floor(Math.random()*t.length)];function rt(t,e){const r=[...e];let a=[];return J(t).forEach((()=>{const t=Math.floor(Math.random()*r.length),e=r.splice(t,1);a=a.concat(e)})),a}const at=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t),nt=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t),ot=(t,e)=>t.x===e.x&&t.y===e.y,it=t=>t&&`${t.x},${t.y}`,st=t=>{const e=t.split(",");return{x:parseInt(e[0]),y:parseInt(e[1])}},ct=t=>(e,r)=>{const a=t.map[e+","+r];return!!a&&t.tileKey[a.type].passable},lt=(t,e)=>t.map[it(e)],ut=function(t,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ct,o=(t.map,n(t)),i=new Z.AStar(e.x,e.y,o,{topology:a}),s=[];return i.compute(r.x,r.y,(function(t,e){s.push({x:t,y:e})})),s.slice(1)},ht=(t,e,r)=>ut(t,r,e,8,(()=>()=>!0)),dt=function(t,e,r){return ut(t,e,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,(t=>((t,e)=>(r,a)=>{const n=t.map[r+","+a];if(n){const o=t.tileKey[n.type].passable;if(n.entities.length&&!ot(e,{x:r,y:a})){const t=n.entities.every((t=>t.passable));return o&&t}return o}return!1})(t,r)))},pt=(t,e)=>{let r=[],a=ft(t,e);for(let n=0;n<a;n++){let o=0===a?0:n/a;r.push(gt(yt(t,e,o)))}return r},ft=(t,e)=>{let r=e.x-t.x,a=e.y-t.y;return Math.max(Math.abs(r),Math.abs(a))},gt=t=>({x:Math.round(t.x),y:Math.round(t.y)}),yt=(t,e,r)=>({x:mt(t.x,e.x,r),y:mt(t.y,e.y,r)}),mt=(t,e,r)=>t+r*(e-t),_t=(t,e)=>({x:t.x+e[0],y:t.y+e[1]}),vt=(t,e)=>({x:Math.sign(e.x-t.x),y:Math.sign(e.y-t.y)}),bt=(t,e,r,a,n)=>ut(t,e,r,a).slice(0,n+1),wt=t=>{let e=Object.keys(t),r=et(e).split(",");return{coordinates:{x:parseInt(r[0]),y:parseInt(r[1])},text:r}},xt=t=>t.filter((t=>t.hasOwnProperty("durability"))),Ot=(t,e)=>t.filter((t=>t.entityTypes.includes(e))),Rt=t=>{let{game:e,position:r}=t;const a=lt(e,r);return a?a.entities:[]},At=t=>{let{game:e,position:r,attr:a,value:n}=t;return((t,e,r)=>t.filter((t=>t[e]===r)))(Rt({game:e,position:r}),a,n)},Ct=(t,e)=>[{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:1,y:-1},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:0},{x:-1,y:1}].map((r=>{const a={x:e.x+r.x,y:e.y+r.y};let n=t[it(a)];if(n)return n})).filter((t=>Boolean(t))),kt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const a=(n=r,2/3*(Math.pow(n,3)-9*Math.pow(n,2)+32*n-18));var n;let o=[];for(let i=0;i<a;i++){let n=Math.round(t+Math.cos(2*Math.PI/a*i)*r),s=Math.round(e+Math.sin(2*Math.PI/a*i)*r);o.push({x:n,y:s})}return o},Et=(t,e)=>{let r=[];for(let a=t.x-e;a<t.x+e;a++){let n=Math.floor(e*Math.sin(Math.acos((t.x-a)/e)));for(let e=t.y-n+1;e<t.y+n;e++)r.push({x:a,y:e})}return r},St=(t,e)=>t.positions.map((r=>({x:e.x+r.x+t.x_offset,y:e.y+r.y+t.y_offset}))),Tt={linear:t=>t,easeIn:t=>t*t,easeOut:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:(4-2*t)*t-1,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1};var Lt=r(7389),Dt=r.n(Lt),Nt=r(8494),Pt=r(5613),Ut=r.n(Pt),Gt=r(8105);const It=100,Mt="#424242",Ft="#606b79",jt="#B7C3CD",Wt="#CED5DD",Bt="#E16264",zt={NARUTO:{gaara:"#603030",rock_lee:"#155859",leaf:"#36635b",wraps:"#F0D8C0"},SOLARIZED:{main:"#002b36",text:"#eee8d5",accent:"#6c71c4",base03:"#002b36",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900"},JACINTO:{base1:"#0B0B0Bff",base2:"#5A7178ff",base3:"#B6ACA3ff",base4:"#EDF6F1ff",cog1:"#2d5fc9",cog2:"#18c0f8",cog3:"#86C8E4ff",locust1:"#96641Dff",locust2:"#F89339ff",locust3:"#E7C898ff",flesh1:"#833139ff",flesh2:"#CC7468ff",flesh3:"#DDA78Fff",gray:"#6D7886ff",red:"#C7141Cff",yellow:"#b58900",green:"#859900"}},Ht="Helpless Citizen",Vt="Fire Fighter",qt={GROUND:{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.base01,character:".",sprite:"\ue8a2",passable:!0},GROUND_ALT:{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.base03,character:"",sprite:"\ue8a2",passable:!0},FLOOR:{background:zt.SOLARIZED.base02,foreground:zt.SOLARIZED.base0,character:"",passable:!0},SAFE_FLOOR:{background:zt.SOLARIZED.base02,foreground:zt.SOLARIZED.base0,character:"",passable:!0},BURNT:{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.red,character:"X",sprite:"\ue8bb",passable:!0,animation:[{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.red,character:"X",sprite:"\ue8bb",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.red,character:"x",sprite:"\ue8bb",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.red,character:"X",sprite:"\ue8bb",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.orange,character:"x",sprite:"\ue8bb",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.orange,character:"X",sprite:"\ue8bb",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.yellow,character:"x",sprite:"\ue8bb",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.red,character:"X",sprite:"\ue8bb",passable:!0}]},WET:{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.blue,character:"=",sprite:"\ue8ca",passable:!0,animation:[{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.blue,character:"=",sprite:"\ue8ca",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.blue,character:"~",sprite:"\ue8ca",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.blue,character:"=",sprite:"\ue8ca",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.base0,character:"~",sprite:"\ue8ca",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.base1,character:"=",sprite:"\ue8ca",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.base1,character:"~",sprite:"\ue8ca",passable:!0},{background:zt.SOLARIZED.base03,foreground:zt.SOLARIZED.blue,character:"=",sprite:"\ue8ca",passable:!0}]},WALL:{background:zt.SOLARIZED.base02,foreground:zt.SOLARIZED.base2,character:"#",sprite:"\ue802",passable:!1},DOOR:{background:zt.SOLARIZED.base02,foreground:zt.SOLARIZED.base0,character:"+",sprite:"\ue86d",passable:!0},SAFE:{background:zt.SOLARIZED.base02,foreground:zt.SOLARIZED.green,character:"+",sprite:"\ue8b2",passable:!0},WATER:{animation:[{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#8aa",character:"\u2592",passable:!1},{background:"#424242",foreground:"#8aa",character:"\u2593",passable:!1}],background:"#9dc3d3",character:"\u2591",passable:!1}},Kt={N:[0,-1],NE:[1,-1],W:[-1,0],NW:[-1,-1],SW:[-1,1],S:[0,1],SE:[1,1],E:[1,0],NONE:[0,0]},$t={N:Kt.N,W:Kt.W,S:Kt.S,E:Kt.E},Xt={HEAD:"HEAD",TORSO:"TORSO",BACK:"BACK",HAND:"HAND",FEET:"FEET",GENERIC:"GENERIC",JUTSU:"JUTSU"},Yt={human:()=>[{type:Xt.HEAD,name:"head",item:null},{type:Xt.TORSO,name:"torso",item:null},{type:Xt.BACK,name:"back",item:null},{type:Xt.HAND,name:"left_hand",item:null},{type:Xt.HAND,name:"right_hand",item:null},{type:Xt.FEET,name:"feet",item:null}],limited:()=>[{type:Xt.GENERIC,name:"slot_1",item:null},{type:Xt.GENERIC,name:"slot_2",item:null}],gear:()=>[{type:Xt.HAND,name:"weapon",item:null}]},Zt={point:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1}]},triple_point:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:0,taken:!1},{x:0,y:0,taken:!1}]},tri_force:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:-1,y:-1,taken:!1},{x:1,y:-1,taken:!1}]},spread:{x_offset:1,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:0,y:-1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:2,taken:!1},{x:1,y:-2,taken:!1}]},verticalLine:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:0,y:-1,taken:!1}]},smallSquare:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1}]},square:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1}]},clover:{x_offset:0,y_offset:0,positions:[{x:0,y:1,taken:!1},{x:1,y:0,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:0,taken:!1}]},filledClover:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:0,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:0,taken:!1}]},bigSquare:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1},{x:0,y:2,taken:!1},{x:2,y:2,taken:!1},{x:2,y:0,taken:!1},{x:2,y:-2,taken:!1},{x:0,y:-2,taken:!1},{x:-2,y:-2,taken:!1},{x:-2,y:0,taken:!1},{x:-2,y:2,taken:!1}]},donut:{x_offset:0,y_offset:0,positions:[...kt(0,0,2),...kt(0,0,3)]},ring_3:{x_offset:0,y_offset:0,positions:[...kt(0,0,2),...kt(0,0,4),...kt(0,0,6)]},big_circle:{x_offset:0,y_offset:0,positions:[{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1},...kt(0,0,2),...kt(0,0,3),...kt(0,0,4)]}},Qt={default:{renderer:{character:"*",color:"black",background:"white"}},fail:{renderer:{character:"x",color:"black",background:"red"}},succede:{renderer:{character:"x",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.green}},damage:{renderer:{character:"*",color:"darkred",background:"red"}},leaf:{renderer:{character:"\u2724",color:"#36635b",background:"#F0D8C0"}},water:{renderer:{character:"~",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.blue}}},Jt={directional:0,path:1},te=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ee={INFORMATION:{color:jt,backgroundColor:Mt},ACTION:{color:Ft,backgroundColor:Wt},DANGER:{color:Bt,backgroundColor:Mt},STATUS_EFFECT:{color:zt.SOLARIZED.base3,backgroundColor:zt.SOLARIZED.violet},ERROR:{color:zt.SOLARIZED.base3,backgroundColor:zt.SOLARIZED.yellow}};class re{constructor(t){let{text:e="",type:r=ee.INFORMATION}=t,a=Ut()();this.id=a,this.text=e,this.type=r}}var ae=r(6373),ne=r.n(ae);class oe{constructor(t){let{name:e="Resource",getResourceCost:r=()=>null,resourceIncrement:a=1,actorResourcePath:n=null,actorResourceGetter:o=null,actorResourceSetter:i=null,renderer:s={background:"transparent",color:"black",character:"*"}}=t;this.name=e,this.getResourceCost=r,this.resourceIncrement=a,this.actorResourcePath=n,this.actorResourceGetter=o,this.actorResourceSetter=i,this.renderer=s,this.getResourceCostDisplay=()=>this.getResourceCost()/this.resourceIncrement}}class ie extends oe{constructor(t){let{...e}=t;super({...e}),this.name="Energy",this.actorResourcePath="energy",this.renderer={color:"black",background:"#ff9926",character:"8",sprite:"\ue8c5"},this.resourceIncrement=100}}class se{constructor(t){let{game:e,actor:r,label:a="action label",hidden:n=!1,energyCost:o=It,processDelay:i=50,particles:s=[],renderer:c=null,particleTemplate:l=Qt.default,onBefore:u=()=>null,onAfter:h=()=>null,onSuccess:d=()=>null,onFailure:p=()=>null,interrupt:f=!1,requiredResources:g=[]}=t;this.actor=r,this.game=e,this.label=a,this.hidden=n,this.energyCost=o,this.processDelay=i,this.particles=s,this.renderer=c,this.particleTemplate=l,this.onBefore=u,this.onAfter=h,this.onSuccess=d,this.onFailure=p,this.interrupt=f,this.requiredResources=[new ie({getResourceCost:()=>this.energyCost}),...g]}addParticle(t,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{...this.particleTemplate.renderer},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jt.directional,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const i={energy:100,game:this.game,name:"particle",passable:!0};let s={life:t,pos:e,direction:r,renderer:a,type:n,path:o};"object"===typeof t&&(s={...t});let c=new Jn({...i,...s});this.particles.push(c)}removeDeadParticles(){this.particles=this.particles.filter((t=>t.life>0))}setAsNextAction(){this.actor.setNextAction(this)}immediatelyExecuteAction(){this.actor.setNextAction(this),this.game.engine.start()}getEnergyCost(){return Gt.find(this.requiredResources,{name:"Energy"}).getResourceCost()}getRequiredResourceName(){return Gt.map(this.requiredResources,"name")}listPayableResources(){return Gt.map(this.requiredResources,(t=>{const e=t.getResourceCost,r=t.actorResourcePath,a=t.actorResourceGetter,n=Gt.get(this.actor,r,null);let o=!1;return null!==Gt.get(this.actor,a,null)?o=this.actor[a]()>=e():null!==n&&(o=n>=e()),{canPay:o,...t}}))}canPayRequiredResources(){return!Gt.find(this.listPayableResources(),{canPay:!1})}payRequiredResources(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Gt.each(this.requiredResources,(e=>{const r=e.getResourceCost,a=e.actorResourcePath,n=e.actorResourceSetter,o=Gt.get(this.actor,a,null),i=r()*t;return Gt.get(this.actor,n,null)?(this.actor[n](o-i),!0):!!o&&(this.actor[a]-=i,!0)}))}gainRequiredResources(){return this.payRequiredResources(-1)}perform(){return{success:!0,alternative:null}}}class ce extends se{constructor(t){let{targetPos:e,processDelay:r=25,...a}=t;super({...a}),this.targetPos=e,this.processDelay=r}perform(){return{success:this.actor.move(this.targetPos),alternative:null}}}class le extends se{constructor(t){let{direction:e,range:r,targetPos:a=null,availablePositions:n=[],...o}=t;super({...o}),this.direction=e,this.range=r,this.targetPos=a,this.availablePositions=n,this.processDelay=0,this.energyCost=0}isInRange(t){return Gt.find(this.availablePositions,{x:t.x,y:t.y})}isInRangeV1(t){const e=this.actor.getPosition(),r=pt(e,t);return!this.range||r.length<=this.range}perform(){let t=!1;if(!this.targetPos&&!this.direction)return{success:t,alternative:null};let e=this.targetPos;return this.targetPos||(e=_t(this.actor.getCursorPositions()[0],this.direction)),this.isInRange(e)&&(this.actor.moveCursorToPosition(e),t=!0),{success:t,alternative:null}}}const ue={DEFAULT:0,BLINK_TILE:1,SOLID_TILE:2,BLINK_BOX:3,TEXT_FLOAT:4,TEXT_OVERLAY:5};class he{constructor(t){let{display:e,...r}=t;const a=Ut()();this.id=a,this.lifeTime=0,this.timeToLive=(null===r||void 0===r?void 0:r.timeToLive)||500,this.active=!0,this.node=null,this.display=e}getActive(){return!1}initialize(){}update(t){this.lifeTime+=t.timeDiff,this.active=this.getActive(),this.active||this.display.removeAnimation(this.id)}}class de extends he{constructor(t){let{...e}=t;super({...e})}getActive(){return!(this.lifeTime>500)}}class pe extends he{constructor(t){let{x:e,y:r,text:a,color:n="#fff",textAttributes:o={},...i}=t;super({...i}),this.x=e,this.y=r,this.color=n,this.text=a,this.textAttributes=o,this.speedY=at(-2,-1),this.speedX=at(-3,3)}getActive(){return!(this.lifeTime>this.timeToLive)}initialize(){this.active=!0;const t={name:"text",x:this.display.tileWidth*(this.x+this.display.game.getRenderOffsetX())+(this.display.tileOffset+this.display.tileGutter),y:this.display.tileHeight*(this.y+this.display.game.getRenderOffsetY())+(this.display.tileOffset+this.display.tileGutter),text:this.text,fontSize:this.display.tileWidth/2,fontFamily:"player-start-2p, Courier New",fill:this.color,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1,...this.textAttributes};let e=new(ne().Text)(t);this.display.animationLayer.add(e),this.node=e,super.initialize()}update(t){let e=this.node.y();e+=this.speedY,this.node.y(e);let r=this.node.x();r+=this.speedX,this.node.x(r),super.update(t)}}class fe extends he{constructor(t){let{x:e,y:r,text:a,color:n="#fff",textAttributes:o={},isBlinking:i=!1,...s}=t;super({...s}),this.x=e,this.y=r,this.color=n,this.text=a,this.textAttributes=o,this.isBlinking=i,this.lerpDirection=-1}getActive(){return this.active}initialize(){this.active=!0;const t={name:"text",text:this.text,x:this.display.tileWidth*(this.x+this.display.game.getRenderOffsetX())+(this.display.tileOffset+this.display.tileGutter),y:this.display.tileHeight*(this.y+this.display.game.getRenderOffsetY())+(this.display.tileOffset+this.display.tileGutter),width:this.display.tileWidth,height:this.display.tileHeight,fontSize:this.display.tileWidth/4,fontFamily:"player-start-2p, Courier New",verticalAlign:"middle",align:"center",fill:this.color,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1,...this.textAttributes};let e=new(ne().Text)(t);this.display.animationLayer.add(e),this.node=e,super.initialize()}update(t){if(!this.isBlinking)return;let e=this.node.opacity();e>=1&&(this.lerpDirection=-1),e<=0&&(this.lerpDirection=1),e+=.03*this.lerpDirection,this.node.opacity(tt(e,0,1)),super.update(t)}}class ge extends he{constructor(t){let{x:e,y:r,lerpDirection:a=-1,color:n="#fff",rectAttributes:o={},isBlinking:i=!0,...s}=t;super({...s}),this.x=e,this.y=r,this.lerpDirection=a,this.color=n,this.rectAttributes=o,this.isBlinking=i}getActive(){return this.active}updatePosition(t){let{x:e,y:r}=t;this.x=e,this.y=r,this.node.position(this.worldPosition({x:e,y:r}))}worldPosition(t){const{x:e,y:r}=t;return{x:this.display.tileWidth*(e+this.display.game.getRenderOffsetX())+(this.display.tileOffset+this.display.tileGutter),y:this.display.tileHeight*(r+this.display.game.getRenderOffsetY())+(this.display.tileOffset+this.display.tileGutter)}}initialize(){this.active=!0;const t=this.worldPosition({x:this.x,y:this.y}),e={name:"rect",x:t.x,y:t.y,offsetX:this.display.tileWidth/-4,offsetY:this.display.tileHeight/-4,width:this.display.tileWidth/2,height:this.display.tileHeight/2,fill:this.color,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1,...this.rectAttributes};let r=new(ne().Rect)(e);this.display.animationLayer.add(r),this.node=r,super.initialize()}update(t){if(!this.isBlinking)return;let e=this.node.opacity();e>=1&&(this.lerpDirection=-1),e<=0&&(this.lerpDirection=1),e+=.03*this.lerpDirection,this.node.opacity(tt(e,0,1)),super.update(t)}}class ye extends ge{constructor(t){let{...e}=t;super({...e}),this.rectAttributes={fill:"transparent",stroke:e.color,strokeWidth:e.strokeWidth||5,offsetX:0,offsetY:0,width:this.display.tileWidth,height:this.display.tileHeight}}}class me{constructor(t){let{containerId:e=null,width:r=100,height:a=100,tileWidth:n=10,tileHeight:o=10,tileGutter:i=0,tileOffset:s=10,game:c=null,mouseEnabled:l=!1}=t;this.containerId=e,this.width=r,this.height=a,this.tileWidth=n,this.tileHeight=o,this.tileGutter=i,this.tileOffset=s,this.stage=null,this.layer=null,this.particleLayer=null,this.animationLayer=null,this.animations=[],this.animationLoop=null,this.game=c,this.animationTypes=ue,this.mouseEnabled=l}initialize(t){let e=t.getElementById(this.containerId),r=t.createElement("div");e.appendChild(r),e.oncontextmenu=t=>t.preventDefault(),this.hidden_leaf__adjustContentToScreen(e),this.stage=new(ne().Stage)({container:"display",width:this.width,height:this.height}),this.layer=new(ne().Layer)({hitGraphEnabled:this.mouseEnabled}),this.stage.add(this.layer),this.particleLayer=new(ne().Layer)({hitGraphEnabled:!1}),this.stage.add(this.particleLayer),this.animationLayer=new(ne().Layer)({}),this.stage.add(this.animationLayer);let a=new(ne().Animation)((t=>{this.animations.forEach((e=>e.update(t))),this.animations.length<=0&&this.animationLoop&&this.animationLoop.isRunning()&&this.animationLoop.stop()}),this.animationLayer);this.animationLoop=a,a.start()}async shakeScreen(t){let{intensity:e=1}=t;this.shakeNode({node:this.stage,intensity:e})}async shakeNode(t){let{node:e,intensity:r=1}=t;if(!e)return;let a=5*r;for(;a>0;){const t=nt(1,5)*r,n=nt(1,5)*r;e.offsetX(t),e.offsetY(n),e.draw(),await Q(10/a),a-=1}e.offsetX(0),e.offsetY(0),e.draw()}adjustContentToScreen(t){const e=t.offsetHeight,r=t.offsetWidth,a=(e-this.tileOffset)/this.game.getRenderHeight();this.tileWidth=Math.round(a),this.tileHeight=this.tileWidth;const n=this.getTilesDownOnScreenByWidth(r),o=this.game.setRenderWidth(n);this.width=o*this.tileWidth+this.tileOffset;const i=this.getTilesDownOnScreenByHeight(e),s=this.game.setRenderHeight(i);this.height=s*this.tileHeight+this.tileOffset}hidden_leaf__adjustContentToScreen(t){this.height=680,this.width=924,this.tileWidth=26,this.tileHeight=26}adjustGameCameraHeightToScreenHeight(t){this.game.cameraHeight=this.getTilesDownOnScreenByHeight(t)}addAnimation(t,e){let r;switch(t){case ue.SOLID_TILE:r=new de({display:this,...e});break;case ue.BLINK_TILE:r=new ge({display:this,...e});break;case ue.BLINK_BOX:r=new ye({display:this,...e});break;case ue.TEXT_FLOAT:r=new pe({display:this,...e});break;case ue.TEXT_OVERLAY:r=new fe({display:this,...e});break;default:r=new he({display:this,...e})}return r.initialize(),this.animations.push(r),this.animationLoop.isRunning()||this.animationLoop.start(),r}removeAnimation(t){this.animations=this.animations.filter((e=>e.id!==t||(e.node.destroy(),!1)))}removeAnimations(t){t.forEach((t=>this.removeAnimation(t)))}updateAnimation(t){this.animations=this.animations.map((e=>(e.id===t&&console.log(e),e)))}updateTile(t,e,r,a){t&&(t.children[0].fill(a),t.children[1].fill(r),t.children[1].text(e))}updateTileWithFovLighting(t,e,r,a,n){t&&(void 0===t.lightPercentage&&(t.lightPercentage=e),0==t.lightPercentage||t.lightPercentage<e&&t.children[0].fill(n),t.children[1].fill(a),t.children[1].text(r))}createTile(t,e,r,a,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=new(ne().Group)({id:`${t},${e}`,x:this.tileWidth*t+(this.tileOffset+this.tileGutter),y:this.tileHeight*e+(this.tileOffset+this.tileGutter),width:this.tileWidth,height:this.tileHeight,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1}),s=new(ne().Rect)({name:"rect",width:this.tileWidth,height:this.tileHeight,fill:n,strokeEnabled:!1,transformsEnabled:"position",perfectDrawEnabled:!1,listening:this.mouseEnabled,shadowForStrokeEnabled:!1}),c=new(ne().Text)({name:"text",text:r,width:this.tileWidth,height:this.tileHeight,fontSize:this.tileWidth-8,fontFamily:"player-start-2p, scroll-o-script",fill:a,align:"center",verticalAlign:"middle",transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1});i.add(s),i.add(c),this.mouseEnabled&&this.addMouseListenersToNodeV2(s,{x:t,y:e});return(o||this.layer).add(i),i}addMouseListenersToNodeV2(t,e){this.mouseOverAnimations=[];const r=this;let a=r.game.getFirstPlayer();t.on("mouseover",(()=>{var n;r.lastMouseOverNode=t;const o=r.getRelativeTilePosition(e),i=null===(n=a.getKeymap())||void 0===n?void 0:n.mouseOver;i&&(r.game.engine.isRunning?i(o).setAsNextAction():i(o).immediatelyExecuteAction())})),t.on("click",(t=>{let n=null;1===t.evt.which?n=a.getKeymap().mouseLeftButton:3===t.evt.which&&(n=a.getKeymap().mouseRightButton||a.getKeymap().Escape);const o=r.getRelativeTilePosition(e);n&&n(o).immediatelyExecuteAction()})),t.on("mouseout",(()=>{}))}addMouseListenersToNode(t,e){this.mouseOverAnimations=[];const r=this;let a="#3e7dc9",n=[],o=r.game.getFirstPlayer(),i=null,s=null;t.on("mouseover",(()=>{console.log("mouseover"),r.lastMouseOverNode=t;const c=r.getRelativeTilePosition(e),l=(t=>{let{game:e,position:r,entityType:a}=t;const n=Rt({game:e,position:r});return Ot(n,a)})({game:r.game,position:c,entityType:"DESTRUCTABLE"});if(r.preparedToFire(o)){const t=o.getPosition();new le({targetPos:c,availablePositions:Et(t,o.getAttackRange()),actor:o,game:r.game}).immediatelyExecuteAction(),o.getKeymap().m(c).immediatelyExecuteAction()}if(l.length<=0&&!r.preparedToFire(o)){a="#fff";const t=o.getPosition();n=dt(r.game,c,t),n.length&&(i=ce),r.mouseOverAnimations.push(...r.highlightPathTiles(n))}l.length>0&&(s="f"),r.mouseOverAnimations.push(r.highlightTile(c,a))})),t.on("click",(()=>{let e=null;i?(e=new i({targetPos:n[0],game:r.game,actor:o,energyCost:100}),i=null):s&&(e=o.getKeymap()[s](),s=null),Boolean(e)&&(e.immediatelyExecuteAction(),t.fire("mouseout"),t.fire("mouseover"))})),t.on("mouseout",(()=>{r.removeMouseoverAnimations()}))}addMouseoverAnimations(){this.lastMouseOverNode&&this.lastMouseOverNode.fire("mouseover")}removeMouseoverAnimations(){this.mouseOverAnimations.length>0&&this.removeAnimations(this.mouseOverAnimations.map((t=>t.id)))}resetMouseoverAnimations(){this.removeMouseoverAnimations(),this.lastMouseOverNode&&this.lastMouseOverNode.fire("mouseover")}preparedToFire(t){var e;const r=t.getKeymap().f;return!!r&&"Fire"===(null===(e=r())||void 0===e?void 0:e.label)}highlightTile(t,e){return this.addAnimation(ue.BLINK_BOX,{...t,color:e})}highlightPathTiles(t,e){const r=[];return t.forEach((t=>{r.push(this.addAnimation(ue.BLINK_TILE,{...t,color:e}))})),r}getRelativeTilePosition(t){return{x:t.x-this.game.getRenderOffsetX(),y:t.y-this.game.getRenderOffsetY()}}getAbsoultueX(t){return this.tileWidth*t+(this.tileOffset+this.tileGutter)}getAbsoultueY(t){return this.tileWidth*t+(this.tileOffset+this.tileGutter)}getTilesWide(t,e,r){return Math.floor((t-e)/r)}getTilesHigh(t,e,r){return Math.floor((t-e)/r)}getTilesDownOnScreenByWidth(t){return Math.ceil(t/this.tileWidth)}getTilesDownOnScreenByHeight(t){return Math.ceil(t/this.tileHeight)}draw(){this.layer.batchDraw()}}const _e={KUNAI:"Kunai",DIRECTIONAL_KUNAI:"Directional Kunai",SWORD:"Sword",AXE:"Axe",ARMOR:"Armor",WATER_GUN:"Water Gun",BARRIER:"Barrier"},ve=(t,e,r,a)=>new $n({game:t.game,direction:r,passable:!0,pos:{x:e.x,y:e.y},renderer:{character:">",color:"white",background:"",animation:[{background:"lightgrey",color:"grey",character:">"},{background:"lightgrey",color:"grey",character:"v"},{background:"lightgrey",color:"grey",character:"<"},{background:"lightgrey",color:"grey",character:"^"},{background:"lightgrey",color:"grey",character:">"}]},traversableTiles:["WATER"],name:_e.DIRECTIONAL_KUNAI,speed:600,energy:0,range:a}),be=t=>new Hn({game:t.game,name:_e.AXE,passable:!0,attackDamage:5,equipmentType:Xt.GENERIC,renderer:{character:"a",sprite:"\ue888",color:"white",background:""}}),we=t=>new Hn({game:t.game,name:_e.WATER_GUN,passable:!0,attackDamage:0,equipmentType:Xt.GENERIC,renderer:{character:"w",sprite:"\ue890",color:zt.SOLARIZED.blue,background:""}}),xe=t=>new qn({game:t.game,name:"Fire Jacket",passable:!0,defense:1,equipmentType:Xt.GENERIC,renderer:{character:"J",sprite:"\ue89b",color:zt.SOLARIZED.magenta,background:""}}),Oe=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"GROUND",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0;for(let c=0;c<i;c++)for(let i=0;i<s;i++)if(c>=e.y&&c<=e.y+(r-1)&&i>=e.x&&i<=e.x+(a-1)){Ce({map:o,key:`${i},${c}`,tileKey:t,tileType:n})}},Re=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"GROUND",o=arguments.length>5?arguments[5]:void 0;for(let i=e.y;i<e.y+r;i++)for(let s=e.x;s<e.x+a;s++)if(i===e.y||i===e.y+r-1||s===e.x||s===e.x+a-1){Ce({map:o,key:`${s},${i}`,tileKey:t,tileType:n})}},Ae=function(){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GROUND";Et(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},arguments.length>1&&void 0!==arguments[1]?arguments[1]:3).forEach((e=>{const r=`${e.x},${e.y}`;Ce({map:Da.map,key:r,tileKey:Da.tileKey,tileType:t})}))},Ce=t=>{let{map:e,key:r,tileKey:a,tileType:n,entities:o=[]}=t;const i=Gt.get(a[n],"animation.length",0),s={type:n,currentFrame:at(0,i),entities:o,tileKey:a};return e[r]=s,s},ke=t=>{let{tile:e,tag:r}=t;return Gt.get(e.tileKey[e.type],"tags",[]).includes(r)},Ee=t=>{let{map:e,position:r}=t;return e[it(r)]},Se=function(t,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,o=Ne(),i=1e3;for(;o.length<a+1;){let a=Pe(o);if(a){const i=Ie(a,e,r,n);Fe(t,i,n,0)&&o.push(a)}if(i-=1,i<=0)break}return Te(t,o,e,r,n),o},Te=(t,e,r,a,n)=>{const o=[{x:1,y:1},{x:n-1,y:n-1},{x:1,y:n-1},{x:n-1,y:1}];for(let i=0;i<e.length-1;i++){const s=e[i];let c=Ie(s,r,a,n);const l=et(o);c.x+=l.x,c.y+=l.y;Le(e,s).forEach((e=>{let o=Ie(e,r,a,n);const i=l;o.x+=i.x,o.y+=i.y,De(t,c,o)}))}},Le=(t,e)=>{const r=Me(e);return t.filter((t=>r.find((e=>e.x===t.x&&e.y===t.y))))},De=(t,e,r)=>{const a=[Math.sign(r.x-e.x),Math.sign(r.y-e.y)];let n=1e3,o=_t(e,a),i=!1;for(;!ot(o,r);){let e=t[it(o)];if(e&&je(e)&&(i?e.type="FLOOR":(e.type="DOOR",i=!0)),o=_t(o,a),n-=1,n<=0)break}},Ne=()=>[{x:0,y:0}],Pe=t=>{let e=et(t),r=Ue(e),a=Ge(r,t),n=1e3;for(;a;)if(e=et(t.filter((t=>!ot(t,e)))),r=Ue(e),a=Ge(r,t),n-=1,n<=0){a=!1,r=!1;break}return r},Ue=t=>et(Me(t)),Ge=(t,e)=>e.filter((e=>e.x===t.x&&e.y===t.y)).length>0,Ie=(t,e,r,a)=>({x:t.x+e+a*t.x,y:t.y+r+a*t.y}),Me=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[{x:t.x,y:t.y+1},{x:t.x+1,y:t.y},{x:t.x,y:t.y-1},{x:t.x-1,y:t.y}];return e&&(r=r.concat([{x:t.x+1,y:t.y+1},{x:t.x+1,y:t.y-1},{x:t.x-1,y:t.y-1},{x:t.x-1,y:t.y+1}])),r},Fe=(t,e,r,a)=>{const n=r+1-a;for(let o=0;o<n;o++)for(let r=0;r<n;r++){const a={x:e.x+o,y:e.y+r};let n=t[it(a)];if(!n)return!1;if("ROAD_EDGE"===n.type)return!1;if(je(n))return!1;if("FLOOR"===n.type)return!1}for(let o=0;o<n;o++)for(let r=0;r<n;r++){const a={x:e.x+o,y:e.y+r};let i="FLOOR";0!==o&&o!==n-1||(i="WALL_VERTICAL"),0!==r&&r!==n-1||(i="WALL_HORIZONTAL"),0===o&&0===r&&(i="WALL_CORNER_NW"),0===o&&r===n-1&&(i="WALL_CORNER_SW"),o===n-1&&0===r&&(i="WALL_CORNER_NE"),o===n-1&&r===n-1&&(i="WALL_CORNER_SE");let s=t[it(a)];s&&(s.type=i)}return!0},je=t=>ke({tile:t,tag:"WALL"});class We{constructor(t){let{game:e=null,data:r={}}=t,a=Ut()();this.id=a,this.game=e,this.data=r,this.infoBlocks={},this.progressBars={}}initialize(){}update(){}createOrUpdateInfoBlock(t,e){(0,Gt.merge)(this.infoBlocks,{[t]:e})}}var Be=r(775);const ze={fire_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/fire-00.mp3"],volume:.5,loop:!0}),fire_1:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/fire-01.mp3"],volume:.05,loop:!0}),scream_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/scream-00.wav"]}),scream_1:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/scream-01.wav"]}),scream_2:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/scream-02.wav"]}),water_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/water-04.wav"]}),water_1:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/water-05.wav"]}),chop_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/chop-00.wav"],volume:.2}),chop_1:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/chop-01.wav"],volume:.2}),equip_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/equip-00.wav"],volume:.2}),equip_1:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/equip-01.wav"],volume:.2}),explosion_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/explosion-00.wav"],volume:.2}),save:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/save.wav"]}),lose:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/lose-00.wav"]}),grab_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/grab-00.wav"],volume:.2}),release_0:new Be.Howl({src:[window.PUBLIC_URL+"/sounds/grab-01.wav"],volume:.2})};r(4082);const He={main:"#07111D",accent:"#E19D3F",text:"#eee",base04:"#07111D",base03:"#02252e",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900",cog1:"#27295f",cog2:"#3e7dc9",cog3:"#18c0f8",cog4:"#86C8E4",locust0:"#423a18",locust1:"#96641D",locust2:"#E19D3F",locust3:"#E7C898",flesh1:"#833139",flesh2:"#CC7468",flesh3:"#DDA78F",gray:"#6D7886"},Ve={GROUND:{background:He.base04,foreground:He.base02,character:".",sprite:"\ue8a2",passable:!0,tags:["PROVIDING_COVER"]},COVER_PLACEHOLDER:{background:He.base04,foreground:He.base02,character:".",sprite:"\ue8a2",passable:!0,tags:["PROVIDING_COVER"]},GROUND_ALT:{background:He.base04,foreground:He.base02,character:"",sprite:"",passable:!0,tags:["PROVIDING_COVER"]},EMERGENCE_DESTROYED:{background:He.base04,foreground:He.locust0,character:"",sprite:"\ue805",passable:!0},EMERGENCE_GROUND:{background:He.locust0,foreground:He.locust1,character:".",sprite:"\ue803",passable:!0},EMERGENCE_OUTER_GROUND:{background:He.locust0,foreground:He.locust2,character:".",sprite:"\ue8a3",passable:!0},FLOOR:{background:He.base02,foreground:He.locust1,character:"",passable:!0,tags:["BURNABLE"]},WALL:{background:He.base02,foreground:He.locust2,character:"#",sprite:"\ue802",passable:!1,tags:["BURNABLE","WALL"]},WALL_VERTICAL:{background:He.base02,foreground:He.locust2,character:"||",sprite:"\ue8df",passable:!1,tags:["BURNABLE","WALL"]},WALL_HORIZONTAL:{background:He.base02,foreground:He.locust2,character:"=",sprite:"\ue8de",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_NW:{background:He.base02,foreground:He.locust2,character:"#",sprite:"\ue8e1",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_NE:{background:He.base02,foreground:He.locust2,character:"#",sprite:"\ue8e2",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_SW:{background:He.base02,foreground:He.locust2,character:"#",sprite:"\ue8e3",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_SE:{background:He.base02,foreground:He.locust2,character:"#",sprite:"\ue8e4",passable:!1,tags:["BURNABLE","WALL"]},ROAD_EDGE:{background:He.base03,foreground:He.base02,character:"",sprite:"",passable:!0,tags:["ROAD","PROVIDING_COVER"]},ROAD:{background:He.base03,foreground:He.base02,character:"=",sprite:"\ue8de",passable:!0,tags:["ROAD","PROVIDING_COVER"]},DOOR:{background:He.base02,foreground:He.base1,character:"+",sprite:"\ue86d",passable:!0,tags:["BURNABLE"]},SAFE:{background:He.base04,foreground:He.base02,character:".",sprite:"\ue8a2",passable:!0},LOCKED_EXIT:{background:He.base04,foreground:He.base02,character:".",sprite:"\ue8a2",passable:!0},EXIT:{background:He.base04,foreground:He.green,character:">",sprite:"\ue8b1",passable:!0},BURNT:{background:He.base03,foreground:He.red,character:"X",sprite:"\ue8bb",passable:!0,tags:["BURNABLE"],animation:[{background:He.base03,foreground:He.yellow,character:"X",sprite:"\ue8a4",passable:!0},{background:He.base03,foreground:He.yellow,character:"x",sprite:"\ue8a4",passable:!0},{background:He.base03,foreground:He.red,character:"X",sprite:"\ue8a4",passable:!0},{background:He.base03,foreground:He.orange,character:"x",sprite:"\ue8a4",passable:!0},{background:He.base03,foreground:He.orange,character:"X",sprite:"\ue8a4",passable:!0},{background:He.base03,foreground:He.red,character:"x",sprite:"\ue8a4",passable:!0},{background:He.base03,foreground:He.red,character:"X",sprite:"\ue8a4",passable:!0}]}},qe={amount:{background:He.base04,foreground:He.locust2,character:""},attackRange:{background:He.green,foreground:He.base3,character:"==>"},magazine:{background:He.gray,foreground:He.base3,character:"!!"},baseRangedAccuracy:{background:He.violet,foreground:He.base3,character:"*"},baseRangedDamage:{background:He.red,foreground:He.base3,character:"x",sprite:"\ue890"},meleeDamage:{background:He.red,foreground:He.base3,character:"x",sprite:"\ue888"}},Ke={main:"#603030",accent:"#F0D8C0",text:"#eeeeee",white:"#eeeeee",gaara:"#603030",rock_lee:"#155859",tenten:"#b75a5e",tenten_alt:"#F0D8C0",temari:"#423c58",temari_alt:"#f0b8f8",shino:"#c0cfc8",shino_alt:"#353641",sasuke:"#103880",sasuke_alt:"#b75a5e",kiba:"#9c9ca6",kiba_alt:"#89193b",neji:"#F0D8C0",neji_alt:"#353641",shikamaru:"#788b78",shikamaru_alt:"#353641",leaf:"#36635b",wraps:"#F0D8C0",wall:"#a3625f",wall_alt:"#714545",chakra:"#3e7dc9",dirt00:"#2a251f",dirt0:"#dbcdab",grass00:"#435035",grass0:"#87ac7b",base04:"#07111D",base03:"#02252e",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900",black:"#16161d",cog1:"#27295f",cog2:"#3e7dc9",cog3:"#18c0f8",cog4:"#86C8E4",locust0:"#423a18",locust1:"#96641D",locust2:"#E19D3F",locust3:"#E7C898",flesh1:"#833139",flesh2:"#CC7468",flesh3:"#DDA78F",gray:"#6D7886"};Ke.bg_override=Ke.dirt00;const $e={GROUND:{background:Ke.bg_override||Ke.grass0,foreground:Ke.grass00,character:".",sprite:"\ue8a2",passable:!0,tags:["PROVIDING_COVER","BURNABLE"],animation:[{background:Ke.bg_override||Ke.grass0,foreground:Ke.grass0,character:",",sprite:'"',passable:!0},{background:Ke.bg_override||Ke.grass0,foreground:Ke.grass00,character:".",sprite:"\ue8a2",passable:!0}]},GROUND_ALT:{background:Ke.bg_override||Ke.dirt0,foreground:Ke.dirt00,character:".",sprite:".",passable:!0,tags:["PROVIDING_COVER","BURNABLE"],animation:[{background:Ke.bg_override||Ke.dirt0,foreground:Ke.dirt0,character:".",sprite:".",passable:!0},{background:Ke.bg_override||Ke.dirt0,foreground:Ke.dirt00,character:".",sprite:".",passable:!0}]},FLOOR:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust1,character:"",passable:!0,tags:["BURNABLE"]},WALL:{background:Ke.bg_override||Ke.wall_alt,foreground:Ke.wall,character:"#",sprite:"#",passable:!1,tags:["BURNABLE","WALL"]},WALL_VERTICAL:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust2,character:"||",sprite:"\ue8df",passable:!1,tags:["BURNABLE","WALL"]},WALL_HORIZONTAL:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust2,character:"=",sprite:"\ue8de",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_NW:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust2,character:"#",sprite:"\ue8e1",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_NE:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust2,character:"#",sprite:"\ue8e2",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_SW:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust2,character:"#",sprite:"\ue8e3",passable:!1,tags:["BURNABLE","WALL"]},WALL_CORNER_SE:{background:Ke.bg_override||Ke.base02,foreground:Ke.locust2,character:"#",sprite:"\ue8e4",passable:!1,tags:["BURNABLE","WALL"]},ROAD_EDGE:{background:Ke.bg_override||Ke.base03,foreground:Ke.base02,character:"",sprite:"",passable:!0,tags:["ROAD","PROVIDING_COVER"]},ROAD:{background:Ke.bg_override||Ke.base03,foreground:Ke.base02,character:"=",sprite:"\ue8de",passable:!0,tags:["ROAD","PROVIDING_COVER"]},DOOR:{background:Ke.bg_override||Ke.base02,foreground:Ke.base1,character:"+",sprite:"\ue86d",passable:!0,tags:["BURNABLE"]},SAFE:{background:Ke.bg_override||Ke.base04,foreground:Ke.base02,character:".",sprite:"\ue8a2",passable:!0},LOCKED_EXIT:{background:Ke.bg_override||Ke.base04,foreground:Ke.base02,character:".",sprite:"\ue8a2",passable:!0},EXIT:{background:Ke.bg_override||Ke.base04,foreground:Ke.green,character:">",sprite:"\ue8b1",passable:!0},BURNT:{background:Ke.bg_override||Ke.base03,foreground:Ke.red,character:"X",sprite:"\ue8bb",passable:!0,tags:["BURNABLE"],animation:[{background:Ke.bg_override||Ke.base03,foreground:Ke.yellow,character:"X",sprite:"\ue8a4",passable:!0},{background:Ke.bg_override||Ke.base03,foreground:Ke.yellow,character:"x",sprite:"\ue8a4",passable:!0},{background:Ke.bg_override||Ke.base03,foreground:Ke.red,character:"X",sprite:"\ue8a4",passable:!0},{background:Ke.bg_override||Ke.base03,foreground:Ke.orange,character:"x",sprite:"\ue8a4",passable:!0},{background:Ke.bg_override||Ke.base03,foreground:Ke.orange,character:"X",sprite:"\ue8a4",passable:!0},{background:Ke.bg_override||Ke.base03,foreground:Ke.red,character:"x",sprite:"\ue8a4",passable:!0},{background:Ke.bg_override||Ke.base03,foreground:Ke.red,character:"X",sprite:"\ue8a4",passable:!0}]},WATER:{animation:[{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"~",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"=",passable:!1},{background:Ke.bg_override||Ke.cog1,foreground:Ke.cog2,character:"%",passable:!1}],background:Ke.bg_override||Ke.cog2,foreground:Ke.cog1,character:"~",passable:!1,forceAnimate:!0}},Xe=(Ke.base04,Ke.locust2,Ke.green,Ke.base3,Ke.gray,Ke.base3,Ke.violet,Ke.base3,Ke.red,Ke.base3,Ke.red,Ke.base3,function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"box",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"%",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:He.base02,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:He.base01,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=et(["\ue800","\ue801","\ue802"]),l=new In({pos:t,renderer:{character:a,sprite:s||c,color:i,background:o},name:r,game:e,durability:n,accuracyModifer:-.3,damageModifer:0});e.placeActorOnMap(l)}),Ye={point:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1}]},verticalLine:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1}]},horizontalLine:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:1,y:0,taken:!1}]},smallSquare:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1}]},southEastVerticalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:0,y:2,taken:!1},{x:1,y:2,taken:!1}]},southWestVerticalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:0,y:2,taken:!1},{x:-1,y:2,taken:!1}]},northWestVerticalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:-1,taken:!1},{x:0,y:-2,taken:!1},{x:-1,y:-2,taken:!1}]},northEastVerticalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:-1,taken:!1},{x:0,y:-2,taken:!1},{x:1,y:-2,taken:!1}]},southEastHorizontalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:1,y:0,taken:!1},{x:2,y:0,taken:!1},{x:2,y:1,taken:!1}]},southWestHorizontalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:-1,y:0,taken:!1},{x:-2,y:0,taken:!1},{x:-2,y:1,taken:!1}]},northEastHorizontalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:1,y:0,taken:!1},{x:2,y:0,taken:!1},{x:2,y:-1,taken:!1}]},northWestHorizontalL:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:-1,y:0,taken:!1},{x:-2,y:0,taken:!1},{x:-2,y:-1,taken:!1}]}},Ze=[...Array(1).fill("point"),...Array(4).fill("verticalLine"),...Array(3).fill("horizontalLine"),...Array(2).fill("smallSquare"),...Array(2).fill("southEastVerticalL"),...Array(2).fill("southWestVerticalL"),...Array(2).fill("northWestVerticalL"),...Array(2).fill("northEastVerticalL"),...Array(1).fill("southEastHorizontalL"),...Array(1).fill("southWestHorizontalL"),...Array(1).fill("northWestHorizontalL"),...Array(1).fill("northEastHorizontalL")],Qe=(t,e,r)=>{St(r,t).forEach((t=>{let r=e.map[it(t)];if(!r)return!1;ke({tile:r,tag:"PROVIDING_COVER"})&&Xe(t,e)}))},Je=(t,e)=>{const r=Ye[et(Ze)];Qe(t,e,r)},tr=(t,e)=>{St(Ye.point,t).forEach((t=>{if(!e.map[it(t)])return!1;!function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Xe(...e,"trunk","o",10,Ke.wall_alt,Ke.wall)}(t,e)}));Et(t,2).forEach((t=>{if(!e.map[it(t)])return!1;!function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Xe(...e,"leaf","&",1,Ke.grass00,Ke.grass0,"\ue862")}(t,e)}))};class er extends se{constructor(t){let{message:e,messageType:r=ee.INFORMATION,processDelay:a=50,...n}=t;super({...n}),this.message=e,this.messageType=r,this.processDelay=a}perform(){return this.game.addMessage(`${this.actor.name} says "${this.message}"`,this.messageType),{success:!0,alternative:null}}}class rr{constructor(t){let{actor:e=null,repeat:r=1,chainOnSuccess:a=!1,chainOnFail:n=!1,extraActionParams:o={}}=t;this.actor=e,this.repeat=r,this.repeated=0,this.chainOnSuccess=a,this.chainOnFail=n,this.extraActionParams=o}isValid(){return!0}reset(){this.repeated=0}shouldRepeat(){return this.repeated<this.repeat}shouldChainToNextBehavior(){return!(!this.chainOnSuccess||!this.actor.lastActionSucceded())||!(!this.chainOnFail||!this.actor.lastActionFailed())}interrupted(){return!this.shouldChainToNextBehavior()&&!this.shouldRepeat()}getDefaultActionParams(){return{game:this.actor.game,actor:this.actor,interrupt:this.interrupted(),energyCost:100,processDelay:10/this.actor.game.engine.actors.length}}constructActionClassAndParams(){return[er,{message:"I am behaving"}]}getAction(){const[t,e]=this.constructActionClassAndParams();return t&&e?new t({...this.getDefaultActionParams(),...e,...this.extraActionParams}):null}}class ar extends se{constructor(t){let{targetPositions:e,processDelay:r=25,...a}=t;super({...a}),this.targetPositions=e,this.processDelay=r}perform(){let t=!1;if(!this.actor.entityTypes.includes("ATTACKING"))return{success:!0,alternative:new er({message:"Ooh I don't know how to attack",game:this.game,actor:this.actor})};let e=[],r={x:this.actor.pos.x,y:this.actor.pos.y},a=this.particleTemplate.renderer;return this.targetPositions.forEach((r=>{let a=this.actor.attack(r);e.push(r),a&&(t=!0)})),this.addParticle(e.length+1,r,null,a,Jt.path,e),t&&(this.actor.energy-=this.energyCost),{success:t,alternative:null}}}class nr extends rr{constructor(t){let{...e}=t;super({...e})}isValid(){return this.actor.getCursorPositions().length}constructActionClassAndParams(){return[ar,{targetPositions:this.actor.getCursorPositions(),onAfter:()=>this.actor.removeAnimations()}]}}class or extends se{constructor(t){let{message:e,messageType:r=ee.INFORMATION,...a}=t;super({...a}),this.processDelay=0}perform(){const t=this.actor.reload();return this.game.addMessage(`${this.actor.name} says "RELOADING"`,ee.INFORMATION),{success:t,alternative:null}}}const ir=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Be.Howl({src:[window.PUBLIC_URL+t],volume:.2,loop:!1,...e})},sr={ambient_howling:ir("/sounds/tall_grass/ambient_loop_howls.mp3",{loop:!0,rate:.75,volume:.1}),wind_loop:ir("/sounds/tall_grass/wind_loop.mp3",{loop:!0,rate:.75,volume:.1}),sac_01:ir("/sounds/tall_grass/monster/sac_01.ogg"),sac_02:ir("/sounds/tall_grass/monster/sac_02.ogg"),sac_03:ir("/sounds/tall_grass/monster/sac_03.ogg"),screech_01:ir("/sounds/tall_grass/monster/screech_01.ogg"),screech_02:ir("/sounds/tall_grass/monster/screech_02.ogg"),screech_03:ir("/sounds/tall_grass/monster/screech_03.ogg"),grass_00:ir("/sounds/tall_grass/rustle/grass_00.mp3"),grass_01:ir("/sounds/tall_grass/rustle/grass_01.mp3"),grass_02:ir("/sounds/tall_grass/rustle/grass_02.mp3"),grass_03:ir("/sounds/tall_grass/rustle/grass_03.mp3"),grass_04:ir("/sounds/tall_grass/rustle/grass_04.mp3"),grass_05:ir("/sounds/tall_grass/rustle/grass_05.mp3"),light_up:ir("/sounds/tall_grass/light_up.mp3"),light_drain:ir("/sounds/tall_grass/light_drain.mp3",{volume:.2}),emergence_01:ir("/sounds/jacinto/EarthDebrisSmallClose01.ogg"),emergence_02:ir("/sounds/jacinto/EarthDebrisSmallClose02.ogg"),cog_tags:ir("/sounds/jacinto/CogTags.ogg"),wretch_melee_01:ir("/sounds/jacinto/actors/wretch/AAttackSmall01.ogg"),wretch_melee_02:ir("/sounds/jacinto/actors/wretch/AAttackSmall03.ogg"),wretch_melee_03:ir("/sounds/jacinto/actors/wretch/AAttackSmall04.ogg"),scion_melee_01:ir("/sounds/jacinto/actors/wretch/AAttackSmall01.ogg",{rate:.5}),scion_melee_02:ir("/sounds/jacinto/actors/wretch/AAttackSmall03.ogg",{rate:.5}),scion_melee_03:ir("/sounds/jacinto/actors/wretch/AAttackSmall04.ogg",{rate:.5}),locust_buff_01:ir("/sounds/jacinto/actors/drone/AChatterAttack01.ogg"),locust_buff_02:ir("/sounds/jacinto/actors/drone/AChatterAttack02.ogg"),locust_buff_03:ir("/sounds/jacinto/actors/drone/AChatterAttack03.ogg"),reload:ir("/sounds/jacinto/weapons/reloadassault02.ogg"),needs_reload:ir("/sounds/jacinto/NeedsReload01.ogg"),level_start:ir("/sounds/jacinto/ObjectiveAdd01.ogg"),level_end:ir("/sounds/jacinto/ObjectiveComplete01.ogg"),cog_rifle_fire_01:ir("/sounds/jacinto/weapons/Assault_Fire_02.ogg"),cog_rifle_fire_02:ir("/sounds/jacinto/weapons/Assault_Fire_07.ogg"),cog_rifle_fire_03:ir("/sounds/jacinto/weapons/CogARifleFire02.ogg"),cog_rifle_fire_04:ir("/sounds/jacinto/weapons/CogARifleFire04.ogg"),shot_missed_01:ir("/sounds/jacinto/weapons/BBulletImpact10.ogg"),shot_missed_02:ir("/sounds/jacinto/weapons/BBulletImpact1.ogg"),longshot_fire_01:ir("/sounds/jacinto/weapons/CogSniperFire01.ogg"),longshot_fire_02:ir("/sounds/jacinto/weapons/CogSniperFire02.ogg"),longshot_fire_03:ir("/sounds/jacinto/weapons/CogSniperFire03.ogg"),pistol_fire_01:ir("/sounds/jacinto/weapons/CogPistolFire01.ogg"),pistol_fire_02:ir("/sounds/jacinto/weapons/CogPistolFire02.ogg"),chainsaw_01:ir("/sounds/jacinto/weapons/ChainsawRevIdle01.ogg"),chainsaw_02:ir("/sounds/jacinto/weapons/ChainsawStart01.ogg"),grenade_ready:ir("/sounds/jacinto/weapons/GrenadeBeep02.ogg"),smoke_grenade_fire:ir("/sounds/jacinto/weapons/GrenadeSmokeSpew01.ogg"),boltok_fire_01:ir("/sounds/jacinto/weapons/LocustBoltok01.ogg"),boltok_fire_02:ir("/sounds/jacinto/weapons/LocustBoltok04.ogg"),hammerburst_fire_01:ir("/sounds/jacinto/weapons/LocustRifleFire01.ogg"),hammerburst_fire_02:ir("/sounds/jacinto/weapons/LocustRifleFire03.ogg"),bullet_hit_01:ir("/sounds/jacinto/weapons/RifleAmmoImpactBodyFlesh01.ogg"),bullet_hit_02:ir("/sounds/jacinto/weapons/RifleAmmoImpactBodyFlesh02.ogg"),bullet_hit_03:ir("/sounds/jacinto/weapons/RifleAmmoImpactBodyFlesh03.ogg"),bullet_miss_01:ir("/sounds/jacinto/weapons/RifleAmmoImpactDirt01.ogg"),bullet_miss_02:ir("/sounds/jacinto/weapons/RifleAmmoImpactDirt02.ogg"),bullet_miss_03:ir("/sounds/jacinto/weapons/RifleAmmoImpactDirt03.ogg"),explosion_01:ir("/sounds/jacinto/weapons/BoomerExplosionA01.ogg"),explosion_02:ir("/sounds/jacinto/weapons/BoomerExplosionB01.ogg")};class cr{constructor(t){let{game:e,pos:r={x:0,y:0},life:a=10,speed:n=1,color:o="#fff",backgroundColor:i="#000",character:s="*",direction:c=null,path:l=null,rendererGradients:u=null,transfersBackground:h=!1,transfersBackgroundOnDestroy:d=!1}=t;this.game=e,this.pos=r,this.life=a,this.maxLife=a,this.speed=n,this.color=o,this.backgroundColor=i,this.character=s,this.direction=c,this.path=l,this.rendererGradients=u,this.transfersBackground=h,this.transfersBackgroundOnDestroy=d;const p=this.game.display.particleLayer;this.displayNode=this.game.display.createTile(this.pos.x,this.pos.y,this.character,this.color,this.backgroundColor,p)}update(){this.life-=1,this.life>0?(this.updateColors(),this.updatePosition(),this.transfersBackground&&this.transferBackground()):this.destroy()}updatePosition(){this.pos=this.getNextPos();const t=this.game.getRenderOffsetX(),e=this.game.getRenderOffsetY(),r=(this.pos.x+t)*this.displayNode.width(),a=(this.pos.y+e)*this.displayNode.height();this.displayNode.x(r),this.displayNode.y(a)}getNextPos(t){return this.direction?this.getNextPosInDirection(this.speed):this.path?this.getNextPosInPath():this.pos}getNextPosInDirection(t){return{x:this.pos.x+this.direction.x*this.speed*t,y:this.pos.y+this.direction.y*this.speed*t}}getNextPosInPath(){const t=this.path.shift();return t?{...t}:{...this.pos}}updateColors(){if(null===this.rendererGradients)return;const t=Object.keys(this.rendererGradients),e=1-this.life/this.maxLife;t.forEach((t=>{const[r,a]=this.rendererGradients[t],n=lr(r,a,e);this[t]=n})),this.game.display.updateTile(this.displayNode,this.character,this.color,this.backgroundColor)}destroy(){this.transfersBackgroundOnDestroy&&this.transferBackground()}transferBackground(){const t=lt(this.game,this.pos);t&&(t.overriddenBackground=this.backgroundColor,t.entities.forEach((t=>{null!==t&&void 0!==t&&t.renderer&&(t.renderer.background=this.backgroundColor)})))}}const lr=(t,e,r)=>(t=t.substr(1).match(/.{1,2}/g).map((t=>parseInt(t,16)*(1-r))),e=e.substr(1).match(/.{1,2}/g).map((t=>parseInt(t,16)*r)),"#"+[0,1,2].map((r=>Math.min(Math.round(t[r]+e[r]),255))).reduce(((t,e)=>(t<<8)+e),0).toString(16).padStart(6,"0"));class ur{constructor(t){let{game:e=null,particles:r=[],isRunning:a=!1,easingFunction:n=Tt.linear,animationTimeStep:o=.9}=t;this.game=e,this.particles=r,this.easingFunction=n,this.animationTimeStep=o,this.isRunning=a}addParticle(t){let e=new cr({game:this.game,...t});return this.particles.push(e),!0}async process(t){this.particles.forEach((t=>{t.update(),t.life<=0&&t.displayNode.destroy()})),this.game.display.particleLayer.batchDraw();const e=Math.max(100*t,12);return await Q(e),this.particles=this.particles.filter((t=>t.life>0)),0!==this.particles.length}getTileAtPos(t,e){let r=`${t},${e}`;return this.game.map[r]}async start(){this.isRunning=!0;let t=this.animationTimeStep;for(;this.isRunning;)this.isRunning=await this.process(t),t=this.easingFunction(t)}stop(){this.isRunning=!1}}const hr=t=>{let{game:e,fromPosition:r,targetPositions:a,colorGradient:n=["#ff551a","#673ab7"],backgroundColorGradient:o=["#673ab7","#ff551a"],easingFunction:i=Tt.linear,animationTimeStep:s=.2,reverse:c=!1,pathTailLength:l=0,character:u="*",transfersBackground:h=!1,transfersBackgroundOnDestroy:d=!1}=t;const p=new ur({game:e,easingFunction:i,animationTimeStep:s,character:u});return a.forEach((t=>{let a=ht(e,r,t);a.push({...t}),c&&(a=a.reverse());const i=l||a.length;J(i).forEach((t=>{const e=[...Array(t).fill({...a[0]}),...a];p.addParticle({life:e.length+1,pos:e[0],path:e,transfersBackground:h,transfersBackgroundOnDestroy:d,rendererGradients:{color:n,backgroundColor:o},character:u})}))})),p};class dr extends se{constructor(t){let{targetPositions:e,processDelay:r=25,...a}=t;super({...a}),this.targetPositions=e,this.processDelay=r,this.multiTargetRangedAttackHits=[],this.multiTargetRangedAttackMisses=[],this.onSuccess=()=>{(null===a||void 0===a?void 0:a.onSuccess)&&a.onSuccess(),this.handleSuccess()}}async handleSuccess(){const t=this.getFirstWeapon();if(!t)return!1;t.afterFireSuccess({fromPosition:t.getPosition(),targetPositions:this.targetPositions,hits:this.multiTargetRangedAttackHits,misses:this.multiTargetRangedAttackMisses})}getFirstWeapon(){const t=this.actor.getEquipedWeapons();return t.length<=0?null:t[0]}perform(){let t=!1;if(!this.actor.entityTypes.includes("RANGED_ATTACKING"))return{success:!0,alternative:new er({message:"Ooh I don't know how to attack",game:this.game,actor:this.actor})};const e=this.actor.getEquipedWeapons();return e.length>0&&e[0].magazine<=0?(sr.needs_reload.play(),{success:!1,alternative:null}):(this.targetPositions.forEach((e=>{let[r,a]=this.actor.rangedAttack(e);r&&(t=!0,a?this.multiTargetRangedAttackHits.push(e):this.multiTargetRangedAttackMisses.push(e))})),{success:t,alternative:null})}}class pr extends rr{constructor(t){let{...e}=t;super({...e})}isValid(){return this.actor.getCursorPositions().length}constructActionClassAndParams(){return[dr,{targetPositions:this.actor.getCursorPositions(),onAfter:()=>{this.actor.removeAnimations(),this.actor.reload()}}]}}class fr extends se{constructor(t){let{effect:e,processDelay:r=25,...a}=t;super({...a}),this.effect=e,this.processDelay=r}perform(){let t=this.game.engine.addStatusEffect(this.effect);return kt(this.actor.pos.x,this.actor.pos.y,4).forEach((t=>{this.addParticle(3,{...t},{x:-1*Math.sign(t.x-this.actor.pos.x),y:-1*Math.sign(t.y-this.actor.pos.y)})})),{success:t,alternative:null}}}class gr extends se{constructor(t){let{effects:e,processDelay:r=25,...a}=t;super({...a}),this.effects=e,this.processDelay=r}addParticleAnimationAt(t){let{pos:e}=t;kt(e.x,e.y,4).forEach((t=>{this.addParticle(3,{...t},{x:-1*Math.sign(t.x-t.x),y:-1*Math.sign(t.y-t.y)})}))}perform(){let t=!1;return this.effects.forEach((e=>{const r=this.game.engine.addStatusEffect(e);t=r||t,r&&this.addParticleAnimationAt({pos:e.actor.getPosition()})})),{success:t,alternative:null}}}class yr extends rr{constructor(t){let{effectClass:e,effectDefaults:r={},...a}=t;super({...a}),this.effectClass=e,this.effectDefaults=r}isValid(){return this.actor.getCursorPositions().length}getTargetsOnTile(t){return xt(t.entities)}createEffects(){let t=[];return this.actor.getCursorPositions().forEach((e=>{let r=this.actor.game.map[it(e)];if(r){this.getTargetsOnTile(r).forEach((e=>{const r=new this.effectClass({...this.effectDefaults,actor:e,game:this.actor.game});t.push(r)}))}})),t}constructActionClassAndParams(){const t=this.createEffects();return[gr,{effects:t,onAfter:()=>this.actor.removeAnimations()}]}}class mr extends yr{constructor(t){let{...e}=t;super({...e})}getTargetsOnTile(t){return t.entities.filter((t=>this.actor.isAlly(t)))}}class _r extends rr{constructor(t){let{range:e=3,attribute:r="name",attributeValue:a=null,...n}=t;super({...n}),this.range=e,this.attribute=r,this.attributeValue=a,this.target=null}isValid(){return!0}getEntitiesInRange(){return Et(this.actor.getPosition(),this.range).reduce(((t,e)=>[...t,...At({game:this.actor.game,position:e,attr:this.attribute,value:this.attributeValue})]),[])}constructActionClassAndParams(){let t=null,e=null,r=this.actor.getPosition();if(this.target||(this.target=et(this.getEntitiesInRange())),!this.target)return[t,e];let a=dt(this.actor.game,this.target.getPosition(),this.actor.getPosition());return r=a.length>0?a[0]:null,t=ce,e={hidden:!0,targetPos:r},[t,e]}}class vr extends rr{constructor(t){let{...e}=t;super({...e}),this.targetCover=null}isValid(){return this.enemiesExist()&&!this.actor.isCovered()}enemiesExist(){return this.actor.getEnemies().length>0}getDistanceToTarget(t){return dt(this.actor.game,t.getPosition(),this.actor.getPosition(),8).length}findClosestCover(){let t=null;return this.actor.getCoverEntities().forEach((e=>{t||(t=e);this.getDistanceToTarget(e)<this.getDistanceToTarget(t)&&(t=e)})),t}constructActionClassAndParams(){let t=null,e=null,r=null,a=this.actor.getPosition();if(r=this.targetCover?this.targetCover:this.findClosestCover(),!r)return[t,e];let n=dt(this.actor.game,r.getPosition(),this.actor.getPosition());return a=n.length>0?n[0]:null,t=ce,e={hidden:!0,targetPos:a},[t,e]}}function br(t){let{game:e,fromPosition:r,spatterRadius:a=3,spatterAmount:n=.3,spatterDirection:o={x:0,y:0},spatterColors:i=["#833139","#aa2123"],animationTimeStep:s=.2,reverse:c=!1,transfersBackground:l=!1,transfersBackgroundOnDestroy:u=!1}=t;const h=new ur({game:e,easingFunction:Tt.easeOut,animationTimeStep:s});return((t,e,r)=>{let a=[];const n=r.x<=0,o=r.x>=0,i=r.y<=0,s=r.y>=0;for(let c=t.x-e*n;c<t.x+e*o;c++){let r=Math.floor(e*Math.sin(Math.acos((t.x-c)/e)));for(let e=t.y-r*i;e<t.y+r*s;e++)a.push({x:c,y:e})}return a})(r,a,o).filter((()=>Math.random()<n)).forEach((t=>{let a=ht(e,r,t);a.push({...t}),c&&(a=a.reverse());const n=[et(i),et(i)],o=[...n].reverse();h.addParticle({life:a.length+1,pos:{...a[0]},path:a,transfersBackground:l,transfersBackgroundOnDestroy:u,rendererGradients:{color:n,backgroundColor:o}})})),h}class wr extends se{constructor(t){let{targetPos:e,additionalDamage:r=0,processDelay:a=100,...n}=t;super({...n}),this.targetPos=e,this.additionalDamage=r,this.processDelay=a,this.particleTemplate=Qt.damage}perform(){let t=!1;if(!this.actor.entityTypes.includes("ATTACKING"))return{success:!0,alternative:new er({message:"Ooh I don't know how to attack",game:this.game,actor:this.actor,energyCost:0})};if(t=this.actor.attack(this.targetPos,this.additionalDamage),t){et([ze.chop_0,ze.chop_1]).play(),this.addParticle(1,{...this.targetPos},{x:0,y:0}),br({game:this.game,fromPosition:this.targetPos,spatterAmount:.3,spatterRadius:1,spatterDirection:vt(this.actor.getPosition(),this.targetPos),transfersBackground:!0}).start()}return{success:t,alternative:null}}}class xr extends se{constructor(t){let{targetPos:e,processDelay:r=25,...a}=t;super({...a}),this.targetPos=e,this.processDelay=r}perform(){let t=!1,e=null;return this.actor.move(this.targetPos)?t=!0:e=new wr({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:this.energyCost}),{success:t,alternative:e}}}class Or extends rr{constructor(t){let{maintainDistanceOf:e=1,...r}=t;super({...r}),this.chainOnFail=!0,this.maintainDistanceOf=e}isValid(){return!0}getDistanceToTarget(t){return dt(this.actor.game,t.getPosition(),this.actor.getPosition(),8).length}findClosestEnemy(){let t=null;return this.actor.getEnemies().forEach((e=>{t||(t=e);this.getDistanceToTarget(e)<this.getDistanceToTarget(t)&&(t=e)})),t}constructActionClassAndParams(){let t=null,e=null;const r=this.findClosestEnemy();if(!r)return[null,null];let a=dt(this.actor.game,r.getPosition(),this.actor.getPosition());this.maintainDistanceOf>0&&(a=a.slice(0,-this.maintainDistanceOf));let n=a.length>0?a[0]:null;return n?(t=ce,e={hidden:!0,targetPos:n},[t,e]):[null,null]}}class Rr extends rr{constructor(t){let{maintainDistanceOf:e=3,...r}=t;super({...r}),this.maintainDistanceOf=e}isValid(){return!this.enemiesExist()}enemiesExist(){return this.actor.getEnemies().length>0}getDistanceToTarget(t){return dt(this.actor.game,t.getPosition(),this.actor.getPosition(),8).length}constructActionClassAndParams(){let t=null,e=null;const r=this.actor.game.getFirstPlayer();if(!r)return[null,null];let a=dt(this.actor.game,r.getPosition(),this.actor.getPosition());a=a.slice(0,-this.maintainDistanceOf);let n=a.length>0?a[0]:null;return n?(t=ce,e={hidden:!0,targetPos:n},[t,e]):[null,null]}}class Ar extends rr{constructor(t){let{maintainDistanceOf:e=1,...r}=t;super({...r}),this.chainOnFail=!0,this.maintainDistanceOf=e}isValid(){return!0}getDistanceToTarget(t){return dt(this.actor.game,t.getPosition(),this.actor.getPosition(),8).length}findClosestEnemy(){let t=null;return this.actor.getEnemies().forEach((e=>{t||(t=e);this.getDistanceToTarget(e)<this.getDistanceToTarget(t)&&(t=e)})),t}constructActionClassAndParams(){let t=null,e=null;const r=this.findClosestEnemy();if(!r)return[null,null];if(this.getDistanceToTarget(r)>=this.maintainDistanceOf)return[null,null];const a=this.actor.getPosition(),n=r.getPosition(),o=a.x-n.x,i=a.y-n.y,s={x:a.x+Math.sign(o),y:a.y+Math.sign(i)};return t=ce,e={hidden:!0,targetPos:s},[t,e]}}class Cr extends rr{constructor(t){let{attackPattern:e=Zt.point,color:r=He.red,...a}=t;super({...a}),this.attackPattern=e,this.color=r,this.chainOnSuccess=!0}isValid(){let t=!1;return St(this.attackPattern,this.getTargetPosition()).forEach((e=>{let r=this.actor.game.map[it(e)];if(r){xt(r.entities).forEach((e=>{this.actor.isEnemy(e)&&(t=!0)}))}})),t}getTargetPosition(){return this.actor.getPosition()}constructActionClassAndParams(){const t=St(this.attackPattern,this.getTargetPosition());return this.actor.activateCursor(t),this.actor.updateAllCursorNodes([{key:"fill",value:this.color},{key:"stroke",value:"transparent"}]),[er,{message:"I am telegraphing my next attack",processDelay:500}]}}class kr extends Or{constructor(t){let{accuracyToAttackThreshold:e=0,...r}=t;super({...r}),this.accuracyToAttackThreshold=e,this.chainOnSuccess=!0}isValid(){const t=this.actor.getAttackRange(),e=this.findClosestEnemyInRange(t);if(!e)return!1;return!(this.actor.getRangedAttackChance(e.getPosition())<this.accuracyToAttackThreshold)}findClosestEnemyInRange(t){let e=null;return this.actor.getEnemies().filter((e=>{const r=this.getDistanceToTarget(e);return t>=r})).forEach((t=>{e||(e=t);this.getDistanceToTarget(t)<this.getDistanceToTarget(e)&&(e=t)})),e}getDistanceToTarget(t){const e=t.getPosition();return ut(this.actor.game,e,this.actor.getPosition(),8).length}getTargetPosition(){return this.findClosestEnemy().getPosition()}getEquippedWeapon(){return this.actor.getEquipedWeapons()[0]}constructActionClassAndParams(){const t=this.getEquippedWeapon(),e=this.getTargetPosition(),r=t.getPositionsInShape(e);return this.actor.activateCursor(r,!0),this.actor.updateAllCursorNodes([{key:"fill",value:He.red},{key:"stroke",value:"transparent"}]),[er,{message:"I am telegraphing my next attack",processDelay:500}]}}class Er extends kr{constructor(t){let{...e}=t;super({...e}),this.accuracyToAttackThreshold=-1,this.chainOnSuccess=!0}}class Sr extends rr{constructor(t){let{...e}=t;super({...e})}isValid(){return!0}constructActionClassAndParams(){return[er,{message:"*breathes*"}]}}const Tr=t=>new Kn({game:t.game,name:"Ammo",passable:!0,lightPassable:!0,renderer:{character:"||",sprite:"\ue891",background:He.gray,color:He.base3},flammability:0,explosivity:0}),Lr=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Xn({game:t.game,name:"Grenade",passable:!0,lightPassable:!0,renderer:{character:"x",sprite:"\ue83a",color:He.red,background:He.base02},flammability:0,explosivity:3,attackDamage:r,speed:It*e,energy:0,range:e})};class Dr{constructor(t){let{itemType:e,items:r,hidden:a=!1}=t;this.itemType=e,this.items=r,this.hidden=a}}const Nr=t=>class extends t{constructor(t){let{container:e=[],...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("CONTAINING"),this.container=e}move(t){const e=super.move(t);return e&&this.container.forEach((e=>{e.items.length>0&&e.items.forEach((e=>e.setPosition(t)))})),e}createSlot(t){let e=new Dr({itemType:t.name,items:[t]});this.container.push(e)}contains(t){let e=this.container.filter((e=>e.itemType===t));return e.length>0&&e[0].items[0]}addToContainer(t){const e=this.container.findIndex((e=>e.itemType===t.name));e>=0?this.container[e].items.push(t):this.createSlot(t)}removeFromContainer(t){let e=!1;return this.container.forEach(((r,a)=>{r.items=r.items.filter((e=>e.id!==t.id)),r.items.length||this.container.splice(a,1),e=!0})),e}},Pr=(t,e)=>new Vn({game:t.game,name:"Gnasher",passable:!0,lightPassable:!0,attackRange:4,magazineSize:2,baseRangedAccuracy:.9,baseRangedDamage:2,attackDamage:1,pos:e,shapePattern:Zt.square,equipmentType:Xt.HAND,renderer:{character:"G",color:He.base03,background:He.green},rangedHitSounds:[sr.boltok_fire_01,sr.boltok_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]}),Ur=(t,e)=>new Vn({game:t.game,name:"Hammer Burst",passable:!0,attackRange:6,magazineSize:4,baseRangedAccuracy:.65,baseRangedDamage:2,attackDamage:1,pos:e,shapePattern:Zt.filledClover,equipmentType:Xt.HAND,renderer:{character:"Hb",color:He.base3,background:He.gray},rangedHitSounds:[sr.hammerburst_fire_01,sr.hammerburst_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]}),Gr=(t,e)=>new Vn({game:t.game,name:"Grenade Thrower",passable:!0,attackRange:10,magazineSize:1,baseRangedAccuracy:.9,baseRangedDamage:0,attackDamage:0,pos:e,shapePattern:Zt.bigSquare,equipmentType:Xt.HAND,renderer:{character:"Gb",color:He.base03,background:He.green},rangedHitSounds:[sr.explosion_01,sr.explosion_01]}),Ir=t=>new Kn({game:t.game,name:"Ammo",passable:!0,renderer:{character:"|b",sprite:"\ue879",background:He.gray,color:He.red},flammability:0,explosivity:4});class Mr{constructor(t){let{game:e,actor:r,name:a="Effect",description:n="",lifespan:o=100,stepInterval:i=100,allowDuplicates:s=!0,onStart:c=()=>null,onStep:l=()=>null,onStop:u=()=>null,renderer:h={background:"green",color:"white",character:"*"},processOnlyOnActorTurn:d=!1}=t;this.id=Ut()(),this.game=e,this.actor=r,this.name=a,this.description=n,this.lifespan=o,this.timeToLive=o,this.stepInterval=i,this.allowDuplicates=s,this.timeSinceLastStep=0,this.onStart=c,this.onStep=l,this.onStop=u,this.renderer=h,this.processOnlyOnActorTurn=d}static getValidTargetsOnTile(t,e){return xt(t.entities)}remove(){this.game.engine.removeStatusEffectById(this.id)}start(){this.onStart()}step(t){this.onStep(t)}stop(){this.onStop()}}Mr.displayName="Base Effect";class Fr extends Mr{constructor(t){let{buffValue:e=1,...r}=t;super({...r}),this.name="Sand Skin",this.allowDuplicates=!1,this.actor_background=this.actor.renderer.background,this.renderer={character:"\u2726\ufe0f",color:"#A89078",background:"#D8C0A8"},this.onStart=()=>{this.actor.defense+=e,this.game.addMessage(`${this.actor.name} was enveloped in hardened sand.`,ee.INFORMATION),this.actor.renderer.background="#A89078"},this.onStop=()=>{this.actor.defense=Math.max(0,this.actor.defense-e),this.game.addMessage(`${this.actor.name}'s hardened sand skin fell away.`,ee.INFORMATION),this.actor.renderer.background=this.actor_background}}static getValidTargetsOnTile(t,e){return xt(t.entities).filter((t=>e.id!==t.id&&e.isAlly(t)))}}Fr.displayName="Sand Skin";class jr extends Mr{constructor(t){let{buffValue:e=1,onStartCallback:r=()=>null,...a}=t;super({...a}),this.name="Melee Damage",this.allowDuplicates=!1,this.actor_background=this.actor.renderer.background,this.actor_color=this.actor.renderer.color,this.attackDamage=this.actor.attackDamage,this.renderer={color:"#424242",background:"#A89078",character:"\ue888"},this.onStart=()=>{r(),this.actor.attackDamage+=e,this.actor.renderer.background=this.actor_color,this.actor.renderer.color=this.actor_background},this.onStop=()=>{this.actor.attackDamage=this.attackDamage,this.actor.renderer.color=this.actor_color,this.actor.renderer.background=this.actor_background}}static getValidTargetsOnTile(t,e){return xt(t.entities).filter((t=>e.id!==t.id&&e.isAlly(t)))}}function Wr(t,e){Qr(t,e,$r.wretch())}function Br(t,e){Qr(t,e,$r.drone())}function zr(t,e){Qr(t,e,$r.drone_grenadier())}function Hr(t,e){Qr(t,e,$r.hunter())}function Vr(t,e){Qr(t,e,$r.scion())}function qr(t,e){Qr(t,e,$r.scion())}function Kr(t,e){!function(t,e){const r=()=>Yr(t,e);Jr(t,r)}(t,e)}jr.displayName="Melee Damage";const $r={wretch:()=>({name:"Wretch",renderer:{character:et(["w"]),color:He.flesh1,background:He.flesh3,sprite:"\ue8d7"},durability:2,attackDamage:1,baseDescription:"A wrinkled, pale-fleshed abomination.",baseDescriptors:["gutteral chirps and a bloodthirst keep you at bay."],behaviors:[new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.wretch_melee_01,sr.wretch_melee_02,sr.wretch_melee_03]).play()}}})]}),drone:()=>({name:"Drone",renderer:{character:"d",color:He.flesh2,background:He.flesh1,sprite:"\ue825"},durability:3,attackDamage:1,behaviors:[new Or({repeat:5,maintainDistanceOf:4}),new kr({repeat:1}),new pr({repeat:1})],loadout:{equipmentCreators:[Pr],inventoryCreators:[{amount:100,creator:Tr}]}}),drone_grenadier:()=>({name:"Grenadier",renderer:{character:"db",color:He.flesh2,background:He.flesh1,sprite:"\ue827"},durability:3,attackDamage:1,behaviors:[new Or({repeat:1,maintainDistanceOf:4}),new Er({repeat:1}),new pr({repeat:1})],loadout:{equipmentCreators:[Gr],inventoryCreators:[{amount:10,creator:Ir}]}}),hunter:()=>({name:"Hunter",renderer:{character:"h",color:He.flesh2,background:He.flesh1,sprite:"\ue81d"},durability:3,attackDamage:1,behaviors:[new vr({repeat:5}),new Sr({repeat:1}),new kr({repeat:1}),new pr({repeat:1}),new kr({repeat:1}),new pr({repeat:1})],loadout:{equipmentCreators:[Ur],inventoryCreators:[{amount:100,creator:Tr}]}}),scion:()=>({name:"Scion",renderer:{character:"S",color:He.flesh2,background:He.flesh1,sprite:"\ue8d4"},durability:10,attackDamage:4,behaviors:[new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.big_circle,color:He.blue}),new mr({repeat:1,effectClass:jr,effectDefaults:{buffValue:1,lifespan:10*It,stepInterval:It,processDelay:200},extraActionParams:{onSuccess:()=>{et([sr.locust_buff_01,sr.locust_buff_02,sr.locust_buff_03]).play()}}}),new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.big_circle}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.scion_melee_01,sr.scion_melee_02,sr.scion_melee_03]).play()}}})]}),skorge:()=>({renderer:{sprite:"\ue8d9",character:"S",color:He.flesh1,background:He.base04},name:"Skorge",durability:40,attackDamage:5,behaviors:[new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1})]})},Xr=(t,e)=>({pos:e,game:t.game,faction:"LOCUST",enemyFactions:["COG","ALL"],equipment:Yt.gear(),onDestroy:e=>{const r=Math.random();r<=.05?t.addAmmoLoot(e.getPosition()):r<=.1&&t.addGrenadeLoot(e.getPosition())}});function Yr(t,e){const r=et(Object.keys($r).filter((t=>"skorge"!==t)).map((t=>$r[t])));return Zr({...Xr(t,e),...r()})}function Zr(t){const{loadout:e,...r}=t,a=new jn({...r});return e&&function(t,e){const{equipmentCreators:r,inventoryCreators:a}=e,n=t.game.engine,o=a.map((t=>{let{amount:e,creator:r}=t;return function(t,e,r){const a=Array(e).fill("").map((()=>r(t)));return new Dr({itemType:a[0].name,items:a})}(n,e,r)}));t.container=o,r.forEach((e=>{const r=e(n);t.equip(r.equipmentType,r)}))}(a,e),a}function Qr(t,e,r){Jr(t,(()=>function(t,e,r){return Zr({...Xr(t,e),...r})}(t,e,r)))}function Jr(t,e){const r=e();t.game.placeActorOnMap(r)&&t.game.engine.addActor(r)}r(350);const ta={main:"#16161d",accent:"#ec9c5d",text:"#f9d091",white:"#eeeeee",sunset:"#f9d091",sandy_brown:"#ec9c5d",brown_sugar:"#b7744f",raw_umber:"#926846",ebony:"#4f5941",umber:"#756356",gray:"#50534c",liver:"#5c4540",black:"#16161d",flesh1:"#833139",flesh2:"#CC7468",flesh3:"#DDA78F",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900"},ea={TALL_GRASS:{background:ta.sunset,foreground:ta.sandy_brown,character:".",sprite:"\ue8a2",passable:!0,lightPassable:!1,tags:["BURNABLE"]},LAYED_GRASS:{background:ta.brown_sugar,foreground:ta.sandy_brown,character:".",sprite:"\ue8a2",passable:!0,lightPassable:!0,tags:["BURNABLE","BRAMBLES","BERRIES"]},BERRY:{background:ta.blue,foreground:ta.sunset,character:"b",sprite:"\ue8c6",passable:!0,lightPassable:!0,tags:["BURNABLE","BERRIES"]},BRAMBLE:{background:ta.ebony,foreground:ta.sunset,character:"*",sprite:"\ue8c6",passable:!0,lightPassable:!0,tags:["BURNABLE","BERRIES"]},GROUND:{background:ta.black,foreground:ta.ebony,character:".",sprite:"\ue8a2",passable:!0,tags:["BURNABLE"]},GROUND_ALT:{background:ta.black,foreground:ta.ebony,character:"",sprite:"",passable:!0,tags:["BURNABLE"]},NEST:{background:ta.liver,foreground:ta.white,character:"+",sprite:"\ue8c7",passable:!0,tags:["LOOT"]},DOOR:{background:ta.liver,foreground:ta.brown_sugar,character:"+",sprite:"\ue86d",passable:!0,tags:["BURNABLE"]},FLOOR:{background:ta.liver,foreground:ta.gray,character:"",passable:!0,tags:["BURNABLE","OVERGROWN","LOOT"]},STEEL_FLOOR:{background:ta.gray,foreground:ta.gray,character:"",passable:!0,tags:["LOOT"]},WALL_VERTICAL:{background:ta.liver,foreground:ta.raw_umber,character:"||",sprite:"\ue8df",passable:!1,tags:["BURNABLE","WALL","OVERGROWN"]},WALL_HORIZONTAL:{background:ta.liver,foreground:ta.raw_umber,character:"=",sprite:"\ue8de",passable:!1,tags:["BURNABLE","WALL","OVERGROWN"]},WALL_CORNER_NW:{background:ta.liver,foreground:ta.raw_umber,character:"#",sprite:"\ue8e1",passable:!1,tags:["BURNABLE","WALL","OVERGROWN"]},WALL_CORNER_NE:{background:ta.liver,foreground:ta.raw_umber,character:"#",sprite:"\ue8e2",passable:!1,tags:["BURNABLE","WALL","OVERGROWN"]},WALL_CORNER_SW:{background:ta.liver,foreground:ta.raw_umber,character:"#",sprite:"\ue8e3",passable:!1,tags:["BURNABLE","WALL","OVERGROWN"]},WALL_CORNER_SE:{background:ta.liver,foreground:ta.raw_umber,character:"#",sprite:"\ue8e4",passable:!1,tags:["BURNABLE","WALL","OVERGROWN"]}},ra=(t,e)=>new Vn({game:t.game,name:"spitter sac",passable:!0,attackRange:3,magazineSize:10,baseRangedAccuracy:.6,baseRangedDamage:1,attackDamage:1,pos:e,equipmentType:Xt.HAND,renderer:{character:"o",color:He.green,background:He.base01},rangedHitSounds:[sr.sac_01,sr.sac_02,sr.sac_03],rangedMissSounds:[sr.screech_01,sr.screech_02,sr.screech_03],rangedReloadSounds:[sr.screech_01,sr.screech_02,sr.screech_03]});function aa(t,e){!function(t,e){const r=()=>ia(t,e);ca(t,r)}(t,e)}const na={adolescent:()=>({name:"adolescent",renderer:{character:"a",color:ta.flesh1,background:ta.flesh3,sprite:"\ue8d7"},durability:2,attackDamage:1,baseDescription:"a wrinkled, pale-fleshed abomination.",baseDescriptors:["gutteral chirps and bloodthirst keep you at bay."],behaviors:[new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.wretch_melee_01,sr.wretch_melee_02,sr.wretch_melee_03]).play()}}})]}),juvenile:()=>({name:"juvenile",renderer:{character:"j",color:ta.ebony,background:ta.flesh3,sprite:"\ue8d7"},durability:1,attackDamage:2,baseDescription:"a hunched, ebon-fleshed abomination.",baseDescriptors:["the grass is ingrown into its skin","this must be an older one"],onDestroy:t=>{const e=t.getPosition();rt(10,Et(e,3)).forEach((e=>{t.attack(e),t.game.mode.placeTallGrass(e,!0)})),t.game.addMessage(`${t.name} withers, and then bursts sending sharp stalks of tall grass in every direction`,{color:ta.sunset,backgroundColor:ta.ebony})},behaviors:[new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.wretch_melee_01,sr.wretch_melee_02,sr.wretch_melee_03]).play()}}})]}),adult:()=>({name:"adult",renderer:{character:"A",color:ta.flesh3,background:ta.ebony,sprite:"\ue8d7"},durability:8,attackDamage:2,baseDescription:"a fully-grown, myth of Layoria.",baseDescriptors:["the grass is ingrown into its skin"],onDestroy:t=>{const e=t.getPosition();rt(20,Et(e,5)).forEach((e=>{t.attack(e),t.game.mode.placeTallGrass(e,!0)})),t.game.addMessage(`${t.name} withers, and then bursts sending sharp stalks of tall grass in every direction`,{color:ta.sunset,backgroundColor:ta.ebony})},behaviors:[new Or({repeat:2}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.scion_melee_01,sr.scion_melee_02,sr.scion_melee_03]).play()}}})]}),camoCritter:()=>({name:"camo critter",renderer:{character:"c",color:"transparent",background:"transparent",sprite:"\ue8d7"},durability:2,attackDamage:2,baseDescription:"you've never seen it, but you'll feel it.",behaviors:[new Or({repeat:1}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.wretch_melee_01,sr.wretch_melee_02,sr.wretch_melee_03]).play()}}})]}),spitter:()=>({name:"spitter",baseDescription:"green pus drips from its maw. its belly inflates.",renderer:{character:"s",color:ta.flesh1,background:ta.green,sprite:"\ue850"},durability:1,attackDamage:1,behaviors:[new Or({repeat:2,maintainDistanceOf:4}),new kr({repeat:1}),new pr({repeat:1})],loadout:{equipmentCreators:[ra],inventoryCreators:[{amount:1e3,creator:Tr}]}}),hider:()=>({name:"grass hopper",baseDescription:"often hidden in plain sight, clawing at passers-by.",baseDescriptors:["needless to say, the C.C.C reccomends avoiding the deep grass altogether."],renderer:{character:"h",color:ta.flesh1,background:ta.sunset,sprite:"\ue850"},durability:1,attackDamage:1,behaviors:[new Or({repeat:5}),new Cr({repeat:1,attackPattern:Zt.clover}),new nr({repeat:1,extraActionParams:{onSuccess:()=>{et([sr.wretch_melee_01,sr.wretch_melee_02,sr.wretch_melee_03]).play()}}}),new _r({repeat:3,range:5,attribute:"name",attributeValue:"tall grass"}),new Sr({repeat:3})]})},oa=(t,e)=>({pos:e,game:t.game,faction:"MONSTER",enemyFactions:["PEOPLE"],equipment:Yt.gear()});function ia(t,e){const r=et(Object.keys(na).filter((t=>"skorge"!==t)).map((t=>na[t])));return sa({...oa(t,e),...r()})}function sa(t){const{loadout:e,...r}=t,a=new jn({...r});return e&&function(t,e){const{equipmentCreators:r,inventoryCreators:a}=e,n=t.game.engine,o=a.map((t=>{let{amount:e,creator:r}=t;return function(t,e,r){const a=Array(e).fill("").map((()=>r(t)));return new Dr({itemType:a[0].name,items:a})}(n,e,r)}));t.container=o,r.forEach((e=>{const r=e(n);t.equip(r.equipmentType,r)}))}(a,e),a}function ca(t,e){const r=e();t.game.placeActorOnMap(r)&&t.game.engine.addActor(r)}const la=t=>{let{engine:e,lightRange:r=8,lightDrain:a=!1}=t;return new to({lightRange:r,game:e.game,name:"beacon",passable:!1,lightPassable:!0,lightDrain:a,equipmentType:Xt.HAND,renderer:{character:"o",sprite:"\ue87b",color:ta.white,background:ta.sunset}})},ua=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=!1;return new Nn({name:"battery",baseDescription:"special tech allows this battery to power up any adjacent light when dropped.",passable:!0,lightPassable:!0,renderer:{character:"%",sprite:"%",background:ta.orange,color:ta.white},dropEffects:[function(r,a){if(e)return;const n=r.getPosition(),o=lt(r.game,n),i=Ct(r.game.map,n).concat(o).reduce(((t,e)=>{const r=Ot(e.entities,"ILLUMINATING"),a=Ot(e.entities,"EQUIPING");let n=[];return a.forEach((t=>{const e=Ot(t.getEquippedItems(),"ILLUMINATING");n=n.concat(e)})),t.concat(r).concat(n)}),[]);0!==i.length&&(i.forEach((e=>{J(t).forEach((t=>{setTimeout((()=>{e.incrementLightRange(),r.game.draw()}),250*t)}))})),a.name="used battery",a.renderer.background=ta.gray,a.renderer.color=ta.orange,a.addDescriptor("a spent battery, not much use anymore."),e=!0)}]})},ha=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Vn({game:t.game,name:"revolver",baseDescription:"an old revolver. you didn't think these were even still issued to field members anymore.",passable:!0,lightPassable:!0,attackRange:4,magazineSize:4,baseRangedAccuracy:1,baseRangedDamage:1,attackDamage:0,pos:e,equipmentType:Xt.HAND,renderer:{character:"r",color:He.base3,background:ta.raw_umber},rangedHitSounds:[sr.pistol_fire_01,sr.pistol_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]})},da=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Vn({game:t.game,name:"pistol",baseDescription:"standard issue, with a nice bit of range.",passable:!0,lightPassable:!0,attackRange:6,magazineSize:6,baseRangedAccuracy:1,baseRangedDamage:1,attackDamage:0,pos:e,equipmentType:Xt.HAND,renderer:{character:"p",color:He.base3,background:ta.gray},rangedHitSounds:[sr.pistol_fire_01,sr.pistol_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]})},pa=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Vn({game:t.game,name:"rifle",baseDescription:"C.C.C. reluctantly began issuing these rifles a decade ago, after we got called into Layoria.",passable:!0,lightPassable:!0,attackRange:8,magazineSize:4,baseRangedAccuracy:1,baseRangedDamage:2,attackDamage:0,pos:e,equipmentType:Xt.HAND,renderer:{character:"L",color:He.base3,background:ta.ebony},rangedHitSounds:[sr.cog_rifle_fire_01,sr.cog_rifle_fire_02,sr.cog_rifle_fire_03,sr.cog_rifle_fire_04],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]})},fa=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Vn({game:t.game,name:"shotgun",baseDescription:"a pump-action shotgun. you were really hoping for an auto-loader.",passable:!0,lightPassable:!0,attackRange:6,magazineSize:3,baseRangedAccuracy:1,baseRangedDamage:1,attackDamage:0,pos:e,shapePattern:Zt.smallSquare,equipmentType:Xt.HAND,renderer:{character:"s",color:ta.white,background:ta.raw_umber},rangedHitSounds:[sr.boltok_fire_01,sr.boltok_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]})},ga=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Hn({game:t.game,name:"C.C.C. defensive knife",baseDescription:"a standard issue blade given to every member of the C.C.C.",passable:!0,lightPassable:!0,pos:e,attackDamage:1,equipmentType:Xt.HAND,renderer:{character:"/",sprite:"\ue887",color:ta.gray,background:ta.white}})},ya=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Hn({game:t.game,name:"C.C.C. field machete",baseDescription:"the C.C.C. requires all member in this area to carry a machete. The more you can keep these paths cleared, the better.",passable:!0,lightPassable:!0,pos:e,attackDamage:2,equipmentType:Xt.HAND,renderer:{character:"/",sprite:"\ue888",color:ta.white,background:ta.gray}})},ma=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Hn({game:t.game,name:"C.C.C. combat baton",baseDescription:"normally used for crowd control in densly populated area.",passable:!0,lightPassable:!0,pos:e,attackDamage:3,equipmentType:Xt.HAND,renderer:{character:"b",sprite:"\ue88c",color:ta.black,background:ta.brown_sugar}})},_a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1};return new Hn({game:t.game,name:"ancient katana",baseDescription:"hmm, this could work.",passable:!0,lightPassable:!0,pos:e,attackDamage:6,equipmentType:Xt.HAND,renderer:{character:"k",sprite:"k",color:ta.red,background:ta.black}})};class va extends Mr{constructor(t){let{damage:e=1,useCount:r=3,messageOnDamage:a=null,messageType:n=ee.DANGER,...o}=t;super({...o}),this.name="Trap Damage",this.allowDuplicates=!1,this.timeToLive=1/0,this.renderer={color:He.base3,background:He.flesh2,character:"^"},this.messageOnDamage=a,this.messageType=n,this.damage=e,this.uses=r,this.onStep=this.handleStep}handleStep(){const t=this.actor.getPosition();if(ba(t))return;const e=this.getEnemiesAtCurrentPosition();0!=e.length&&(e[0].decreaseDurability(this.damage),this.uses-=1,this.playDamageSound(),this.displayMessage(),this.uses<=0&&(this.actor.destroy(),this.playDestroyedSound()))}displayMessage(){this.messageOnDamage&&this.actor.game.addMessage(this.messageOnDamage,this.messageType)}playDamageSound(){et([ze.chop_0,ze.chop_1]).play()}playDestroyedSound(){ze.grab_0.play()}getEnemiesAtCurrentPosition(){const t=lt(this.game,this.actor.getPosition());return t?xt(t.entities).filter((t=>this.actor.id!==t.id&&this.actor.isEnemy(t))):[]}}va.displayName="Trap Damage";const ba=t=>ot({x:0,y:0},t);class wa extends Mr{constructor(t){let{value:e=1,useCount:r=3,messageOnDamage:a=null,messageType:n=ee.DANGER,...o}=t;super({...o}),this.name="healing properties",this.allowDuplicates=!1,this.timeToLive=1/0,this.renderer={color:He.red,background:He.blue,character:"+"},this.messageOnDamage=a,this.messageType=n,this.value=e,this.uses=r,this.onStep=this.handleStep}handleStep(){const t=this.actor.getPosition();if(xa(t))return;const e=this.getEnemiesAtCurrentPosition();0!=e.length&&(e[0].increaseDurability(this.value),this.uses-=1,this.playSound(),this.displayMessage(),this.uses<=0&&(this.actor.destroy(),this.playDestroyedSound()))}displayMessage(){this.messageOnDamage&&this.actor.game.addMessage(this.messageOnDamage,this.messageType)}playSound(){ze.save.play()}playDestroyedSound(){ze.grab_0.play()}getEnemiesAtCurrentPosition(){const t=lt(this.game,this.actor.getPosition());return t?xt(t.entities).filter((t=>this.actor.id!==t.id&&this.actor.isEnemy(t))):[]}}wa.displayName="strange juice";const xa=t=>ot({x:0,y:0},t),Oa=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"glow stick",n=!1;const o=et([ta.green,ta.violet,ta.magenta,ta.blue]);return new eo({name:a,passable:!0,lightPassable:!0,baseDescription:"the C.C.C. doesn't generally give these out. luminescent chemical is too unstable they said.",lightRange:0,lightColor:o,pos:e,renderer:{character:"i",sprite:"\ue88b",color:o,background:ta.black},dropEffects:[function(t,e){n||(e.incrementLightRange(r),e.name="used glow stick",e.renderer.color=ta.gray,e.addDescriptor("a cracked glow stick, not much use anymore."),n=!0)}]})},Ra=(t,e)=>Oa(t,e,3),Aa=(t,e)=>Oa(t,e,10,"super glow stick"),Ca=(t,e)=>new Xn({game:t.game,name:"grenade",passable:!0,lightPassable:!0,pos:e,renderer:{character:"x",sprite:"\ue83a",color:He.red,background:He.base02},flammability:0,explosivity:2,attackDamage:4,speed:5*It,energy:0,range:5}),ka=t=>{if(t.pos){let e=t.game.map[it(t.pos)];e&&(e.entities=e.entities.filter((e=>e.id!==t.id)))}t.game.engine.removeStatusEffectByActorId(t.id),t.game.draw(),t.game.engine.actors=t.game.engine.actors.filter((e=>e.id!==t.id)),t.game.entityLog.remove(t)};function Ea(t){t.energy=0,t.active=!1,ka(t)}const Sa={Castle:class extends We{constructor(t){let{...e}=t;super({...e}),this.data={level:1,highestLevel:null,fireIntensity:0,npcCount:1,creatureCount:1,turnCount:0}}initialize(){super.initialize(),this.game.createEmptyLevel(),this.game.initializeMapTiles(),this.setWaveData(this.data.level);Math.floor(this.game.mapWidth/2),Math.floor(this.game.mapHeight/2);let t=3;Oe(this.game.tileKey,{x:t,y:t},this.game.mapHeight-2*t,this.game.mapWidth-2*t,"WALL",this.game.map,this.game.mapHeight,this.game.mapWidth),t=4,Oe(this.game.tileKey,{x:t,y:t},this.game.mapHeight-2*t,this.game.mapWidth-2*t,"FLOOR",this.game.map,this.game.mapHeight,this.game.mapWidth),t=5,Oe(this.game.tileKey,{x:t,y:t},this.game.mapHeight-2*t,this.game.mapWidth-2*t,"WALL",this.game.map,this.game.mapHeight,this.game.mapWidth),t=6,Oe(this.game.tileKey,{x:t,y:t},this.game.mapHeight-2*t,this.game.mapWidth-2*t,"GROUND",this.game.map,this.game.mapHeight,this.game.mapWidth),Oe(this.game.tileKey,{x:31,y:9},4,4,"SAFE",this.game.map,this.game.mapHeight,this.game.mapWidth),Se(this.game.map,10,10,2,4),this.placeInitialItems(),this.placePlayersInSafeZone();let e=Object.keys(this.game.map).filter((t=>"FLOOR"===this.game.map[t].type));for(let a=0;a<this.data.npcCount;a++){let t=et(e).split(",").map((t=>parseInt(t)));this.addNPC({x:t[0],y:t[1]})}let r=Object.keys(this.game.map).filter((t=>"GROUND"===this.game.map[t].type));for(let a=0;a<this.data.creatureCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addEnemy({x:t[0],y:t[1]})}}update(){super.update(),this.propogateFire(),this.burnEntities(),this.hasLost()&&(this.reset(),this.game.initializeGameData()),this.hasWon()&&(this.nextLevel(),this.beginNextWave(),this.game.initializeGameData())}setLevel(t){this.data.level=t,this.data.turnCount=0}nextLevel(){this.setLevel(this.data.level+1)}reset(){this.setLevel(1),this.initialize()}setWaveData(t){switch(t){case 1:this.data.creatureCount=0,this.data.npcCount=1;break;case 2:this.data.creatureCount=5,this.data.npcCount=1;break;case 3:this.data.creatureCount=10,this.data.npcCount=1;break;default:this.data.creatureCount=20,this.data.npcCount=1}}countNpcSafe(){return this.game.engine.actors.filter((t=>{if(t.entityTypes.includes("HELPLESS")){if("SAFE"===this.game.map[it(t.pos)].type)return t.saved||t.save(),!0}return!1})).length}getSaveCountRequirement(){const t=Math.ceil(.66*this.data.npcCount);return Math.max(1,t)}hasWon(){return this.countNpcSafe()>=this.getSaveCountRequirement()}hasLost(){return this.game.engine.actors.filter((t=>t.entityTypes.includes("HELPLESS"))).length<this.getSaveCountRequirement()&&(ze.lose.play(),this.game.toLose(),!0)}addDebris(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"box",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:zt.SOLARIZED.base01,c=et(["\ue83b","\ue873","\ue874","\ue875","\ue876","\ue877"]);switch(r){case"%":c=et(["\ue83b","\ue873"]);break;case"m":c=et(["\ue874","\ue875"]);break;case"H":c=et(["\ue876","\ue877"]);break;case"Xs":c="\ue86a";break;case"X":c="\ue86b";break;case"XL":c="\ue86c";break;default:c="\ue873"}let l=new Mn({pos:t,renderer:{character:r,sprite:c,color:zt.SOLARIZED.base2,background:s},name:e,game:this.game,durability:a,explosivity:n,flammability:0,draggable:i,pushable:o});this.game.placeActorOnMap(l)}addNPC(t){let e=new Pn({name:Ht,messages:["help!","ahh!","It's getting hot in hurr."],messageType:ee.ACTION,pos:t,game:this.game,renderer:{character:"C",sprite:"\ue823",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.violet},durability:2});if(this.game.placeActorOnMap(e)){this.game.map[it(e.pos)].type="SAFE_FLOOR",this.game.engine.addActor(e)}}addFire(t){let e=new Zn({name:"Pyro",pos:t,game:this.game,renderer:{character:"*",sprite:"\ue8bb",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.red},timeToSpread:1,spreadCount:1,durability:1,attackDamage:2,speed:100});this.game.placeActorOnMap(e)&&this.game.engine.addActor(e)}getBanditStats(){let t=[{name:"Slingshot",renderer:{character:et(["r"]),color:"#ced5dd",background:""},durability:1,attackDamage:1,speed:100,entityClass:Bn},{name:"Buckshot",renderer:{character:et(["r"]),color:"#3fc072",background:""},durability:2,attackDamage:1,speed:200,entityClass:Bn},{name:"Ross",renderer:{character:et(["b"]),color:"#ced5dd",background:""},durability:1,attackDamage:1,speed:100,entityClass:Wn},{name:"Kevin",renderer:{character:et(["b"]),color:"#3fc072",background:""},durability:2,attackDamage:1,speed:100,entityClass:Wn},{name:"Jacob",renderer:{character:et(["b"]),color:"#67a1d7",background:""},durability:3,attackDamage:1,speed:100,entityClass:Wn},{name:"Jarod",renderer:{character:et(["b"]),color:"#e16264",background:""},durability:1,attackDamage:5,speed:300,entityClass:Wn},{name:"Bigii",renderer:{character:et(["b"]),color:"#9f62e1",background:""},durability:15,attackDamage:10,speed:100,entityClass:Wn}];return et(t)}addEnemy(t){let e=this.game.engine.actors.filter((t=>t.entityTypes.includes("PLAYING")))[0];const r=this.getBanditStats();let a=new r.entityClass({targetEntity:e,pos:t,renderer:r.renderer,name:r.name,game:this.game,actions:[],attackDamage:r.attackDamage,durability:r.durability,speed:r.speed,getProjectile:t=>{let{pos:e,targetPos:r,direction:a,range:n}=t;return ve(this.game.engine,{...e},a,n)}});this.game.placeActorOnMap(a)&&this.game.engine.addActor(a)}propogateFire(){if(this.game.engine.actors.filter((t=>"Pyro"===t.name)).length<this.data.fireIntensity){const t=Object.keys(this.game.map).filter((t=>"BURNT"==this.game.map[t].type)),e=et(t);if(e){const t={x:parseInt(e.split(",")[0]),y:parseInt(e.split(",")[1])};this.addFire(t)}}}burnEntities(){Object.keys(this.game.map).filter((t=>"BURNT"===this.game.map[t].type)).reduce(((t,e)=>t.concat(this.game.map[e].entities)),[]).forEach((t=>{if(t.entityTypes.includes("BURNABLE")){t.burn()&&this.game.addMessage(`${t.name} is burned.`,ee.DANGER),t.willResetCanBurn&&t.resetCanBurn()}}))}placeInitialItems(){let t=[be(this.game.engine),we(this.game.engine),xe(this.game.engine)];const e=Object.keys(this.game.map).filter((t=>"SAFE"==this.game.map[t].type));t.forEach((t=>{const r=e.pop();if(r){const e={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};t.pos=e;let a=this.game.map[r];a&&a.entities.push(t)}}))}placePlayersInSafeZone(){let t=this.game.engine.actors.filter((t=>t.entityTypes.includes("PLAYING")));const e=Object.keys(this.game.map).filter((t=>"SAFE"==this.game.map[t].type));t.forEach((t=>{const r=e.shift();if(r){const e={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};t.pos=e;let a=this.game.map[r];a&&a.entities.push(t)}}))}},Chunin:class extends We{constructor(t){let{...e}=t;super({...e}),this.tileKey=$e,this.data={level:0,highestLevel:null,turnCount:0},this.dataByLevel=[{enemies:Array(1).fill("Bandit")},{enemies:Array(1).fill("Bandit")}]}getTournamentOpponent(){const t=this.meta().tournament;return t.opponents[t.active]}initialize(t){this.meta=t,super.initialize(),this.createEmptyLevel(),this.game.initializeMapTiles(),this.setWaveData();for(let a=0;a<20;a++){let t=at(4,12),e=at(0,this.game.mapWidth),r=at(0,this.game.mapHeight);Oe(this.game.tileKey,{x:e,y:r},t,t,"GROUND",this.game.map,this.game.mapHeight,this.game.mapWidth)}for(let a=0;a<3;a++){let t=at(2,6),e=at(0,this.game.mapWidth),r=at(0,this.game.mapHeight);Ae({x:e,y:r},t,"WATER")}Re(this.game.tileKey,{x:0,y:0},this.game.mapHeight,this.game.mapWidth,"WALL",this.game.map),Re(this.game.tileKey,{x:1,y:1},this.game.mapHeight-2,this.game.mapWidth-2,"WALL",this.game.map),Oe(this.game.tileKey,{x:31,y:9},4,4,"SAFE",this.game.map,this.game.mapHeight,this.game.mapWidth),this.placePlayersInSafeZone();let e=Object.keys(this.game.map).filter((t=>"GROUND"===this.game.map[t].type));this.data.enemies.forEach((t=>{let r=et(e).split(",").map((t=>parseInt(t)));this[`add${t}`]({x:r[0],y:r[1]})}));const r=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;const o=[];for(let i=0;i<t;i++)for(let t=0;t<e;t++)i>=r.y&&i<=r.y+(a-1)&&t>=r.x&&t<=r.x+(n-1)&&o.push({x:t,y:i});return o}(this.game.mapHeight,this.game.mapWidth,{x:3,y:3},this.game.mapHeight-6,this.game.mapWidth-6);for(let a=0;a<10;a++){let t=et(r);tr(t,this.game)}}createEmptyLevel(){for(let t=0;t<this.game.mapHeight;t++)for(let e=0;e<this.game.mapWidth;e++){const r=`${e},${t}`;let a="GROUND_ALT";Ce({map:this.game.map,key:r,tileKey:this.tileKey,tileType:a})}}getPlayers(){return this.game.engine.actors.filter((t=>t.entityTypes.includes("PLAYING")))}getOpponentActor(){return this.game.engine.actors.find((t=>t.name===this.getTournamentOpponent().name))}updateUI(){Gt.each(this.getPlayers(),((t,e)=>{const r=Math.floor(t.energy/100),a=Math.floor(t.speed/100),n=[...Array(r).fill("\ue8b2"),...Array(a-r).fill("_")];this.createOrUpdateInfoBlock(`playerSpeed${t.id}`,{text:`${t.name} | AP: ${n.join(" ")}`})}))}update(){super.update(),this.hasLost()?this.onLose():this.hasWon()?this.onWin():this.levelComplete()&&(this.nextLevel(),this.setWaveData(),this.game.initializeGameData())}onLose(){this.data.hasLost||(this.createOrUpdateInfoBlock("hasLost",{text:`${this.meta().tournament.player.name} is down! Good luck next year.`}),this.createOrUpdateInfoBlock("hasLost_enter",{text:"Press Enter to Play Again"}),this.addOnEnterListener()),this.data.hasLost=!0}onWin(){this.data.hasWon||(this.addFireWorks(),this.createOrUpdateInfoBlock("hasWon",{text:`${this.game.getFirstPlayer().name} has won the Chunin Tournament!`}),this.createOrUpdateInfoBlock("hasWon_enter",{text:"Press Enter to Play Again"}),this.addOnEnterListener()),this.data.hasWon=!0}addOnEnterListener(){const t=e=>{"Enter"===e.key&&(this.game.backToTitle(),this.meta({}),window.removeEventListener("keydown",t))};window.addEventListener("keydown",t)}addSingleCelebratoryDebris(){const t=wt(this.game.map).coordinates;this.addCelebratoryDebris(t)}addCelebratoryDebris(t){br({game:this.game,fromPosition:t,spatterAmount:.3,spatterRadius:10,transfersBackground:!1,spatterColors:["#e9d679","#673ab7","#3fc072","#e16264","#67a1d7"]}).start()}addFireWorks(){Array(30).fill(null).map((()=>wt(this.game.map).coordinates)).forEach((t=>{setTimeout((()=>{this.addCelebratoryDebris(t)}),at(0,1e4))}))}setLevel(t){this.data.turnCount=0,this.setMetaTournamentLevel(t)}nextLevel(){const t=this.getMetaTournamentLevel()+1;this.setLevel(t),this.game.setActiveScreen("Tournament")}setMetaTournamentLevel(t){const e=this.meta();e.tournament.active=t,this.meta(e)}getMetaTournamentLevel(){return this.meta().tournament.active}reset(){this.setLevel(0),this.initialize()}setWaveData(){const t=this.dataByLevel[0];this.data={...this.data,...t}}levelComplete(){return 1===this.game.engine.actors.length}hasWon(){const t=this.getMetaTournamentLevel(),e=this.meta().tournament.opponents.length-1;return this.levelComplete()&&t>=e}hasLost(){let t=this.getPlayers();return!t.length||!!(t.length&&t[0].durability<=0)}addDebris(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"box",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:zt.SOLARIZED.base01,c=et(["\ue83b","\ue873","\ue874","\ue875","\ue876","\ue877"]);switch(r){case"%":c=et(["\ue83b","\ue873"]);break;case"m":c=et(["\ue874","\ue875"]);break;case"H":c=et(["\ue876","\ue877"]);break;case"Xs":c="\ue86a";break;case"X":c="\ue86b";break;case"XL":c="\ue86c";break;default:c="\ue873"}let l=new Mn({pos:t,renderer:{character:r,sprite:c,color:zt.SOLARIZED.base2,background:s},name:e,game:this.game,durability:a,explosivity:n,flammability:0,draggable:i,pushable:o});this.game.placeActorOnMap(l)}getBanditStats(){let t=[{name:"Slingshot",renderer:{character:et(["r"]),color:"#ced5dd",background:"black"},durability:1,attackDamage:1,speed:100,entityClass:Bn},{name:"Buckshot",renderer:{character:et(["r"]),color:"#3fc072",background:"black"},durability:2,attackDamage:1,speed:200,entityClass:Bn},{name:"Ross",renderer:{character:et(["b"]),color:"#ced5dd",background:"black"},durability:1,attackDamage:1,speed:100,entityClass:Wn},{name:"Kevin",renderer:{character:et(["b"]),color:"#3fc072",background:"black"},durability:2,attackDamage:1,speed:100,entityClass:Wn},{name:"Jacob",renderer:{character:et(["b"]),color:"#67a1d7",background:"black"},durability:3,attackDamage:1,speed:100,entityClass:Wn},{name:"Jarod",renderer:{character:et(["b"]),color:"#e16264",background:"black"},durability:1,attackDamage:5,speed:300,entityClass:Wn},{name:"Bigii",renderer:{character:et(["b"]),color:"#9f62e1",background:"black"},durability:15,attackDamage:10,speed:100,entityClass:Wn}];return et(t)}addBandit(t){var e;let r=this.getPlayers()[0],a=null;try{a=this.getTournamentOpponent().basicInfo}catch(o){console.log(o),a=this.getBanditStats()}let n=new jn({targetEntity:r,pos:t,renderer:a.renderer,name:a.name,game:this.game,actions:[],attackDamage:a.attackDamage,durability:a.durability,speed:a.speed,charge:20,faction:"OPPONENT",enemyFactions:["PLAYER"],behaviors:(null===(e=a)||void 0===e?void 0:e.behaviors)||[new Or({repeat:a.speed/It,maintainDistanceOf:-1,chainOnFail:!0}),new Ar({repeat:a.speed/It,maintainDistanceOf:4})],getProjectile:t=>{let{pos:e,targetPos:r,direction:a,range:n}=t;return ve(this.game.engine,{...e},a,n)}});this.game.placeActorOnMap(n)&&this.game.engine.addActor(n)}placePlayersInSafeZone(){let t=this.getPlayers();const e=Object.keys(this.game.map).filter((t=>"SAFE"==this.game.map[t].type));t.forEach((t=>{const r=e.shift();if(r){const e={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};t.move(e)}}))}},Flume:class extends We{constructor(t){let{...e}=t;super({...e}),this.infoHeader="Save all of the citizens from the burning keep and get them to the safe zone!",this.data={level:1,highestLevel:null,fireIntensity:1,npcCount:1,debrisCount:4,mediumDebrisCount:3,heavyDebrisCount:4,smallGasCanCount:3,mediumGasCanCount:0,largeGasCanCount:1,turnCount:0}}initialize(){super.initialize(),this.game.createEmptyLevel(),this.game.initializeMapTiles();const t=Math.floor(this.game.mapWidth/2),e=Math.floor(this.game.mapHeight/2);Se(this.game.map,t,e),Oe(this.game.tileKey,{x:0,y:0},3,3,"SAFE",this.game.map,this.game.mapHeight,this.game.mapWidth),this.placeInitialItems(),this.placePlayersInSafeZone();let r=Object.keys(this.game.map).filter((t=>"FLOOR"===this.game.map[t].type));for(let a=0;a<this.data.debrisCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addDebris({x:t[0],y:t[1]})}for(let a=0;a<this.data.mediumDebrisCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addDebris({x:t[0],y:t[1]},"Medium Sized Debris","m",10,0)}for(let a=0;a<this.data.heavyDebrisCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addDebris({x:t[0],y:t[1]},"Heavy Sized Debris","H",10,0,!1,!1)}for(let a=0;a<this.data.smallGasCanCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addDebris({x:t[0],y:t[1]},"gas can","Xs",1,1,!0,!0,zt.SOLARIZED.orange)}for(let a=0;a<this.data.mediumCanCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addDebris({x:t[0],y:t[1]},"gas can","X",1,3,!0,!0,zt.SOLARIZED.orange)}for(let a=0;a<this.data.largeGasCanCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addDebris({x:t[0],y:t[1]},"gas can","XL",1,10,!0,!0,zt.SOLARIZED.orange)}for(let a=0;a<this.data.fireIntensity;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addFire({x:t[0],y:t[1]})}for(let a=0;a<this.data.npcCount;a++){let t=et(r).split(",").map((t=>parseInt(t)));this.addNPC({x:t[0],y:t[1]})}this.updateUI(),ze.fire_1.playing()||ze.fire_1.play()}checkRemoveSafeFloors(){this.game.engine.actors[this.game.engine.currentActor].name===Vt&&(this.data.turnCount+=1,this.data.turnCount>50*this.getSaveCountRequirement()&&Object.keys(this.game.map).filter((t=>"SAFE_FLOOR"==this.game.map[t].type)).forEach((t=>{this.game.map[t].type="FLOOR"})))}update(){super.update(),this.propogateFire(),this.burnEntities(),this.checkRemoveSafeFloors(),this.updateUI(),this.hasLost()&&(this.reset(),this.game.initializeGameData()),this.hasWon()&&(this.nextLevel(),this.increaseIntensity(),this.game.initializeGameData())}updateUI(){this.createOrUpdateInfoBlock("levelProgress",{text:`${this.countNpcSafe()} of  ${this.getSaveCountRequirement()} are safe!`})}setLevel(t){this.data.level=t,this.data.turnCount=0}nextLevel(){this.setLevel(this.data.level+1)}reset(){this.resetIntensity(),this.setLevel(1),this.initialize()}increaseIntensity(){switch(this.data.level){case 2:this.data.fireIntensity=2,this.data.npcCount=1,this.data.debrisCount=4,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=1,this.data.mediumGasCanCount=1,this.data.largeGasCanCount=1;break;case 3:this.data.fireIntensity=3,this.data.npcCount=2,this.data.debrisCount=50,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=1,this.data.mediumGasCanCount=2,this.data.largeGasCanCount=1;break;case 4:this.data.fireIntensity=4,this.data.npcCount=2,this.data.debrisCount=6,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=3,this.data.mediumGasCanCount=2,this.data.largeGasCanCount=1;break;case 5:this.data.fireIntensity=5,this.data.npcCount=3,this.data.debrisCount=6,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=3,this.data.mediumGasCanCount=1,this.data.largeGasCanCount=1;break;case 6:this.data.fireIntensity=4,this.data.npcCount=3,this.data.debrisCount=10,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=3,this.data.mediumGasCanCount=1,this.data.largeGasCanCount=1;break;case 7:this.data.fireIntensity=1,this.data.npcCount=3,this.data.debrisCount=80,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=25,this.data.mediumGasCanCount=1,this.data.largeGasCanCount=1;break;case 8:this.data.fireIntensity=3,this.data.npcCount=3,this.data.debrisCount=20,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.smallGasCanCount=6,this.data.mediumGasCanCount=1,this.data.largeGasCanCount=1;break;case 9:this.game.toWin();break;default:this.data.fireIntensity=3,this.data.npcCount=3,this.data.debrisCount=20,this.data.mediumDebrisCount=4,this.data.heavyDebrisCount=1,this.data.gasCanCount=5}}resetIntensity(){this.data.fireIntensity=1,this.data.npcCount=1,this.data.debrisCount=4}countNpcSafe(){return this.game.engine.actors.filter((t=>{if(t.entityTypes.includes("HELPLESS")){if("SAFE"===this.game.map[it(t.pos)].type)return t.saved||t.save(),!0}return!1})).length}getSaveCountRequirement(){const t=Math.ceil(.66*this.data.npcCount);return Math.max(1,t)}hasWon(){return this.countNpcSafe()>=this.getSaveCountRequirement()}hasLost(){return this.game.engine.actors.filter((t=>t.entityTypes.includes("HELPLESS"))).length<this.getSaveCountRequirement()&&(ze.lose.play(),this.game.toLose(),!0)}addDebris(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"box",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:zt.SOLARIZED.base01,c=et(["\ue83b","\ue873","\ue874","\ue875","\ue876","\ue877"]);switch(r){case"%":c=et(["\ue83b","\ue873"]);break;case"m":c=et(["\ue874","\ue875"]);break;case"H":c=et(["\ue876","\ue877"]);break;case"Xs":c="\ue86a";break;case"X":c="\ue86b";break;case"XL":c="\ue86c";break;default:c="\ue873"}let l=new Mn({pos:t,renderer:{character:r,sprite:c,color:zt.SOLARIZED.base2,background:s},name:e,game:this.game,durability:a,explosivity:n,flammability:0,draggable:i,pushable:o});this.game.placeActorOnMap(l),this.game.draw()}addNPC(t){let e=new Pn({name:Ht,messages:["help!","ahh!","It's getting hot in hurr."],messageType:ee.ACTION,pos:t,game:this.game,renderer:{character:"C",sprite:"\ue823",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.violet},durability:2});if(this.game.placeActorOnMap(e)){this.game.map[it(e.pos)].type="SAFE_FLOOR",this.game.engine.addActor(e),this.game.draw()}}addFire(t){let e=new Zn({name:"Pyro",pos:t,game:this.game,renderer:{character:"*",sprite:"\ue8bb",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.red},timeToSpread:1,spreadCount:1,durability:1,attackDamage:2,speed:100});this.game.placeActorOnMap(e)&&(this.game.engine.addActor(e),this.game.draw())}propogateFire(){if(this.game.engine.actors.filter((t=>"Pyro"===t.name)).length<this.data.fireIntensity){const t=Object.keys(this.game.map).filter((t=>"BURNT"==this.game.map[t].type)),e=et(t);if(e){const t={x:parseInt(e.split(",")[0]),y:parseInt(e.split(",")[1])};this.addFire(t)}}}burnEntities(){Object.keys(this.game.map).filter((t=>"BURNT"===this.game.map[t].type)).reduce(((t,e)=>t.concat(this.game.map[e].entities)),[]).forEach((t=>{if(t.entityTypes.includes("BURNABLE")){t.burn()&&this.game.addMessage(`${t.name} is burned.`,ee.DANGER),t.willResetCanBurn&&t.resetCanBurn()}}))}placeInitialItems(){let t=[be(this.game.engine),we(this.game.engine),xe(this.game.engine)];const e=Object.keys(this.game.map).filter((t=>"SAFE"==this.game.map[t].type));t.forEach((t=>{const r=e.pop();if(r){const e={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};t.pos=e;let a=this.game.map[r];a&&a.entities.push(t)}}))}placePlayersInSafeZone(){let t=this.game.engine.actors.filter((t=>t.entityTypes.includes("PLAYING")));const e=Object.keys(this.game.map).filter((t=>"SAFE"==this.game.map[t].type));t.forEach((t=>{const r=e.shift();if(r){const e={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};t.pos=e;let a=this.game.map[r];a&&a.entities.push(t)}}))}},Jacinto:class extends We{constructor(t){let{...e}=t;super({...e}),this.createVerticalRoadGoingNorthAndSouth=()=>t=>this.createVerticalRoad(t,this.game.mapHeight),this.createVerticalRoadGoingNorth=t=>e=>this.createVerticalRoad(e,t+1),this.createVerticalRoadGoingSouth=t=>e=>this.createVerticalRoad(e,this.game.mapHeight-t-1,t+1),this.data={level:1,highestLevel:null,turnCount:0},this.dataByLevel=[{enemies:[...Array(8).fill("Wretch")],emergenceHoles:0},{enemies:[...Array(1).fill("Scion"),...Array(6).fill("Wretch")],emergenceHoles:0},{enemies:[...Array(4).fill("Drone")],emergenceHoles:0},{enemies:[...Array(3).fill("Wretch")],emergenceHoles:1},{enemies:[],emergenceHoles:6},{enemies:[...Array(4).fill("Hunter")],emergenceHoles:0},{enemies:[...Array(12).fill("Wretch"),"Skorge"],emergenceHoles:3}]}createHorizontalRoad(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Oe(this.game.tileKey,{x:r,y:t},4,e,"ROAD_EDGE",this.game.map,this.game.mapHeight,this.game.mapWidth),Oe(this.game.tileKey,{x:r,y:t+1},2,e,"ROAD",this.game.map,this.game.mapHeight,this.game.mapWidth)}createVerticalRoad(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Oe(this.game.tileKey,{x:t,y:r},e,3,"ROAD_EDGE",this.game.map,this.game.mapHeight,this.game.mapWidth),Oe(this.game.tileKey,{x:t+1,y:r},e,1,"ROAD",this.game.map,this.game.mapHeight,this.game.mapWidth)}createCityBlockLevel(){const t=nt(0,2),e=nt(1,5);this.game.createEmptyLevel(),Oe(this.game.tileKey,{x:0,y:0},this.game.mapHeight,1,"SAFE",this.game.map,this.game.mapHeight,this.game.mapWidth);const r=this.game.mapHeight/4;this.createHorizontalRoad(r,this.game.mapWidth),Array(t).fill("").forEach((()=>{const t=nt(0,this.game.mapWidth);et([this.createVerticalRoadGoingNorth(r),this.createVerticalRoadGoingSouth(r),this.createVerticalRoadGoingNorthAndSouth(r)])(t)})),Array(e).fill("").forEach((()=>{let t=this.getEmptyGroundTileKeys(),e=et(t).split(",").map((t=>parseInt(t)));const r=nt(1,6),a=et([3,4,6]);Se(this.game.map,e[0],e[1],r,a)}));const a=nt(2,10);let n=Object.keys(this.game.map).filter((t=>["ROAD","DOOR","EMERGENCE_GROUND"].includes(this.game.map[t].type)));for(let o=0;o<a;o++){let t=et(n);if(!t)break;let e=t.split(",").map((t=>parseInt(t)));const r={x:e[0],y:e[1]};Je(r,this.game)}}initialize(){super.initialize(),this.game.tileKey=Ve,this.setWaveData(),this.createCityBlockLevel(),this.game.initializeMapTiles();let e=Object.keys(this.game.map).filter((t=>"FLOOR"===this.game.map[t].type));const r=Object.keys(this.game.map).filter((t=>"SAFE"==this.game.map[t].type));this.placeCogInSafeZone(r);const a=this.game.getFirstPlayer();a&&(a.upgrade_points+=1,a.restoreFullEnergy()),Object.keys(this.game.map).filter((t=>"COVER_PLACEHOLDER"===this.game.map[t].type)).forEach((t=>{let e=t.split(",").map((t=>parseInt(t)));((t,e)=>{Qe(t,e,Ye.point)})({x:e[0],y:e[1]},this.game)}));for(let t=0;t<this.data.emergenceHoles;t++){let t=et(this.getEmptyTileKeys());if(!t)break;let e=t.split(",").map((t=>parseInt(t)));this.addEmerenceHole({x:e[0],y:e[1]})}const n=et([0,0,0,1]);for(let t=0;t<n;t++){let t=et(e);if(!t)break;let r=t.split(",").map((t=>parseInt(t)));this.addCogTagLoot({x:r[0],y:r[1]})}this.data.enemies.forEach((e=>{let r=et(this.getEmptyGroundTileKeys()).split(",").map((t=>parseInt(t)));t[`add${e}`](this,{x:r[0],y:r[1]})}));const o=this.enemies().reduce(((t,e)=>t+e.durability),0),i=Math.round(o/2*.5),s=et(e);if(s){const t=s.split(",").map((t=>parseInt(t)));this.addAmmoLoot({x:t[0],y:t[1]},i)}const c=Math.random()>.9?1:0;for(let t=0;t<c;t++){let t=et(e);if(!t)break;let r=t.split(",").map((t=>parseInt(t)));this.addGrenadeLoot({x:r[0],y:r[1]})}this.game.draw(),sr.level_start.play()}getEmptyTileKeys(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.game.map)).filter((t=>!this.game.map[t].entities.length))}getEmptyGroundTileKeys(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.game.map);return this.getEmptyTileKeys(t).filter((t=>"GROUND"===this.game.map[t].type))}getEmptyFloorTileKeys(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.game.map);return this.getEmptyTileKeys(t).filter((t=>"FLOOR"===this.game.map[t].type))}getPlayers(){return this.game.engine.actors.filter((t=>t.entityTypes.includes("PLAYING")))}updateUI(){this.createOrUpdateInfoBlock("gameProgress",{text:`${this.data.level-1} of  ${this.dataByLevel.length} city blocks cleared.`})}checkCoverAnimations(){this.game.engine.actors.forEach((t=>{t.entityTypes.includes("USES_COVER")&&t.resetCoverAnimations()}))}update(){super.update(),this.checkCoverAnimations(),this.updateUI(),this.hasWon()&&this.game.toWin(),this.hasLost()&&(ze.lose.play(),this.game.toLose(),this.reset(),this.game.initializeGameData()),this.levelComplete()&&(this.nextLevel(),this.setWaveData(),this.initialize())}setLevel(t){this.data.level=t,this.data.turnCount=0}nextLevel(){this.setLevel(this.data.level+1)}reset(){this.setLevel(1),this.initialize()}setWaveData(){const t=this.data.level-1,e=Gt.get(this.dataByLevel,t,{});this.data={...this.data,...e,hasPlayedEndSound:!1}}levelComplete(){const t=this.playerIsOnExit(),e=this.enemiesDefeated();return e&&(this.activateExitTiles(),this.data.hasPlayedEndSound||(sr.level_end.play(),this.data.hasPlayedEndSound=!0)),t&&e}enemiesDefeated(){return this.enemies().length<=0}enemies(){return this.game.engine.actors.filter((t=>"LOCUST"===t.faction))}hasWon(){return this.data.level>this.dataByLevel.length}hasLost(){let t=this.getPlayers();return!t.length||!!(t.length&&t[0].durability<=0)}addEmerenceHole(t){Oe(this.game.tileKey,{x:t.x-1,y:t.y-1},3,3,"EMERGENCE_GROUND",this.game.map,this.game.mapHeight,this.game.mapWidth);let e=new Qn({name:"Hole",pos:t,game:this.game,passable:!0,renderer:{character:"+",sprite:"\ue80a",color:He.locust1,background:He.base04},timeToSpread:1,spreadCount:3,durability:1,faction:"LOCUST",enemyFactions:["COG"],speed:It,getSpawnedEntity:t=>Yr(this,t),onDestroy:()=>{this.game.map[it(t)].type="EMERGENCE_DESTROYED",sr.emergence_01.play()},onSpawn:()=>{console.log("onSpawn"),sr.emergence_02.play()}});this.game.placeActorOnMap(e)&&(this.game.engine.addActor(e),this.game.draw())}createAmmoStack(t,e){return Array(t).fill("").map((t=>{const r=Tr(this.game.engine);return r.pos=e,r}))}addAmmoLoot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.createAmmoStack(e,t).forEach((t=>{this.game.placeActorOnMap(t)}))}addGrenadeLoot(t){const e=Lr(this.game.engine,6);e.pos=t,this.game.placeActorOnMap(e)}addCogTagLoot(t){const e=(()=>{let t=!1;return new Nn({name:"Cog Tag",passable:!0,renderer:{character:"o",sprite:"\ue89f",background:He.cog1,color:He.cog3},pickupEffects:[e=>{t||(t=!0,e.upgrade_points+=1,sr.cog_tags.play())}]})})();e.pos=t,this.game.placeActorOnMap(e)}placePlayersInSafeZone(t){this.getPlayers().forEach((e=>{const r=t.shift();if(r){const t={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};e.pos={x:t.x,y:e.pos.y},this.game.placeActorOnMap(e)}}))}placeCogInSafeZone(t){this.getCogEntites().forEach((e=>{const r=t.shift();if(r){const t={x:parseInt(r.split(",")[0]),y:parseInt(r.split(",")[1])};e.pos={x:t.x,y:t.y},this.game.placeActorOnMap(e)}}))}getCogEntites(){return this.game.engine.actors.filter((t=>t.entityTypes.includes("HAS_FACTION"))).filter((t=>"COG"===t.faction))}playerIsOnExit(){const t=this.game.getFirstPlayer();if(t){if("EXIT"===this.game.map[it(t.pos)].type)return!0}return!1}activateExitTiles(){const t=this.game.mapHeight/4;Oe(this.game.tileKey,{x:this.game.mapWidth-3,y:t},4,3,"EXIT",this.game.map,this.game.mapHeight,this.game.mapWidth)}},Mode:We,Development:class extends We{constructor(t){let{...e}=t;super({...e}),this.game.tileKey={...qt,...Ve}}initialize(){super.initialize(),this.game.createEmptyLevel(),this.game.initializeMapTiles(),this.game.placePlayerRandomly(),J(10).forEach((t=>Wr(this,wt(this.game.map).coordinates)))}update(){}},SomethingInTheTallGrass:class extends We{constructor(t){let{...e}=t;super({...e}),this.game.tileKey={...qt,...Ve,...ea},this.data={level:1,finalLevel:5,finalLevelAmmo:10,finalLevelBattery:2,finalLevelMonsters:6,finalLevelMonsterNests:2,monstersPerLevel:[2,6],lootCachesPerLevel:[1,5],lootPerLevel:[2,8],lootList:[Tr,Tr,Tr,Tr,Tr,Tr,Tr,Tr,Tr,Tr,Ra,Ra,Ra,Ra,Aa,Aa,ua,ua,ga,ga,ha,ha,ya,ya,ma,ma,_a,pa,da,da,fa,fa,Ca,Ca],lootCacheList:[this.addBuilding.bind(this),this.addBuilding.bind(this),this.addBeacon.bind(this),this.addBeacon.bind(this),this.addNest.bind(this)],bramblePatchAmount:[3,6],berryPatchAmount:[0,4]},this.game.fovActive=!0}initialize(){if(sr.wind_loop.play(),super.initialize(),this.game.createEmptyLevel(),this.generateLevel(),this.game.initializeMapTiles(),this.data.level<this.data.finalLevel)this.placePlayerOnEmptyTile(),this.addLootCaches(nt(...this.data.lootCachesPerLevel)),this.addOvergrowth(),this.addLoot(nt(...this.data.lootPerLevel)),this.addMonsters(nt(...this.data.monstersPerLevel)),this.placeGeneratorPiece(wt(this.game.map).coordinates);else{const t=this.mapCenter();this.addBaseCamp(t),this.addMonsters(this.data.finalLevelMonsters),J(this.data.finalLevelMonsterNests).forEach((()=>this.addNest())),this.placePlayerAtPosition({x:t.x+2,y:t.y})}this.addBrambles(),this.addBerries(),this.addTallGrass();this.game.getFirstPlayer().setAllEquipmentPositions()}mapCenter(){return{x:Math.round(this.game.mapWidth/2),y:Math.round(this.game.mapHeight/2)}}update(){super.update(),this.updateUI(),this.hasWon()&&this.game.toWin()}updateUI(){let t="";t=this.data.level<this.data.finalLevel?`${this.data.level} of ${this.data.finalLevel-1} fields cleared.`:"You made it to Base Camp, Defend it.",this.createOrUpdateInfoBlock("gameProgress",{text:t})}addBaseCamp(t){Et(t,10).forEach((t=>{const e=Ee({map:this.game.map,position:t});e&&(e.type=et(["GROUND","GROUND_ALT"]))}));Et(t,6).forEach((t=>{const e=Ee({map:this.game.map,position:t});e&&(e.type="STEEL_FLOOR")}));const e=la({engine:this.game.engine,lightRange:10});e.setPosition(t),this.game.placeActorOnMap(e);const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[{x:t.x,y:t.y+1},{x:t.x+1,y:t.y},{x:t.x,y:t.y-1},{x:t.x-1,y:t.y}];return e&&(r=r.concat([{x:t.x+1,y:t.y+1},{x:t.x+1,y:t.y-1},{x:t.x-1,y:t.y-1},{x:t.x-1,y:t.y+1}])),r}(t,!0);r.forEach((t=>this.placeGeneratorPiece(t))),this.addLoot(this.data.finalLevelAmmo,Tr),this.addLoot(this.data.finalLevelBattery,ua)}addLootCaches(t){J(t).forEach((()=>{et(this.data.lootCacheList)()}))}addBuilding(){const t=this.getEmptyGroundTileKeys(),e=et(t),r=st(e),a=nt(1,2),n=nt(2,4);return Se(this.game.map,r.x,r.y,a,n)}addBeacon(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t){const e=this.getEmptyGrassTileKeys(),r=et(e);t=st(r)}Et(t,4).forEach((t=>{const e=Ee({map:this.game.map,position:t});e&&(e.type="STEEL_FLOOR")}));const e=la({engine:this.game.engine,lightRange:0});e.setPosition(t),this.game.placeActorOnMap(e)}addNest(){const t=this.getEmptyTileKeys(),e=et(t),r=st(e);Et(r,2).forEach((t=>{const e=Ee({map:this.game.map,position:t});e&&(e.type="NEST")}));const a=new Qn({name:"nest",pos:r,game:this.game,passable:!0,renderer:{character:"+",sprite:"\ue8aa",color:ta.flesh1,background:ta.black},timeToSpread:5,spreadCount:10,durability:1,faction:"MONSTER",enemyFactions:["PEOPLE"],speed:It,getSpawnedEntity:t=>ia(this,t),onDestroy:()=>{this.game.map[it(r)].type="GROUND"}});this.game.placeActorOnMap(a)&&(this.game.engine.addActor(a),this.game.draw())}addBrambles(){const t=this.getEmptyTileKeysByTags(["BRAMBLES"]);rt(nt(...this.data.bramblePatchAmount),t).forEach((t=>{this.addBramblePatch(st(t))}))}addBramblePatch(t){const e=nt(2,5);Et(t,e).forEach((t=>{const e=Ee({map:this.game.map,position:t});e&&ke({tile:e,tag:"BRAMBLES"})&&this.placeBrambleBush(t)}))}placeBrambleBush(t){const e=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=new Gn({game:t.game,name:"bramble bush",passable:!0,lightPassable:!1,pos:e,renderer:{character:et(["'",".",'"',","]),sprite:"\ue8a2",background:ta.sunset,color:ta.ebony},enemyFactions:["PEOPLE"]}),o=new va({actor:n,game:t.game,damage:r,useCount:a,messageOnDamage:`brambles, beware. does ${r} damage.`,messageType:{color:ta.sunset,backgroundColor:ta.ebony}});return t.addStatusEffect(o),n}(this.game.engine,t);this.game.map[it(t)].type="BRAMBLE",this.game.placeActorOnMap(e)}addBerries(){const t=this.getEmptyTileKeysByTags(["BERRIES"]);rt(nt(...this.data.berryPatchAmount),t).forEach((t=>{this.addBerryPatch(st(t))}))}addBerryPatch(t){const e=nt(1,2);Et(t,e).forEach((t=>{const e=Ee({map:this.game.map,position:t});e&&ke({tile:e,tag:"BERRIES"})&&this.placeBerryBush(t)}))}placeBerryBush(t){const e=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=new Gn({game:t.game,name:"berry bush",baseDescriptor:"hmm, berries. these weren't listed in the C.C.C. survial guide.",passable:!0,lightPassable:!1,pos:e,renderer:{character:et(["'",".",'"',","]),sprite:"\ue8a2",background:ta.sunset,color:ta.blue},enemyFactions:["PEOPLE"]}),o=new wa({actor:n,game:t.game,value:r,useCount:a,messageOnDamage:"you feel an intense surge of energy.",messageType:{color:ta.sunset,backgroundColor:ta.blue}});return t.addStatusEffect(o),n}(this.game.engine,t);this.game.map[it(t)].type="BERRY",this.game.placeActorOnMap(e)}addOvergrowth(){const t=this.getEmptyTileKeysByTags(["OVERGROWN"]);rt(Math.round(.3*t.length),t).forEach((t=>{this.placeTallGrass(st(t))}))}addLoot(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;rt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,this.getEmptyTileKeysByTags(["LOOT"])).forEach((e=>{this.placeLootItem(st(e),t)}))}placeLootItem(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||(e=et(this.data.lootList));const r=e(this.game.engine);r.setPosition(t),this.game.placeActorOnMap(r)}addMonsters(){J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).forEach((t=>aa(this,wt(this.game.map).coordinates)))}addTallGrass(){this.getEmptyGrassTileKeys().forEach((t=>this.placeTallGrass(st(t))))}generateLevel_v1(){const t=Math.floor(this.game.mapWidth/2);Oe(this.game.tileKey,{x:t,y:0},this.game.mapHeight,10,"GROUND_ALT",this.game.map,this.game.mapHeight,this.game.mapWidth)}generateLevel(){const t=new X.Cellular(this.game.mapWidth,this.game.mapHeight);t.randomize(.6),J(4).forEach((()=>t.create()));let e=[],r=function(t,r,a){let n=t+","+r,o=et(["GROUND","GROUND_ALT"]);a&&(o="LAYED_GRASS"),Ce({map:this.game.map,key:n,tileKey:this.game.tileKey,tileType:o}),e.push(n)};t.create(r.bind(this)),t.connect(r.bind(this))}placeTallGrass(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.game.map[it(t)];if(!r)return;if(e&&r.entities.length>0)return;const a=Math.random()<.3,n=new Un({durability:1,defense:0,name:"tall grass",baseDescription:"grass in the Layoria region is known for its thick outer shell... and for the things that call it home.",passable:!0,lightPassable:a,pos:t,renderer:{character:a?"":et(["'",".",'"',","]),sprite:a?"":"\ue8a2",background:ta.sunset,color:a?ta.sunset:ta.sandy_brown}}),o=et(["GROUND","GROUND_ALT"]);r.type=o,this.game.placeActorOnMap(n)}placeGeneratorPiece(t){const e=new Nn({name:"an important component",baseDescription:"a component that powers up our base camp generator",pos:t,passable:!0,lightPassable:!0,renderer:{character:et(["a","b","c","d"]),sprite:et(["\ue839","\ue83f","\ue8d0","\ue8d1"]),background:ta.violet,color:ta.white},pickupEffects:[()=>this.goToNextLevel()]});this.game.placeActorOnMap(e)}placePlayerOnEmptyTile(){const t=this.game.getFirstPlayer();if(!t)return;const e=et(this.getEmptyGroundTileKeys());t.setPosition(st(e)),this.game.placeActorOnMap(t)}placePlayerAtPosition(t){const e=this.game.getFirstPlayer();e&&(e.setPosition(t),this.game.placeActorOnMap(e))}getEmptyTileKeys(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.game.map)).filter((t=>!this.game.map[t].entities.length))}getEmptyTileKeysByTags(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(this.game.map);return this.getEmptyTileKeys(e).filter((e=>(t=>{let{tile:e,tags:r}=t;const a=Gt.get(e.tileKey[e.type],"tags",[]);return r.some((t=>a.includes(t)))})({tile:this.game.map[e],tags:t})))}getEmptyGroundTileKeys(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.game.map);return this.getEmptyTileKeys(t).filter((t=>"GROUND"===this.game.map[t].type||"GROUND_ALT"===this.game.map[t].type))}getEmptyGrassTileKeys(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.game.map);return this.getEmptyTileKeys(t).filter((t=>"LAYED_GRASS"===this.game.map[t].type))}setLevel(t){this.data.level=t}nextLevel(){this.setLevel(this.data.level+1)}goToNextLevel(){this.data.level>=this.data.finalLevel||(this.destroyAll(),this.nextLevel(),this.initialize())}destroyAllMonsters(){this.enemies().forEach((t=>t.destroy()))}destroyAll(){this.leftoverEntities().forEach((t=>ka(t)))}enemiesDefeated(){return this.enemies().length<=0}enemies(){return this.game.engine.actors.filter((t=>"MONSTER"===t.faction))}leftoverEntities(){return this.game.entityLog.getAllEntities().filter((t=>"MONSTER"===t.faction||(!(!t.enemyFactions||!t.enemyFactions.includes("PEOPLE"))||!!["glow stick","used glow stick","super glow stick","beacon"].includes(t.name))))}hasWon(){return this.data.level>=this.data.finalLevel&&this.enemiesDefeated()}}},Ta=()=>{let t=[],e=[];return{add:e=>t.push(e),remove:e=>t=t.filter((t=>t.id!==e.id)),getAllEntities:()=>t,getAllUniqueEntities:()=>{const e=[];return t.forEach((t=>{e.find((e=>e.name===t.name))||e.push(t)})),e},getAllUniqueEntitiesInFov:()=>{const e=[];return t.forEach((t=>{e.find((e=>e.name===t.name))||t.isInFov&&e.push(t)})),e},setLookedAt:function(){return e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},getLookedAt:()=>e}};var La=r(2029);let Da=null;const Na=35,Pa=26,Ua=Na,Ga=Pa,Ia=0,Ma=26,Fa=Ma,ja=Na*Ma+Ia,Wa=Pa*Fa+Ia;class Ba{constructor(t){let{engine:e=null,meta:r=()=>{},map:a={},entityMap:n={},entityDictionary:o={},mapInitialized:i=!1,tileMap:s={},mapWidth:c=Na,mapHeight:l=Pa,cameraWidth:u=Ua,cameraHeight:h=Ga,tileWidth:d=Ma,tileHeight:p=Fa,tileOffset:f=Ia,getSelectedCharacter:g=()=>!1,spriteMode:y=!1,fovActive:m=!1,tileKey:_=qt,mode:v=Sa.Flume,messages:b=[]}=t;this.engine=e,this.meta=r,this.map=a,this.entityMap=n,this.entityDictionary=o,this.mapInitialized=i,this.tileMap=s,this.mapWidth=c,this.mapHeight=l,this.cameraWidth=u,this.cameraHeight=h,this.tileWidth=d,this.tileHeight=p,this.tileOffset=f,this.display=new me({containerId:"display",width:ja,height:Wa,tileWidth:d,tileHeight:p,tileOffset:f,game:this,mouseEnabled:!1}),this.spriteMode=y,this.fovActive=m,this.FOV=new j.PreciseShadowcasting(((t,e)=>this.fovLightPasses(t,e))),this.mode=new v({game:this}),this.tileKey=this.mode.tileKey||_,this.messages=b,this.getSelectedCharacter=g,this.tileAninmationInterval=null,this.entityLog=Ta(),Da=this}initializeMode(){this.mode.initialize(this.meta)}updateMode(){this.mode.update()}randomlyPlaceActorOnMap(t){let e=0,r=!1;for(;!r;){let a=wt(this.map).coordinates;this.canOccupyPosition(a,t)&&(t.move(a),r=!0),e+=1,e>=1e3&&(r=!0)}return r}randomlyPlaceAllActorsOnMap(){this.engine.actors.forEach((t=>{this.randomlyPlaceActorOnMap(t)}))}placeActorsOnMap(){this.engine.actors.forEach((t=>{let e=this.map[it(t.pos)];e?e.entities.push(t):console.log(`could not place ${t.id}: ${t.name} on map`)}))}placeActorOnMap(t){let e=this.map[it(t.pos)];return!!e&&(e.entities.push(t),!0)}removeActorFromMap(t){let e=this.map[it(t.pos)];return!!e&&(this.map[it(t.pos)].entities=e.entities.filter((e=>e.id!==t.id)),!0)}placePlayerRandomly(){this.randomlyPlaceActorOnMap(this.getFirstPlayer())}createLevel(){let t=new X.Arena(this.mapWidth,this.mapHeight),e=[];t.create(function(t,r,a){let n=t+","+r,o="GROUND";a&&(o="WALL"),Ce({map:this.map,key:n,tileKey:this.tileKey,tileType:o}),e.push(n)}.bind(this))}createEmptyLevel(){for(let t=0;t<this.mapHeight;t++)for(let e=0;e<this.mapWidth;e++){const r=`${e},${t}`;let a=et(["GROUND","GROUND_ALT","GROUND_ALT","GROUND_ALT"]);Ce({map:this.map,key:r,tileKey:this.tileKey,tileType:a})}}createCustomLevel(t){Object.keys(t.tiles).forEach(((e,r)=>{var a;let n=null===(a=t.tiles[e].data)||void 0===a?void 0:a.type;n||(n=et(["GROUND","GROUND_ALT","GROUND_ALT","GROUND_ALT"])),Ce({map:this.map,key:e,tileKey:this.tileKey,tileType:n})}))}canOccupyPosition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{passable:!1},r=!1,a=this.map[it(t)];if(a){let t=a.entities.filter((t=>!t.passable)).length>0;t&&!e.passable||(this.tileKey[a.type].passable&&(r=!0),null!==e&&void 0!==e&&e.canTraverse&&e.canTraverse(a.type)&&(r=!0))}return r}canPassPositionWhenThrown(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{passable:!1},r=!1,a=this.map[it(t)];if(a){let t=a.entities.filter((t=>!t.passable)).length>0;t||(this.tileKey[a.type].passable&&(r=!0),null!==e&&void 0!==e&&e.canTraverse&&e.canTraverse(a.type)&&(r=!0))}return r}rangedCursorCanOccupyPosition(t){let e=!1;if(this.map[it(t)]){let r=this.map[it(t)];this.tileKey[r.type].passable&&(e=!0)}return e}cursorCanOccupyPosition(t){let e=!1;return this.map[it(t)]&&(e=!0),e}show(t){this.display.initialize(t)}getRenderWidth(){return this.cameraWidth}getRenderHeight(){return this.cameraHeight}setRenderWidth(t){return this.cameraWidth=t}setRenderHeight(t){return this.cameraHeight=t}getRenderOffsetX(){const t=Math.floor(this.getRenderWidth()/2),e=this.getReferencePosition();let r=0;return e&&(r=e.x-t),-1*tt(r,0,this.mapWidth-this.getRenderWidth())}getRenderOffsetY(){const t=Math.floor(this.getRenderHeight()/2),e=this.getReferencePosition();let r=0;return e&&(r=e.y-t),-1*tt(r,0,this.mapHeight-this.getRenderHeight())}getReferencePosition(){return this.getPlayerPosition()}getRenderMap(t){let e={};for(let r in t){let a=r.split(","),n=parseInt(a[0]),o=parseInt(a[1]),i=n+this.getRenderOffsetX(),s=o+this.getRenderOffsetY();i>=0&&i<=this.getRenderWidth()&&s>=0&&s<=this.getRenderHeight()&&(e[`${i},${s}`]=t[r])}return e}processTileMap(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.getRenderMap(this.map);for(let a in r){let n=a.split(","),o=parseInt(n[0]),i=parseInt(n[1]),s=r[a],c={...this.tileKey[s.type]},l=this.animateTile(s,c,e),u=l.character,h=l.foreground,d=(null===s||void 0===s?void 0:s.overriddenBackground)||l.background;this.fovActive&&(h="transparent",d="transparent");const p=s.entities.filter((t=>t.entityTypes.includes("RENDERING")));if(p.forEach((t=>t.isInFov=!1)),!this.fovActive&&p.length>0){let t=p[p.length-1];l=this.animateEntity(t),u=l.character,h=l.foreground,l.background&&(d=l.background)}t(a,o,i,u,h,d)}}processTileMapWithFov(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.getRenderMap(this.map),a=Ot(this.entityLog.getAllEntities(),"ILLUMINATING").filter((t=>t.lightRange>0)),n=this.getRenderOffsetX(),o=this.getRenderOffsetY();a.forEach((a=>{const i=a.getPosition(),s=i.x+n,c=i.y+o;this.FOV.compute(s,c,a.lightRange,((n,o,i,s)=>{const c=it({x:n,y:o}),l=r[c];if(!l)return;let u={...this.tileKey[l.type]},h=this.animateTile(l,u,e),d=h.character,p=h.foreground,f=(null===l||void 0===l?void 0:l.overriddenBackground)||h.background;const g=Math.min(s,.4)*(1-i/a.lightRange);var y,m,_;y=f,m=a.lightColor,_=g,y=y.substr(1).match(/.{1,2}/g).map((t=>parseInt(t,16)*(1-_))),m=m.substr(1).match(/.{1,2}/g).map((t=>parseInt(t,16)*_)),f="#"+[0,1,2].map((t=>Math.min(Math.round(y[t]+m[t]),255))).reduce(((t,e)=>(t<<8)+e),0).toString(16).padStart(6,"0");const v=l.entities.filter((t=>t.entityTypes.includes("RENDERING")));if(v.forEach((t=>t.isInFov=!0)),v.length>0){let t=v[v.length-1];h=this.animateEntity(t),d=h.character,p=h.foreground,h.background&&(f=h.background)}t(c,n,o,d,p,f)}))}))}fovLightPasses(t,e){const r=t-this.getRenderOffsetX(),a=e-this.getRenderOffsetY(),n=this.map[it({x:r,y:a})];if(!n)return!1;const{lightPassable:o,passable:i}=this.tileKey[n.type];if(void 0===o&&!i)return!1;if(void 0!==o&&!o)return!1;return!(n.entities.filter((t=>!t.lightPassable)).length>0)}fovLightPasses_v1(t,e,r){return!!ot(r.getFirstPlayer().getPosition(),{x:t,y:e})||r.canOccupyPosition({x:t,y:e})}initializeMapTiles(){if(this.mapInitialized)return!1;this.mapInitialized=!0,this.processTileMap(((t,e,r,a,n,o)=>{let i=this.display.createTile(e,r,a,n,o);this.tileMap[t]=i}))}getPlayers(){return this.engine.actors.filter((t=>t.entityTypes.includes("PLAYING")))}getFirstPlayer(){const t=this.getPlayers();return t.length?t[0]:null}getPlayerPosition(){const t=this.getFirstPlayer();return t?t.getPosition():null}draw(){this.processTileMap(((t,e,r,a,n,o)=>{this.display.updateTile(this.tileMap[t],a,n,o)})),this.fovActive&&this.processTileMapWithFov(((t,e,r,a,n,o)=>{this.display.updateTile(this.tileMap[t],a,n,o)})),this.display.draw()}getEntityRenderer(t){return this.spriteMode&&t.hasOwnProperty("sprite")?{...t,character:t.sprite,foreground:t.color}:{...t,foreground:t.color}}getTileRenderer(t){return this.spriteMode&&t.hasOwnProperty("sprite")?{...t,character:t.sprite}:t}animateEntity(t){let e=t.getRenderer(),{character:r,foreground:a,background:n,animation:o}=this.getEntityRenderer(e);if(o){let e=this.getEntityRenderer(o[t.currentFrame]);r=e.character,a=e.foreground,n=e.background,t.currentFrame=(t.currentFrame+1)%o.length}return{character:r,foreground:a,background:n}}animateTile(t,e,r){let{character:a,foreground:n,background:o}=this.getTileRenderer(e);if(e.animation){let i=this.getTileRenderer(e.animation[t.currentFrame]);a=i.character,n=i.foreground,o=i.background,(r||null!==e&&void 0!==e&&e.forceAnimate)&&(t.currentFrame=(t.currentFrame+1)%e.animation.length)}return{character:a,foreground:n,background:o}}addActor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.engine;return!!this.placeActorOnMap(t)&&(e.actors.push(t),this.draw(),!0)}placeAndDrawActor(t){this.placeActorsOnMap(),this.draw()}removeActor(t){this.engine.actors=this.engine.actors.filter((e=>e.id!==t.id)),this.removeActorFromMap(t),this.draw()}initializeUI(t,e){this.show(e),t.current.focus()}initializeGameData(){this.engine.game=this;const t=this.getSelectedCharacter();this.engine.actors=[t],this.engine.actors.forEach((t=>{t.game=this})),this.initializeMode(),this.draw()}initialize(t,e){this.initializeUI(t,e),this.initializeGameData(),this.spriteMode&&(setTimeout((()=>{this.spriteMode=!1,this.draw()}),500),setTimeout((()=>{this.spriteMode=!0,this.draw()}),500))}startTileAnimator(){this.tileAninmationInterval&&clearInterval(this.tileAninmationInterval);const t=(t,e,r,a,n,o)=>{this.display.updateTile(this.tileMap[t],a,n,o)};this.tileAninmationInterval=setInterval((()=>{this.processTileMap(t,!0),this.display.draw()}),250)}addMessage(t,e){const r=new re({text:t,type:e});this.messages.push(r)}}const za=(t,e)=>{if(t.preventDefault(),!e.isRunning){let a=e.actors[e.currentActor],n=null;try{n=a.getKeymap()}catch(r){console.log("keypress error"),console.log(r)}if(n){let r=t.key;const a=Ha(r,n);if(null===a)return;a().setAsNextAction(),e.start()}}},Ha=(t,e)=>{for(let r in e)if(r.split(",").includes(t))return e[r];return null},Va=(t,e,r)=>(0,La.jsx)("div",{id:"display",ref:t,onKeyDown:t=>e(t,r),tabIndex:"0"});const qa=(0,Nt.pipe)((t=>class extends t{constructor(t){let{baseDescription:e="",baseDescriptors:r=[],...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("DESCRIBABLE"),this.baseDescription=e,this.baseDescriptors=r}getDescription(){return this.baseDescription}getFullDescription(){return this.getDescriptors().join("\n")}getDescriptors(){return[this.getDescription(),...this.baseDescriptors]}addDescriptor(t){this.baseDescriptors.push(t)}}))(class{constructor(t){let{game:e=null,passable:r=!1,lightPassable:a=!1,name:n="nameless"}=t,o=Ut()();this.entityTypes=["Entity"],this.id=o,this.name=n,this.game=e||Da,this.passable=r,this.lightPassable=a,this.active=!0,this.game.entityLog.add(this)}});class Ka extends se{constructor(t){let{processDelay:e=0,...r}=t;super({...r}),this.processDelay=e}perform(){return this.actor.energy-=this.energyCost,this.actor.destroy(),{success:!0,alternative:null}}}class $a extends se{constructor(t){let{engine:e,...r}=t;super({...r}),this.engine=e}async perform(){let t=null;console.log(`${this.actor.name} is cranking its engine.`);try{await this.engine.start(),this.actor.energy-=this.energyCost}catch(e){console.log("EngineCrank"),console.log(e),t=new Ka({game:this.game,actor:this.actor,energyCost:It})}return{success:!0,alternative:t}}}const Xa=t=>class extends t{constructor(t){let{children:e=[],engine:r=new ao({}),...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("PARENT"),this.children=e,this.engine=r,this.isInitialized=!1}destroyChild(t){t.energy=0;let e=this.game.map[it(t.pos)];this.game.map[it(t.pos)].entities=e.entities.filter((e=>e.id!==t.id)),this.engine.actors=this.engine.actors.filter((e=>e.id!==t.id)),this.game.draw()}canAttack(t){return!this.children.map((t=>t.id)).includes(t.id)}initialize(){this.isInitialized=!0,this.engine.game=this.game,this.engine.actors=this.children,this.engine.actors.forEach((t=>{t.game=this.game,t.destroy=()=>{this.destroyChild(t)},t.canAttack=this.canAttack.bind(this),this.game.placeActorOnMap(t),this.engine.addActor(t),this.game.draw()}))}getAction(t){return this.isInitialized||this.initialize(),new $a({game:t,actor:this,engine:this.engine,energyCost:It,processDelay:10})}},Ya=t=>class extends t{constructor(t){let{...e}=t;super({...e}),this.entityTypes=this.entityTypes.concat("HAS_TARGETING_CURSOR"),this.cursorIsActive=!1,this.cursorPositions=[],this.animations=[],this.displayChanceText=!1}setCursorIsActive(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cursorIsActive=t}activateCursor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setDisplayChanceText(e),this.setCursorPositions(t),this.setCursorIsActive(!0),this.resetAnimations()}deactivateCursor(){this.setCursorIsActive(!1),this.removeAnimations(),this.setCursorPositions([])}setDisplayChanceText(t){return this.displayChanceText=t}getCursorPositions(){return this.cursorPositions}setCursorPositions(t){return this.cursorPositions=t,this.getCursorPositions()}addAnimations(){const t=this.getCursorPositions();t.length&&t.forEach((t=>{const e=this.game.display.addAnimation(ue.BLINK_BOX,{x:t.x,y:t.y,color:zt.SOLARIZED.base3});if(this.animations.push(e),this.displayChanceText){const e=this.getRangedAttackChance(t),r=this.game.display.addAnimation(ue.TEXT_OVERLAY,{x:t.x,y:t.y,color:zt.SOLARIZED.base3,text:`${Math.round(100*e)}%`});this.animations.push(r)}}))}removeAnimations(){this.animations.length&&this.animations.forEach((t=>this.game.display.removeAnimation(t.id))),this.animations=[]}resetAnimations(){this.removeAnimations(),this.addAnimations()}moveCursorToPosition(t){const e=this.getCursorPositions();if(e.length<=0)return[];const r=t.x-e[0].x,a=t.y-e[0].y,n=e.map((t=>({x:t.x+r,y:t.y+a})));return this.setCursorPositions(n),this.resetAnimations(),n}moveCursorInDirection(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=this.getCursorPositions().map((r=>({x:r.x+t[0]*e,y:r.y+t[1]*e})));return this.setCursorPositions(r),this.resetAnimations(),r}updateCursorNode(t,e){const r=this.animations[t];r&&e.forEach((t=>{r.node[t.key](t.value)}))}updateCursorNodeByPosition(t,e){const{x:r,y:a}=t,n=this.animations.find((t=>t.x===r&&t.y===a));n&&e.forEach((t=>{n.node[t.key](t.value)}))}updateAllCursorNodes(t){this.getCursorPositions().forEach(((e,r)=>{const a=this.animations[r];t.forEach((t=>{a.node[t.key](t.value)}))}))}destroy(){this.removeAnimations(),super.destroy()}},Za=t=>class extends t{constructor(t){let{attackDamage:e=2,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("ATTACKING"),this.attackDamage=e}getAttackDamage(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.attackDamage+t}getAttackDamageWithEquipment(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getAttackDamage(t);return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((t=>{t.item&&t.item.entityTypes.includes("ATTACKING")&&(e+=t.item.getAttackDamage())})),e}canAttack(t){return!0}attack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.attack_v2(t,e)}attack_v1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!1,a=this.game.map[it(t)];if(!a)return r;let n=xt(a.entities);if(n.length>0){let t=n[n.length-1];if(this.canAttack(t)){const a=this.getAttackDamageWithEquipment(e);this.game.addMessage(`${this.name} attacks ${t.name} for ${a}`,ee.DANGER),t.decreaseDurability(a),this.entityTypes.includes("PLAYING")&&this.game.display.shakeScreen({intensity:1}),r=!0}}return r}attack_v2(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!1,a=this.game.map[it(t)];if(!a)return r;let n=xt(a.entities);if(n.length>0){let a=n[n.length-1];if(this.canAttack(a)){const n=this.getAttackDamage(e);n>0&&(this.game.addMessage(`${this.name} hits ${a.name} for ${n}`,ee.DANGER),a.decreaseDurability(n)),this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((e=>{e.item&&e.item.entityTypes.includes("ATTACKING")&&e.item.attack(t)})),this.entityTypes.includes("PLAYING")&&this.game.display.shakeScreen({intensity:1}),r=!0}}return r}},Qa=[ze.chop_0,ze.chop_1],Ja=[ze.release_0],tn=[sr.reload],en=t=>class extends t{constructor(t){let{attackRange:e=0,baseRangedAccuracy:r=0,baseRangedDamage:a=0,magazineSize:n=0,rangedHitSounds:o=[],rangedMissSounds:i=[],rangedReloadSounds:s=[],afterFireSuccess:c=null,...l}=t;super({...l}),this.entityTypes=this.entityTypes.concat("RANGED_ATTACKING"),this.attackRange=e,this.baseRangedAccuracy=r,this.baseRangedDamage=a,this.magazineSize=n,this.magazine=n,this.rangedHitSounds=o,this.rangedMissSounds=i,this.rangedReloadSounds=s,this.afterFireSuccess=c?c.bind(this):this.defaultAfterFireSuccess.bind(this)}getRangedAttackChance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=[this.getRangedWeaponAccuracy(),t?this.getRangedAttackCoverDebuff(t):0].reduce(((t,e)=>t+e),this.baseRangedAccuracy);return Math.max(e,0)}getRangedAttackCoverDebuff(t){return pt(this.getPosition(),t).reduce(((t,e)=>{let r=this.game.map[it(e)];if(!r)return 0;if(ke({tile:r,tag:"WALL"}))return t-1;let a=Ot(r.entities,"COVERING"),n=0;if(a.length>0){if(this.entityTypes.includes("USES_COVER")&&this.getCoveredByIds().includes(a[0].id))return t;n=a[0].accuracyModifer}return t+n}),0)}getRangedAttackDistanceDebuff(t){return ut(this.game,t,this.getPosition(),8).length/(3*this.getAttackRange())*-1}getAttackRange(){let t=this.attackRange;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((e=>{e.item&&e.item.entityTypes.includes("RANGED_ATTACKING")&&(t+=e.item.attackRange)})),t}getRangedWeaponAccuracy(){let t=0;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((e=>{e.item&&e.item.entityTypes.includes("RANGED_ATTACKING")&&(t+=e.item.getRangedAttackChance())})),t}getRangedAttackDamage(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.baseRangedDamage+this.getRangedWeaponDamage()+t}getRangedWeaponDamage(){let t=0;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((e=>{e.item&&e.item.entityTypes.includes("RANGED_ATTACKING")&&(t+=e.item.getRangedAttackDamage())})),t}canRangedAttack(t){return!0}getEquipedWeapons(){if(this.entityTypes.includes("EQUIPING")){return this.equipment.map((t=>{if(t.item&&t.item.entityTypes.includes("RANGED_ATTACKING"))return t.item})).filter((t=>t))}return[]}decrementMagazine(){this.magazine=Math.max(0,this.magazine-1)}useAmmo(t){this.getEquipedWeapons().forEach((e=>{e.decrementMagazine();let r=this.contains("Ammo");r&&(this.removeFromContainer(r),r.move(t),r.destroy())}))}reload(){let t=!1;return this.entityTypes.includes("CONTAINING")&&this.getEquipedWeapons().forEach((e=>{const r=e.magazineSize-e.magazine;for(let a=0;a<r;a++){this.contains("Ammo")&&(e.magazine+=1,t=!0)}})),!!t&&(this.playReloadSound(),!0)}rangedAttack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=!1,n=!1,o=this.game.map[it(t)];if(!o)return[a,n];let i=xt(o.entities);if(i.length>0){let o=i[i.length-1];if(this.canRangedAttack(o)){const i=this.getRangedAttackChance(t)+r;n=Math.random()<i;const s=o.getPosition();if(this.useAmmo(s),!n)return this.playMissSound(),this.animateMiss(s),a=!0,[a,n];let c=this.getRangedAttackDamage(e);this.game.addMessage(`${this.name} does ${c} to ${o.name}`,ee.DANGER),o.decreaseDurability(c),this.entityTypes.includes("PLAYING")&&this.game.display.shakeScreen({intensity:1}),this.playHitSound(),a=!0}}return[a,n]}animateMiss(t){this.game.display.addAnimation(ue.TEXT_FLOAT,{...t,color:"#fff",text:"miss"})}async defaultAfterFireSuccess(t){let{fromPosition:e,targetPositions:r,hits:a,misses:n}=t;const o=hr({game:this.game,fromPosition:this.getPosition(),targetPositions:a,backgroundColorGradient:[zt.SOLARIZED.green,zt.SOLARIZED.cyan],colorGradient:[zt.SOLARIZED.base3,zt.SOLARIZED.base3]});n.forEach((t=>{o.addParticle({life:5,pos:{...t},direction:{x:0,y:0},character:"-"})})),await o.start()}playReloadSound(){et(this.getReloadSounds()).play()}playMissSound(){et(this.getMissSounds()).play()}playHitSound(){et(this.getHitSounds()).play()}getHitSounds(){const t=this.getWeaponSounds("rangedHitSounds");return t.length>0?t:Qa}getMissSounds(){const t=this.getWeaponSounds("rangedMissSounds");return t.length>0?t:Ja}getReloadSounds(){const t=this.getWeaponSounds("rangedReloadSounds");return t.length>0?t:tn}getWeaponSounds(t){const e=[];return this.getEquipedWeapons().forEach((r=>{e.push(...r[t])})),e}},rn=t=>class extends t{constructor(t){let{name:e="nameless",equipmentType:r=Xt.HAND,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("EQUIPABLE"),this.name=e,this.equipmentType=r,this.equippedBy=null}},an=t=>class extends t{constructor(t){let{actions:e=[],speed:r=100,energy:a=0,...n}=t;super({...n}),this.entityTypes=this.entityTypes.concat("ACTING"),this.actions=e,this.speed=r,this.energy=r,this.lastActionResult=null,this.skipTurn=!1}getLastActionResult(){return this.lastActionResult}resetLastActionResult(){return this.lastActionResult=null}lastActionFailed(){const t=this.getLastActionResult();return!!t&&!t.success}lastActionSucceded(){return!this.lastActionFailed()}getAction(){let t=et(this.actions);if(t)return t}gainEnergy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.speed;this.energy+=t}restoreFullEnergy(){this.energy=this.speed}hasEnoughEnergy(){return this.energy>0}},nn=t=>class extends t{constructor(t){let{pos:e={x:0,y:0},renderer:r,traversableTiles:a=[],...n}=t;super({...n}),this.entityTypes=this.entityTypes.concat("RENDERING"),this.pos=e,this.renderer={...r},this.currentFrame=0,this.traversableTiles=a}getRenderer(){return this.renderer}getPosition(){return this.pos}setPosition(t){return this.pos=t}move(t){let e=!1;if(this.game.canOccupyPosition(t,this)){let r=this.game.map[it(this.pos)];this.game.map[it(this.pos)]={...r,entities:r.entities.filter((t=>t.id!==this.id))},this.pos=t,this.game.map[it(t)].entities.push(this),e=!0}return e}canTraverse(t){return this.traversableTiles.includes(t)}shove(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!1,n=!1,o=this.game.map[it(t)];return o&&o.entities.map((t=>{if(t.entityTypes.includes("PUSHABLE")&&!t.passable&&t.pushable){let r={x:t.pos.x+e[0],y:t.pos.y+e[1]};n=t.move(r)}})),a=r?this.move(t):n,a}},on=t=>class extends t{constructor(t){let{equipment:e=Yt.human(),...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("EQUIPING"),this.equipment=e}move(t){const e=super.move(t);return e&&this.setAllEquipmentPositions(),e}setAllEquipmentPositions(){const t=this.getPosition();this.equipment.forEach((e=>{e.item&&e.item.setPosition(t)}))}getEquippedItems(){return this.equipment.map((t=>t.item)).filter((t=>null!==t))}hasItemNameEquipped(t){return this.equipment.filter((e=>!(!e.item||e.item.name!==t))).length>0}getItemInSlot(t){let e=this.equipment.find((e=>e.type===t));return!!e&&(!!e.item&&e.item)}equip(t,e){let r=!1;return this.equipment=this.equipment.map((a=>(r||a.type!==t||null!==a.item||(a.item=e,e.equippedBy=this,e.setPosition(this.getPosition()),r=!0,ze.equip_1.play()),a))),r}unequip(t){this.equipment=this.equipment.map((e=>(e.item&&e.item.id===t.id&&(e.item=null,t.equippedBy=null,ze.equip_0.play()),e)))}addEquipmentSlot(t){let{type:e,name:r=null,item:a=null}=t;const n={type:e,name:r||e,item:a};this.equipment.push(n)}removeEquipmentSlot(t){this.equipment=this.equipment.filter((e=>e.type!==t))}},sn=t=>class extends t{constructor(t){let{charge:e=2,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("CHARGING"),this.charge=e,this.chargeMax=e}getCharge(){return this.charge}decreaseCharge(t){this.charge=Math.max(0,this.charge-t)}increaseCharge(t){this.charge=Math.min(this.chargeMax,this.charge+t)}gainEnergy(t){super.gainEnergy(t),this.increaseCharge(1)}},cn=t=>class extends t{constructor(t){let{keymap:e={},...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("PLAYING"),this.nextAction=null,this.keymap=e}setNextAction(t){this.nextAction=t}getAction(){let t=this.nextAction;return this.nextAction=null,t}destroy(){super.destroy()}},ln=t=>class extends t{constructor(t){let{accuracyModifer:e=0,damageModifer:r=0,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("COVERING"),this.providesCover=!0,this.accuracyModifer=e,this.damageModifer=r}isProvidingCover(){return this.providesCover&&(this.accuracyModifer<0||this.damageModifer<0)}};class un extends xr{constructor(t){let{...e}=t;super({...e})}perform(){let t=!1,e=null;this.actor.passable=!1;let r=super.perform();if(r.success&&(this.actor.path.shift(),t=!0),0===this.actor.path.length&&(t=!0,e=new Ka({game:this.game,actor:this.actor,energyCost:It,processDelay:0})),r.alternative){this.actor.attack(this.targetPos)&&(e=new Ka({game:this.game,actor:this.actor,energyCost:It,processDelay:0}))}return{success:t,alternative:e}}}class hn extends wr{constructor(t){let{damageToSelf:e,...r}=t;super({...r}),this.damageToSelf=e,this.onSuccess=()=>{this.actor.decreaseDurabilityWithoutDefense(e)},this.onFailure=()=>{this.actor.destroy()}}}class dn extends se{constructor(t){let{targetPos:e,damageToSelf:r=1,processDelay:a=25,...n}=t;super({...n}),this.targetPos=e,this.processDelay=a,this.damageToSelf=r}perform(){let t=!1,e=null;return this.actor.move(this.targetPos)?(this.actor.energy-=this.energyCost,t=!0):(t=!0,e=new hn({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:It,damageToSelf:this.damageToSelf})),{success:t,alternative:e}}}const pn=t=>class extends t{constructor(t){let{path:e=!1,direction:r={x:0,y:0},attackDamage:a=1,range:n=3,...o}=t;super({...o}),this.entityTypes=this.entityTypes.concat("DIRECTIONAL_PROJECTING"),this.path=e,this.direction=r,this.attackDamage=a,this.range=n}createPath(t){let e=[];for(let r=1;r<this.range+1;r++)e.push({x:this.pos.x+this.direction[0]*r,y:this.pos.y+this.direction[1]*r});this.path=e}getAction(t){let e=null,r={x:this.pos.x+this.direction[0],y:this.pos.y+this.direction[1]};return this.passable=!1,e=this.range>0?new dn({targetPos:r,game:t,actor:this,energyCost:It,damageToSelf:1,onSuccess:()=>this.range-=1,onAfter:()=>{this.energy<=100&&t.engine.setActorToPrevious()}}):new Ka({game:t,actor:this,energyCost:0}),e}};class fn extends se{constructor(t){let{targetPos:e,direction:r,...a}=t;super({...a}),this.targetPos=e,this.direction=r}perform(){let t=!1,e=null;return this.actor.shove(this.targetPos,this.direction)?(this.actor.energy-=this.energyCost,t=!0):(t=!0,e=new wr({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:It})),{success:t,alternative:e}}}class gn extends se{constructor(t){let{targetPos:e,direction:r,...a}=t;super({...a}),this.targetPos=e,this.direction=r}perform(){let t=!1,e=null;return this.actor.shove(this.targetPos,this.direction)?(this.actor.energy-=this.energyCost,t=!0):(t=!0,e=new Ka({game:this.game,actor:this.actor,energyCost:0})),{success:t,alternative:e}}}class yn extends xr{constructor(t){let{...e}=t;super({...e}),this.processDelay=0}perform(){let t=!1,e=null;this.actor.passable=!1;let r=super.perform();return r.success&&(this.actor.path.shift(),t=!0),0===this.actor.path.length&&(t=!0,e=new Ka({game:this.game,actor:this.actor,energyCost:It,processDelay:0})),r.alternative&&this.actor.attack(this.targetPos),{success:t,alternative:e}}}const mn=t=>class extends t{constructor(t){let{targetEntity:e=null,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("CHASING"),this.targetEntity=e}getAction(t){if(!this.targetEntity)return this.sayAction(t);let e=ut(t,this.targetEntity.pos,this.pos);if(e.length<=0)return this.sayAction(t);let r=e[0];return new xr({targetPos:r,game:t,actor:this,energyCost:It})}sayAction(t){return new er({message:"Where are they?",game:t,actor:this,energyCost:It})}};class _n extends se{constructor(t){let{targetPos:e,entity:r,interrupt:a=!0,forcePlacement:n=!1,...o}=t;super({...o}),this.targetPos=e,this.entity=r,this.interrupt=a,this.forcePlacement=n}perform(){let t=!1,e=!!this.forcePlacement||this.game.canOccupyPosition(this.targetPos,this.entity);const r=this.game.map[it(this.targetPos)];return e&&r&&(this.entity.pos=this.targetPos,r.entities.push(this.entity),this.game.engine.addActorAsNext(this.entity),t=!0),{success:t,alternative:null}}}const vn=t=>class extends t{constructor(t){let{draggable:e=!0,...r}=t;super({...r}),this.draggable=e,this.entityTypes=this.entityTypes.concat("DRAGGABLE")}},bn=t=>class extends t{constructor(t){let{pushable:e=!0,...r}=t;super({...r}),this.pushable=e,this.entityTypes=this.entityTypes.concat("PUSHABLE")}},wn=t=>class extends t{constructor(t){let{durability:e=1,defense:r=0,onDestroy:a=()=>null,...n}=t;super({...n}),this.entityTypes=this.entityTypes.concat("DESTRUCTABLE"),this.durability=e,this.durabilityMax=e,this.defense=r,this.onDestroy=a,this.actorSprite=this.renderer.sprite,this.actorCharacter=this.renderer.character}getDefense(){let t=this.defense;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((e=>{e.item&&e.item.entityTypes.includes("DESTRUCTABLE")&&(t+=e.item.getDefense())})),t}decreaseDurabilityWithoutDefense(t){this.durability-=t,this.durability<=0&&this.destroy()}decreaseDurability(t){const e=this.durability,r=this.getDefense(),a=t-r,n=e-a;this.durability=Math.min(e,n),this.addDurabilityChangeAnimation(-a),this.addDefenseAppliedAnimation(r),this.addDecreaseDurabilityMessage(a,r),this.updateActorRenderer(),this.portraitFlash(),this.entityTypes.includes("PLAYING")&&this.bloodSpatter(t),this.durability<=0&&this.destroy()}addDecreaseDurabilityMessage(t,e){e<=0||this.game.addMessage(`${this.name} blocks ${e} of ${t} damage`,ee.INFORMATION)}bloodSpatter(t){br({game:this.game,fromPosition:this.getPosition(),spatterAmount:.2*t,spatterRadius:3,transfersBackground:!0,spatterColors:["#833139","#aa2123"]}).start()}portraitFlash(){var t,e;const r=null===(t=this.renderer)||void 0===t?void 0:t.basePortrait,a=null===(e=this.renderer)||void 0===e?void 0:e.damageFlashPortrait;if(!r||!a)return;const n=[r,a];let o=0;let i=0;const s=setInterval((()=>{this.renderer.portrait=(o=1-o,n[o]),this.game.updateReact(this.game),i++,i>=12&&clearInterval(s)}),50)}shakePlayer(){const t=it(this.getPosition()),e=this.game.tileMap[t];this.game.display.shakeNode({node:e,intensity:2})}increaseDurability(t){this.durability+=t,this.addDurabilityChangeAnimation(+t),this.updateActorRenderer()}updateActorRenderer(){this.durability===this.durabilityMax?(this.renderer.sprite=this.actorSprite,this.renderer.character=this.actorCharacter):(this.renderer.sprite=this.durability,this.renderer.character=this.durability),this.game.draw()}addDurabilityChangeAnimation(t){let e="",r="#dc322f";t>0&&(e="+",r="#3e7dc9");const a=e+t;this.animateText(a,r)}addDefenseAppliedAnimation(t){t<=0||this.animateText(`block ${t}`,"#eee")}animateText(t,e){this.game.display.addAnimation(ue.TEXT_FLOAT,{...this.getPosition(),color:e,text:t,timeToLive:750})}destroy(){this.onDestroy(this),Ea(this)}},xn=(t,e,r)=>(t=t.substr(1).match(/.{1,2}/g).map((t=>parseInt(t,16)*(1-r))),e=e.substr(1).match(/.{1,2}/g).map((t=>parseInt(t,16)*r)),"#"+[0,1,2].map((r=>Math.min(Math.round(t[r]+e[r]),255))).reduce(((t,e)=>(t<<8)+e),0).toString(16).padStart(6,"0")),On=t=>class extends t{constructor(t){let{...e}=t;super({...e}),this.entityTypes=this.entityTypes.concat("BURNABLE"),this.canBurn=!0,this.willResetCanBurn=!1}resetCanBurn(){this.willResetCanBurn=!1,this.canBurn=!0}burn(){return!!this.canBurn&&(this.decreaseDurability(2),!0)}},Rn=t=>{let{game:e,fromPosition:r,radius:a,colorGradient:n=["#ff551a","#673ab7"],backgroundColorGradient:o=["#673ab7","#ff551a"],easingFunction:i=Tt.linear,animationTimeStep:s=.2,reverse:c=!1}=t;const l=kt(r.x,r.y,a);return hr({game:e,fromPosition:r,targetPositions:l,colorGradient:n,backgroundColorGradient:o,easingFunction:i,animationTimeStep:s,reverse:c})},An=t=>class extends t{constructor(t){let{flammability:e=1,explosivity:r=1,timeToSpread:a=1,spreadCount:n=1,...o}=t;super({...o}),this.entityTypes=this.entityTypes.concat("EXPLODING"),this.flammability=e,this.explosivity=r,this.timeToSpread=a,this.spreadCount=n}enflame(){Array(this.flammability).fill("").map((t=>new Zn({name:"Pyro",pos:{...this.pos},game:this.game,renderer:{character:"*",color:zt.SOLARIZED.base3,background:zt.SOLARIZED.red},timeToSpread:this.timeToSpread,spreadCount:this.spreadCount,durability:1,attackDamage:1,speed:100}))).forEach((t=>{this.game.placeActorOnMap(t),this.game.engine.addActor(t)}))}explode(){const t=Et({x:0,y:0},this.explosivity),e=this.game.tileKey.BURNT.animation.length;let r={x_offset:0,y_offset:0,positions:t};r.positions.forEach((t=>{let a={x:this.pos.x+t.x+r.x_offset,y:this.pos.y+t.y+r.y_offset};const n=this.game.map[it(a)];if(n){n.type="BURNT",n.currentFrame=at(0,e);let t=xt(n.entities.filter((t=>t.id!==this.id)));t.length>0&&t.forEach((t=>{let e=this.attackDamage?this.attackDamage:this.explosivity;this.game.addMessage(`${this.name} does ${e} to ${t.name}`,ee.DANGER),t.decreaseDurability(e)}))}})),this.explosivity>0&&ze.explosion_0.play()}animateExplosion(){Rn({game:this.game,fromPosition:this.getPosition(),radius:this.explosivity}).start()}destroy(){super.destroy(),this.explode(),this.enflame(),this.animateExplosion()}},Cn=t=>class extends t{constructor(t){let{initializeKeymap:e,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("HAS_KEYMAP"),this.keymapStack=[],this.initializeKeymap=e;const a=e(this.game.engine,this);this.addKeymap(a)}getKeymap(){return Gt.get(this.keymapStack,"0",null)}addKeymap(t){this.keymapStack.unshift(t)}removeKeymap(){this.keymapStack.shift()}reinitializeKeymap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keymapStack=[];const e=this.initializeKeymap(this.game.engine,this);t.forEach((t=>delete e[t])),this.addKeymap(e)}setKeymap(t){return this.addKeymap(t),this.getKeymap}goToPreviousKeymap(){return this.keymapStack.length>1&&this.removeKeymap(),this.getKeymap()}},kn=t=>{let{activate:e=t=>null,canUpgrade:r=t=>!0,cost:a=1,name:n="upgrade",removeOnActivate:o=!1}=t;return{activate:e,canUpgrade:r,cost:a,name:n,removeOnActivate:o}},En=t=>class extends t{constructor(t){let{faction:e=null,enemyFactions:r=[],...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("HAS_FACTION"),this.faction=e,this.enemyFactions=r}canAttack(t){return!this.isAlly(t)}canRangedAttack(t){return!this.isAlly(t)}getEnemies(){return this.game.engine.actors.filter((t=>this.isEnemy(t)))}isEnemy(t){return!this.isAlly(t)&&(this.considersAllAsEnemy()||this.isEnemyFaction(t))}considersAllAsEnemy(){return this.enemyFactions.includes("ALL")}isEnemyFaction(t){return this.enemyFactions.includes(t.faction)}isAlly(t){return!!t.entityTypes.includes("HAS_FACTION")&&(null!==t.faction&&t.faction===this.faction)}},Sn=t=>class extends t{constructor(t){let{...e}=t;super({...e}),this.entityTypes=this.entityTypes.concat("USES_COVER"),this.coverAnimations=[],this.showCoverAnimations=!0,this.coveredBy=[]}isCovered(){return this.coveredBy.length}getCoverEntities(){const t=Object.keys(this.game.map);let e=[];return t.forEach((t=>{const r=this.game.map[t].entities.filter((t=>t.entityTypes.includes("COVERING")));e=[...e,...r]})),e}getCoveredByIds(){return this.coveredBy.map((t=>t.id))}setCoverAnimations(){if(!this.showCoverAnimations)return;const t=Ct(this.game.map,this.getPosition());let e=!1;if(t.forEach((t=>{if(t.entities.length){const r=t.entities[0];if(r.entityTypes.includes("COVERING")&&r.isProvidingCover()){const t=r.getPosition(),a=this.game.display.addAnimation(ue.TEXT_OVERLAY,{x:t.x,y:t.y,color:this.renderer.color,text:"\ue88f",isBlinking:!0,textAttributes:{fontFamily:"scroll-o-script",fontSize:this.game.display.tileWidth/2}});this.coverAnimations.push(a),e=!0,this.coveredBy.push(r)}}})),e){const t=this.getPosition(),e=this.game.display.addAnimation(ue.BLINK_BOX,{x:t.x,y:t.y,color:this.renderer.color});this.coverAnimations.push(e)}}removeCoverAnimations(){this.coverAnimations.length&&(this.coverAnimations.forEach((t=>{this.game.display.removeAnimation(t.id)})),this.coverAnimations=[])}removeCoveredBy(){this.coveredBy=[]}resetCoverAnimations(){this.removeCoverAnimations(),this.removeCoveredBy(),this.setCoverAnimations()}destroy(){this.showCoverAnimations=!1,this.removeCoverAnimations(),this.removeCoveredBy(),super.destroy()}};class Tn extends Mr{constructor(t){let{...e}=t;super({...e}),this.name="light drain",this.description="all lights give out eventually",this.allowDuplicates=!1,this.processOnlyOnActorTurn=!0,this.lifespan=-1,this.renderer={color:ta.sunset,background:ta.black,character:"o"},this.onStep=t=>{this.actor.entityTypes.includes("ILLUMINATING")&&this.actor.lightRange>1&&this.actor.decrementLightRange()}}}const Ln=t=>class extends t{constructor(t){let{lightRange:e=8,lightColor:r="#f9d091",lightDrain:a=!0,...n}=t;super({...n}),this.entityTypes=this.entityTypes.concat("ILLUMINATING"),this.lightRange=e,this.lightColor=r,this.lightDrain=a,a&&this.initializeDrainEffect()}setLightRange(t){this.lightRange=tt(t,0,10)}incrementLightRange(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setLightRange(this.lightRange+t),sr.light_up.play()}decrementLightRange(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setLightRange(this.lightRange-t),sr.light_drain.play()}initializeDrainEffect(){const t=new Tn({game:this.game,actor:this,stepInterval:2e3});this.game.engine.addStatusEffect(t)}};const Dn=Dt()(an,nn,cn,Cn,(t=>class extends t{constructor(t){let{initiatedBy:e=null,range:r=null,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("UI"),this.initiatedBy=e,this.active=!0,this.range=r}hasEnoughEnergy(){return this.active}}))(qa),Nn=(Dt()(an,nn)(qa),Dt()(nn)(qa),Dt()(nn,(t=>class extends t{constructor(t){let{pickupEffects:e=[],dropEffects:r=[],...a}=t;super({...a}),this.pickupEffects=e,this.dropEffects=r,this.entityTypes=this.entityTypes.concat("HAS_PICKUP_EFFECTS")}processPickupEffects(t){this.pickupEffects.forEach((e=>e(t,this)))}processDropEffects(t){this.dropEffects.forEach((e=>e(t,this)))}}))(qa)),Pn=Dt()(an,nn,wn,(t=>class extends t{constructor(t){let{messages:e=["I have nothing to say."],messageType:r,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("SPEAKING"),this.messages=e,this.messageType=r}getAction(t){const e=this.messages.shift();return this.messages.push(e),new er({actor:this,game:t,message:e,messageType:this.messageType,processDelay:0})}}),vn,bn,On,(t=>class extends t{constructor(t){let{...e}=t;super({...e}),this.entityTypes=this.entityTypes.concat("HELPLESS"),this.saved=!1}save(){this.saved=!0,ze.save.play()}destroy(){et([ze.scream_0,ze.scream_1,ze.scream_2]).play(),super.destroy()}}))(qa),Un=Dt()(nn,wn)(qa),Gn=Dt()(nn,wn,En)(qa),In=Dt()(nn,ln,wn)(qa),Mn=(Dt()(nn,ln,wn,(t=>class extends t{constructor(t){let{damagePerTick:e=1,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("TIME_BOMBING"),this.damagePerTick=e,this.addStatusEffect()}createTimeBombStatusEffect(){return new Mr({game:this.game,actor:this,name:"Dying",lifespan:-1,stepInterval:5*It,allowDuplicates:!1,onStep:()=>{this.decreaseDurability(this.damagePerTick)}})}addStatusEffect(){const t=this.createTimeBombStatusEffect();this.game.engine.addStatusEffect(t)}}))(qa),Dt()(nn,Nr,vn,On,wn,An,bn)(qa)),Fn=Dt()(an,nn,(t=>class extends t{constructor(t){let{path:e=!1,direction:r={x:0,y:0},range:a=3,...n}=t;super({...n}),this.entityTypes=this.entityTypes.concat("DIRECTIONAL_PUSHING"),this.path=e,this.direction=r,this.range=a}getAction(t){let e=null,r={x:this.pos.x+this.direction[0],y:this.pos.y+this.direction[1]};return this.passable=!1,e=this.range>0?new gn({targetPos:r,direction:this.direction,game:t,actor:this,energyCost:It,onSuccess:()=>this.range-=1,onAfter:()=>{this.energy<=100&&t.engine.setActorToPrevious()}}):new Ka({game:t,actor:this,energyCost:0}),e}}),wn)(qa),jn=(Dt()(an,nn,mn,wn)(qa),Dt()(an,nn,wn,Za,bn,on,Nr,en,En,Sn,Ya,(t=>class extends t{constructor(t){let{behaviors:e=[new rr],...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("CYCLES_BEHAVIORS"),this.behaviors=e.map((t=>(t.actor=this,t))),this.activeBehaviorIndex=0,this.energy=1/0}getActiveBehavior(){return this.selectedBehavior()}selectedBehavior(){return this.behaviors[this.activeBehaviorIndex]}shouldCycleToNextBehavior(t){return!t.isValid()||!t.shouldRepeat()}getDefaultAction(){return new er({message:"*whistles*",game:this.game,actor:this,interrupt:!0,energyCost:100})}setBehaviorIndex(t){this.activeBehaviorIndex=t}setNextBehaviorIndex(){const t=(this.activeBehaviorIndex+1)%this.behaviors.length;this.setBehaviorIndex(t)}selectNextBehavior(){return this.setNextBehaviorIndex(),this.selectedBehavior()}getAction(){let t=null,e=this.selectedBehavior(),r=this.behaviors.length;for(;this.shouldCycleToNextBehavior(e)&&(e.reset(),e=this.selectNextBehavior(),this.resetLastActionResult(),r-=1,!(r<0)););let a=this.behaviors.length;for(;null===t&&(e.repeated+=1,t=e.getAction(),a-=1,!(a<0)););return t||(t=this.getDefaultAction()),t}}))(qa)),Wn=Dt()(an,nn,mn,wn,sn,Za,bn,En,Sn)(qa),Bn=Dt()(an,nn,(t=>class extends t{constructor(t){let{targetEntity:e=null,getProjectile:r=()=>null,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("RANGED_CHASING"),this.targetEntity=e,this.getProjectile=r}targetInPath(t,e){let r=!1;return t.forEach((t=>{t.x===e.x&&t.y===e.y&&(r=!0)})),r}getAction(t){if(!this.targetEntity)return new er({message:"Where are they?",game:t,actor:this,energyCost:It});let e={x:Math.sign(this.targetEntity.pos.x-this.pos.x),y:Math.sign(this.targetEntity.pos.y-this.pos.y)},r=this.getProjectile({pos:{x:this.pos.x,y:this.pos.y},targetPos:{...this.targetEntity.pos},direction:[e.x,e.y],range:10});r.createPath(t);if(this.targetInPath(r.path,this.targetEntity.pos))return t.canOccupyPosition(r.pos,r)?new _n({targetPos:{...r.pos},entity:r,game:t,actor:this,energyCost:It}):new er({message:"I'll get you with this kunai!",game:t,actor:this,energyCost:It});let a=ut(t,this.targetEntity.pos,this.pos),n=a.length>0?a[0]:this.pos;return new xr({targetPos:n,game:t,actor:this,energyCost:It})}}),wn,Za,bn,En,Sn)(qa),zn=Dt()(an,nn,(t=>class extends t{constructor(t){let{presentingUI:e=!1,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("PRESENTING_UI"),this.presentingUI=e}}),Ya,Cn,(t=>class extends t{constructor(t){let{draggedEntity:e=null,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("DRAGGING"),this.draggedEntity=e}grab(t){const e=this.game.map[it(t)];if(!e)return!1;if(e.entities.length>0){const t=e.entities[0];if(t.entityTypes.includes("DRAGGABLE")&&!this.draggedEntity&&!0===t.draggable)return this.draggedEntity=t,!0}return!1}release(){if(!this.draggedEntity)return!1;const t={...this.draggedEntity};return this.draggedEntity=null,t}drag(t){const e=this.draggedEntity.pos;let r=this.game.map[it(e)];this.game.map[it(e)]={...r,entities:r.entities.filter((t=>t.id!==this.draggedEntity.id))},this.draggedEntity.pos=t,this.game.map[it(t)].entities.push(this.draggedEntity)}move(t){const e={...this.pos};if(this.draggedEntity){const r=super.move(t);return r?(this.drag(e),!0):r}return super.move(t)}}),sn,(t=>class extends t{constructor(t){let{...e}=t;super({...e}),this.entityTypes=this.entityTypes.concat("SIGNING"),this.signHistory=[]}addSign(t){this.signHistory.length>=4&&this.signHistory.shift(),this.signHistory.push(t)}clearSigns(){this.signHistory=[]}}),Nr,on,Za,en,wn,(t=>class extends t{constructor(t){let{cloneLimit:e=1,...r}=t;super({...r}),this.entityTypes=this.entityTypes.concat("CLONING"),this.cloneLimit=e,this.clones=[]}destroy(){this.clones&&this.clones.map((t=>{Ea(t)})),Ea(this)}destroyClone(t){const e=this.clones.findIndex((e=>e.id===t));e>=0&&(this.clones[e].super__destroy(),this.clones.splice(e,1))}createClone(t){if(this.clones.length<this.cloneLimit){let e=(0,Gt.cloneDeep)(this);if(e.name="Clone",e.game=this.game,e.id=Ut()(),e.entityTypes.includes("HAS_KEYMAP")){const r=(0,Gt.find)(t,{attribute:"ignoredKeys"});e.reinitializeKeymap(r?r.value:[])}if(delete e.clones,e.super__destroy=e.destroy,e.destroy=()=>{this.destroyClone(e.id)},t.forEach((t=>{e[t.attribute]=t.value})),this.game.placeActorOnMap(e))return this.game.engine.addActorAsNext(e),this.game.draw(),this.clones.push(e),!0}return!1}}),cn,On,(t=>class extends t{constructor(t){let{upgrade_points:e=0,upgrade_tree:r=[],...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("UPGRADABLE"),this.upgrade_points=e,this.upgrade_tree=r}upgrade(t){if(t.canUpgrade(this)){if(t.activate(this),t.removeOnActivate){const e=this.upgrade_tree.filter((e=>e.name!==t.name));this.upgrade_tree=e}return!0}return!1}}),En,(t=>class extends t{constructor(t){let{availableStatusEffects:e=[],statusEffectRange:r=2,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("CAN_ACTIVATE_STATUS_EFFECTS"),this.statusEffectRange=r,this.statusEffectRangeMax=10,this.availableStatusEffects=e}getAvailableStatusEffects(){return this.availableStatusEffects}addAvailableStatusEffect(t){this.availableStatusEffects.push(t)}getStatusEffectRange(){return this.statusEffectRange}decreaseStatusEffectRange(t){this.statusEffectRange=Math.max(0,this.statusEffectRange-t)}increaseStatusEffectRange(t){this.statusEffectRange=Math.min(this.statusEffectRangeMax,this.statusEffectRange+t)}}),Sn,(t=>class extends t{constructor(t){let{currentGate:e=null,gates:r=[],...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("HAS_INNER_GATES"),this.currentGate=e,this.gates=[{name:"Gate of Opening",damageBuff:1,buffValue:100,durabilityDebuff:1,character:"1"},{name:"Gate of Healing",damageBuff:1,buffValue:100,durabilityDebuff:1,character:"2"},{name:"Gate of Life",damageBuff:1,buffValue:100,durabilityDebuff:1,character:"3"},{name:"Gate of Pain",damageBuff:1,buffValue:100,durabilityDebuff:1,character:"4"},{name:"Gate of Limit",damageBuff:1,buffValue:100,durabilityDebuff:1,character:"5"}]}getCurrentGate(){return this.currentGate}getCurrentGateLevel(){return this.gates.findIndex((t=>this.currentGate.name===t.name))+1}setNextGate(){let t=this.currentGate,e=null;if(t){let r=this.gates.findIndex((e=>t.name===e.name))+1;this.gates.length>r&&(e=this.gates[r],this.currentGate={...e})}else e=this.gates[0],this.currentGate={...e};return e}getNextGate(){let t=this.currentGate,e=null;if(t){let r=this.gates.findIndex((e=>t.name===e.name))+1;e=this.gates.length>r?this.gates[r]:this.gates.at(-1)}else e=this.gates[0];return e||this.currentGate}}))(qa),Hn=Dt()(nn,rn,Za)(qa),Vn=(Dt()(wn,(t=>class extends t{constructor(t){let{damageOnUse:e=1,...r}=t;super({...r}),this.damageOnUse=e,this.entityTypes=this.entityTypes.concat("DETERIORATES_ON_ATTACK")}attack(t){super.attack(t),this.decreaseDurabilityWithoutDefense(this.damageOnUse)}destroy(){var t;this.game.addMessage(`${this.name} breaks`,ee.INFORMATION),null===(t=this.equippedBy)||void 0===t||t.unequip(this),super.destroy()}}))(Hn),Dt()(nn,rn,en,Za,(t=>class extends t{constructor(t){let{shapePattern:e=Zt.point,...r}=t;super({...r}),this.shapePattern=e,this.entityTypes=this.entityTypes.concat("HAS_SHAPE_PATTERN")}getPositionsInShape(t){return St(this.shapePattern,t)}}))(qa)),qn=Dt()(nn,rn,wn)(qa),Kn=Dt()(nn,wn,An)(qa),$n=(Dt()(an,nn,Za,(t=>class extends t{constructor(t){let{path:e=!1,targetPos:r=null,attackDamage:a=1,range:n=3,...o}=t;super({...o}),this.entityTypes=this.entityTypes.concat("DESTRUCTIVE_PROJECTING"),this.path=e,this.targetPos=r,this.attackDamage=a,this.range=n}createPath(t){let e=bt(t,this.targetPos,this.pos,8,this.range);this.path=e}getAction(t){this.path||this.createPath(t);let e=this.path.length>0?this.path[0]:this.pos;return new un({targetPos:e,game:t,actor:this,energyCost:It})}}),wn)(qa),Dt()(an,nn,Za,pn,wn)(qa)),Xn=Dt()(an,nn,Za,pn,wn,An)(qa),Yn=Dt()(an,nn,Za,pn,wn,(t=>class extends t{constructor(t){let{spawnStructure:e=Zt.clover,spawnedEntityClass:r,spawnedEntityOptions:a=null,getSpawnedEntityOptions:n=null,forceSpawn:o=!0,...i}=t;super({...i}),this.entityTypes=this.entityTypes.concat("SPAWNING_WITH_STRUCTURE"),this.spawnStructure=e,this.spawnedEntityClass=r,this.spawnedEntityOptions=a,this.getSpawnedEntityOptions=n,this.forceSpawn=o}createEntitiesToSpawn(){return St(this.spawnStructure,this.getPosition()).map(((t,e)=>{const r=this.spawnedEntityOptions||this.getSpawnedEntityOptions();return new this.spawnedEntityClass({...r,pos:{...t},game:this.game,name:`${r.name} ${e}`})}))}spawnEntities(){this.createEntitiesToSpawn().forEach((t=>{(this.forceSpawn||this.game.canOccupyPosition(t.pos,t))&&this.game.placeActorOnMap(t)&&(t.entityTypes.includes("ACTING")&&this.game.engine.addActor(t),t.direction=this.direction)}))}}))(qa),Zn=(Dt()(an,nn,Za,(t=>class extends t{constructor(t){let{owner_id:e=null,path:r=!1,targetPos:a=null,attackDamage:n=1,range:o=3,...i}=t;super({...i}),this.entityTypes=this.entityTypes.concat("GASEOUS_DESTRUCTIVE_PROJECTING"),this.path=r,this.targetPos=a,this.attackDamage=n,this.range=o,this.owner_id=e}canAttack(t){let e=super.canAttack();return e&&(e=null===this.owner_id||t.owner_id!==this.owner_id),e}createPath(t){let e=bt(t,this.targetPos,this.pos,8,this.range);this.path=e}getAction(t){this.path||this.createPath(t);let e=this.path.length>0?this.path[0]:this.pos;return new yn({targetPos:e,game:t,actor:this,energyCost:It})}}),wn,(t=>class extends t{constructor(t){let{isClone:e=!1,cloneCount:r=0,clonePattern:a=Zt.square,...n}=t;super({...n}),this.entityTypes=this.entityTypes.concat("GASEOUS"),this.isClone=e,this.cloneCount=r,this.clonePattern=(0,Gt.cloneDeep)(a)}getAction(t){let e=this.clonePattern.positions.find((t=>!t.taken));if(!this.isClone&&e){e.taken=!0;let r=(0,Gt.cloneDeepWith)(this,((t,e)=>{switch(e){case"id":case"game":case"engine":case"clones":return null;default:return}}));if(r.game=t,r.id=Ut()(),this.hasOwnProperty("pos")){let t=this.pos;r.pos={x:t.x+e.x,y:t.y+e.y}}r.hasOwnProperty("path")&&(r.path=r.path.map((t=>({x:t.x+e.x,y:t.y+e.y})))),r.isClone=!0,this.cloneCount+=1,t.placeActorOnMap(r),t.engine.addActor(r),t.draw()}return super.getAction(t)}}))(qa),Dt()(an,wn,Xa)(qa),Dt()(an,nn,wn,Za,(t=>class extends t{constructor(t){let{timeToSpread:e=5,spreadCount:r=1,...a}=t;super({...a}),this.entityTypes=this.entityTypes.concat("SPREADING"),this.timeToSpreadMax=e,this.timeToSpread=e,this.spreadCountMax=r,this.spreadCount=r}getAction(t){if(this.spreadCount<=0)return new Ka({game:t,actor:this,energyCost:It,processDelay:0,onAfter:()=>{t.map[it(this.pos)].type="BURNT"}});if(this.timeToSpread<=0){let e=[{x:this.pos.x+0,y:this.pos.y+0},{x:this.pos.x+1,y:this.pos.y+0},{x:this.pos.x+-1,y:this.pos.y+0},{x:this.pos.x+0,y:this.pos.y+1},{x:this.pos.x+0,y:this.pos.y+-1}],r=null,a=100;for(;a>0;){let t=et(e),n=Ee({map:this.game.map,position:t}),o=Boolean(n),i=!1;if(n&&(i=ke({tile:n,tag:"BURNABLE"})),o&&i){r=t;break}a-=1}if(r){let e=new Zn({name:"Pyro",pos:{x:0,y:0},game:t,renderer:{...this.renderer},timeToSpread:this.timeToSpreadMax,spreadCount:this.spreadCountMax,durability:this.durability,attackDamage:this.attackDamage,speed:this.speed});return this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1,new _n({targetPos:r,entity:e,game:t,actor:this,interrupt:!1,energyCost:It,processDelay:0,forcePlacement:!0})}this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1}return this.timeToSpread-=1,new er({message:"burning",game:t,actor:this,processDelay:0})}}))(qa)),Qn=Dt()(an,nn,wn,(t=>class extends t{constructor(t){let{getSpawnedEntity:e,timeToSpread:r=5,spreadCount:a=1,onSpawn:n=()=>null,...o}=t;super({...o}),this.entityTypes=this.entityTypes.concat("SPAWNING"),this.timeToSpreadMax=r,this.timeToSpread=r,this.spreadCountMax=a,this.spreadCount=a,this.getSpawnedEntity=e,this.onSpawn=n}getAction(t){if(this.spreadCount<=0)return new Ka({game:t,actor:this,energyCost:It,processDelay:0});if(this.timeToSpread<=0){let e=[{x:this.pos.x+1,y:this.pos.y+0},{x:this.pos.x+-1,y:this.pos.y+0},{x:this.pos.x+0,y:this.pos.y+1},{x:this.pos.x+0,y:this.pos.y+-1}],r=null,a=100;for(;a>0;){let n=et(e),o=this.game.map[it(n)];if(Boolean(o)&&t.canOccupyPosition(n)){r=n;break}a-=1}if(r)return this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1,this.onSpawn(),new _n({targetPos:r,entity:this.getSpawnedEntity(r),game:t,actor:this,interrupt:!1,energyCost:It,processDelay:0,forcePlacement:!0});this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1}return this.timeToSpread-=1,new er({message:"boom boom",game:t,actor:this,processDelay:0})}}),En)(qa),Jn=Dt()(an,nn,(t=>class extends t{constructor(t){let{pos:e={x:1,y:1},direction:r={x:0,y:0},life:a=1,speed:n=1,type:o=Jt.directional,path:i=null,particleRendererGradients:s=null,particleEasingFunction:c=Tt.linear,particleAnimationTimeStep:l=.9,...u}=t;super({...u}),this.pos=e,this.direction=r,this.life=a,this.maxLife=a,this.speed=n,this.type=o,this.path=i,this.particleRendererGradients=s,this.particleEasingFunction=c,this.particleAnimationTimeStep=l,this.entityTypes=this.entityTypes.concat("PARTICLE"),this.lightPassable=!0}update(t){this.life-=t,this.life>0?(this.updateRenderer(),this.updatePosition(t)):this.destroy()}updatePosition(t){this.pos=this.getNextPos(t)}getNextPos(t){switch(this.type){case Jt.directional:return{x:this.pos.x+this.direction.x*this.speed*t,y:this.pos.y+this.direction.y*this.speed*t};case Jt.path:const e=this.path.shift();return e?{...e}:{...this.pos}}}updateRenderer(){if(null===this.particleRendererGradients)return;const t=Object.keys(this.particleRendererGradients),e=1-this.life/this.maxLife;t.forEach((t=>{const[r,a]=this.particleRendererGradients[t],n=xn(r,a,e);this.renderer[t]=n}))}destroy(){this.game.entityLog.remove(this)}}))(qa),to=(Dt()(an,wn,Xa)(qa),Dt()(nn,rn,Ln)(qa)),eo=Dt()(Ln)(Nn);class ro{constructor(t){let{statusEffects:e=[],actors:r=[],currentActor:a=0,isRunning:n=!1,game:o=null}=t;this.statusEffects=e,this.actors=r,this.currentActor=a,this.isRunning=n,this.game=o}async processV1(){let t=this.actors[this.currentActor];if(t.gainEnergy(t.speed),t.hasEnoughEnergy()){let e=t.getAction(this.game);if(!e)return!1;for(;;){let t=e.perform();if(this.game.draw(),await Q(e.processDelay),!t.success)return!1;if(null===t.alternative)break;e=t.alternative}}return this.currentActor=(this.currentActor+1)%this.actors.length,!0}async processV2(){let t=this.actors[this.currentActor];if(null===this.game.getFirstPlayer())return!1;let e=!0,r=0;for(;e;){if(!t)return!1;if(!t.active)break;if(this.processStatusEffects(r),t.skipTurn)break;if(t.hasEnoughEnergy()){let a=t.getAction(this.game);if(!a)return!1;for(;;){let e={success:!1,alternative:null};if(a.canPayRequiredResources()&&(await a.onBefore(),e=await a.perform(),t.lastActionResult=e,e.success?(await a.onSuccess(),a.payRequiredResources(),r+=a.getEnergyCost()):await a.onFailure(),await a.onAfter()),await this.processActionFX(a,e.success)||(this.shouldAutoRun()?await Q(25):await Q(a.processDelay),this.game.draw()),!t.active)break;if(null===e.alternative)break;a=e.alternative}if(a.interrupt){e=!1;break}}else t.gainEnergy(t.speed),e=!1}return this.actors=this.actors.filter((t=>t.active)),this.currentActor+=1,this.currentActor>=this.actors.length&&(this.currentActor=0),!0}async processV3(){let t=this.actors[this.currentActor];if(!t)return!1;let e=0;if(t.hasEnoughEnergy()){let r=t.getAction(this.game);if(!r)return!1;for(e+=r.energyCost;;){let t=await r.perform();if(await this.processActionFX(r,t.success)||(await Q(r.processDelay),this.game.draw()),!t.success)return!1;if(null===t.alternative)break;r=t.alternative}this.processStatusEffects(e)}else t.gainEnergy(t.speed);return this.currentActor=(this.currentActor+1)%this.actors.length,0===this.currentActor&&this.sortActorsByEnergy(),!0}async start(){for(this.isRunning=!0;this.isRunning;)this.isRunning=await this.processV2();let t=this.actors[this.currentActor];if(!t)return!1;this.setVisibleKeymap(t),this.game.updateMode(),await this.game.updateReact(this.game)}stop(){this.isRunning=!1}setVisibleKeymap(t){if(t.entityTypes.includes("HAS_KEYMAP")){const e=t.getKeymap();e&&(this.game.visibleKeymap=e)}}sortActorsByEnergy(){this.actors=this.actors.sort(((t,e)=>e.energy-t.energy))}shouldAutoRun(){return!this.actors.filter((t=>t.entityTypes.includes("PLAYING"))).length}addStatusEffect(t){return!(!t.allowDuplicates&&this.statusEffects.filter((e=>e.actor.id===t.actor.id&&e.name===t.name)).length>0)&&(t.start(),this.statusEffects.push(t),!0)}removeStatusEffectById(t){this.statusEffects=this.statusEffects.filter((e=>e.id!==t||(e.stop(),!1)))}removeStatusEffectByActorId(t){this.statusEffects=this.statusEffects.filter((e=>e.actor.id!==t||(e.stop(),!1)))}removeDeadStatusEffects(){this.statusEffects=this.statusEffects.filter((t=>!(t.lifespan>=0&&t.timeToLive<=0)||(t.stop(),!1)))}getStatusEffectsByActorId(t){return this.statusEffects.filter((e=>e.actor.id===t))}actorHasStatusEffect(t,e){return this.getStatusEffectsByActorId(t).filter((t=>t.name===e)).length>0}processStatusEffects(t){this.statusEffects.filter((t=>!t.processOnlyOnActorTurn||t.actor.id===this.getCurrentActor().id)).forEach((e=>{e.timeSinceLastStep+=t,e.timeToLive-=t,e.timeSinceLastStep>=e.stepInterval&&(e.step(t),e.timeSinceLastStep=0)})),this.removeDeadStatusEffects()}currentActorIsPlayer(){const t=this.actors[this.currentActor];return!!t&&t.entityTypes.includes("PLAYING")}async processActionFX(t,e){if(!e){const e=new Jn({game:this.game,name:"particle",passable:!0,pos:{...t.actor.pos},renderer:Qt.fail.renderer});return this.game.placeActorOnMap(e),this.game.draw(),await Q(25),this.game.removeActorFromMap(e),e.update(1),this.game.draw(),t.removeDeadParticles(),!0}if(t.particles.length){let e=t.particles[0].particleAnimationTimeStep;const r=t.particles[0].particleEasingFunction;for(;t.particles.length>0;)t.particles.forEach((t=>{this.game.placeActorOnMap(t)})),this.game.draw(),await Q(10),t.particles.forEach((t=>{this.game.removeActorFromMap(t),t.update(1)})),t.removeDeadParticles(),this.game.draw(),e=r(e);return!0}return!1}addActor(t){this.actors.push(t)}addActorAsPrevious(t){this.actors.splice(this.currentActor,0,t)}addActorAsNext(t){this.actors.splice(this.currentActor+1,0,t)}setActorToPrevious(t){this.currentActor-=1,this.currentActor<=-1&&(this.currentActor=this.actors.length-1)}setActorToNext(t){this.currentActor=(this.currentActor+1)%this.actors.length}getCurrentActor(){return this.actors[this.currentActor]}}class ao extends ro{async process(){let t=this.actors[this.currentActor],e=!0;for(;e;)if(t.hasEnoughEnergy()){let e=t.getAction(this.game);if(!e)return!1;for(;;){this.game.draw();let t=await e.perform();if(await Q(e.processDelay),!t.success)return!1;if(null===t.alternative)break;e=t.alternative}}else e=!1;return this.currentActor+=1,!(this.currentActor+1>=this.actors.length)||(this.currentActor=0,this.actors.forEach((t=>t.gainEnergy(t.speed))),!1)}async start(){for(this.isRunning=!0;this.isRunning;)this.isRunning=await this.process();let t=this.actors[this.currentActor];this.setVisibleKeymap(t),this.game.mode.update(),await this.game.updateReact(this.game)}}class no extends e.Component{render(){const t=Gt.get(this.props.game,"mode.infoHeader",null);Gt.get(this.props.game,"mode.infoBlocks",{});return(0,La.jsxs)("div",{className:"Instructions UI",children:[t&&(0,La.jsx)("p",{className:"flow-text",children:t}),(0,La.jsxs)("div",{className:"flow-text",children:[(0,La.jsx)("div",{className:"Instructions__block",onClick:()=>window.location.reload(),children:(0,La.jsx)("button",{style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main},className:"btn btn-main",children:"Restart"})}),(0,La.jsx)("div",{className:"Instructions__block",onClick:()=>this.props.toggleSpriteMode(),children:(0,La.jsx)("button",{style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main},className:"btn btn-main",children:this.props.spriteMode?"ASCII mode":"Sprite mode"})}),(0,La.jsx)("div",{className:"Instructions__block",children:(0,La.jsx)("button",{style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main},"data-target":"jacinto_help",className:"btn btn-main modal-trigger",children:"Help"})})]})]})}}const oo=no;const io=function(t){let e=t.color;return e||(e="grey"),(0,La.jsx)("button",{onClick:t.onClick,className:`Button btn ${e}`,children:t.children})};class so extends e.Component{render(){let t=[{label:"Wave",value:`Current: ${this.props.game.mode.data.level}, Highest: ${this.props.game.mode.data.highestLevel}`}];return t=t.concat([...this.props.game.engine.actors.map(((t,e)=>{let r={label:t.name,value:`HP: ${t.durability}, En/Sp: ${t.energy}/${t.speed}`};return e===this.props.game.engine.currentActor&&(r.color="red"),r}))]),(0,La.jsx)("div",{className:"Information UI",children:t&&t.map(((t,e)=>(0,La.jsx)(io,{color:t.color,onClick:()=>null,children:`${t.label}: ${t.value}`},e)))})}}const co=so;const lo=function(t){let{title:e="Effect",text:r="",children:a}=t;return(0,La.jsxs)("div",{className:"Tooltip",children:[a,(0,La.jsxs)("div",{className:"top",children:[(0,La.jsx)("strong",{children:e}),""!=r&&(0,La.jsxs)(La.Fragment,{children:[(0,La.jsx)("hr",{}),(0,La.jsx)("p",{children:r})]})]})]})};function uo(t){let{resource:e,superScript:r,canPay:a}=t;e.renderer.sprite?e.renderer.sprite:e.renderer.character;return(0,La.jsx)("div",{className:"ResourceBlock",style:{backgroundColor:a?e.renderer.background:"#616161",color:a?e.renderer.color:"#bdbdbd",borderColor:a?e.renderer.color:"#bdbdbd",fontFamily:"scroll-o-script",width:r?"auto":20},children:r})}const ho=t=>{let{keymap:e,game:r}=t;return(0,La.jsx)("div",{className:"Jacinto__ActionMenu",children:(0,La.jsx)("div",{className:"Jacinto__ActionMenu__Actions",children:e&&Object.entries(e).map(((t,e)=>{let[a,n]=t;const o=n(),i=Gt.get(o,"hidden",!1),s=Gt.get(o,"renderer",null),c=o.listPayableResources();if(!i)return(0,La.jsxs)("div",{className:"Jacinto__ActionMenu__Actions__item",onClick:()=>{o.setAsNextAction(),r.engine.isRunning||r.engine.start(),r.refocus()},children:[(0,La.jsx)("div",{className:"Jacinto__ActionMenu__Actions__item__label",children:a}),(0,La.jsx)("div",{className:"Jacinto__ActionMenu__Actions__item__content",style:s&&{backgroundColor:s.background,color:s.color,borderColor:s.color},children:o.label}),(0,La.jsx)("div",{className:"Jacinto__ActionMenu__Actions__item__resources",children:c.map(((t,e)=>{const r=t.getResourceCostDisplay();return r>0&&(0,La.jsx)(uo,{superScript:r,resource:t,canPay:t.canPay},`${e}-${t.name}-resource-block`)}))})]},`${e}-label`)}))})})};e.Component;function po(t){let{actor:e}=t;return(0,La.jsx)("div",{className:"Portrait",style:{backgroundColor:e.renderer.background,color:e.renderer.color,borderColor:e.renderer.color},children:e.renderer.sprite||e.renderer.character})}function fo(t){let{effect:e}=t;return(0,La.jsx)("div",{className:"StatusEffects__effect",style:{backgroundColor:e.renderer.background,color:e.renderer.color,borderColor:e.renderer.color},children:e.renderer.sprite?e.renderer.sprite:e.renderer.character})}function go(t){let{actor:e}=t;return(0,La.jsx)("div",{className:"StatusEffects",children:e.game.engine.getStatusEffectsByActorId(e.id).map(((t,e)=>(0,La.jsx)(lo,{title:t.name,text:t.description,children:(0,La.jsx)(fo,{effect:t})},e)))})}function yo(t){let{actor:e}=t;return(0,La.jsx)("div",{className:"NamePlate",children:e.name})}function mo(t){let{actor:e,label:r,colorFilled:a="red",colorEmpty:n="gray",attributePathMax:o,attributePath:i,attributeValueMax:s,attributeValue:c,unit:l}=t;const u=s||Gt.get(e,o,0)/l,h=c||Gt.get(e,i,0)/l;return(0,La.jsxs)("div",{className:"ProgressBar",children:[r&&(0,La.jsx)("div",{children:(0,La.jsx)("span",{className:"ProgressBar__label",children:r})}),(0,La.jsx)("div",{children:(0,La.jsx)("div",{className:"ProgressBar__blips",children:Array(u).fill(!0).map(((t,e)=>(0,La.jsx)("span",{className:"ProgressBar__blips__blip",style:{backgroundColor:h>e?a:n}},e)))})})]})}const _o=function(t){let{actor:e,game:r}=t;return(0,La.jsxs)("div",{className:"CharacterCard",children:[(0,La.jsxs)("div",{children:[(0,La.jsx)(yo,{actor:e}),(0,La.jsx)(po,{actor:e}),(0,La.jsx)(mo,{label:"Action Points",attributePath:"energy",attributePathMax:"speed",colorFilled:"#ff9926",unit:100,actor:e}),(0,La.jsx)(mo,{label:"Health Points",attributePath:"durability",attributePathMax:"durabilityMax",colorFilled:"#dc322f",unit:1,actor:e}),(0,La.jsx)(go,{actor:e})]}),(0,La.jsx)("div",{children:(0,La.jsx)(ho,{keymap:e.getKeymap(),game:r})})]})},vo=t=>{let{game:e}=t;const r=e.engine.actors.filter((t=>t.entityTypes.includes("PRESENTING_UI"))).filter((t=>t.presentingUI));return(0,La.jsx)("div",{className:"PlayerInformation Information UI",children:(0,La.jsx)("div",{className:"CharacterCard_Container",children:r.map(((t,r)=>(0,La.jsx)(_o,{actor:t,game:e},r)))})})};e.Component;function bo(t){return(0,La.jsx)("div",{className:"Message",style:{color:t.color,backgroundColor:t.backgroundColor,borderColor:t.color},children:t.children})}class wo extends e.Component{render(){return(0,La.jsxs)("div",{className:"Messages UI",children:[(0,La.jsx)("div",{children:"Messages"}),(0,La.jsx)("div",{style:{height:264,overflowY:"scroll",scrollbarWidth:"none"},children:this.props.messages&&this.props.messages.map(((t,e)=>(0,La.jsx)(bo,{color:t.type.color,backgroundColor:t.type.backgroundColor,children:`${t.text}`},e)))})]})}}const xo=wo;const Oo=function(t){return(0,La.jsx)("div",{children:Gt.map(Gt.get(t.game,"mode.infoBlocks",{}),((t,e)=>(0,La.jsx)("div",{className:"Instructions__block",style:{color:Xc.theme.accent,backgroundColor:Xc.theme.main},children:t.text},e)))})},Ro=t=>{let{game:e}=t;return(0,La.jsx)("div",{className:"UI",style:{marginBottom:20},children:e.entityLog.getAllUniqueEntitiesInFov().map(((t,e)=>(0,La.jsx)(Ao,{entity:t},e)))})},Ao=t=>{let{entity:e}=t;return(0,La.jsxs)("div",{children:[(0,La.jsx)(Eo,{renderer:e.renderer}),(0,La.jsx)(So,{entity:e})]})},Co=t=>{let{game:e,lookedAt:r=null}=t;return null===r&&(r=e.entityLog.getLookedAt()),r.length<=0?null:(0,La.jsx)("div",{style:{textAlign:"left",zIndex:1,maxWidth:"60%"},children:r.map(((t,e)=>(0,La.jsxs)("div",{style:{marginBottom:10},children:[(0,La.jsx)(Eo,{renderer:t.renderer}),(0,La.jsx)(So,{entity:t}),(0,La.jsxs)("div",{style:{marginLeft:20},children:[(0,La.jsx)(To,{entity:t}),(0,La.jsx)(Do,{actor:t})]})]},e)))})},ko=t=>{let{game:e,lookedAt:r=null}=t;return null===r&&(r=e.entityLog.getLookedAt()),r.length<=0?null:(0,La.jsx)("div",{style:{textAlign:"left",zIndex:1},children:r.map(((t,e)=>(0,La.jsxs)("span",{style:{marginBottom:10,display:"inline-block"},children:[(0,La.jsx)(Eo,{renderer:t.renderer}),(0,La.jsx)(So,{entity:t}),(0,La.jsxs)("span",{style:{marginLeft:20},children:[(0,La.jsx)(To,{entity:t}),(0,La.jsx)(Do,{actor:t})]})]},e)))})},Eo=t=>{let{renderer:e}=t;return(0,La.jsx)("span",{style:{color:e.color,backgroundColor:e.background,borderRadius:2,padding:2,marginRight:5},children:e.sprite||e.character})},So=t=>{let{entity:e}=t;return(0,La.jsx)("span",{style:{color:e.renderer.color},children:e.name})},To=t=>{let{entity:e}=t;return(0,La.jsx)("div",{children:e.getFullDescription()})};function Lo(t){let{effect:e}=t;return(0,La.jsxs)("div",{children:[(0,La.jsx)(Eo,{renderer:e.renderer}),(0,La.jsx)("span",{children:e.name}),(0,La.jsx)("div",{style:{marginLeft:20},children:e.description})]})}function Do(t){let{actor:e}=t;return(0,La.jsx)("div",{className:"StatusEffects",children:e.game.engine.getStatusEffectsByActorId(e.id).map(((t,e)=>(0,La.jsx)(Lo,{effect:t},e)))})}var No={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Po=e.createContext&&e.createContext(No),Uo=function(){return Uo=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Uo.apply(this,arguments)},Go=function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]])}return r};function Io(t){return t&&t.map((function(t,r){return e.createElement(t.tag,Uo({key:r},t.attr),Io(t.child))}))}function Mo(t){return function(r){return e.createElement(Fo,Uo({attr:Uo({},t.attr)},r),Io(t.child))}}function Fo(t){var r=function(r){var a,n=t.attr,o=t.size,i=t.title,s=Go(t,["attr","size","title"]),c=o||r.size||"1em";return r.className&&(a=r.className),t.className&&(a=(a?a+" ":"")+t.className),e.createElement("svg",Uo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:a,style:Uo(Uo({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&e.createElement("title",null,i),t.children)};return void 0!==Po?e.createElement(Po.Consumer,null,(function(t){return r(t)})):r(No)}function jo(t){return Mo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M21.97 18.22C33.98 35.186 46.79 52.53 60.25 70.187l-20.5 41.156L77.5 92.53c12.847 16.405 26.235 33.033 40.094 49.814L94.03 189.656l44.564-22.22c15.17 17.934 30.83 36.032 46.906 54.158l-28.47 57.156 55.157-27.47c16.596 18.27 33.554 36.568 50.813 54.782l-27.28 54.75 53.968-26.875c21.59 22.316 43.56 44.45 65.75 66.282-38.372 1.44-74.363-2.4-107.125-10.72 65.27 60.235 151.623 99.225 246.593 103.688-4.313-95.196-43.473-181.33-103.687-246.594 7.904 31.405 11.808 65.622 10.874 102.125-5.587-5.622-11.185-11.248-16.844-16.908-15.622-15.62-31.41-31.093-47.28-46.406l26.655-53.5-54.313 27.063c-18.653-17.625-37.395-34.933-56.125-51.876L279.5 156.28l-52.75 26.282c-18.68-16.527-37.304-32.64-55.78-48.218l21.436-43.063-45.75 22.782C129.6 100.008 112.72 86.45 96.062 73.44l18.282-36.688-40 19.938c-17.8-13.548-35.308-26.4-52.375-38.47z"}}]})(t)}function Wo(t){return Mo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M162.322 17.943l-28.316 105.682 18.053 4.838 4.194-15.654 169.764 45.487 11.28-42.088-169.872-45.105 4.838-18.052 169.87 45.103 4.038-15.066L176.404 37.6l3.97-14.82-18.052-4.837zM361.336 98.7l-14.453 53.943c53.99 13.97 102.986 20.59 150.95 10.964-37.1-32.648-82.453-50.034-136.497-64.906zM128.676 145l-41.82 101.104 17.27 7.142 6.216-15.023L272.75 305.4l16.36-39.556-162.43-67.12 7.142-17.27 162.432 67.118 6.254-15.12-162.406-67.18 5.843-14.13-17.27-7.142zm186.818 105.95l-21.344 51.605c51.717 20.872 99.435 33.81 148.24 30.502-32.538-37.196-75.244-60.332-126.896-82.106zM77.107 266.067l-54.705 94.752 16.186 9.346 8.133-14.086 152.23 87.893 20.472-35.452L66.988 320.97l9.344-16.183 152.434 87.545 9.117-15.79L85.65 288.647l7.643-13.238-16.186-9.344zM248.46 395.594l-27.92 48.363c48.526 27.46 94.13 46.532 142.942 49.647-27.38-41.132-66.678-69.662-115.02-98.01z"}}]})(t)}function Bo(t){return Mo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M53.813 48.094c69.06 40.8 122.263 96.67 124.937 153.312-49.83.664-72.508-14.408-101.97-51 17.725 93.07 55.393 143.855 100.72 156.563-22.006 26.968-60.902 30.456-97.625 25.342 35.897 33.924 95.12 70.913 149.094 84.75-17.05 15.34-38.742 24.516-68 29.157 269.316 114.287 386.556 10.27 295.217-277.376-12.035 25.526-29.11 41.112-60.343 57.5-7.906-55.298-31.41-152.12-95.656-171.75 24.362 41.713 21.98 99.445-4 138.937C268.363 122.72 161.85 54.283 53.813 48.095zm308.28 236.656c26.127-.13 52.073 11.014 70.157 32.72 32.15 38.584 26.96 95.63-11.625 127.78-38.586 32.15-95.632 26.96-127.78-11.625-32.15-38.586-26.962-95.632 11.624-127.78 16.88-14.067 37.303-20.994 57.624-21.095z"}}]})(t)}function zo(t){return Mo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M234.875 18.78c-26.087 2.367-51.557 8.56-74.875 18.782 15.37 32.763 14.222 66.706-6.72 82.407-20.835 15.617-54.055 7.965-81.124-15.69-16.246 19.452-29.336 41.36-38.875 65.626 33.83 12.333 56.635 37.665 52.94 63.5-3.698 25.835-32.697 43.74-68.626 46.094 2.338 25.796 8.91 50.778 18.937 73.875 17.81-8.182 35.793-11.09 51.095-8.938 13.032 1.87 23.927 7.015 31.156 16.657 15.817 21.097 7.603 54.713-16.78 81.97 19.516 16.35 42.216 29.444 66.594 39.03 12.33-33.828 37.655-56.634 63.5-52.938 25.844 3.697 43.74 32.696 46.094 68.625 26.087-2.365 51.557-8.555 74.875-18.78-15.766-32.997-14.26-67.588 6.843-83.406 9.64-7.23 22.568-9.022 35.594-7.125 15.112 2.16 31.19 10.25 45.563 22.78 16.088-19.345 29.4-41.51 38.875-65.594-33.83-12.332-56.635-37.653-52.938-63.5 3.697-25.846 32.665-43.772 68.594-46.125-2.36-25.944-8.774-50.663-18.906-73.874-32.612 15.117-66.66 13.145-82.282-7.687-15.696-20.944-7.252-53.86 16.688-81-19.52-16.352-42.248-29.447-66.625-39.032-12.332 33.828-37.657 56.66-63.5 52.968-25.846-3.693-43.744-32.696-46.095-68.625zm21.656 95.126c79.626 0 144.376 64.752 144.376 144.375 0 79.626-64.75 144.376-144.375 144.376-79.624 0-144.374-64.75-144.374-144.375 0-79.624 64.75-144.374 144.375-144.374zm0 18.688c-69.524 0-125.686 56.162-125.686 125.687 0 69.526 56.162 125.69 125.687 125.69 69.526 0 125.69-56.164 125.69-125.69 0-69.522-56.164-125.686-125.69-125.686zm.033 15.125c61.094 0 110.625 49.53 110.625 110.624 0 61.095-49.53 110.625-110.625 110.625s-110.625-49.53-110.625-110.626c0-61.095 49.53-110.625 110.625-110.625z"}}]})(t)}function Ho(t){return Mo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M247 32v23.21C143.25 59.8 59.798 143.25 55.21 247H32v18h23.21C59.8 368.75 143.25 452.202 247 456.79V480h18v-23.21C368.75 452.2 452.202 368.75 456.79 265H480v-18h-23.21C452.2 143.25 368.75 59.798 265 55.21V32h-18zm0 41.223V128h18V73.223C359 77.76 434.24 153 438.777 247H384v18h54.777C434.24 359 359 434.24 265 438.777V384h-18v54.777C153 434.24 77.76 359 73.223 265H128v-18H73.223C77.76 153 153 77.76 247 73.223zM247 224v23h-23v18h23v23h18v-23h23v-18h-23v-23h-18z"}}]})(t)}function Vo(t){return Mo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M316.74 14.79l-72.326 88.94-73.234-50.673 67.095 115.537c7.713-2.512 15.938-3.887 24.49-3.887 15.338 0 29.648 4.384 41.768 11.947l81.64-88.6-62.187 17.454-7.246-90.717zM137.47 32.224l28.73 136.144L41.04 121.13l98.753 106.235-61.215 48.266 105.524-24.304c-.24-2.5-.366-5.03-.366-7.592 0-28.415 15.004-53.317 37.514-67.244L137.47 32.223zm318.692 36.185l-35.71 10.024-101.307 109.945c14 14.258 22.644 33.795 22.644 55.357 0 .708-.01 1.412-.028 2.116l81.088-4.762-41.465-23.08 74.777-149.6zM232.744 229.533c-13.443 0-24.342 10.897-24.342 24.342 0 13.445 10.898 24.344 24.342 24.344 13.445 0 24.344-10.9 24.344-24.345 0-13.445-10.9-24.342-24.344-24.342zm59.27 0c-13.443 0-24.342 10.897-24.342 24.342 0 13.445 10.897 24.344 24.342 24.344 13.444 0 24.343-10.9 24.343-24.345 0-13.445-10.9-24.342-24.343-24.342zm161.26 28.488l-114.327 6.714c-2.23 8.113-5.716 15.703-10.246 22.547l72.39 92.962 69.146 30.496-94.18-119.16 120.217-9.623-43-23.934zM188.085 269.59l-143.87 33.137-25.673 20.242 139.123 19.654-68.54 112.775 124.546-52.27 10.193-37.738h19.358l-10.313 38.18 42.035 88.947 24.178-81.15-18.803-45.977h20.192l17.517 42.834L389.51 462.6l-11.94-82.14-61.238-78.642c-2.81 2.593-5.814 4.974-8.977 7.14v41.233h-18.69v-31.78c-5.076 1.763-10.395 3.004-15.884 3.7v28.08h-18.687v-27.913c-6.25-.682-12.28-2.094-18.004-4.148v32.06h-18.688v-41.762c-13.457-9.46-23.836-23.003-29.318-38.84zm73.94 4.75l-16.72 27.87h33.442l-16.72-27.87z"}}]})(t)}class qo extends se{constructor(t){let{item:e,...r}=t;super({...r}),this.item=e}perform(){let t=!1;if(this.item.equipmentType){let e=this.actor.getItemInSlot(this.item.equipmentType);e&&(this.actor.addToContainer(e),this.actor.unequip(e)),this.actor.removeFromContainer(this.item),this.actor.equip(this.item.equipmentType,this.item),this.game.addMessage(`${this.actor.name} equips ${this.item.name}.`,ee.ACTION),t=!0}return{success:t,alternative:null}}}function Ko(t){let{stat:e}=t;const{value:r,name:a,abbreviatedName:n}=e,o={color:e.renderer.background,marginRight:10};return(0,La.jsxs)("div",{className:"StatBlock--simple",children:[(0,La.jsx)("span",{style:o,children:n}),(0,La.jsx)("span",{children:r})]})}const $o=t=>{let{game:e,player:r,data:a}=t;const{item:n,equipped:o,amount:i,equipable:s}=a;let c=e.refocus();if(s){const t=new qo({item:n,game:e,energyCost:0,actor:r,label:`Equip ${n.name}`});c=()=>{e.refocus(),t.immediatelyExecuteAction()}}let l=!1;return n.hasOwnProperty("magazine")&&n.magazine<=0&&(l=!0),(0,La.jsx)("div",{className:`SimpleEquipmentCard EquipmentCard ${o?"EquipmentCard--selected":""} ${s?"EquipmentCard--equipable":""}`,onClick:c,children:(0,La.jsx)("div",{className:"EquipmentCard__item",children:(0,La.jsxs)("div",{className:"EquipmentCard__item__label--simple",children:[(0,La.jsxs)("span",{className:"EquipmentCard__item__label__amount",children:[s&&"equip"," ",i||1,"\xa0"]}),(0,La.jsxs)("span",{children:[n.name,"\xa0"]}),(0,La.jsx)("span",{style:{color:"#6d7886"},children:l&&"(reload)"})]})})})},Xo=t=>{const{game:e,player:r,data:a}=t,{item:n,equipped:o,amount:i,equipable:s}=a;let c=!1,l=()=>e.refocus();if(s){const t=new qo({item:n,game:e,energyCost:0,actor:r,label:`Equip ${n.name}`});l=()=>{e.refocus(),t.immediatelyExecuteAction()}}let u=[];return i&&u.push({name:"amount left",value:i,renderer:qe.amount}),n.hasOwnProperty("attackRange")&&u.push({name:"attack range",abbreviatedName:"range",value:n.attackRange,renderer:qe.attackRange,getIcon:()=>(0,La.jsx)(jo,{})}),n.hasOwnProperty("magazine")&&(u.push({name:"shots before reload",abbreviatedName:"ammo",value:n.magazine,renderer:qe.magazine,getIcon:()=>(0,La.jsx)(Wo,{})}),n.magazine<=0&&(c=!0)),n.hasOwnProperty("baseRangedAccuracy")&&u.push({name:"base accuracy",abbreviatedName:"ranged chance",value:`${Math.round(100*n.baseRangedAccuracy)}%`,renderer:qe.baseRangedAccuracy,getIcon:()=>(0,La.jsx)(Ho,{})}),n.hasOwnProperty("baseRangedDamage")&&u.push({name:"base damage",abbreviatedName:"ranged dmg",value:n.baseRangedDamage,renderer:qe.baseRangedDamage,getIcon:()=>(0,La.jsx)(Bo,{})}),n.hasOwnProperty("attackDamage")&&u.push({name:"base melee damage",abbreviatedName:"melee dmg",value:n.attackDamage+r.attackDamage,renderer:qe.meleeDamage}),(0,La.jsxs)("div",{className:"EquipmentCard "+(o?"EquipmentCard--selected":""),onClick:l,children:[c&&(0,La.jsx)("div",{className:"EquipmentCard__reload_overlay",children:(0,La.jsx)("div",{className:"EquipmentCard__reload_overlay__text",children:"Reload"})}),(0,La.jsxs)("div",{className:"EquipmentCard__item",children:[(0,La.jsx)("div",{className:"EquipmentCard__item__content",style:n.renderer&&{backgroundColor:n.renderer.background,color:n.renderer.color,borderColor:n.renderer.color},children:n.renderer.sprite?n.renderer.sprite:n.renderer.character}),(0,La.jsx)("div",{className:"EquipmentCard__item__label",children:n.name})]}),(0,La.jsx)("div",{className:"EquipmentCard__item__stats",children:u.map(((t,e)=>(0,La.jsx)(Ko,{stat:t},`${e}-${t.name}-resource-block`)))})]})};class Yo extends e.Component{render(){if(!this.props.player)return null;const t=this.props.player,e=this.props.game;let r=[];return t.equipment.forEach((t=>{t.item&&r.push({item:t.item,equipped:!0})})),t.container.forEach((t=>{if(t.items.length){const e=t.items[0],a=e.entityTypes.includes("EQUIPABLE");r.push({item:e,amount:t.items.length,equipable:a,equipped:!1})}})),r.sort(((t,e)=>Number(e.equipable)-Number(t.equipable))),(0,La.jsx)("div",{className:"Equipment UI",children:(0,La.jsxs)("div",{children:[(0,La.jsx)("div",{children:"Equipment"}),(0,La.jsx)("div",{children:r.map(((r,a)=>r.equipped?(0,La.jsx)(Xo,{game:e,player:t,data:r},a):(0,La.jsx)($o,{game:e,player:t,data:r},a)))})]})})}}const Zo=Yo;class Qo extends e.Component{constructor(t){super(t);let r=new ro({}),a=new Ba({engine:r,getSelectedCharacter:()=>this.props.selectedCharacter.initialize(r),mode:this.props.selectedMode.class,meta:this.props.meta});this.state={game:a,activeTab:0,spriteMode:a.spriteMode},this.presserRef=e.createRef()}async componentDidMount(){this.state.game.initialize(this.presserRef,document),this.state.game.setActiveScreen=t=>this.props.setActiveScreen(t),this.state.game.backToTitle=()=>this.props.setActiveScreen(i),this.state.game.toLose=()=>{this.props.setActiveScreen(c)},this.state.game.toWin=()=>{this.props.setActiveScreen(l)},this.state.game.refocus=()=>this.refocus(),this.state.game.updateReact=t=>{this.setState({game:t})},this.state.game.engine.start()}refocus(){this.presserRef&&this.presserRef.current.focus()}toggleSpriteMode(){this.state.game.spriteMode=!this.state.game.spriteMode,this.state.game.draw(),this.refocus(),this.setState({spriteMode:this.state.game.spriteMode})}render(){return(0,La.jsx)("div",{className:"Level",children:(0,La.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,La.jsx)("div",{style:{flex:2},children:(0,La.jsx)(vo,{game:this.state.game})}),(0,La.jsxs)("div",{style:{flex:5},children:[(0,La.jsx)("div",{className:"game_display_container",children:Va(this.presserRef,za,this.state.game.engine)}),(0,La.jsx)(Co,{game:this.state.game}),(0,La.jsx)(Oo,{game:this.state.game}),(0,La.jsx)(oo,{game:this.state.game,spriteMode:this.state.game.spriteMode,setActiveScreen:this.props.setActiveScreen,toggleSpriteMode:this.toggleSpriteMode.bind(this)}),(0,La.jsx)(co,{game:this.state.game})]}),(0,La.jsxs)("div",{style:{flex:2,paddingRight:16},children:[(0,La.jsx)(xo,{messages:this.state.game.messages.slice(-5).reverse()}),(0,La.jsx)(Ro,{game:this.state.game}),(0,La.jsx)(Zo,{game:this.state.game,player:this.state.game.getFirstPlayer()})]})]})})}}const Jo=Qo;class ti extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:Xc.theme.main,backgroundImage:`url("${Xc.coverImage}")`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,La.jsx)("button",{style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main},className:"CharacterSelect__button btn btn-main",onClick:()=>{this.props.setActiveScreen(h)},children:"Play"})})})}}const ei=ti,ri=t=>(0,La.jsx)("div",{className:"CharacterSelect",children:t.characters.map(((e,r)=>{let a="";return t.selectedCharacter&&(a=t.selectedCharacter.name===e.name?"red":""),(0,La.jsxs)("button",{style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main},className:"CharacterSelect__button btn btn-main",onClick:()=>{t.setSelectedCharacter(e),t.setActiveScreen(s)},children:["Play as ",e.name]},r)}))});class ai extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:Xc.theme.main,backgroundImage:`url("${Xc.coverImage}")`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,La.jsx)(ri,{characters:this.props.characters,selectedCharacter:this.props.selectedCharacter,setSelectedCharacter:this.props.setSelectedCharacter,setActiveScreen:this.props.setActiveScreen})})})}}const ni=ai;class oi extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:Xc.theme.main,backgroundImage:`url("${Xc.coverImage}")`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,La.jsx)(ri,{characters:this.props.characters,selectedCharacter:this.props.selectedCharacter,setSelectedCharacter:this.props.setSelectedCharacter,setActiveScreen:this.props.setActiveScreen})})})}}const ii=oi;class si extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsxs)("div",{className:"Title__content",style:{width:"100vw",height:"100vh",backgroundColor:"#07111Dff"},children:[(0,La.jsx)("h2",{className:"Title__header",children:(0,La.jsx)(zo,{})}),(0,La.jsx)(ri,{characters:this.props.characters,selectedCharacter:this.props.selectedCharacter,setSelectedCharacter:this.props.setSelectedCharacter,setActiveScreen:this.props.setActiveScreen}),(0,La.jsx)("h2",{className:"Title__header",children:(0,La.jsx)(Vo,{})})]})})}}const ci=si,li=t=>(0,La.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:Xc.theme.main,backgroundImage:`url("${Xc.coverImage}")`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:t.modes.map(((e,r)=>{let a="";return t.selectedMode&&(a=t.selectedMode.name===e.name?"red":""),(0,La.jsx)("button",{style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main},className:"CharacterSelect__button btn btn-main",onClick:()=>{t.setSelectedMode(e),t.setActiveScreen(u)},children:e.name},r)}))});class ui extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:Xc.theme.main,backgroundImage:`url("${Xc.coverImage}")`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,La.jsx)(li,{modes:this.props.modes,selectedMode:this.props.selectedMode,setSelectedMode:this.props.setSelectedMode,setActiveScreen:this.props.setActiveScreen})})})}}const hi=ui,di=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={name:(null===t||void 0===t?void 0:t.name)||"\u30b2\u30fc\u30e0 (Gemu)",coverImage:(null===t||void 0===t?void 0:t.coverImage)||"",icon:(null===t||void 0===t?void 0:t.icon)||`${window.PUBLIC_URL}/favicon.ico`,modes:(null===t||void 0===t?void 0:t.modes)||[],characters:(null===t||void 0===t?void 0:t.characters)||[],theme:(null===t||void 0===t?void 0:t.theme)||zt.SOLARIZED,screens:gi(null===t||void 0===t?void 0:t.screens)};return pi(e.name),fi(e.theme),e},pi=t=>window.document.title=t,fi=t=>{const e=document.documentElement;e.style.setProperty("--color-main",t.main),e.style.setProperty("--color-accent",t.accent)},gi=function(){return{...yi,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},yi={[i]:{component:ei},[h]:{component:hi},[u]:{component:ci},[s]:{component:Jo},[l]:{component:ii},[c]:{component:ni}};class mi extends se{constructor(t){let{...e}=t;super({...e}),this.label="Close",this.processDelay=0,this.energyCost=0}perform(){return this.actor.goToPreviousKeymap(),{success:!0,alternative:null}}}class _i extends se{constructor(t){let{passThroughOnSuccess:e=()=>null,passThroughEnergyCost:r=It,passThroughRequiredResources:a=[],projectileType:n=_e.DIRECTIONAL_KUNAI,directionToPrepareThrow:o="N",activateKey:i="t",...s}=t;super({...s}),this.passThroughOnSuccess=e,this.passThroughEnergyCost=r,this.passThroughRequiredResources=a,this.projectileType=n,this.directionToPrepareThrow=o,this.activateKey=i,this.processDelay=0,this.energyCost=0}perform(){let t=this.actor.contains(this.projectileType);if(!t)return{success:!1,alternative:null};t.game=this.game,t.pos={x:this.actor.pos.x,y:this.actor.pos.y};const e=this.actor.getPosition();let r=[],a=[];const n=Kt[this.directionToPrepareThrow];for(let s=0;s<t.range+1;s++){let o=!1,i=!1,c=null;if(s>0){const l=_t(e,n.map((t=>t*s))),u=_t(e,n.map((t=>t*(s-1))));if(this.game.canPassPositionWhenThrown(l,t,!0)?s===t.range&&!0:!0,o||i){const e=Et(c,t.explosivity);a.concat(e),r.concat(e),r.push(c);break}r.push(l)}}this.actor.activateCursor(r),a.forEach((t=>{this.actor.updateCursorNodeByPosition(t,[{key:"fill",value:zt.JACINTO.red},{key:"stroke",value:"transparent"}])}));const o=new mi({actor:this.actor,game:this.game,onAfter:()=>{this.actor.goToPreviousKeymap(),this.actor.deactivateCursor()}});let i={Escape:()=>o,[this.activateKey]:()=>new _n({targetPos:{...t.pos},actor:this.actor,game:this.game,entity:t,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:`throw ${this.directionToPrepareThrow}`,onBefore:()=>{t.direction=Kt[this.directionToPrepareThrow],t.passable=!0},onSuccess:()=>{this.actor.deactivateCursor(),this.actor.removeFromContainer(t),this.actor.setNextAction(o),this.passThroughOnSuccess({direction:Kt[this.directionToPrepareThrow]})}})};return this.actor.setKeymap(i),{success:!0,alternative:null}}}class vi extends se{constructor(t){let{passThroughOnSuccess:e=()=>null,passThroughEnergyCost:r=It,passThroughRequiredResources:a=[],projectileType:n=_e.DIRECTIONAL_KUNAI,...o}=t;super({...o}),this.passThroughOnSuccess=e,this.passThroughEnergyCost=r,this.passThroughRequiredResources=a,this.projectileType=n,this.processDelay=0,this.energyCost=0}perform(){const t=new mi({actor:this.actor,game:this.game,onAfter:()=>this.actor.deactivateCursor()});let e={Escape:()=>t,"w,ArrowUp":()=>new _i({label:"throw N?",projectileType:this.projectileType,directionToPrepareThrow:"N",activateKey:"w,ArrowUp",game:this.game,actor:this.actor,passThroughEnergyCost:this.passThroughEnergyCost,passThroughRequiredResources:this.passThroughRequiredResources,passThroughOnSuccess:this.passThroughOnSuccess}),"d,ArrowRight":()=>new _i({label:"throw E?",projectileType:this.projectileType,directionToPrepareThrow:"E",activateKey:"d,ArrowRight",game:this.game,actor:this.actor,passThroughEnergyCost:this.passThroughEnergyCost,passThroughRequiredResources:this.passThroughRequiredResources,passThroughOnSuccess:this.passThroughOnSuccess}),"s,ArrowDown":()=>new _i({label:"throw S?",projectileType:this.projectileType,directionToPrepareThrow:"S",activateKey:"s,ArrowDown",game:this.game,actor:this.actor,passThroughEnergyCost:this.passThroughEnergyCost,passThroughRequiredResources:this.passThroughRequiredResources,passThroughOnSuccess:this.passThroughOnSuccess}),"a,ArrowLeft":()=>new _i({label:"throw W?",projectileType:this.projectileType,directionToPrepareThrow:"W",activateKey:"a,ArrowLeft",game:this.game,actor:this.actor,passThroughEnergyCost:this.passThroughEnergyCost,passThroughRequiredResources:this.passThroughRequiredResources,passThroughOnSuccess:this.passThroughOnSuccess})};return this.actor.setKeymap(e),{success:!0,alternative:null}}}class bi extends se{constructor(t){let{equipmentSlotType:e=Xt.HAND,passThroughEnergyCost:r=It,passThroughRequiredResources:a=[],...n}=t;super({...n}),this.equipmentSlotType=e,this.passThroughEnergyCost=r,this.passThroughRequiredResources=a,this.processDelay=0,this.energyCost=0}updateCursors(t,e){const r=this.actor.getCursorPositions(),a=pt(e,this.actor.getCursorPositions()[0]);this.removeLastVisibleAnimations(t);const n=a.slice(1).filter((t=>!(0,Gt.find)(r,{x:t.x,y:t.y})));this.addNewAnimations(n).forEach((e=>t.push(e))),this.updateCursorColor(r)}removeLastVisibleAnimations(t){t.forEach((t=>{this.game.display.removeAnimation(t.id)}))}addNewAnimations(t){const e=[];return t.forEach((t=>{const r=this.game.display.addAnimation(this.game.display.animationTypes.BLINK_TILE,{x:t.x,y:t.y,color:zt.SOLARIZED.base3});e.push(r)})),e}updateCursorColor(t){t.forEach(((t,e)=>{const r=this.actor.getRangedAttackChance(t);r<=0&&this.actor.updateCursorNode(e,[{key:"fill",value:"transparent"},{key:"stroke",value:"white"}]),r>0&&r<=.5&&this.actor.updateCursorNode(e,[{key:"fill",value:zt.SOLARIZED.red},{key:"stroke",value:"transparent"}]),r>.5&&r<=.7&&this.actor.updateCursorNode(e,[{key:"fill",value:zt.SOLARIZED.yellow},{key:"stroke",value:"transparent"}]),r>=.7&&this.actor.updateCursorNode(e,[{key:"fill",value:zt.SOLARIZED.green},{key:"stroke",value:"transparent"}])}))}perform(){const t=this.actor.getPosition(),e=this.actor.getAttackRange(),r=this.actor.getItemInSlot(this.equipmentSlotType);if(!r)return{success:!1,alternative:null};if(!r.entityTypes.includes("RANGED_ATTACKING"))return{success:!1,alternative:null};const a=[],n=[],o=t=>t.forEach((t=>{this.game.display.removeAnimation(t.id)})),i=Et(t,e);let s=[],c=0;i.forEach((t=>{n.push(this.game.display.addAnimation(this.game.display.animationTypes.BLINK_BOX,{x:t.x,y:t.y,color:zt.SOLARIZED.base3,isBlinking:!1,strokeWidth:1}));let e=this.game.map[it(t)];if(e){const t=e.entities.filter((t=>this.game.fovIsActive?this.actor.isEnemy(t)&&t.isInFov:this.actor.isEnemy(t)));let r=t.length?t[0]:null;r&&s.push(r)}}));let l=[];s.length?(l.push(s[0].getPosition()),s.length>1&&(c=1)):l.push({...t}),r&&(l=r.getPositionsInShape(l[0]));this.actor.activateCursor(l,!0),this.updateCursors(a,t);const u=new mi({actor:this.actor,game:this.game,onAfter:()=>{this.actor.deactivateCursor(),o(a),o(n)}});let h={Escape:()=>u,e:()=>new le({actor:this.actor,game:this.game,label:"Next Target",targetPos:s.length?s[c].getPosition():null,range:e,availablePositions:i,onSuccess:()=>{c=(c+1)%s.length,this.updateCursors(a,t)}}),q:()=>new le({actor:this.actor,game:this.game,label:"Previous Target",targetPos:s.length?s[c].getPosition():null,range:e,availablePositions:i,onSuccess:()=>{0===c?c=s.length-1:c-=1,this.updateCursors(a,t)}}),"w,ArrowUp":()=>new le({actor:this.actor,game:this.game,label:"move N",direction:Kt.N,range:e,availablePositions:i,onSuccess:()=>{this.updateCursors(a,t)}}),"a,ArrowLeft":()=>new le({actor:this.actor,game:this.game,label:"move W",direction:Kt.W,range:e,availablePositions:i,onSuccess:()=>{this.updateCursors(a,t)}}),"s,ArrowDown":()=>new le({actor:this.actor,game:this.game,label:"move S",direction:Kt.S,range:e,availablePositions:i,onSuccess:()=>{this.updateCursors(a,t)}}),"d,ArrowRight":()=>new le({actor:this.actor,game:this.game,label:"move E",direction:Kt.E,range:e,availablePositions:i,onSuccess:()=>{this.updateCursors(a,t)}}),mouseOver:e=>new le({hidden:!0,actor:this.actor,game:this.game,targetPos:e,availablePositions:i,onSuccess:()=>{this.updateCursors(a,t)}}),f:()=>new dr({label:"Fire",targetPositions:[...this.actor.getCursorPositions()],game:this.game,actor:this.actor,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,onSuccess:()=>{this.actor.deactivateCursor(),o(a),o(n),this.actor.setNextAction(u)}}),mouseLeftButton:()=>new dr({hidden:!0,targetPositions:[...this.actor.getCursorPositions()],game:this.game,actor:this.actor,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,onSuccess:()=>{this.actor.deactivateCursor(),o(a),o(n),this.actor.goToPreviousKeymap()}}),r:()=>new or({label:"Reload",game:this.game,actor:this.actor,energyCost:It})};return this.actor.setKeymap(h),{success:!0,alternative:null}}}class wi extends se{constructor(t){let{...e}=t;super({...e}),this.processDelay=0,this.energyCost=0}perform(){this.game.visibleInventory=this.actor.container;const t=new mi({actor:this.actor,game:this.game});let e={Escape:()=>t};return this.actor.container.filter((t=>!t.hidden)).forEach(((r,a)=>{const n=r.items[0];e[a]=()=>new qo({item:n,game:this.game,actor:this.actor,label:`Equip ${n.name}`,energyCost:0,onSuccess:()=>{this.game.visibleInventory=null,this.actor.setNextAction(t)}})})),this.actor.setKeymap(e),{success:!0,alternative:null}}}class xi extends se{constructor(t){let{upgrade:e,...r}=t;super({...r}),this.upgrade=e,this.particleTemplate={renderer:{sprite:"\ue8b5",character:"^",color:"white",background:"#3e7dc9"}}}perform(){let t=!1;if(this.actor.upgrade(this.upgrade)){kt(this.actor.pos.x,this.actor.pos.y,5).forEach((t=>{this.addParticle(4,{...t},{x:-1*Math.sign(t.x-this.actor.pos.x),y:-1*Math.sign(t.y-this.actor.pos.y)})})),ze.save.play()}return{success:t,alternative:null}}}class Oi extends oe{constructor(t){let{...e}=t;super({...e}),this.name="Upgrade Points",this.actorResourcePath="upgrade_points",this.renderer={color:"white",background:"#3e7dc9",character:"^",sprite:"\ue8b5"}}}class Ri extends se{constructor(t){let{...e}=t;super({...e}),this.processDelay=0,this.energyCost=0}perform(){const t=new mi({actor:this.actor,game:this.game});let e={Escape:()=>t};return this.actor.upgrade_tree.forEach(((r,a)=>{e[a]=()=>new xi({upgrade:r,game:this.game,actor:this.actor,label:`${r.name}`,energyCost:0,requiredResources:[new Oi({getResourceCost:()=>r.cost})],onSuccess:()=>{this.actor.setNextAction(t)}})})),this.actor.setKeymap(e),{success:!0,alternative:null}}}class Ai extends se{constructor(t){let{...e}=t;super({...e})}perform(){let t=!1;const e=lt(this.game,this.actor.getPosition());if(e){const t=e.entities.filter((t=>t.id!==this.actor.id));t.length&&(t.forEach((t=>{this.game.addMessage(`${this.actor.name} picks up ${t.name}.`,ee.ACTION),this.actor.addToContainer(t),this.processPickupEffects(t,this.actor),e.entities=e.entities.filter((e=>e.id!==t.id))})),ze.grab_0.play())}return{success:t,alternative:null}}processPickupEffects(t,e){(null===t||void 0===t?void 0:t.processPickupEffects)&&(null===t||void 0===t||t.processPickupEffects(e))}}const Ci=(t,e)=>new Vn({game:t.game,name:"Lancer",baseDescription:"A gun with a chainsaw",baseDescriptors:["rumbling with gasoline and a bloodthirst"],passable:!0,attackRange:8,magazineSize:4,baseRangedAccuracy:.7,baseRangedDamage:2,attackDamage:1,pos:e,equipmentType:Xt.HAND,renderer:{character:"L",color:He.base3,background:He.gray},rangedHitSounds:[sr.cog_rifle_fire_01,sr.cog_rifle_fire_02,sr.cog_rifle_fire_03,sr.cog_rifle_fire_04],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]}),ki=(t,e)=>new Vn({game:t.game,name:"Snub",passable:!0,attackRange:6,magazineSize:10,baseRangedAccuracy:.7,baseRangedDamage:1,attackDamage:1,pos:e,equipmentType:Xt.HAND,renderer:{character:"S",color:He.base3,background:He.base01},rangedHitSounds:[sr.pistol_fire_01,sr.pistol_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]});class Ei extends Mr{constructor(t){let{buffValue:e=1,...r}=t;super({...r}),this.name="Take Aim",this.description="steady the nerves, breath in, squeeze the trigger. ranged accuray +1000% until you take a step.",this.allowDuplicates=!1,this.lifespan=-1,this.renderer={character:"+",sprite:"+",background:He.gray,color:He.base3},this.particleTemplate={renderer:{character:"+",sprite:"+",background:He.gray,color:He.base3}},this.setWeapon=()=>{const t=this.actor.getEquipedWeapons();return 0===t.length?null:(this.weapon=t[0],t[0])},this.actor_position={...this.actor.getPosition()},this.onStart=()=>{const t=this.setWeapon();t&&(t.baseRangedAccuracy+=e,this.actor_background=t.renderer.background,this.actor_color=t.renderer.color,t.renderer.background=this.actor_color,t.renderer.color=this.actor_background)},this.onStep=()=>{this.weapon&&ot(this.actor.getPosition(),this.actor_position)||(this.lifespan=0)},this.onStop=()=>{const t=this.weapon;t&&(t.baseRangedAccuracy-=e,t.renderer.color=this.actor_color,t.renderer.background=this.actor_background)}}}Ei.displayName="Take Aim";class Si extends se{constructor(t){let{direction:e,stepCount:r,processDelay:a=25,...n}=t;super({...n}),this.direction=e,this.stepCount=r,this.processDelay=a}perform(){let t=!1,e=null,r={x:this.actor.pos.x+this.direction[0],y:this.actor.pos.y+this.direction[1]};return this.stepCount>0&&this.actor.move(r)?(this.stepCount-=1,this.actor.setNextAction(this),t=!0):(t=!0,e=new wr({targetPos:r,game:this.game,actor:this.actor,energyCost:It})),{success:t,alternative:e}}}class Ti extends Si{constructor(t){let{direction:e,additionalDamage:r=0,processDelay:a=25,...n}=t;super({...n}),this.direction=e,this.stepCount=0,this.additionalDamage=r,this.processDelay=a}perform(){let t=null,e={x:this.actor.pos.x+this.direction[0],y:this.actor.pos.y+this.direction[1]};if(t=new wr({targetPos:e,additionalDamage:this.additionalDamage||this.stepCount,game:this.game,actor:this.actor,energyCost:0}),this.actor.energy>It){if(this.actor.shove(e,this.direction)){t=this;for(let t=0;t<3;t++)this.addParticle(1,{x:this.actor.pos.x-this.direction[0]*t,y:this.actor.pos.y-this.direction[1]*t},{x:0,y:0});this.stepCount+=1}}return{success:!0,alternative:t}}}class Li extends se{constructor(t){let{passThroughEnergyCost:e=It,passThroughRequiredResources:r=[],...a}=t;super({...a}),this.passThroughEnergyCost=e,this.passThroughRequiredResources=r,this.processDelay=0,this.energyCost=0}perform(){const t=this.actor.getPosition(),e=[];[Kt.N,Kt.S,Kt.E,Kt.W].forEach(((r,a)=>{Array(this.actor.energy/It).fill("").forEach(((a,n)=>{n>0&&e.push(_t(t,r.map((t=>t*n))))}))})),this.actor.activateCursor(e);const r=new mi({actor:this.actor,game:this.game,onAfter:()=>this.actor.deactivateCursor()});let a={Escape:()=>r,"w,ArrowUp":()=>new Ti({actor:this.actor,game:this.game,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"tackle N",direction:Kt.N,particleTemplate:Qt.leaf,onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}}),"d,ArrowRight":()=>new Ti({actor:this.actor,game:this.game,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"tackle E",direction:Kt.E,particleTemplate:Qt.leaf,onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}}),"s,ArrowDown":()=>new Ti({actor:this.actor,game:this.game,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"tackle S",direction:Kt.S,particleTemplate:Qt.leaf,onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}}),"a,ArrowLeft":()=>new Ti({actor:this.actor,game:this.game,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"tackle W",direction:Kt.W,particleTemplate:Qt.leaf,onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}})};return this.actor.setKeymap(a),{success:!0,alternative:null}}}const Di=(t,e)=>new Vn({game:t.game,name:"Boltok",passable:!0,attackRange:4,magazineSize:2,baseRangedAccuracy:.8,baseRangedDamage:3,attackDamage:1,pos:e,equipmentType:Xt.HAND,renderer:{character:"B",color:He.base3,background:He.locust0},rangedHitSounds:[sr.boltok_fire_01,sr.boltok_fire_02],rangedMissSounds:[sr.bullet_miss_01,sr.bullet_miss_02,sr.bullet_miss_03]});class Ni extends Mr{constructor(t){let{buffValue:e=1,...r}=t;super({...r}),this.name="Extra Round Reload",this.allowDuplicates=!1,this.lifespan=-1,this.particleTemplate={renderer:{character:"||",sprite:"\ue891",background:He.gray,color:He.base3}},this.setWeapon=()=>{const t=this.actor.getEquipedWeapons();return 0===t.length?null:(this.weapon=t[0],t[0])},this.onStart=()=>{const t=this.setWeapon();t&&(t.baseRangedDamage+=e,t.reload(),t.magazine+=e,this.actor_background=t.renderer.background,this.actor_color=t.renderer.color,t.renderer.background=this.actor_color,t.renderer.color=this.actor_background)},this.onStep=()=>{console.log("step");const t=this.weapon;t&&t.magazine<=t.magazineSize&&(this.lifespan=0)},this.onStop=()=>{const t=this.weapon;t&&(t.baseRangedDamage-=e,t.renderer.color=this.actor_color,t.renderer.background=this.actor_background)}}}Ni.displayName="Extra Round Reload";class Pi extends se{constructor(t){let{item:e=null,itemName:r=null,targetPos:a=null,...n}=t;super({...n}),this.item=e,this.itemName=r,this.targetPos=a}getitem(){return this.item?this.item:this.itemName?this.actor.contains(this.itemName):null}newItemPosition(){return this.targetPos||this.actor.getPosition()}perform(){const t=this.getitem();if(!t)return{success:!1,alternative:null};const e=this.newItemPosition(),r=this.game.map[it(e)];if(!r)return{success:!1,alternative:null};return this.actor.removeFromContainer(t)?(t.pos=e,r.entities.push(t),(null===t||void 0===t?void 0:t.processDropEffects)&&t.processDropEffects(this.actor),this.game.addMessage(`${this.actor.name} drops ${t.name}.`,ee.ACTION),{success:!0,alternative:null}):{success:!1,alternative:null}}}class Ui extends se{constructor(t){let{...e}=t;super({...e}),this.processDelay=0,this.energyCost=0}perform(){this.game.visibleInventory=this.actor.container;const t=new mi({actor:this.actor,game:this.game});let e={Escape:()=>t};return this.actor.container.filter((t=>!t.hidden)).forEach(((r,a)=>{const n=r.items[0];e[a]=()=>new Pi({item:n,game:this.game,actor:this.actor,label:`Drop ${n.name}`,onSuccess:()=>{this.game.visibleInventory=null,this.actor.setNextAction(t)}})})),this.actor.setKeymap(e),{success:!0,alternative:null}}}const Gi=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;const n=new Gn({game:t.game,name:"Trap",passable:!0,lightPassable:!0,renderer:{character:"*",sprite:"\ue8c8",color:He.base3,background:He.flesh2},enemyFactions:e.enemyFactions}),o=new va({actor:n,game:t.game,damage:r,useCount:a});return t.addStatusEffect(o),n};const Ii=["N","S","E","W"],Mi=Ii.map((t=>Kt[t])),Fi={N:"w,ArrowUp",E:"d,ArrowRight",S:"s,ArrowDown",W:"a,ArrowLeft"};class ji extends se{constructor(t){let{passThroughEnergyCost:e=It,passThroughRequiredResources:r=[],itemName:a,...n}=t;super({...n}),this.passThroughEnergyCost=e,this.passThroughRequiredResources=r,this.processDelay=0,this.energyCost=0,this.itemName=a}perform(){const t=this.actor.getPosition(),e=Mi.map((e=>_t(t,e)));this.actor.activateCursor(e);const r=new mi({actor:this.actor,game:this.game,onAfter:()=>this.actor.deactivateCursor()});let a={Escape:()=>r};return Ii.forEach((e=>{a[Fi[e]]=()=>new Pi({actor:this.actor,game:this.game,interrupt:!1,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:`target ${e}`,itemName:this.itemName,targetPos:_t(t,Kt[e]),onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}})})),this.actor.setKeymap(a),{success:!0,alternative:null}}}const Wi={basic_cog:()=>({name:"Cog",renderer:{character:"c",color:He.cog2,background:He.cog1,sprite:"\ue819"},durability:3,attackDamage:1,behaviors:[new vr({repeat:5}),new Er({repeat:1}),new pr({repeat:1}),new Rr({repeat:5})],loadout:{equipmentCreators:[Ci],inventoryCreators:[{amount:100,creator:Tr}]}})},Bi=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Qn({name:"Pod",game:t.game,passable:!0,renderer:{character:"+",sprite:"\ue80a",color:He.cog1,background:He.base04},timeToSpread:1,spreadCount:e,durability:1,faction:"COG",enemyFactions:["LOCUST"],speed:It,getSpawnedEntity:e=>((t,e)=>Hi(t,e,Wi.basic_cog()))(t,e)})},zi=(t,e)=>({pos:e,game:t.game,faction:"COG",enemyFactions:["LOCUST"],equipment:Yt.gear(),onDestroy:e=>{const r=Math.random();r<=.05?t.addAmmoLoot(e.getPosition()):r<=.1&&t.addGrenadeLoot(e.getPosition())}});function Hi(t,e,r){return function(t){const{loadout:e,...r}=t,a=new jn({...r});e&&function(t,e){const{equipmentCreators:r,inventoryCreators:a}=e,n=t.game.engine,o=a.map((t=>{let{amount:e,creator:r}=t;return function(t,e,r){const a=Array(e).fill("").map((()=>r(t)));return new Dr({itemType:a[0].name,items:a})}(n,e,r)}));t.container=o,r.forEach((e=>{const r=e(n);t.equip(r.equipmentType,r)}))}(a,e);return a}({...zi(t,e),...r})}class Vi extends se{constructor(t){let{passThroughEnergyCost:e=It,passThroughRequiredResources:r=[],...a}=t;super({...a}),this.passThroughEnergyCost=e,this.passThroughRequiredResources=r,this.processDelay=0,this.energyCost=0}getReinforcementCount(){return this.actor.reinforcementCount||1}perform(){const t=this.actor.getPosition(),e=[Kt.N,Kt.S,Kt.E,Kt.W].map((e=>_t(t,e)));this.actor.activateCursor(e);const r=new mi({actor:this.actor,game:this.game,onAfter:()=>this.actor.deactivateCursor()}),a=Bi(this.game.mode,this.getReinforcementCount());let n={Escape:()=>r,"w,ArrowUp":()=>new _n({actor:this.actor,game:this.game,interrupt:!1,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"target N",entity:a,targetPos:_t(t,Kt.N),onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}}),"d,ArrowRight":()=>new _n({actor:this.actor,game:this.game,interrupt:!1,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"target E",entity:a,targetPos:_t(t,Kt.E),onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}}),"s,ArrowDown":()=>new _n({actor:this.actor,game:this.game,interrupt:!1,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"target S",entity:a,targetPos:_t(t,Kt.S),onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}}),"a,ArrowLeft":()=>new _n({actor:this.actor,game:this.game,interrupt:!1,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:"target W",entity:a,targetPos:_t(t,Kt.W),onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(r)}})};return this.actor.setKeymap(n),{success:!0,alternative:null}}}class qi extends se{constructor(t){let{passThroughEnergyCost:e=It,passThroughRequiredResources:r=[],effectClass:a,effectDefaults:n={},...o}=t;super({...o}),this.passThroughEnergyCost=e,this.passThroughRequiredResources=r,this.effectClass=a,this.effectDefaults=n,this.processDelay=0,this.energyCost=0}createEffects(){let t=[];return this.actor.getCursorPositions().forEach((e=>{let r=this.actor.game.map[it(e)];if(r){this.effectClass.getValidTargetsOnTile(r,this.actor).forEach((e=>{const r=new this.effectClass({...this.effectDefaults,actor:e,game:this.actor.game});t.push(r)}))}})),t}createAddStatusEffectsAction(){const t=this.createEffects();return new gr({label:"Activate",effects:t,game:this.game,actor:this.actor,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,onSuccess:()=>this.actor.setNextAction(this.createGoToPreviousKeymapAction())})}createGoToPreviousKeymapAction(){return new mi({actor:this.actor,game:this.game,onAfter:()=>{this.actor.deactivateCursor()}})}perform(){const t=this.actor.getPosition();let e=this.actor.getStatusEffectRange();const r=Et(t,e);this.actor.activateCursor(r),r.forEach(((t,e)=>{let r=this.game.map[it(t)];if(r){const t=this.effectClass.getValidTargetsOnTile(r,this.actor);(t.length?t[0]:null)&&this.actor.updateCursorNode(e,[{key:"fill",value:zt.JACINTO.cog1},{key:"stroke",value:"transparent"}])}}));let a={Escape:()=>this.createGoToPreviousKeymapAction(),b:()=>this.createAddStatusEffectsAction()};return this.actor.setKeymap(a),{success:!0,alternative:null}}}class Ki extends se{constructor(t){let{...e}=t;super({...e}),this.processDelay=0,this.energyCost=0}perform(){const t=new mi({actor:this.actor,game:this.game});let e={Escape:()=>t};return this.actor.getAvailableStatusEffects().forEach(((t,r)=>{e[r]=()=>new qi({label:t.displayName,game:this.game,actor:this.actor,passThroughEnergyCost:1*It,effectClass:t,effectDefaults:{buffValue:1,lifespan:10*It,stepInterval:It,processDelay:200}})})),this.actor.setKeymap(e),{success:!0,alternative:null}}}class $i extends Mr{constructor(t){let{buffValue:e=1,...r}=t;super({...r}),this.name="Melee Damage Debuff",this.allowDuplicates=!1,this.actor_background=this.actor.renderer.background,this.actor_color=this.actor.renderer.color,this.attackDamage=this.actor.attackDamage,this.onStart=()=>{this.actor.attackDamage=Math.min(0,this.actor.attackDamage-1),this.actor.renderer.background=this.actor_color,this.actor.renderer.color=this.actor_background},this.onStop=()=>{this.actor.attackDamage=this.attackDamage,this.actor.renderer.color=this.actor_color,this.actor.renderer.background=this.actor_background}}static getValidTargetsOnTile(t,e){return xt(t.entities).filter((t=>e.id!==t.id&&e.isEnemy(t)))}}$i.displayName="Melee Damage Debuff";class Xi extends oe{constructor(t){let{...e}=t;super({...e}),this.name="Chakra",this.actorResourcePath="charge",this.renderer={color:"#224c92",background:"#13b8d7",character:"*",sprite:"\ue8bf"}}}class Yi extends se{constructor(t){let{item:e,...r}=t;super({...r}),this.item=e}perform(){return this.game.addMessage(`${this.actor.name} drops ${this.item.name}.`,ee.ACTION),this.actor.unequip(this.item),this.game.map[it(this.actor.pos)].entities.splice(0,0,this.item),{success:!0,alternative:null}}}class Zi extends se{constructor(t){let{attemptEquip:e=!1,...r}=t;super({...r}),this.attemptEquip=e}perform(){let t=!1;const e=this.game.map[it(this.actor.pos)].entities.filter((t=>t.id!==this.actor.id));if(e.length){const r=et(e);this.game.addMessage(`${this.actor.name} picks up ${r.name}.`,ee.ACTION),this.actor.addToContainer(r),this.attemptEquip&&this.attemptToEquip(r),this.processPickupEffects(r,this.actor);let a=this.game.map[it(this.actor.pos)].entities;this.game.map[it(this.actor.pos)].entities=a.filter((t=>t.id!==r.id)),t=!0}return{success:t,alternative:null}}processPickupEffects(t,e){(null===t||void 0===t?void 0:t.processPickupEffects)&&(null===t||void 0===t||t.processPickupEffects(e))}attemptToEquip(t){const e=this.actor.equip(t.equipmentType,t);return e&&(this.game.addMessage(`${this.actor.name} equips ${t.name}.`,ee.ACTION),this.actor.removeFromContainer(t)),e}}class Qi extends Mr{constructor(t){let{...e}=t;super({...e}),this.lifespan=-1,this.allowDuplicates=!1,this.actor_background=this.actor.renderer.background;const r=this.actor.getNextGate();this.name=r.name,this.renderer={background:"#3cc2bb",color:"#24fe88",character:(null===r||void 0===r?void 0:r.character)||"0"},this.onStart=()=>{const t=this.actor.setNextGate();this.actor.speed+=t.buffValue,this.actor.energy+=t.buffValue,this.actor.attackDamage+=t.damageBuff,this.actor.renderer.character=t.character,this.game.addMessage(`${this.actor.name} opened the ${t.name}.`),this.actor.decreaseDurability(t.durabilityDebuff),this.actor.decreaseDurability(0),this.game.addMessage(`${this.actor.name} suffers ${t.durabilityDebuff} damage from physical stress.`);const e=this.actor.getCurrentGateLevel();br({game:this.game,fromPosition:this.actor.getPosition(),spatterAmount:(e+3)/10,spatterRadius:Math.max(3,2*e),animationTimeStep:.6,transfersBackground:!1,spatterColors:[this.renderer.color,this.renderer.background]}).start()}}static getValidTargetsOnTile(t,e){return xt(t.entities).filter((t=>e.id!==t.id&&e.isAlly(t)))}}Qi.displayName="Open Inner Gates";class Ji extends fr{constructor(t){let{defenseBuff:e,...r}=t;super({...r}),this.processDelay=25,this.effect=new Qi({game:this.game,actor:this.actor}),this.particleTemplate={renderer:{color:"#3cc2bb",background:"#24fe88",character:"#"}}}perform(){return{success:this.game.engine.addStatusEffect(this.effect),alternative:null}}}class ts extends Mr{constructor(t){let{speedBuff:e=2*It,damageBuff:r=-1,...a}=t;super({...a}),this.name="Removed weights",this.description="the weights are off, let's go!",this.allowDuplicates=!1,this.processOnlyOnActorTurn=!0,this.speedBuff=e,this.damageBuff=r,this.renderer={color:"#424242",background:"#e6e6e6",character:"\u3023"},this.onStart=()=>{this.actor.speed+=this.speedBuff,this.actor.attackDamage=Math.max(0,this.actor.attackDamage+this.damageBuff),this.actor.energy+=this.speedBuff,this.actor.renderer.character="\u3023",console.log(`${this.actor.name} removed weighted wraps.`)},this.onStop=()=>{this.actor.speed-=this.speedBuff,this.actor.attackDamage+=this.damageBuff,this.actor.renderer.character="R",console.log(`${this.actor.name} rewrapped weights.`)}}}class es extends Mr{constructor(t){let{speedBuff:e=-1,damageBuff:r=2,...a}=t;super({...a}),this.name="enter the drunken fist",this.description="you're drunk, but you're also a master of the drunken fist. there is power in those wild movements.",this.allowDuplicates=!1,this.processOnlyOnActorTurn=!0,this.renderer={color:"#c45ffd",background:"#424242",character:"?"},this.onStart=()=>{this.actor.speed+=e,this.actor.attackDamage+=r,this.game.addMessage(`${this.actor.name} entered the drunken fist`,{color:this.renderer.color,backgroundColor:this.renderer.background})},this.onStop=()=>{this.actor.speed-=e,this.actor.attackDamage-=r,this.game.addMessage(`${this.actor.name} sobered up`,{color:this.renderer.color,backgroundColor:this.renderer.background})},this.onStep=t=>{if(Math.random()>.5)return;const e=$t[et(Object.keys($t))],r=this.actor,a={x:r.pos.x+e[0],y:r.pos.y+e[1]};r.setNextAction(new xr({targetPos:a,game:this.game,actor:r,energyCost:0})),br({game:this.game,fromPosition:a,spatterAmount:.1,spatterRadius:6,animationTimeStep:.9,spatterDirection:vt(r.getPosition(),a),transfersBackground:!1,spatterColors:["#c45ffd","#424242"]}).start()}}}class rs extends se{constructor(t){let{direction:e,range:r,targetPos:a,...n}=t;super({...n}),this.direction=e,this.range=r,this.targetPos=a,this.processDelay=0,this.energyCost=0,this.useEntityPassableMovementConstraint=!1}canMoveCursor(t){return this.isInRange(t)&&this.canPass(t)}canPass(t){return this.useEntityPassableMovementConstraint?this.game.canOccupyPosition(t,this.actor):this.game.canOccupyPosition(t,{passable:!0})}isInRange(t){if(!this.range)return!0;const e=this.actor.getPosition();return pt(e,t).length<=this.range}updateLookedAt(t){const e=t.reduce(((t,e)=>[...t,...Rt({game:this.game,position:e})]),[]);this.game.entityLog.setLookedAt(e)}perform(){let t=!1;if(!this.targetPos&&!this.direction)return{success:t,alternative:null};let e=this.targetPos;return this.targetPos||_t(this.actor.getCursorPositions()[0],this.direction),this.canMoveCursor(e)&&(this.actor.moveCursorToPosition(e),this.updateLookedAt([e]),!0),{success:t,alternative:null}}}class as extends se{constructor(t){let{targetPos:e,...r}=t;super({...r}),this.targetPos=e}perform(){let t=!1;const e=this.actor.getPosition(),r=dt(this.game,this.targetPos,e);return r.length>0&&(this.actor.move(r[0]),t=!0),{success:t,alternative:null}}}class ns{constructor(t){let{entity:e=null,statAttributeIncreaseFunction:r=null,statAttributeDecreaseFunction:a=null,statAttributePath:n="",statAttributePathMax:o="",statAttributeValueMax:i=null,statAttributePathMin:s="",statAttributeValueMin:c=null,changeByValue:l=1}=t;this.entity=e,this.statAttributePath=n,this.statAttributePathMax=o,this.statAttributeValueMax=i,this.statAttributePathMin=s,this.statAttributeValueMin=c,this.statAttributeIncreaseFunction=r,this.statAttributeDecreaseFunction=a,this.changeByValue=l}perform(){let t=this.functionStatChange();return t||(t=this.manualStatChange()),t}functionStatChange(){return this.statAttributeIncreaseFunction&&this.entity[this.statAttributeIncreaseFunction]?(this.entity[this.statAttributeIncreaseFunction](this.changeByValue),!0):!(!this.statAttributeDecreaseFunction||!this.entity[this.statAttributeDecreaseFunction])&&(this.entity[this.statAttributeDecreaseFunction](this.changeByValue),!0)}manualStatChange(){const t=Gt.get(this.entity,this.statAttributePath,null);if(null===t&&console.log("StatChange: stat not found. Path: ",this.statAttributePath),!t)return!1;const e=this.statAttributeValueMax||Gt.get(this.entity,this.statAttributePathMax,1/0),r=this.statAttributeValueMin||Gt.get(this.entity,this.statAttributePathMin,-1/0),a=tt(t+this.changeByValue,r,e);return Gt.set(this.entity,this.statAttributePath,a),!0}}class os extends Mr{constructor(t){let{statAttributeIncreaseFunction:e=null,statAttributeDecreaseFunction:r=null,statAttributePath:a="",statAttributePathMax:n="",statAttributeValueMax:o=null,statAttributePathMin:i="",statAttributeValueMin:s=null,changeByValue:c=1,...l}=t;super({...l}),this.name="stat change",this.description="this stat is changing every step",this.allowDuplicates=!0,this.processOnlyOnActorTurn=!0,this.lifespan=-1,this.statAttributePath=a,this.statAttributePathMax=n,this.statAttributeValueMax=o,this.statAttributePathMin=i,this.statAttributeValueMin=s,this.statAttributeIncreaseFunction=e,this.statAttributeDecreaseFunction=r,this.changeByValue=c}step(t){super.step(t),this.statChanger().perform(),this.addChangeAnimation(this.changeByValue)}statChanger(){return new ns({entity:this.actor,statAttributeIncreaseFunction:this.statAttributeIncreaseFunction,statAttributeDecreaseFunction:this.statAttributeDecreaseFunction,statAttributePath:this.statAttributePath,statAttributePathMax:this.statAttributePathMax,statAttributeValueMax:this.statAttributeValueMax,statAttributePathMin:this.statAttributePathMin,statAttributeValueMin:this.statAttributeValueMin,changeByValue:this.changeByValue})}addChangeAnimation(t){let e="";t>0&&(e="+");const r=e+t;this.animateText(r,this.renderer.color)}animateText(t,e){this.game.display.addAnimation(ue.TEXT_FLOAT,{...this.actor.getPosition(),color:e,text:t,timeToLive:750})}}class is extends os{constructor(t){let{...e}=t;super({...e}),this.name="chakra bleed",this.description="chakra is being drained",this.lifespan=-1,this.renderer={color:Ke.chakra,background:Ke.black,character:"o"},this.statAttributePath="charge",this.statAttributePathMax="chargeMax",this.changeByValue=-1,this.statAttributeValueMin=0}}class ss extends Mr{constructor(t){let{...e}=t;super({...e}),this.name="walking on water",this.description="you are walking on water.",this.allowDuplicates=!1,this.lifespan=-1,this.renderer={color:Ke.black,background:Ke.cog2,character:"~"},this.onStart=()=>{const t=new is({game:this.game,actor:this.actor,stepInterval:It});this.chakraBleedEffect=t,this.game.engine.addStatusEffect(t),this.particle_interval=setInterval((()=>{br({game:this.game,fromPosition:this.actor.getPosition(),spatterAmount:.2,spatterRadius:2,animationTimeStep:.9,easeingFunction:Tt.easeOutCubic,transfersBackground:!1,spatterColors:[Ke.chakra,Ke.black]}).start()}),600)},this.onStop=()=>{clearInterval(this.particle_interval)},this.onStep=t=>{this.actor.traversableTiles.includes("WATER")||this.actor.traversableTiles.push("WATER"),this.actor.getCharge()<1&&(this.actor.traversableTiles=this.actor.traversableTiles.filter((t=>"WATER"!==t)));"WATER"!==lt(this.game,this.actor.getPosition()).type&&(this.chakraBleedEffect.remove(),this.actor.traversableTiles.includes("WATER")||this.actor.traversableTiles.push("WATER"),this.remove())}}}class cs extends os{constructor(t){let{...e}=t;super({...e}),this.name="burning",this.description="you are burning.",this.allowDuplicates=!1,this.lifespan=200,this.timeToLive=this.lifespan,this.statAttributeDecreaseFunction="decreaseDurabilityWithoutDefense",this.changeByValue=1,this.renderer={color:Ke.yellow,background:Ke.red,character:"x"}}start(){super.start(),console.log("Burning: onStart"),console.log(this.timeToLive,this.lifespan),this.particle_interval=setInterval((()=>{br({game:this.game,fromPosition:this.actor.getPosition(),spatterAmount:.2,spatterRadius:2,animationTimeStep:.9,easeingFunction:Tt.easeOutCubic,transfersBackground:!1,spatterColors:[Ke.red,Ke.yellow]}).start()}),600)}stop(){super.stop(),console.log("Burning: onStop"),clearInterval(this.particle_interval)}}function ls(t,e){if(t.actorHasStatusEffect(e.id,"walking on water"))return;const r=lt(t.game,e.getPosition());if(r&&"WATER"===r.type){const r=new ss({game:t.game,actor:e,stepInterval:It});t.addStatusEffect(r)}}function us(t,e){if(t.actorHasStatusEffect(e.id,"burning"))return;const r=lt(t.game,e.getPosition());if(r&&"BURNT"===r.type){const r=new cs({game:t.game,actor:e,stepInterval:It});t.addStatusEffect(r)}}const hs=`${window.PUBLIC_URL}/hidden_leaf/rock_full_01.png`,ds={name:"Rock Lee",description:"A young ninja who can only use taijutsu.",renderer:{character:"R",color:zt.SOLARIZED.base3,background:zt.NARUTO.rock_lee,portrait:hs,basePortrait:hs,damageFlashPortrait:`${window.PUBLIC_URL}/hidden_leaf/white.png`},abilities:[{name:"Leaf Whirlwind",description:"A taijutsu technique where the user spins rapidly to attack surrounding enemies."},{name:"Flying Lotus",description:"Use your speed to close the distance and attack your enemy."},{name:"Inner Gates",description:"How many gates can you open before you die?"}],speedRating:3,durabilityRating:2,chakraRating:0,speed:600,durability:6,charge:0,chargeMax:10,portrait:hs};function ps(t){let e=new zn({pos:{x:23,y:7},renderer:ds.renderer,name:ds.name,enemyFactions:["OPPONENT"],faction:"PLAYER",actions:[],speed:ds.speed,durability:ds.durability,charge:ds.charge,game:t.game,presentingUI:!0,initializeKeymap:(t,e)=>({"w,ArrowUp":()=>{const r=Kt.N;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It,onAfter:()=>us(t,e)})},"s,ArrowDown":()=>{const r=Kt.S;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It,onAfter:()=>us(t,e)})},"a,ArrowLeft":()=>{const r=Kt.W;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It,onAfter:()=>us(t,e)})},"d,ArrowRight":()=>{const r=Kt.E;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It,onAfter:()=>us(t,e)})},p:()=>new er({label:"Stay",message:"standing still...",game:t.game,actor:e,energyCost:It}),Escape:()=>new er({label:"Pass",message:"pass turn...",game:t.game,actor:e,energyCost:e.energy}),i:()=>new wi({label:"Inventory",game:t.game,actor:e}),u:()=>new Ui({label:"Drop Items",game:t.game,actor:e}),g:()=>new Zi({label:"Pickup",game:t.game,actor:e}),l:()=>new Li({label:"Flying Lotus",game:t.game,actor:e,passThroughEnergyCost:It}),k:()=>new fr({label:"Remove Weights",game:t.game,actor:e,energyCost:It,effect:new ts({lifespan:10*It,speedBuff:10*It,damageBuff:-1,game:t.game,actor:e})}),j:()=>new fr({label:"Sip Sake",game:t.game,actor:e,energyCost:It,effect:new es({lifespan:30*It,speedBuff:2*-It,damageBuff:3,game:t.game,actor:e})}),h:()=>new ar({label:"Leaf Whirlwind",targetPositions:[{x:e.pos.x-1,y:e.pos.y},{x:e.pos.x-1,y:e.pos.y-1},{x:e.pos.x,y:e.pos.y-1},{x:e.pos.x+1,y:e.pos.y-1},{x:e.pos.x+1,y:e.pos.y},{x:e.pos.x+1,y:e.pos.y+1},{x:e.pos.x,y:e.pos.y+1},{x:e.pos.x-1,y:e.pos.y+1}],game:t.game,actor:e,energyCost:2*It,particleTemplate:Qt.leaf}),g:()=>new Ji({label:"Open Inner Gate",game:t.game,actor:e}),mouseLeftButton:r=>new as({hidden:!0,actor:e,game:t.game,targetPos:r}),mouseRightButton:r=>new mi({hidden:!0,actor:e,game:t.game})})});return e}const fs=[new Or({repeat:ds.speed/It,maintainDistanceOf:-1,chainOnFail:!0}),new Cr({repeat:1,attackPattern:Zt.clover,chainOnSuccess:!0}),new nr({repeat:1}),new Ar({repeat:ds.speed/It,maintainDistanceOf:4})];function gs(){return{initialize:ps,basicInfo:{behaviors:fs,...ds}}}class ys extends se{constructor(t){let{targetPos:e,entity:r,processDelay:a=25,...n}=t;super({...n}),this.targetPos=e,this.processDelay=a,this.entity=r}perform(){let t=!1;return this.game.canOccupyPosition(this.targetPos,this.entity)&&(this.entity.pos=this.targetPos,this.game.placeActorOnMap(this.entity)),{success:t,alternative:null}}}class ms extends ys{constructor(t){let{targetPositions:e=[],...r}=t;super({...r}),this.targetPositions=e}perform(){let t=!1;return this.targetPositions.forEach((t=>{if(this.game.canOccupyPosition(t,this.entity)){let e=(0,Gt.cloneDeep)(this.entity);e.game=this.game,e.id=Ut()(),e.pos=t,this.game.placeActorOnMap(e)&&!0}})),{success:t,alternative:null}}}class _s extends ms{constructor(t){let{...e}=t;var r,a;super({...e}),this.entity=(this.game.engine,{...this.actor.pos},new Un({game:r.game,passable:!1,pos:{x:a.x,y:a.y},renderer:{character:"\u2726\ufe0f",color:"#A89078",background:"#D8C0A8"},name:_e.BARRIER,durability:3}))}perform(){return this.actor.setNextAction(new mi({actor:this.actor,game:this.game})),super.perform()}}const vs=(t,e)=>{let r=[],a=(t=>{let e=`${t}`,r=Object.keys(Kt),a=!1;return r.forEach((t=>{`${Kt[t]}`===e&&(a=t)})),a})(t);switch(a){case"N":r=r.concat([{x:e.pos.x-1,y:e.pos.y-1},{x:e.pos.x,y:e.pos.y-1},{x:e.pos.x+1,y:e.pos.y-1}]);break;case"S":r=r.concat([{x:e.pos.x-1,y:e.pos.y+1},{x:e.pos.x,y:e.pos.y+1},{x:e.pos.x+1,y:e.pos.y+1}]);break;case"E":r=r.concat([{x:e.pos.x+1,y:e.pos.y-1},{x:e.pos.x+1,y:e.pos.y},{x:e.pos.x+1,y:e.pos.y+1}]);break;case"W":r=r.concat([{x:e.pos.x-1,y:e.pos.y-1},{x:e.pos.x-1,y:e.pos.y},{x:e.pos.x-1,y:e.pos.y+1}])}return r};class bs extends se{constructor(t){let{sandWallEnergyCost:e=It,sandWallRequiredResources:r=[],...a}=t;super({...a}),this.sandWallEnergyCost=e,this.sandWallRequiredResources=r,this.processDelay=0,this.energyCost=0}perform(){const t=new mi({actor:this.actor,game:this.game});let e={Escape:()=>t,"w,ArrowUp":()=>new _s({targetPositions:vs(Kt.N,this.actor),actor:this.actor,game:this.game,energyCost:this.sandWallEnergyCost,requiredResources:this.sandWallRequiredResources,label:"activate N"}),"d,ArrowRight":()=>new _s({targetPositions:vs(Kt.E,this.actor),actor:this.actor,game:this.game,energyCost:this.sandWallEnergyCost,requiredResources:this.sandWallRequiredResources,label:"activate E"}),"s,ArrowDown":()=>new _s({targetPositions:vs(Kt.S,this.actor),actor:this.actor,game:this.game,energyCost:this.sandWallEnergyCost,requiredResources:this.sandWallRequiredResources,label:"activate S"}),"a,ArrowLeft":()=>new _s({targetPositions:vs(Kt.W,this.actor),actor:this.actor,game:this.game,energyCost:this.sandWallEnergyCost,requiredResources:this.sandWallRequiredResources,label:"activate W"})};return this.actor.setKeymap(e),{success:!0,alternative:null}}}class ws extends se{constructor(t){let{spawnedEntity:e,targetPos:r,processDelay:a=25,...n}=t;super({...n}),this.spawnedEntity=e,this.targetPos=r,this.processDelay=a}perform(){let t=!1;return this.actor.move(this.targetPos)&&(this.game.placeActorOnMap(this.spawnedEntity),this.game.draw()),{success:t,alternative:null}}}const xs=(t,e)=>new Un({game:t.game,passable:!1,pos:{x:e.x,y:e.y},renderer:{character:"\u2726\ufe0f",color:"#A89078",background:"#D8C0A8"},name:_e.BARRIER,durability:3});class Os extends se{constructor(t){let{passThroughEnergyCost:e=It,passThroughRequiredResources:r=[],...a}=t;super({...a}),this.passThroughEnergyCost=e,this.passThroughRequiredResources=r,this.processDelay=0,this.energyCost=0}perform(){const t=this.actor.getPosition();this.actor.activateCursor([{...t}]);const e=new mi({actor:this.actor,game:this.game,onAfter:()=>this.actor.deactivateCursor()});let r={Escape:()=>e,"w,ArrowUp":()=>new rs({actor:this.actor,game:this.game,label:"move N",direction:Kt.N,range:4}),"a,ArrowLeft":()=>new rs({actor:this.actor,game:this.game,label:"move W",direction:Kt.W,range:4}),"s,ArrowDown":()=>new rs({actor:this.actor,game:this.game,label:"move S",direction:Kt.S,range:4}),"d,ArrowRight":()=>new rs({actor:this.actor,game:this.game,label:"move E",direction:Kt.E,range:4}),r:()=>new ws({targetPos:{...this.actor.getCursorPositions()[0]},spawnedEntity:xs(this.game.engine,{...this.actor.getPosition()}),game:this.game,actor:this.actor,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(e)}})};return this.actor.setKeymap(r),{success:!0,alternative:null}}}class Rs extends se{constructor(t){let{...e}=t;super({...e}),this.interrupt=!0}perform(){const t={game:this.game,passable:!1,pos:this.actor.pos,renderer:{character:"]",color:"#A89078",background:"#D8C0A8"},name:_e.KUNAI,durability:3,range:3,speed:300};return[new Fn({direction:Kt.N,...t}),new Fn({direction:Kt.E,...t}),new Fn({direction:Kt.S,...t}),new Fn({direction:Kt.W,...t})].forEach((t=>{const e={x:t.pos.x+t.direction[0],y:t.pos.y+t.direction[1]};t.pos=e;this.game.map[it(e)].entities.push(t),this.game.engine.addActorAsPrevious(t)})),{success:!0,alternative:null}}}class As extends fr{constructor(t){let{defenseBuff:e,...r}=t;super({...r}),this.processDelay=25,this.effect=new Fr({buffValue:e,game:this.game,actor:this.actor,lifespan:10*It,stepInterval:It}),this.particleTemplate={renderer:{character:"\u2726\ufe0f",color:"#A89078",background:"#D8C0A8"}}}perform(){let t=this.game.engine.addStatusEffect(this.effect);return kt(this.actor.pos.x,this.actor.pos.y,4).forEach((t=>{this.addParticle(3,{...t},{x:-1*Math.sign(t.x-this.actor.pos.x),y:-1*Math.sign(t.y-this.actor.pos.y)})})),{success:t,alternative:null}}}class Cs extends se{constructor(t){let{cloneArgs:e=[],...r}=t;super({...r}),this.cloneArgs=e}perform(){let t=!1;return this.actor.createClone(this.cloneArgs)&&this.game.addMessage(`${this.actor.name} is cloning itself`,ee.ACTION),{success:t,alternative:null}}}const ks=`${window.PUBLIC_URL}/hidden_leaf/gaara_full_01.png`,Es={name:"Gaara",description:"Some say he is a demon.",renderer:{character:"G",color:zt.SOLARIZED.base2,background:zt.NARUTO.gaara,portrait:ks,basePortrait:ks,damageFlashPortrait:`${window.PUBLIC_URL}/hidden_leaf/white.png`},abilities:[{name:"Sand Wall",description:"A technique where the user creates a wall of sand to protect themselves."},{name:"Sand Pulse",description:"A technique where the user sends a wave of sand out in all directions."},{name:"Sand Skin",description:"A technique where the user covers themselves in sand to protect themselves."}],speedRating:1,durabilityRating:3,chakraRating:2,speed:300,durability:10,charge:6,portrait:ks};function Ss(t){function e(t,e){ls(t,e),us(t,e)}let r=new zn({pos:{x:23,y:7},renderer:Es.renderer,name:"Gaara",enemyFactions:["OPPONENT"],faction:"PLAYER",traversableTiles:["WATER"],actions:[],speed:Es.speed,durability:Es.durability,charge:Es.charge,game:t.game,presentingUI:!0,initializeKeymap:(t,r)=>({"w,ArrowUp":()=>{const a=Kt.N;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"s,ArrowDown":()=>{const a=Kt.S;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"a,ArrowLeft":()=>{const a=Kt.W;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"d,ArrowRight":()=>{const a=Kt.E;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},p:()=>new er({label:"Stay",message:"standing still...",game:t.game,actor:r,energyCost:It}),Escape:()=>new er({label:"Pass",message:"pass turn...",game:t.game,actor:r,energyCost:r.energy}),l:()=>new bs({label:"Sand Wall",game:t.game,actor:r,sandWallRequiredResources:[new Xi({getResourceCost:()=>1})]}),r:()=>new Os({label:"Substitution",game:t.game,actor:r,passThroughEnergyCost:It,passThroughRequiredResources:[new Xi({getResourceCost:()=>1})]}),k:()=>new Rs({label:"Sand Pulse",game:t.game,actor:r}),h:()=>new As({label:"Sand Skin",game:t.game,actor:r,requiredResources:[new Xi({getResourceCost:()=>2})]}),c:()=>new Cs({label:"Sand Clone",game:t.game,actor:r,cloneArgs:[{attribute:"renderer",value:{...r.renderer,background:"#A89078"}},{attribute:"ignoredKeys",value:["g"]}],requiredResources:[new Xi({getResourceCost:()=>4})]}),i:()=>new wi({label:"Inventory",game:t.game,actor:r}),u:()=>new Ui({label:"Drop Items",game:t.game,actor:r}),g:()=>new Zi({label:"Pickup",game:t.game,actor:r})})});return r}function Ts(t,e){const r=t.getPosition();return Array(2).fill("").map(((t,a)=>a>0?_t(r,e.map((t=>t*a))):null)).filter((t=>null!==t))}class Ls extends se{constructor(t){let{passThroughEnergyCost:e=It,passThroughRequiredResources:r=[],actionClass:a=Ti,actionLabel:n="tackle",actionParams:o={},positionsByDirection:i=Ts,...s}=t;super({...s}),this.passThroughEnergyCost=e,this.passThroughRequiredResources=r,this.processDelay=0,this.energyCost=0,this.actionClass=a,this.actionLabel=n,this.actionParams=o,this.positionsByDirection=i}perform(){const t=[];[Kt.N,Kt.S,Kt.E,Kt.W].forEach(((e,r)=>{const a=this.positionsByDirection(this.actor,e);t.push(...a)})),this.actor.activateCursor(t);const e=new mi({actor:this.actor,game:this.game,onAfter:()=>this.actor.deactivateCursor()}),r=(t,r)=>({actor:this.actor,game:this.game,energyCost:this.passThroughEnergyCost,requiredResources:this.passThroughRequiredResources,label:`${this.actionLabel} ${r}`,direction:t,targetPos:_t(this.actor.getPosition(),t),onSuccess:()=>{this.actor.deactivateCursor(),this.actor.setNextAction(e)},...this.actionParams});let a={Escape:()=>e,"w,ArrowUp":()=>new this.actionClass(r(Kt.N,"N")),"d,ArrowRight":()=>new this.actionClass(r(Kt.E,"E")),"s,ArrowDown":()=>new this.actionClass(r(Kt.S,"S")),"a,ArrowLeft":()=>new this.actionClass(r(Kt.W,"W"))};return this.actor.setKeymap(a),{success:!0,alternative:null}}}class Ds extends Ti{constructor(t){let{range:e=3,...r}=t;super({...r}),this.range=e}perform(){let t=null,e={x:this.actor.pos.x+this.direction[0],y:this.actor.pos.y+this.direction[1]};if(t=new wr({targetPos:e,additionalDamage:this.additionalDamage||this.stepCount,game:this.game,actor:this.actor,energyCost:0}),this.stepCount<this.range){this.actor.shove(e,this.direction)&&(t=this,this.stepCount+=1,this.gainRequiredResources())}return{success:!0,alternative:t}}}class Ns extends Mr{constructor(t){let{speedBuff:e=200,damageBuff:r=1,chakraBuff:a=9,lifeCost:n=1,...o}=t;super({...o}),this.name="Nine Tails Beast Mode",this.description="tap into the endless chakra of the nine tails at the cost of your life force",this.allowDuplicates=!1,this.processOnlyOnActorTurn=!0,this.actor_background=this.actor.renderer.background,this.actor_color=this.actor.renderer.color,this.actor_inialize_keymap=this.actor.initializeKeymap,this.actor_equipment=this.actor.equipment,this.renderer={color:Ke.black,background:Ke.red,character:"\u2726\ufe0f"},this.onStart=()=>{this.actor.renderer.color=Ke.black,this.actor.renderer.background=Ke.red,this.actor.renderer.character="\u3023",this.actor.renderer.sprite="\u3023",this.actor.speed+=e,this.actor.energy+=e,this.actor.chargeMax+=a,this.actor.increaseCharge(a),this.actor.attackDamage+=r,this.game.addMessage(`${this.actor.name} unleashed the nine tails `,{color:this.renderer.color,backgroundColor:this.renderer.background}),this.actor.initializeKeymap=Ps,this.actor.reinitializeKeymap(),function(t,e){e.equipment=[];const r=function(t,e){return new Vn({game:t.game,name:"Beast Bomb",passable:!0,lightPassable:!0,attackRange:9,magazineSize:1/0,baseRangedAccuracy:1/0,baseRangedDamage:3,attackDamage:0,pos:e,shapePattern:Zt.point,equipmentType:"Beast Bomb",renderer:{character:"\ue8b6",color:Ke.black,background:Ke.orange},afterFireSuccess:async function(e){let{fromPosition:r,targetPositions:a,hits:n,misses:o}=e;const i=hr({game:t.game,fromPosition:r,targetPositions:a,backgroundColorGradient:[Ke.base3,Ke.red],colorGradient:[Ke.base3,Ke.red],animationTimeStep:.3});await i.start();const s=n.filter((()=>Math.random()<.5));0===s.length&&s.push(et(n)),s.forEach((async e=>{const r=[Ke.wall,Ke.red,Ke.black],a=br({game:t.game,fromPosition:e,spatterRadius:5,spatterAmount:.3,spatterDirection:{x:0,y:0},spatterColors:r,animationTimeStep:.2,reverse:!1,transfersBackground:!1,transfersBackgroundOnDestroy:!1});await a.start()}))}})}(t,e.getPosition());e.addEquipmentSlot({type:r.equipmentType}),e.equip(r.equipmentType,r)}(this.game.engine,this.actor),this.particle_interval=setInterval((()=>{br({game:this.game,fromPosition:this.actor.getPosition(),spatterAmount:.4,spatterRadius:2,animationTimeStep:.9,easeingFunction:Tt.easeOutCubic,transfersBackground:!1,spatterColors:[Ke.wall,Ke.red,Ke.black]}).start()}),300)},this.onStop=()=>{var t;this.actor.renderer.color=this.actor_color,this.actor.renderer.background=this.actor_background,this.actor.renderer.character="N",this.actor.renderer.sprite="N",this.actor.speed-=e,this.actor.attackDamage-=r,this.actor.chargeMax-=a,this.game.addMessage(`${this.actor.name} sealed the nine tails`,{color:this.renderer.color,backgroundColor:this.renderer.background}),clearInterval(this.particle_interval),this.actor.initializeKeymap=this.actor_inialize_keymap,this.actor.reinitializeKeymap(),this.actor.removeEquipmentSlot("Beast Bomb"),t.equipment=t.actor_equipment},this.onStep=t=>{}}}const Ps=(t,e)=>({"w,ArrowUp":()=>{const r=Kt.N;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It})},"s,ArrowDown":()=>{const r=Kt.S;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It})},"a,ArrowLeft":()=>{const r=Kt.W;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It})},"d,ArrowRight":()=>{const r=Kt.E;let a=e.pos.x+r[0],n=e.pos.y+r[1];return new xr({hidden:!0,targetPos:{x:a,y:n},game:t.game,actor:e,energyCost:It})},f:()=>new bi({label:"Beast Bomb",game:t.game,actor:e,equipmentSlotType:"Beast Bomb",passThroughEnergyCost:It,passThroughRequiredResources:[new Xi({getResourceCost:()=>3})]})});class Us extends fr{constructor(t){let{...e}=t;super({...e}),this.processDelay=25,this.effect=new Ns({game:this.game,actor:this.actor,lifespan:20*It}),this.particleTemplate={renderer:{character:"\u2726\ufe0f",color:Ke.black,background:Ke.sasuke_alt}}}perform(){let t=this.game.engine.addStatusEffect(this.effect);return kt(this.actor.pos.x,this.actor.pos.y,4).forEach((t=>{this.addParticle(3,{...t},{x:-1*Math.sign(t.x-this.actor.pos.x),y:-1*Math.sign(t.y-this.actor.pos.y)})})),{success:t,alternative:null}}}class Gs extends se{constructor(t){let{cloneCount:e=10,...r}=t;super({...r}),this.cloneCount=e}animateSmoke(t){t.forEach((t=>{br({game:this.game,fromPosition:t,spatterAmount:.3,spatterRadius:3,animationTimeStep:.9,easingFunction:Tt.easeIn,transfersBackground:!1,spatterColors:["#495877"]}).start()}))}getSpawnPositions(){const t=Et(this.actor.getPosition(),10).filter((t=>this.game.canOccupyPosition(t,{passable:!1})));return rt(this.cloneCount,t)}createSpawnStructure(t){return{x_offset:0,y_offset:0,positions:t}}spawnedEntityClass(){return jn}spawnedEntityOptions(){return{name:"Shadow Clone",game:this.game,renderer:{character:this.actor.renderer.character,color:this.actor.renderer.background,background:this.actor.renderer.color},durability:1,attackDamage:1,behaviors:[new Or({repeat:2,maintainDistanceOf:1,chainOnFail:!0}),new Cr({repeat:1,attackPattern:Zt.clover,chainOnSuccess:!0}),new nr({repeat:1})],faction:this.actor.faction,enemyFactions:this.actor.enemyFactions}}createSpawner(t){return new Yn({game:this.game,name:"Shadow Clones",passable:!0,renderer:{character:"o",sprite:"\ue8bf",color:Ke.base3,background:Ke.base2},attackDamage:0,speed:It,energy:It,spawnStructure:this.createSpawnStructure(t),spawnedEntityClass:this.spawnedEntityClass(),getSpawnedEntityOptions:this.spawnedEntityOptions.bind(this)})}perform(){const t=this.getSpawnPositions(),e=this.createSpawner(t);return this.actor.game.placeActorOnMap(e),e.spawnEntities(),this.animateSmoke(t),e.destroy(),{success:!0,alternative:null}}}class Is extends oe{constructor(t){let{...e}=t;super({...e}),this.name="Life Force",this.actorResourcePath="durability",this.renderer={color:"#121212",background:"#dc322f",character:"o",sprite:"\ue8b4"}}}const Ms=`${window.PUBLIC_URL}/hidden_leaf/naruto.png`,Fs={name:"Naruto",description:"Believe it!",renderer:{character:"N",color:Ke.black,background:Ke.orange,portrait:Ms,basePortrait:Ms,damageFlashPortrait:`${window.PUBLIC_URL}/hidden_leaf/white.png`},abilities:[{name:"Uzumaki Combo",description:"A barrage of punches and kicks."},{name:"Shadow Clone Jutsu",description:"A technique where the user creates many clones to overwhelm their opponent."},{name:"Nine Tails",description:"The nine tailed fox can't be stopped."}],speedRating:1,durabilityRating:2,chakraRating:3,speed:300,durability:5,charge:9,portrait:Ms};function js(t){function e(t,e){ls(t,e),us(t,e)}let r=new zn({pos:{x:23,y:7},renderer:Fs.renderer,name:"Naruto",faction:"NARUTO",enemyFactions:["OPPONENT"],faction:"PLAYER",traversableTiles:["WATER"],actions:[],speed:Fs.speed,durability:Fs.durability,charge:Fs.charge,game:t.game,presentingUI:!0,initializeKeymap:(t,r)=>({"w,ArrowUp":()=>{const a=Kt.N;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"s,ArrowDown":()=>{const a=Kt.S;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"a,ArrowLeft":()=>{const a=Kt.W;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"d,ArrowRight":()=>{const a=Kt.E;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},p:()=>new er({label:"Stay",message:"standing still...",game:t.game,actor:r,energyCost:It}),Escape:()=>new er({label:"Pass",message:"pass turn...",game:t.game,actor:r,energyCost:r.energy}),i:()=>new wi({label:"Inventory",game:t.game,actor:r}),u:()=>new Ui({label:"Drop Items",game:t.game,actor:r}),g:()=>new Zi({label:"Pickup",game:t.game,actor:r}),c:()=>new Gs({label:"Shadow Clone Jutsu",game:t.game,actor:r,energyCost:1*It,requiredResources:[new Xi({getResourceCost:()=>9})]}),h:()=>new Us({label:"Tailed Beast",game:t.game,actor:r,energyCost:3*It,requiredResources:[new Is({getResourceCost:()=>2})]}),f:()=>new bi({label:"Uzumaki Barrage",game:t.game,actor:r,equipmentSlotType:"Uzumaki Barrage",passThroughEnergyCost:It,passThroughRequiredResources:[new Xi({getResourceCost:()=>3})]})})});const a=function(t,e){return new Vn({game:t.game,name:"Uzumaki Barrage",passable:!0,lightPassable:!0,attackRange:3,magazineSize:1/0,baseRangedAccuracy:1/0,baseRangedDamage:3,attackDamage:0,pos:e,shapePattern:Zt.point,equipmentType:"Uzumaki Barrage",renderer:{character:"\ue8bf",color:Ke.black,background:Ke.orange},afterFireSuccess:async function(e){let{fromPosition:r,targetPositions:a,hits:n,misses:o}=e;const i=["u","zu","ma","ki","barrage!"],s=rt(5,kt(a[0].x,a[0].y,5)).map(((e,r)=>hr({game:t.game,fromPosition:e,targetPositions:a,pathTailLength:1,backgroundColorGradient:[Ke.orange,Ke.orange],colorGradient:[Ke.black,Ke.black],animationTimeStep:.5,character:"N"})));for(let l=0;l<s.length;l++)await s[l].start(),t.game.display.addAnimation(ue.TEXT_FLOAT,{...a[0],color:Ke.black,text:i[l]});const c=n.filter((()=>Math.random()<.5));0===c.length&&c.push(et(n)),c.forEach((async e=>{const r=[Ke.base1,Ke.base3],a=br({game:t.game,fromPosition:e,spatterRadius:5,spatterAmount:.3,spatterDirection:{x:0,y:0},spatterColors:r,animationTimeStep:.2,reverse:!1,transfersBackground:!1,transfersBackgroundOnDestroy:!1});await a.start()}))}})}(t,r.getPosition());return r.addEquipmentSlot({type:a.equipmentType}),r.equip(a.equipmentType,a),r}const Ws=(t,e)=>{let r=t.actors[t.currentActor];t.game.removeActor(r),t.game[e]=null},Bs=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"move",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{w:{activate:()=>t(Kt.N,e),label:`${r} N`,hidden:a},d:{activate:()=>t(Kt.E,e),label:`${r} E`,hidden:a},s:{activate:()=>t(Kt.S,e),label:`${r} S`,hidden:a},a:{activate:()=>t(Kt.W,e),label:`${r} W`,hidden:a}}},zs=(t,e)=>{let r={Escape:{activate:()=>Ws(t,"visibleEquipment"),label:"Close"}};return e.equipment.filter((t=>t.item)).map((a=>{let n={activate:null,label:""};return n.activate=()=>{e.setNextAction(new Yi({item:a.item,game:t.game,actor:e})),Ws(t,"visibleEquipment")},n.label=`Unequip ${a.item.name}`,((t,e)=>{let r=te.filter((e=>!Object.keys(t).includes(e)));t[r[0]]=e})(r,n),!0})),r};class Hs extends se{constructor(t){let{targetPos:e,radius:r=1,...a}=t;super({...a}),this.targetPos=e,this.radius=r,this.particleTemplate=Qt.water}perform(){if(!this.actor.hasItemNameEquipped(_e.WATER_GUN))return this.game.addMessage(`${this.actor.name} doesn't have a ${_e.WATER_GUN}.`,ee.ERROR),{success:!1,alternative:null};let t={x_offset:0,y_offset:0,positions:Array(this.radius).fill("").reduce(((t,e,r)=>t.concat(...kt(0,0,r+1))),[])};const e=t.positions.map((e=>({x:this.targetPos.x+e.x+t.x_offset,y:this.targetPos.y+e.y+t.y_offset}))).concat({...this.targetPos});e.forEach((t=>{const e=this.game.map[it(t)];e&&("BURNT"===e.type&&(e.type="GROUND"),"FLOOR"===e.type&&(e.type="WET"))})),e.forEach((t=>{this.addParticle(3,{...t},{x:Math.sign(t.x-this.targetPos.x),y:Math.sign(t.y-this.targetPos.y)})}));return et([ze.water_0,ze.water_1]).play(),this.actor.energy-=this.energyCost,{success:!0,alternative:null}}}class Vs extends se{constructor(t){let{targetPos:e,processDelay:r=0,...a}=t;super({...a}),this.targetPos=e,this.processDelay=r}perform(){let t=!1;const e=this.actor.initiatedBy.pos,r=ut(this.game,this.targetPos,e,8);if((!this.actor.range||r.length<=this.actor.range)&&this.game.cursorCanOccupyPosition(this.targetPos)){let e=this.game.map[it(this.actor.pos)];this.game.map[it(this.actor.pos)]={...e,entities:e.entities.filter((t=>t.id!==this.actor.id))},this.actor.pos=this.targetPos,this.game.map[it(this.targetPos)].entities.push(this.actor),t=!0}return{success:t,alternative:null}}}const qs=(t,e)=>{let r=e.actors[e.currentActor],a=r.pos.x+t[0],n=r.pos.y+t[1];r.setNextAction(new Vs({targetPos:{x:a,y:n},game:e.game,actor:r,energyCost:0}))},Ks=(t,e,r,a)=>{const n=()=>{let r=t.actors[t.currentActor];r.active=!1,t.game.removeActor(r),e.willResetCanBurn=!0};return{Escape:{activate:n,label:"Close"},...Bs(qs,t),t:{activate:()=>{e.canBurn=!0,function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t.actors[t.currentActor];e.setNextAction(new Hs({targetPos:{...a.pos},radius:r,game:t.game,actor:e,energyCost:It}))}(t,e,a),n()},label:"activate"}}},$s=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=t.actors[t.currentActor],n=t.game,o=a.pos;a.canBurn=!1;let i=new Dn({initiatedBy:a,range:r,pos:o,renderer:{character:"\u2588",color:"white",background:""},name:"Cursor",game:n,keymap:Ks(t,a,a.keymap,e)});t.addActorAsPrevious(i),n.placeActorOnMap(i),n.draw()};class Xs extends se{constructor(t){let{item:e,...r}=t;super({...r}),this.item=e}perform(){let t=!1;if(this.item.equipmentType){if(this.actor.getItemInSlot(this.item.equipmentType))this.game.addMessage(`${this.actor.name}'s equipment slots are full.`,ee.ERROR);else{this.actor.equip(this.item.equipmentType,this.item);let t=this.game.map[it(this.actor.pos)].entities;this.game.map[it(this.actor.pos)].entities=t.filter((t=>t.id!==this.item.id)),this.game.addMessage(`${this.actor.name} equips ${this.item.name}.`,ee.ACTION),this.actor.energy-=this.energyCost}}return{success:t,alternative:null}}}const Ys=(t,e)=>{let r=e.actors[e.currentActor],a=r.pos.x+t[0],n=r.pos.y+t[1];r.setNextAction(new fn({targetPos:{x:a,y:n},game:e.game,actor:r,direction:t,energyCost:It,processDelay:25}))},Zs=t=>{let e=t.actors[t.currentActor];const r=[Kt.N,Kt.E,Kt.S,Kt.W];let a=[];r.forEach((r=>{let n={x:e.pos.x+r[0],y:e.pos.y+r[1]};const o=t.game.display.addAnimation(1,{x:n.x,y:n.y,color:zt.SOLARIZED.base3});a.push(o)})),e.keymap=((t,e,r,a)=>{let n=t.actors[t.currentActor];const o=()=>{e.keymap=r,a.length&&a.forEach((e=>t.game.display.removeAnimation(e.id)))};return{Escape:{activate:o,label:"Cancel Chop"},w:{activate:()=>{let e={x:n.pos.x+Kt.N[0],y:n.pos.y+Kt.N[1]};n.setNextAction(new wr({targetPos:e,game:t.game,actor:n})),o()},label:"activate N"},d:{activate:()=>{let e={x:n.pos.x+Kt.E[0],y:n.pos.y+Kt.E[1]};n.setNextAction(new wr({targetPos:e,game:t.game,actor:n})),o()},label:"activate E"},s:{activate:()=>{let e={x:n.pos.x+Kt.S[0],y:n.pos.y+Kt.S[1]};n.setNextAction(new wr({targetPos:e,game:t.game,actor:n})),o()},label:"activate S"},a:{activate:()=>{let e={x:n.pos.x+Kt.W[0],y:n.pos.y+Kt.W[1]};n.setNextAction(new wr({targetPos:e,game:t.game,actor:n})),o()},label:"activate W"}}})(t,e,{...e.keymap},a)};class Qs extends se{constructor(t){let{...e}=t;super({...e})}perform(){let t=!1;const e=this.actor.release();return e&&(this.actor.energy-=this.energyCost,this.addParticle(2,{...e.pos},{x:0,y:0},Qt.succede.renderer),ze.release_0.play()),{success:t,alternative:null}}}class Js extends se{constructor(t){let{targetPos:e,...r}=t;super({...r}),this.targetPos=e}perform(){let t=!1;return this.actor.grab(this.targetPos)&&(this.actor.energy-=this.energyCost,t=!0,this.addParticle(2,{...this.targetPos},{x:0,y:0},Qt.succede.renderer),ze.grab_0.play()),{success:t,alternative:null}}}const tc=(t,e,r,a)=>{const n=()=>{e.keymap=r,a.length&&a.forEach((e=>t.game.display.removeAnimation(e.id)))};return{Escape:{activate:n,label:"Cancel Grab"},...Bs(((t,r)=>{((t,e,r)=>{const a={x:r.pos.x+t[0],y:r.pos.y+t[1]};r.setNextAction(new Js({targetPos:a,game:e.game,actor:r,energyCost:It}))})(t,r,e),n()}),t,"grab")}};gs().initialize;e.Component;const ec=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Be.Howl({src:[window.PUBLIC_URL+t],volume:.2,loop:!1,...e})},rc=3e3,ac={wood_button:ec("/sounds/hidden_leaf/wood_block.mp3"),title_theme:ec("/sounds/hidden_leaf/title_theme.mp3",{loop:!0}),character_select_theme:ec("/sounds/hidden_leaf/character_select_theme.mp3",{loop:!0}),tournament_theme:ec("/sounds/hidden_leaf/tournament_theme.mp3",{loop:!0}),battle_theme_0:ec("/sounds/hidden_leaf/battle_theme_0.mp3",{loop:!0}),ambient_howling:ec("/sounds/tall_grass/ambient_loop_howls.mp3",{loop:!0,rate:.75,volume:.1}),wind_loop:ec("/sounds/tall_grass/wind_loop.mp3",{loop:!0,rate:.75,volume:.1}),sac_01:ec("/sounds/tall_grass/monster/sac_01.ogg"),sac_02:ec("/sounds/tall_grass/monster/sac_02.ogg"),sac_03:ec("/sounds/tall_grass/monster/sac_03.ogg"),screech_01:ec("/sounds/tall_grass/monster/screech_01.ogg"),screech_02:ec("/sounds/tall_grass/monster/screech_02.ogg"),screech_03:ec("/sounds/tall_grass/monster/screech_03.ogg"),grass_00:ec("/sounds/tall_grass/rustle/grass_00.mp3"),grass_01:ec("/sounds/tall_grass/rustle/grass_01.mp3"),grass_02:ec("/sounds/tall_grass/rustle/grass_02.mp3"),grass_03:ec("/sounds/tall_grass/rustle/grass_03.mp3"),grass_04:ec("/sounds/tall_grass/rustle/grass_04.mp3"),grass_05:ec("/sounds/tall_grass/rustle/grass_05.mp3"),light_up:ec("/sounds/tall_grass/light_up.mp3"),light_drain:ec("/sounds/tall_grass/light_drain.mp3",{volume:.2}),emergence_01:ec("/sounds/jacinto/EarthDebrisSmallClose01.ogg"),emergence_02:ec("/sounds/jacinto/EarthDebrisSmallClose02.ogg"),cog_tags:ec("/sounds/jacinto/CogTags.ogg"),wretch_melee_01:ec("/sounds/jacinto/actors/wretch/AAttackSmall01.ogg"),wretch_melee_02:ec("/sounds/jacinto/actors/wretch/AAttackSmall03.ogg"),wretch_melee_03:ec("/sounds/jacinto/actors/wretch/AAttackSmall04.ogg"),scion_melee_01:ec("/sounds/jacinto/actors/wretch/AAttackSmall01.ogg",{rate:.5}),scion_melee_02:ec("/sounds/jacinto/actors/wretch/AAttackSmall03.ogg",{rate:.5}),scion_melee_03:ec("/sounds/jacinto/actors/wretch/AAttackSmall04.ogg",{rate:.5}),locust_buff_01:ec("/sounds/jacinto/actors/drone/AChatterAttack01.ogg"),locust_buff_02:ec("/sounds/jacinto/actors/drone/AChatterAttack02.ogg"),locust_buff_03:ec("/sounds/jacinto/actors/drone/AChatterAttack03.ogg"),reload:ec("/sounds/jacinto/weapons/reloadassault02.ogg"),needs_reload:ec("/sounds/jacinto/NeedsReload01.ogg"),level_start:ec("/sounds/jacinto/ObjectiveAdd01.ogg"),level_end:ec("/sounds/jacinto/ObjectiveComplete01.ogg"),cog_rifle_fire_01:ec("/sounds/jacinto/weapons/Assault_Fire_02.ogg"),cog_rifle_fire_02:ec("/sounds/jacinto/weapons/Assault_Fire_07.ogg"),cog_rifle_fire_03:ec("/sounds/jacinto/weapons/CogARifleFire02.ogg"),cog_rifle_fire_04:ec("/sounds/jacinto/weapons/CogARifleFire04.ogg"),shot_missed_01:ec("/sounds/jacinto/weapons/BBulletImpact10.ogg"),shot_missed_02:ec("/sounds/jacinto/weapons/BBulletImpact1.ogg"),longshot_fire_01:ec("/sounds/jacinto/weapons/CogSniperFire01.ogg"),longshot_fire_02:ec("/sounds/jacinto/weapons/CogSniperFire02.ogg"),longshot_fire_03:ec("/sounds/jacinto/weapons/CogSniperFire03.ogg"),pistol_fire_01:ec("/sounds/jacinto/weapons/CogPistolFire01.ogg"),pistol_fire_02:ec("/sounds/jacinto/weapons/CogPistolFire02.ogg"),chainsaw_01:ec("/sounds/jacinto/weapons/ChainsawRevIdle01.ogg"),chainsaw_02:ec("/sounds/jacinto/weapons/ChainsawStart01.ogg"),grenade_ready:ec("/sounds/jacinto/weapons/GrenadeBeep02.ogg"),smoke_grenade_fire:ec("/sounds/jacinto/weapons/GrenadeSmokeSpew01.ogg"),boltok_fire_01:ec("/sounds/jacinto/weapons/LocustBoltok01.ogg"),boltok_fire_02:ec("/sounds/jacinto/weapons/LocustBoltok04.ogg"),hammerburst_fire_01:ec("/sounds/jacinto/weapons/LocustRifleFire01.ogg"),hammerburst_fire_02:ec("/sounds/jacinto/weapons/LocustRifleFire03.ogg"),bullet_hit_01:ec("/sounds/jacinto/weapons/RifleAmmoImpactBodyFlesh01.ogg"),bullet_hit_02:ec("/sounds/jacinto/weapons/RifleAmmoImpactBodyFlesh02.ogg"),bullet_hit_03:ec("/sounds/jacinto/weapons/RifleAmmoImpactBodyFlesh03.ogg"),bullet_miss_01:ec("/sounds/jacinto/weapons/RifleAmmoImpactDirt01.ogg"),bullet_miss_02:ec("/sounds/jacinto/weapons/RifleAmmoImpactDirt02.ogg"),bullet_miss_03:ec("/sounds/jacinto/weapons/RifleAmmoImpactDirt03.ogg"),explosion_01:ec("/sounds/jacinto/weapons/BoomerExplosionA01.ogg"),explosion_02:ec("/sounds/jacinto/weapons/BoomerExplosionB01.ogg")};function nc(t){return()=>(t.play(),t.fade(0,.6,rc),()=>{t.fade(.6,0,rc/4)})}const oc=function(t){return(0,e.useEffect)(nc(ac.title_theme),[]),(0,e.useEffect)((()=>{const e=e=>{"Enter"===e.key&&t.setActiveScreen(u)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),(0,La.jsx)("div",{className:"Title",style:{height:720,width:1280,position:"relative",overflow:"visible"},children:(0,La.jsxs)("div",{className:"Title__content",style:{height:"100%",width:"100%",position:"relative",overflow:"visible",maxHeight:720,maxWidth:1280},children:[(0,La.jsx)("h2",{className:"Title__heading",style:{color:Xc.theme.accent,zIndex:100},children:"The Chunin Exams"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/rock_lee.png",alt:"Rock Lee",style:{left:-130,top:30},className:"Title__character Title__character--left"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/gaara.png",alt:"Gaara",style:{right:-134,bottom:40},className:"Title__character Title__character--right"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_0.png",alt:"Exclaim 0",style:{left:446,top:96},className:"fadeIn__image"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_1.png",alt:"Exclaim 1",style:{left:854,top:100},className:"fadeIn__image"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_2.png",alt:"Exclaim 2",style:{left:150,bottom:250},className:"fadeIn__image"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_3.png",alt:"Exclaim 3",style:{left:200,bottom:200},className:"fadeIn__image"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_4.png",alt:"Exclaim 4",style:{left:854,top:250},className:"fadeIn__image"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_5.png",alt:"Exclaim 5",style:{right:266,bottom:62},className:"fadeIn__image"}),(0,La.jsx)("img",{src:window.PUBLIC_URL+"/hidden_leaf/title/exclaim_5.png",alt:"Exclaim 5",style:{left:400,top:144},className:"fadeIn__image"}),(0,La.jsx)("button",{className:"btn btn-main btn-themed Title__button",onClick:()=>{t.setActiveScreen(u),ac.wood_button.play()},children:"New Game"}),(0,La.jsx)("span",{className:"Title__hint",children:"press enter to start"})]})})};class ic extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsxs)("div",{className:"Title__content",children:[(0,La.jsx)("h2",{style:{color:Xc.theme.accent,marginBottom:70},children:"Congratulations to the top Chunin of the year!"}),(0,La.jsx)("button",{className:"btn btn-main btn-themed",onClick:()=>{this.props.setActiveScreen(u)},children:"It's my ninja way!"})]})})}}const sc=ic;class cc extends e.Component{constructor(t){super(t),this.state={}}render(){return(0,La.jsx)("div",{className:"Title",children:(0,La.jsxs)("div",{className:"Title__content",children:[(0,La.jsx)("h2",{style:{color:Xc.theme.accent,marginBottom:70},children:"You'll get 'em next year."}),(0,La.jsx)("button",{className:"btn btn-main btn-themed",onClick:()=>{this.props.setActiveScreen(u)},children:"It's my ninja way!"})]})})}}const lc=cc,uc="Title",hc="Level",dc="Lose",pc="Win",fc="CharacterSelect",gc="Tournament";const yc=function(){return(0,La.jsx)("div",{className:"Jacinto_Help",style:{scrollbarWidth:"none"},children:(0,La.jsxs)("div",{className:"modal-content",children:[(0,La.jsxs)("div",{className:"row",children:[(0,La.jsxs)("div",{className:"col s12 m6",children:[(0,La.jsx)("div",{className:"Jacinto_Help__section_header",children:"Goal"}),(0,La.jsxs)("div",{className:"Jacinto_Help__section_body",children:["Defend Jacinto, the last human bastion on Sera. Move block by block and clear the city of",(0,La.jsx)("span",{className:"red-text",children:"\xa0Grubs"})," until you can locate and defeat their leader,",(0,La.jsx)("span",{className:"red-text",children:"\xa0Skorge"}),"."]})]}),(0,La.jsxs)("div",{className:"col s12 m6",children:[(0,La.jsx)("div",{className:"Jacinto_Help__section_header",children:"Hints"}),(0,La.jsxs)("div",{className:"Jacinto_Help__section_body",children:[(0,La.jsxs)("div",{children:["Destroy ",(0,La.jsx)("span",{className:"red-text",children:"Emergence Holes"})," ASAP."]}),(0,La.jsxs)("div",{children:["Spend ",(0,La.jsx)("span",{className:"blue-text",children:"Upgrade Points"}),"."]}),(0,La.jsxs)("div",{children:["Weapon ",(0,La.jsx)("span",{className:"blue-text",children:"accuracy"})," decreases over distance."]}),(0,La.jsxs)("div",{children:[(0,La.jsx)("span",{className:"blue-text",children:"Grenades"})," can destroy walls as well as grubs, but be wary."]})]})]})]}),(0,La.jsx)("div",{className:"row",children:(0,La.jsxs)("div",{className:"col s12",children:[(0,La.jsx)("div",{className:"Jacinto_Help__section_header",children:"Controls"}),(0,La.jsxs)("div",{className:"Jacinto_Help__section_body",children:[(0,La.jsx)("div",{children:"Movement: WASD"}),(0,La.jsx)("div",{children:"Actions: click or key press"})]})]})})]})})};const mc=function(t){let r=[];return e.useLayoutEffect((()=>{r=document.querySelectorAll(`#${t.id}`),window.M.Modal.init(r)})),(0,e.useEffect)((()=>{const t=t=>{"?"===t.key&&r.forEach((t=>{window.M.Modal.getInstance(t).open()}))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]),(0,La.jsxs)("div",{id:t.id,className:"modal",children:[(0,La.jsx)(yc,{}),(0,La.jsx)("div",{className:"modal-footer",children:(0,La.jsx)("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat",children:"Close"})})]})};function _c(t){let{triggerModal:e=null,onClick:r,children:a}=t;const n=e?"modal-trigger":"",o=e;return(0,La.jsx)("button",{className:n,"data-target":o,onClick:r,style:{backgroundColor:Xc.theme.accent,color:Xc.theme.main,fontFamily:"var(--font-main)",borderRadius:"5px 5px 0 0",border:"none",padding:2,marginRight:8,textAlign:"center",fontSize:12,cursor:"pointer"},children:a})}const vc=function(t){return(0,La.jsxs)("div",{style:{position:"relative",top:701,right:198,height:"fit-content"},children:[(0,La.jsxs)("div",{style:{width:"max-content"},children:[(0,La.jsx)(_c,{onClick:()=>{window.location.reload()},children:"Restart"}),(0,La.jsx)(_c,{triggerModal:"help-modal",children:"Help (?)"})]}),(0,La.jsx)(mc,{id:"help-modal"})]})};function bc(t){let{resource:e,superScript:r,canPay:a}=t;e.renderer.sprite?e.renderer.sprite:e.renderer.character;return(0,La.jsx)("div",{className:"HiddenLeaf__ResourceBlock",style:{backgroundColor:a?e.renderer.color:"#616161",color:a?e.renderer.background:"#bdbdbd",borderColor:a?e.renderer.background:"#bdbdbd",width:r?"auto":20},children:r})}const wc=t=>{let{keymap:e,game:r}=t;return(0,La.jsx)("div",{className:"HiddenLeaf__ActionMenu",children:(0,La.jsx)("div",{className:"HiddenLeaf__ActionMenu__Actions",children:e&&Object.entries(e).map(((t,e)=>{let[a,n]=t;const o=n(),i=Gt.get(o,"hidden",!1),s=Gt.get(o,"renderer",null),c=o.listPayableResources();if(!i)return(0,La.jsxs)("div",{className:"HiddenLeaf__ActionMenu__Actions__item",onClick:()=>{o.setAsNextAction(),r.engine.isRunning||r.engine.start(),r.refocus()},children:[(0,La.jsx)("div",{className:"HiddenLeaf__ActionMenu__Actions__item__label",children:a}),(0,La.jsx)("div",{className:"HiddenLeaf__ActionMenu__Actions__item__content",style:s&&{backgroundColor:s.background,color:s.color,borderColor:s.color},children:o.label}),(0,La.jsx)("div",{className:"HiddenLeaf__ActionMenu__Actions__item__resources",children:c.map(((t,e)=>{const r=t.getResourceCostDisplay();return r>0&&(0,La.jsx)(bc,{superScript:r,resource:t,canPay:t.canPay},`${e}-${t.name}-resource-block`)}))})]},`${e}-label`)}))})})};function xc(t){let{actor:e,game:r}=t;return(0,La.jsxs)("div",{className:"CharacterCard",children:[(0,La.jsxs)("div",{style:{marginBottom:12,marginTop:12},children:[(0,La.jsx)(Rc,{label:"AP",attributePath:"energy",attributePathMax:"speed",colorFilled:"#ff9926",unit:100,actor:e}),(0,La.jsx)(Rc,{label:"HP",attributePath:"durability",attributePathMax:"durabilityMax",colorFilled:"#dc322f",unit:1,actor:e}),e.chargeMax>0&&(0,La.jsx)(Rc,{label:"CH",attributePath:"charge",attributePathMax:"chargeMax",colorFilled:"#3e7dc9",unit:1,actor:e}),(0,La.jsx)("br",{}),(0,La.jsx)(Rc,{label:"ATK",attributeValue:e.getAttackDamageWithEquipment(),colorFilled:"#ff9926",unit:1,actor:e}),(0,La.jsx)(Rc,{label:"DEF",attributeValue:e.getDefense(),colorFilled:"#dc322f",unit:1,actor:e})]}),(0,La.jsx)("div",{children:(0,La.jsx)(wc,{keymap:e.getKeymap(),game:r})})]})}function Oc(t){var e,r;let{actor:a,width:n=null,height:o=null}=t,i=a.renderer.color,s="";const c=(null===a||void 0===a||null===(e=a.game)||void 0===e||null===(r=e.engine)||void 0===r?void 0:r.getStatusEffectsByActorId(a.id))||[];return c.length>0&&(i=c[0].renderer.color,s="blinking-border"),(0,La.jsx)("div",{className:`Portrait ${s}`,style:{backgroundColor:a.renderer.background,color:a.renderer.color,border:"3px solid",borderRadius:5,borderColor:i,width:n||"100%",height:o||"100%"},children:(0,La.jsx)("img",{src:a.renderer.portrait,style:{width:"100%",height:"100%"}})})}function Rc(t){let{actor:e,label:r,colorFilled:a="red",colorEmpty:n="gray",attributePathMax:o,attributePath:i,attributeValueMax:s,attributeValue:c,unit:l}=t;const u=c||Gt.get(e,i,0)/l;return(0,La.jsxs)("span",{style:{marginRight:12},children:[r,":",(0,La.jsx)("span",{style:{color:a},children:u})]})}const Ac=t=>{let{game:e}=t;const r=e.engine.actors.filter((t=>t.entityTypes.includes("PRESENTING_UI"))).filter((t=>t.presentingUI));return(0,La.jsx)("div",{className:"PlayerInformation Information UI",children:(0,La.jsx)("div",{className:"CharacterCard_Container",children:r.map(((t,r)=>(0,La.jsx)(xc,{actor:t,game:e},r)))})})};const Cc=function(t){return(0,La.jsx)("div",{style:{bottom:680,position:"relative"},children:Gt.map(Gt.get(t.game,"mode.infoBlocks",{}),((t,e)=>(0,La.jsx)("div",{style:{color:Xc.theme.accent,backgroundColor:Xc.theme.main,padding:8,textAlign:"center"},children:t.text},e)))})};e.Component;class kc extends e.Component{constructor(t){super(t);let r=new ro({}),a=new Ba({engine:r,getSelectedCharacter:()=>this.props.selectedCharacter.initialize(r),mode:this.props.selectedMode.class,meta:this.props.meta});this.state={game:a,activeTab:0,spriteMode:a.spriteMode},this.presserRef=e.createRef()}async componentWillUnmount(){ac.battle_theme_0.fade(.2,0,rc/4)}async componentDidMount(){ac.battle_theme_0.play(),ac.battle_theme_0.fade(0,.2,rc),this.state.game.initialize(this.presserRef,document),this.state.game.setActiveScreen=t=>this.props.setActiveScreen(t),this.state.game.backToTitle=()=>this.props.setActiveScreen(uc),this.state.game.toLose=()=>{this.props.setActiveScreen(dc)},this.state.game.toWin=()=>{this.props.setActiveScreen(pc)},this.state.game.refocus=()=>this.refocus(),this.state.game.updateReact=t=>{this.setState({game:t})},this.state.game.engine.start()}refocus(){this.presserRef&&this.presserRef.current.focus()}toggleSpriteMode(){this.state.game.spriteMode=!this.state.game.spriteMode,this.state.game.draw(),this.refocus(),this.setState({spriteMode:this.state.game.spriteMode})}getPlayer(t){let e=this.state.game.getFirstPlayer();return e||(e=t.tournament.player.basicInfo),e}getOpponent(t){let e=this.state.game.mode.getOpponentActor();return e||(e=t.tournament.opponents[t.tournament.active].basicInfo),e}render(){const t=this.props.meta(),e=this.getOpponent(t),r=this.getPlayer(t);return(0,La.jsx)("div",{className:"Level",style:{fontSize:12},children:(0,La.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,La.jsxs)("div",{style:{flex:5},children:[(0,La.jsxs)("div",{className:"game_display_container",style:{margin:0,height:680,width:924,backgroundColor:Ke.bg_override},children:[Va(this.presserRef,za,this.state.game.engine),(0,La.jsx)(Cc,{game:this.state.game})]}),(0,La.jsx)("div",{style:{paddingLeft:6,paddingTop:6,backgroundColor:Ke.bg_override,top:-52,height:92,position:"relative"},children:(0,La.jsx)(ko,{game:this.state.game,lookedAt:this.state.game.entityLog.getAllUniqueEntities()})})]}),(0,La.jsxs)("div",{style:{flex:2,padding:12,paddingLeft:28},children:[(0,La.jsxs)("div",{style:{display:"flex"},children:[(0,La.jsxs)("div",{children:[(0,La.jsx)("div",{style:{fontSize:16,fontWeight:"bold",textAlign:"center",marginBottom:8},children:"Player"}),(0,La.jsx)(Oc,{actor:r,width:200,height:74}),(0,La.jsx)(yo,{actor:r})]}),(0,La.jsxs)("div",{style:{marginLeft:12,marginTop:42},children:[(0,La.jsx)("div",{style:{fontSize:12,fontWeight:"bold",textAlign:"center",marginBottom:8},children:"vs"}),(0,La.jsx)(Oc,{actor:e,width:100,height:37}),(0,La.jsx)(yo,{actor:e})]})]}),(0,La.jsx)(Ac,{game:this.state.game}),(0,La.jsx)(xo,{messages:this.state.game.messages.slice(-20).reverse()})]}),(0,La.jsx)(vc,{game:this.state.game,spriteMode:this.state.game.spriteMode,setActiveScreen:this.props.setActiveScreen,toggleSpriteMode:this.toggleSpriteMode.bind(this)})]})})}}const Ec=kc,Sc=e.forwardRef(((t,e)=>{let{character:r,setActiveScreen:a,setSelectedCharacter:n,selectedStyle:o=!1}=t;const i=r.basicInfo,s=o?i.renderer.background:"var(--color-accent)",c=o?i.renderer.color:"var(--color-main)",l=o?i.renderer.color:"var(--color-main)",u=o?"29rem":"27rem",h=o?"1rem":"0.5rem";return(0,La.jsxs)("button",{className:"hidden-leaf-character-card",style:{"--character-background-color":s,"--character-color":c,backgroundColor:s,color:c,borderColor:l,fontFamily:"player-start-2p",fontSize:12,width:"14rem",height:u,margin:h},onClick:()=>{n(r),a(gc)},ref:e,children:[(0,La.jsx)("div",{children:(0,La.jsx)("img",{src:i.portrait,alt:i.name,style:{height:"100%",width:"100%"}})}),(0,La.jsx)("div",{children:i.name}),(0,La.jsx)("div",{children:i.description}),(0,La.jsxs)("div",{style:{display:"flex",marginTop:10,fontSize:10},children:[" ",(0,La.jsxs)("div",{children:[(0,La.jsxs)("div",{style:{textAlign:"left"},children:[(0,La.jsx)("b",{style:{minWidth:70,marginRight:5},children:"Speed"}),(0,La.jsx)(mo,{attributePath:"speedRating",attributeValueMax:3,colorFilled:"#ff9926",unit:100,actor:i})]}),(0,La.jsxs)("div",{style:{textAlign:"left"},children:[(0,La.jsx)("b",{style:{minWidth:70,marginRight:5},children:"Defense"}),(0,La.jsx)(mo,{attributePath:"durabilityRating",attributeValueMax:3,colorFilled:"#dc322f",unit:1,actor:i})]}),(0,La.jsxs)("div",{style:{textAlign:"left"},children:[(0,La.jsx)("b",{style:{minWidth:70,marginRight:5},children:"Chakra"}),(0,La.jsx)(mo,{attributePath:"chakraRating",attributeValueMax:3,colorFilled:"#3e7dc9",unit:1,actor:i})]})]}),(0,La.jsxs)("div",{style:{flex:1,textAlign:"left"},children:[(0,La.jsx)("div",{children:(0,La.jsx)("b",{children:"Jutsus"})}),i.abilities.map(((t,e)=>(0,La.jsx)(lo,{title:t.name,text:t.description,children:(0,La.jsx)("div",{style:{border:"1px solid",borderRadius:5,padding:5,marginRight:10,marginBottom:10},children:t.name})},e)))]})]})]})})),Tc=t=>{let{characters:r,setActiveScreen:a,setSelectedCharacter:n}=t;const[o,i]=(0,e.useState)(0),s=(0,e.useRef)([]);return(0,e.useEffect)((()=>{const t=t=>{"ArrowLeft"===t.key||"a"===t.key?i((t=>t>0?t-1:r.length-1)):"ArrowRight"===t.key||"d"===t.key?i((t=>t<r.length-1?t+1:0)):"Enter"===t.key&&(n(r[o]),a(gc))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[o,r,a,n]),(0,La.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",overflow:"hidden",position:"relative",width:"100%"},children:(0,La.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:(t=>{const e=[...r],a=r.length,n=Math.floor(a/2);for(let r=0;r<t+n;r++)e.push(e.shift());return e})(o).map(((t,e)=>{const o=e-Math.floor(r.length/2),i=1-.3*Math.abs(o);return Math.abs(o)>2?null:(0,La.jsxs)("div",{style:{opacity:i,position:"relative"},children:[(0,La.jsx)(Sc,{character:t,setSelectedCharacter:n,setActiveScreen:a,index:r.indexOf(t),ref:e=>s.current[r.indexOf(t)]=e,selectedStyle:0===o}),(0,La.jsxs)("div",{style:{fontSize:16,width:200,margin:"auto"},children:[0===o&&(0,La.jsx)("p",{className:"text--blinking",children:"press Enter to confirm"}),-1===o&&(0,La.jsx)("div",{style:{textAlign:"center",fontSize:16,marginTop:10},children:"<"}),1===o&&(0,La.jsx)("div",{style:{textAlign:"center",fontSize:16,marginTop:10},children:">"})]})]},t.basicInfo.name)}))})})};const Lc=function(t){return(0,e.useEffect)(nc(ac.character_select_theme),[]),(0,La.jsx)("div",{className:"Title",children:(0,La.jsxs)("div",{className:"Title__content",children:[(0,La.jsx)("h1",{children:"Choose your Ninja"}),(0,La.jsx)(Tc,{characters:t.characters,selectedCharacter:t.selectedCharacter,setSelectedCharacter:t.setSelectedCharacter,setActiveScreen:t.setActiveScreen})]})})};function Dc(t){var e;return(null===(e=t.meta())||void 0===e?void 0:e.tournament)||function(t){let{characters:e,selectedCharacter:r}=t;const a=e.filter((t=>t.name!==r.name));return{opponents:[Nc(a).at(0)],player:r,active:0}}(t)}function Nc(t){return t.sort((()=>Math.random()-.5))}function Pc(t){const r=Dc(t);function a(){t.setActiveScreen(hc)}return(0,e.useEffect)(nc(ac.tournament_theme),[]),(0,e.useEffect)((()=>{t.meta({tournament:r})}),[]),(0,e.useEffect)((()=>{const t=t=>{"Enter"===t.key&&a()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[]),(0,La.jsx)("div",{className:"Title",children:(0,La.jsxs)("div",{className:"Title__content",children:[(0,La.jsx)("h1",{children:"Tournament"}),(0,La.jsx)(Uc,{active:r.active,children:r.opponents.map(((t,e)=>(0,La.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,La.jsx)(Gc,{character:t.basicInfo,animated:e===r.active}),e===r.active&&(0,La.jsxs)("div",{children:[(0,La.jsx)("h2",{children:"VS"}),(0,La.jsx)("div",{style:{padding:8,marginLeft:50,marginRight:50},children:(0,La.jsx)(Ic,{character:r.player.basicInfo})})]})]},e)))}),(0,La.jsx)("button",{className:"btn btn-main btn-themed",onClick:a,children:"Fight!"}),(0,La.jsx)("br",{}),(0,La.jsx)("span",{children:"press enter to start"})]})})}function Uc(t){let{active:e,children:r}=t;return(0,La.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",marginBottom:24},children:r.map(((t,r)=>{let a={opacity:1};return r<e?a={opacity:.9,filter:"grayscale(100%)"}:r>e&&(a={opacity:.6}),(0,La.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",...a},children:t},r)}))})}function Gc(t){let{character:e,animated:r}=t;return(0,La.jsxs)("div",{className:"opponent-card "+(r?"animated-border":""),style:{border:"3px solid ",borderRadius:5,borderColor:e.renderer.color,margin:5,"--character-background-color":e.renderer.background,"--character-color":e.renderer.color},children:[(0,La.jsx)("img",{src:e.portrait,alt:e.name,style:{width:"242px"}}),(0,La.jsx)("div",{className:"opponent-card__name",style:{color:e.renderer.color,backgroundColor:e.renderer.background},children:e.name})]})}function Ic(t){let{character:e}=t;return(0,La.jsxs)("div",{className:"player-card",style:{border:"5px solid ",borderRadius:5,borderColor:e.renderer.background},children:[(0,La.jsx)("img",{src:e.portrait,alt:e.name,style:{width:"342px"}}),(0,La.jsx)("div",{className:"player-card__name",style:{color:e.renderer.color,backgroundColor:e.renderer.background},children:e.name})]})}class Mc extends Mr{constructor(t){let{speedBuff:e=0,damageBuff:r=0,chakraCost:a=1,...n}=t;super({...n}),this.name="activate your birthright, your clan's kekkei genkai, the sharingan.",this.description="at the cost of your chakra, you can see your opponent's moves.",this.allowDuplicates=!1,this.processOnlyOnActorTurn=!0,this.lifespan=-1,this.actor_background=this.actor.renderer.background,this.actor_color=this.actor.renderer.color,this.actor_inialize_keymap=this.actor.initializeKeymap,this.renderer={color:Ke.black,background:Ke.sasuke_alt,character:"\u2726\ufe0f"},this.onStart=()=>{this.actor.renderer.background=this.actor_color,this.actor.renderer.color=this.actor_background,this.actor.speed+=e,this.actor.energy+=e,this.actor.attackDamage+=r,this.game.addMessage(`${this.actor.name} activated the sharingan`,{color:this.renderer.color,backgroundColor:this.renderer.background});const t=this.game.mode.getTournamentOpponent().initialize(this.game.engine);this.actor.initializeKeymap=t.initializeKeymap,this.actor.reinitializeKeymap()},this.onStop=()=>{this.actor.renderer.color=this.actor_color,this.actor.renderer.background=this.actor_background,this.actor.speed-=e,this.actor.attackDamage-=r,this.game.addMessage(`${this.actor.name} deactivated the sharingan`,{color:this.renderer.color,backgroundColor:this.renderer.background}),this.actor.initializeKeymap=this.actor_inialize_keymap,this.actor.reinitializeKeymap()},this.onStep=t=>{br({game:this.game,fromPosition:this.actor.getPosition(),spatterAmount:.1,spatterRadius:3,animationTimeStep:.9,transfersBackground:!1,spatterColors:[Ke.sasuke_alt,Ke.sasuke]}).start(),this.actor.decreaseCharge(a),this.actor.charge<=0&&this.remove()}}}class Fc extends fr{constructor(t){let{...e}=t;super({...e}),this.processDelay=25,this.effect=new Mc({game:this.game,actor:this.actor}),this.particleTemplate={renderer:{character:"\u2726\ufe0f",color:Ke.black,background:Ke.sasuke_alt}}}perform(){let t=this.game.engine.addStatusEffect(this.effect);return kt(this.actor.pos.x,this.actor.pos.y,4).forEach((t=>{this.addParticle(3,{...t},{x:-1*Math.sign(t.x-this.actor.pos.x),y:-1*Math.sign(t.y-this.actor.pos.y)})})),{success:t,alternative:null}}}const jc=`${window.PUBLIC_URL}/hidden_leaf/sasuke.png`,Wc={name:"Sasuke",description:"The last of his clan.",renderer:{character:"S",color:Ke.sasuke_alt,background:Ke.sasuke,portrait:jc,basePortrait:jc,damageFlashPortrait:`${window.PUBLIC_URL}/hidden_leaf/white.png`},abilities:[{name:"Katon",description:"A technique where the user creates a ball of fire to attack their opponent."},{name:"Chidori",description:"A technique where the user creates a ball of lightning to attack their opponent."},{name:"Sharin-gan",description:"A technique where the user can see their opponents moves."}],speedRating:2,durabilityRating:2,chakraRating:2,speed:400,durability:5,charge:6,portrait:jc};function Bc(t){function e(t,e){ls(t,e),us(t,e)}let r=new zn({pos:{x:23,y:7},renderer:Wc.renderer,name:"Sasuke",faction:"SASUKE",enemyFactions:["OPPONENT"],faction:"PLAYER",traversableTiles:["WATER"],actions:[],speed:Wc.speed,durability:Wc.durability,charge:Wc.charge,game:t.game,presentingUI:!0,initializeKeymap:(t,r)=>({"w,ArrowUp":()=>{const a=Kt.N;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"s,ArrowDown":()=>{const a=Kt.S;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"a,ArrowLeft":()=>{const a=Kt.W;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},"d,ArrowRight":()=>{const a=Kt.E;let n=r.pos.x+a[0],o=r.pos.y+a[1];return new xr({hidden:!0,targetPos:{x:n,y:o},game:t.game,actor:r,energyCost:It,onAfter:()=>e(t,r)})},p:()=>new er({label:"Stay",message:"standing still...",game:t.game,actor:r,energyCost:It}),Escape:()=>new er({label:"Pass",message:"pass turn...",game:t.game,actor:r,energyCost:r.energy}),l:()=>new Ls({label:"Chidori",game:t.game,actor:r,passThroughEnergyCost:It*(Wc.speed/100),passThroughRequiredResources:[new Xi({getResourceCost:()=>1})],actionLabel:"Chidori",actionClass:Ds,positionsByDirection:(t,e)=>{const r=t.getPosition();return Array(10).fill("").map(((t,a)=>a>0?_t(r,e.map((t=>t*a))):null)).filter((t=>null!==t))},actionParams:{additionalDamage:5,range:5,onAfter:()=>{r.energy<=0&&Rn({game:t.game,fromPosition:r.getPosition(),radius:3,colorGradient:["#d3d3d3","#94e0ef"],backgroundColorGradient:["#d3d3d3","#94e0ef"]}).start(),br({game:t.game,fromPosition:r.getPosition(),spatterAmount:.1,spatterRadius:3,animationTimeStep:.6,transfersBackground:!1,spatterColors:["#94e0ef","#d3d3d3","#495877"]}).start()}}}),f:()=>new bi({label:"Katon",game:t.game,actor:r,equipmentSlotType:Xt.JUTSU,passThroughEnergyCost:It,passThroughRequiredResources:[new Xi({getResourceCost:()=>3})]}),i:()=>new wi({label:"Inventory",game:t.game,actor:r}),u:()=>new Ui({label:"Drop Items",game:t.game,actor:r}),g:()=>new Zi({label:"Pickup",game:t.game,actor:r}),h:()=>new Fc({label:"Sharingan",game:t.game,actor:r,energyCost:0,requiredResources:[]})})});const a=function(t,e){return new Vn({game:t.game,name:"Katon Jutsu",passable:!0,lightPassable:!0,attackRange:20,magazineSize:1/0,baseRangedAccuracy:1/0,baseRangedDamage:2,attackDamage:0,pos:e,shapePattern:Zt.square,equipmentType:Xt.JUTSU,renderer:{character:"\ue8bb",color:He.red,background:He.base02},rangedHitSounds:[ze.explosion_0],rangedMissSounds:[ze.explosion_0],afterFireSuccess:async function(e){let{fromPosition:r,targetPositions:a,hits:n,misses:o}=e;const i=hr({game:t.game,fromPosition:r,targetPositions:a,pathTailLength:3,backgroundColorGradient:[zt.SOLARIZED.red,zt.SOLARIZED.red],colorGradient:[zt.SOLARIZED.red,zt.SOLARIZED.violet],animationTimeStep:.01,easingFunction:Tt.easeOut});await i.start();const s=n.filter((()=>Math.random()<.5));0===s.length&&s.push(et(n)),s.forEach((async e=>{const r=[He.red,He.yellow],a=br({game:t.game,fromPosition:e,spatterRadius:5,spatterAmount:.3,spatterDirection:{x:0,y:0},spatterColors:r,animationTimeStep:.2,reverse:!1,transfersBackground:!1,transfersBackgroundOnDestroy:!1});await a.start()}))}})}(t,r.getPosition());return r.addEquipmentSlot({type:a.equipmentType}),r.equip(a.equipmentType,a),r}const zc=`${window.PUBLIC_URL}/hidden_leaf/tenten.png`;Ke.tenten_alt,Ke.tenten,window.PUBLIC_URL;const Hc=`${window.PUBLIC_URL}/hidden_leaf/temari.png`;Ke.temari_alt,Ke.temari,window.PUBLIC_URL;const Vc=`${window.PUBLIC_URL}/hidden_leaf/shino.png`;Ke.shino_alt,Ke.shino,window.PUBLIC_URL;const qc=`${window.PUBLIC_URL}/hidden_leaf/kiba.png`;Ke.kiba_alt,Ke.kiba,window.PUBLIC_URL;const Kc=`${window.PUBLIC_URL}/hidden_leaf/neji.png`;Ke.neji_alt,Ke.neji,window.PUBLIC_URL;const $c=`${window.PUBLIC_URL}/hidden_leaf/shikamaru.png`;Ke.shikamaru_alt,Ke.shikamaru,window.PUBLIC_URL;e.Component;e.Component;e.Component;const Xc=(()=>di({modes:{The_Chunin_Exams:Sa.Chunin},characters:{Rock_Lee:gs(),Sasuke:{basicInfo:Wc,initialize:Bc}},theme:Ke,screens:{[uc]:{component:oc},[pc]:{component:sc},[dc]:{component:lc},[hc]:{component:Ec},[fc]:{component:Lc},[gc]:{component:Pc}}}))();class Yc extends e.Component{constructor(){super();let t=Object.entries(Xc.characters).map((t=>{let[e,r]=t;return{initialize:(null===r||void 0===r?void 0:r.initialize)||r,basicInfo:(null===r||void 0===r?void 0:r.basicInfo)||null,selected:!1,name:e.split("_").join(" ")}})),e=Object.entries(Xc.modes).map((t=>{let[e,r]=t;return{class:r,selected:!1,name:e.split("_").join(" ")}}));this.state={activeScreen:Object.keys(Xc.screens)[0],characters:t,modes:e,selectedCharacter:null,selectedMode:1===e.length?e[0]:null,meta:null}}setActiveScreen(t){this.setState({activeScreen:t})}setSelectedCharacter(t){this.setState({selectedCharacter:{...t}})}setSelectedMode(t){this.setState({selectedMode:t})}getSetMeta(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t&&this.setMeta(t),this.getMeta()}setMeta(t){this.setState({meta:t})}getMeta(){return this.state.meta}getActiveScreen(){const t=Xc.screens[this.state.activeScreen].component;return(0,La.jsx)("div",{children:(0,La.jsx)(t,{setActiveScreen:this.setActiveScreen.bind(this),setSelectedCharacter:this.setSelectedCharacter.bind(this),setSelectedMode:this.setSelectedMode.bind(this),meta:this.getSetMeta.bind(this),selectedCharacter:this.state.selectedCharacter,selectedMode:this.state.selectedMode,characters:this.state.characters,modes:this.state.modes})},this.state.activeScreen)}render(){return(0,La.jsx)("div",{className:"Nystrum",children:(0,La.jsx)(o(),{transitionName:"fade",transitionAppear:!0,transitionEnter:!0,transitionLeave:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300,children:this.getActiveScreen()})})}}const Zc=Yc;function Qc(){const t={[!1]:"hidden",[!0]:"visible"};return(0,e.useEffect)((()=>{let e=!0;const r=r=>{"Backslash"===r.code&&(e=!e,document.documentElement.style.setProperty("--overflow",t[e]))};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}}),[]),(0,La.jsx)("span",{children:"toggle overflow: \\"})}function Jc(){const[t,r]=(0,e.useState)(!1),a=()=>{const e=!t;r(e),Be.Howler.mute(e)};return(0,e.useEffect)((()=>{const t=t=>{"BracketRight"===t.code&&a()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[t]),(0,La.jsxs)("span",{onClick:a,children:["toggle sound: ] ",t?"(off)":"(on)"]})}const tl=function(){return(0,La.jsxs)("div",{className:"App",children:[(0,La.jsx)(Zc,{}),(0,La.jsx)(Qc,{}),"\xa0\xa0\xa0",(0,La.jsx)(Jc,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.render((0,La.jsx)(tl,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((t=>{t.unregister()}))})()})();
//# sourceMappingURL=main.908e3581.js.map